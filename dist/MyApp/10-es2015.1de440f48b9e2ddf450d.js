(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"0l2l":function(e,t,s){"use strict";s.r(t),t.default='<div class="card new-card">\r\n    \x3c!-- <div class="col-md-12">\r\n       <h4 class="po-head-sm">\r\n             Communication - Text  \r\n             <a href="#" data-toggle="modal" data-target="#addNewText"\r\n             (click)="addText()" *ngIf="!isView">\r\n             <i class="fa fa-plus-circle fa-lg"></i> </a>\r\n        </h4>\r\n    </div> --\x3e\r\n    <div class="card-header header">\r\n        <div class="row">\r\n            <div class="col">\r\n                <h4 class="header-name"> Communication - Text </h4>\r\n            </div>\r\n            <div>\r\n                <button *ngIf="!isView" type="button"\r\n                    class="btn-sm header-button" \r\n                    data-toggle="modal" data-target="#addNewText" (click)="addText()">\r\n                    Create Text\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card-body header-body">\r\n        <p-table #dt class="rpo-table-cstm rro-table-cstm ptable-f10" [value]="data" [metaKeySelection]="true"\r\n            [first]="0" (onPage)="pageIndexChange($event)" [rows]="pageSize" [paginator]="true" [pageLinks]="3"\r\n            [rowsPerPageOptions]="[10, 20, 50, 100]" [columns]="selectedColumns" selectionMode="multiple"\r\n            [resizableColumns]="true" [reorderableColumns]="true" [totalRecords]="totalRecords" [scrollable]="true"\r\n            scrollHeight="450px">\r\n\r\n            <ng-template pTemplate="caption">\r\n\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <p-multiSelect [options]="headers" [(ngModel)]="selectedColumns"\r\n                            [ngModelOptions]="{ standalone: true }" optionLabel="header"\r\n                            selectedItemsLabel="{0} columns selected" [style]="{ minWidth: \'200px\' }"\r\n                            defaultLabel="Choose Columns" style="float:left"></p-multiSelect>\r\n\r\n\r\n\r\n                    </div>\r\n                    <div class="col" style="text-align: end;">\r\n                        <div class="inner-addon right-addon w200 inline-block g-filter-search-cstm"\r\n                            style="float: right;">\r\n                            <i class="fa fa-search"></i>\r\n                            <input type="text" pInputText size="50" class="form-control"\r\n                                (input)="dt.filterGlobal($event.target.value, \'contains\')" placeholder=" Filter"\r\n                                style="height: 28px !important;" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <button type="button" class="btn btn-primary new-table-button" matTooltip="Download Data"\r\n                            matTooltipPosition="above" pButton icon="fa-download" iconPos="left" label="Export Data"\r\n                            data-toggle="modal" (click)="selectedOnly = false; targetData = dt;"\r\n                            data-target="#textdownloadConfirmation" style="padding:5px 10px !important;"></button>\r\n                        <button type="button" class="btn btn-primary new-table-button"\r\n                            matTooltip="Download Selected Data" matTooltipPosition="above" pButton icon="fa-download"\r\n                            iconPos="left" label="Export Selected Data" (click)="dt.exportCSV({ selectionOnly: true })"\r\n                            style="padding:5px 10px !important;"></button>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="">\r\n                            <div class="col" style="width: 395px; float: right; padding-top: 3px;">\r\n                                <div class="form-group" style="float: right;">\r\n                                    <div class="checkbox-cstm pull-left" style="margin-left: 0;">\r\n                                        <label style="width: auto !important;margin-top: 3px;">\r\n                                            <input type="checkbox" [(ngModel)]="deletedStatusInfo" name="cparent55"\r\n                                                id="cparent55" (click)="getDeleteListByStatus($event.target.checked)" />\r\n                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>\r\n                                            Show Deleted List\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template pTemplate="colgroup" let-columns>\r\n                <colgroup>\r\n                    <ng-container *ngFor="let col of headers">\r\n                        <col *ngIf="col.field == \'mobile\' || col.field == \'contactBy\'" class="table-column-width">\r\n                        <col *ngIf="col.field != \'mobile\' && col.field != \'contactBy\'" class="table-column-width">\r\n                    </ng-container>\r\n                </colgroup>\r\n            </ng-template>\r\n            <ng-template pTemplate="header" let-columns>\r\n                <tr>\r\n\r\n                    <th class="table-column-width" *ngFor="let col of headers" pResizableColumn pReorderableColumn\r\n                        [pSortableColumn]="col.field">\r\n                        {{ col.header }}\r\n                        <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                    </th>\r\n                    <th class="table-actions-column">\r\n                        Actions\r\n                    </th>\r\n                </tr>\r\n                <tr>\r\n                    <th class="table-column-width" *ngFor="let col of headers" [ngSwitch]="col.field">\r\n                        <input pInputText type="text" class="incorn_border table-header-input-width" (input)="\r\n                            dt.filter($event.target.value, col.field, \'contains\')\r\n                        " />\r\n                    </th>\r\n                    <th class="table-actions-column"></th>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">\r\n                <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData">\r\n                    \x3c!-- <ng-container *ngFor="let col of headers">\r\n                            <td style="width:50px"\r\n                            *ngIf="col.field == \'contactBy\'"\r\n                            class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            {{rowData[col.field]}}\r\n                            </td>\r\n                            <td style="width:50px"\r\n                            *ngIf="col.field == \'mobile\'"\r\n                            class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            <p class="m-0 p-0 text-right">{{rowData[col.field]}}</p>\r\n                            </td>\r\n                            <td style="width:50px"\r\n                                *ngIf="col.field == \'notes\'"\r\n                                class="ui-resizable-column"\r\n                                pReorderableRowHandle>\r\n                                <p class="m-0 p-0 p_textEditor" [innerHTML]=rowData[col.field]></p>\r\n                            </td>\r\n                        </ng-container> --\x3e\r\n                    <ng-container *ngFor="let col of columns">\r\n                        <td class="table-column-width" *ngIf="col.field == \'notes\'" class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            <p class="p_textEditor" [innerHTML]=rowData[col.field]></p>\r\n                        </td>\r\n                        <td class="table-column-width" *ngIf=" col.field!=\'notes\'">\r\n                            {{\r\n                                    col.field == \'createdDate\'\r\n                                      ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                      : rowData[col.field] && col.field == \'updatedDate\'\r\n                                      ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                      : rowData[col.field] \r\n                                  }}\r\n                        </td>\r\n                    </ng-container>\r\n                    <td class="action-icons-cstm table-column-width">\r\n                        <span data-toggle="modal" data-target="#viewText"><a class="btn nobg btn-view-cstm"\r\n                                (click)="getViewData(rowData)" matTooltip="View" matTooltipPosition="above"><i\r\n                                    class="fa fa-eye"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==false  && !isView" data-target="#addNewText"\r\n                            data-toggle="modal"><a class="btn nobg btn-edit-cstm" (click)="edit(rowData, rowIndex)"\r\n                                matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==false  && !isView" data-toggle="modal"\r\n                            data-target="#deleteRowConfirmation"><a class="btn nobg btn-delete-cstm"\r\n                                (click)="deletingRecord = rowData;" matTooltip="Delete" matTooltipPosition="above"><i\r\n                                    class="fa fa-trash"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==true && !isView"><a class="btn nobg"\r\n                                (click)="restore(restoreId,rowData);" matTooltip="Restore Record"\r\n                                matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>\r\n                        <span data-target="#contentHistDocs" data-toggle="modal"><a class="btn nobg"\r\n                                (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above">\r\n                                <i class="fa fa-history"></i></a></span>\r\n                        \x3c!-- <button class="btn-edit ptable-wo-btns" mat-icon-button data-target="#addNewText" data-toggle="modal"\r\n                            (click)="edit(rowData, i)" matTooltip="Edit">\r\n                                <mat-icon>edit</mat-icon>\r\n                            </button>\r\n                            <button class="btn btn-danger nobg" (click)="deleteText(rowData);">\r\n                                <i class="fa fa-trash"></i>\r\n                            </button> --\x3e\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="emptymessage" let-columns *ngIf="data.length == 0">\r\n                <tr>\r\n                    <td colspan="8" class="no-records-cstm no-records-msg">\r\n                        No records found\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer">Total:</label>\r\n                <input class="footer-input-width" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer">Pages Count:</label>\r\n                <input class="footer-input-width" [ngModel]="getPageCount(dt._totalRecords, pageSize)" [disabled]="true"\r\n                    pInputText type="text" />\r\n            </ng-template>\r\n        </p-table>\r\n        <ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">\r\n\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Restore?</h4>\r\n\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="dismissModel()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                <strong>\r\n                    Mobile:\r\n                    <span class="new-label">{{restorerecord.mobile}}</span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" (click)="restoreRecord()">Yes</button>\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="dismissModel()">No</button>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal fade" id="textdownloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" (click)="closeDeleteModal()">&times;</button>\r\n                <h4 class="modal-title">Are You Sure Want to Download?</h4>\r\n            </div>\r\n            <div class="modal-body" *ngIf="targetData">\r\n                <strong>\r\n                    <span>\r\n                        You are attempting to export {{targetData.totalRecords}} of records.\r\n                    </span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary"\r\n                    (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeDeleteModal();">Confirm</button>\r\n                <button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="addNewText" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-sm" style="top: 0;">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title">{{ isEdit ? \'Edit\' : \'Add\'  }} Text </h4>\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                  </div> --\x3e\r\n\r\n\r\n\r\n            </div>\r\n            <form #textForm="ngForm" class="form-horizontal" ngNativeValidate>\r\n                <div class="modal-body" *ngIf="addList.length > 0">\r\n                    <div class="form-row">\r\n                        <div class="col-md-6">\r\n                            <div class="form-group">\r\n                                <label>Phone <span class="clr-red">*</span></label>\r\n                                \x3c!-- <input class="form-control" type="number" [(ngModel)] = "addList[0].mobile" maxlength="20" name="phoneNo" required/> --\x3e\r\n\r\n                                <input type="text" id="phone" name="phoneNo" [pattern]="phonePattern"\r\n                                    (ngModelChange)="setvaliDate()" #phoneNumberNg="ngModel" class="form-control"\r\n                                    minlength="6" style="text-align: end;" maxlength="10"\r\n                                    (keypress)="patternMobilevalidationWithSpl($event)" [(ngModel)]="addList[0].mobile"\r\n                                    required />\r\n\r\n                            </div>\r\n                            <div class="form-group">\r\n                                <label class="col-md-12">Contacted By <span class="clr-red">*</span></label>\r\n                                \x3c!-- <select [(ngModel)]="addList[0].contactId" class="form-control" name="contactedBy" required>\r\n                                <option value="">Select</option>\r\n                                <option *ngFor="let employee of employees" [value]="employee.value">{{employee.label}}</option>\r\n                            </select> --\x3e\r\n                                <p-autoComplete field="name" [(ngModel)]="addList[0].contactId" name="employees"\r\n                                    errorMessage="Records not found" [forceSelection]="true" [dropdown]="true"\r\n                                    [suggestions]="employees" (ngModelChange)="setvaliDate()"\r\n                                    (completeMethod)="filterEmployee($event)" [size]="30" [minLength]="1"\r\n                                    [dropdown]="true" class="p-autoComplete-ctsm" required>\r\n                                </p-autoComplete>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-sm-12">\r\n                            <div class="form-group">\r\n\r\n                                <label class="col-sm-12">Notes </label>\r\n                                \x3c!-- <p-editor [(ngModel)]="addList[0].notes" \r\n                            (ngModelChange)="setvaliDate()"\r\n                             [style]="{\'height\':\'320px\'}" name="notes" \r\n                             required></p-editor> --\x3e\r\n\r\n                                <div class="col-sm-6">\r\n                                    <span>\r\n                                        <div class="form-group memo-popup-cstm mat_emo">\r\n                                            <div (ngModelChange)="enableSave()" [innerHTML]=" addList[0].notes"\r\n                                                [matTooltip]="parsedText(addList[0].notes)" matTooltipPosition="above"\r\n                                                class="form-control" style="width: 99%;" class="text_editor_box"></div>\r\n                                        </div>\r\n                                    </span>\r\n                                </div>\r\n                                <div class="col-sm-1">\r\n                                    <span>\r\n                                        <a class="btn nobg" data-toggle="modal" (ngModelChange)="enableSave()"\r\n                                            data-target="#text-memo-popup" (click)="onClickMemo()"\r\n                                            matTooltip="Add Notes" matTooltipPosition="above">\r\n                                            <i style="color: #337ab7" class="fa fa-pencil"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button class="btn btn-primary btn-primary" data-dismiss="modal" (click)="savePhone()"\r\n                        style="padding: 6px 12px !important;margin-top: 10px;"\r\n                        [disabled]="!textForm.valid || updateDisabledText">\r\n                        {{(isEdit)?\'Update\':\'Save\'}}\r\n                    </button>\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal"\r\n                        style="padding: 6px 12px !important;margin-top: 10px;">Close</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<div class="modal fade" id="text-memo-popup" style="z-index: 1052 !important;" role="dialog" data-backdrop="static"\r\n    data-keyboard="false">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" (click)="onClickPopupSave()">\r\n                    &times;\r\n                </button>\r\n                <h4 class="modal-title">Edit Notes</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <table class="table table-bordered table-fixed workflow-table-material">\r\n                    <thead>\r\n                        <th style="color: #fff;">Notes</th>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td style="white-space: inherit">\r\n                                <p-editor spellcheck="true" (ngModelChange)="enableSaveMemo()"\r\n                                    [(ngModel)]="memoPopupContent" [style]="{ height: \'320px\' }"\r\n                                    name="memoPopupContent"></p-editor>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table> --\x3e\r\n                <p-editor spellcheck="true" (ngModelChange)="enableSaveMemo()"\r\n                [(ngModel)]="memoPopupContent" [style]="{ height: \'320px\' }"\r\n                name="memoPopupContent"></p-editor>\r\n                <div class="editor-buttons">\r\n                    <button type="button" class="btn btn-primary editor-buttons-margin" (click)="onClickPopupSave()"\r\n                        [disabled]="disableSaveMemo">\r\n                        Save\r\n                    </button>\r\n                    <button type="button" class="btn btn-danger editor-buttons-margin"\r\n                        (click)="closeMemoModel()">\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div id="viewText" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-md">\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" style="font-size:24px;" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title"> Text Details</h4>\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                  </div> --\x3e\r\n            </div>\r\n            <div class="modal-body">\r\n\r\n\r\n                <div class="col-sm-12">\r\n\r\n\r\n                    <p><span class="label"><b>Mobile<span class="clr-red">*</span> : </b></span><span\r\n                            class="value">{{viewdata.mobile}}</span></p>\r\n                    <p><span class="label"><b>Contacted by<span class="clr-red">*</span> : </b></span><span\r\n                            class="value">{{viewdata.contactBy}}</span></p>\r\n                    <p>\r\n                        <span class="label"><strong> Notes: </strong></span><span class="value">\r\n                            <p class="m-0 p-0 p_textEditor" [innerHTML]=viewdata.notes></p>\r\n                        </span>\r\n                    </p>\r\n                    <p><span class="label"><b>Created Date: </b></span><span\r\n                            class="value">{{viewdata.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                    <p><span class="label"><b>Created By: </b></span><span class="value">{{viewdata.createdBy}}</span>\r\n                    </p>\r\n                    <p><span class="label"><b>Updated Date: </b></span><span\r\n                            class="value">{{viewdata.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                    <p><span class="label"><b>Updated By: </b></span><span class="value">{{viewdata.updatedBy}}</span>\r\n                    </p>\r\n\r\n                    <div class="clear"></div>\r\n                </div>\r\n            </div>\r\n            <div class="editor-buttons">\r\n                <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="preloader" *ngIf="isSpinnerVisible">\r\n    <div class="loading">\r\n        <div class="lds-roller">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="deleteRowConfirmation" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-sm">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Delete ?</h4>\r\n                <button type="button" class="close" aria-label="Close" data-dismiss="modal">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <strong style="    display: inline-flex;" *ngIf="deletingRecord">\r\n                   Mobile:\r\n                    <span class="value textareaMemos new-label" style="margin-left: 6px;" [innerHTML]="deletingRow.mobile"  ></span>\r\n                </strong> --\x3e\r\n                <strong *ngIf="deletingRecord">\r\n                    Mobile:\r\n                    <span class="new-label">{{deletingRecord.mobile}}</span>\r\n                </strong>\r\n            </div>\r\n            <div class="editor-buttons">\r\n                <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"\r\n                    (click)="deleteText(deletingRecord)">Yes</button>\r\n                <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">No</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<div id="contentHistDocs" #contentHistDocs class="modal fade" role="dialog" data-backdrop="static"\r\n    data-keyboard="false">\r\n    <div class="modal-dialog modal-xlg">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n\r\n                <h4 class="modal-title">History of Text</h4>\r\n                <button type="button" class="close" aria-label="Close" (click)="dismissModelHistory()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n\r\n\r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Legal Entity Name: </label>\r\n                            <span class="span-header-red"\r\n                             style="text-transform: capitalize"> {{legalEntityName }}\r\n                             </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Company Code: </label>\r\n                            <span class="span-header-red" \r\n                            style="text-transform: capitalize"> {{legalEntityCode }} \r\n                        </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n                <div class="table-responsive history_hg">\r\n                    <table class="table table-bordered">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Mobile</th>\r\n                                <th>Contacted By</th>\r\n                                <th>Notes</th>\r\n                                <th>Created Date</th>\r\n                                <th>Created By</th>\r\n                                <th>Updated Date</th>\r\n                                <th>Updated By</th>\r\n                                <th>Is Deleted</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor="let audit of documentauditHisory; let i = index;">\r\n                                <td\r\n                                    [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'mobile\', audit.mobile)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.mobile}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'contactBy\', audit.contactBy)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.contactBy}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'notes\', audit.notes)  ? \'black\' : \'red\'  }">\r\n                                    <p [innerHTML]="audit.notes"></p>\r\n                                </td>\r\n                                <td>{{audit.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td>{{audit.createdBy}}</td>\r\n                                <td>{{audit.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td>{{audit.updatedBy}}</td>\r\n                                <td style="text-align: center;">\r\n                                    <span class="value">\r\n                                        <label class="wauto">\r\n                                            <input type="checkbox" name="isDeleted" [checked]="audit.isDeleted == true"\r\n                                                disabled>\r\n                                        </label>\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class="editor-buttons">\r\n                <button type="button" class="btn btn-danger editor-buttons-margin" (click)="dismissModelHistory()">Close</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'},"5Eom":function(e,t,s){"use strict";s.r(t),t.default=".coustomTable tr th {\n  font-weight: 600 !important;\n  font-size: 10.5px !important;\n  color: #fff !important;\n  background-color: #4298ff;\n  border: 1px solid #3a7fd2;\n  letter-spacing: 0.3px;\n  line-height: 25px;\n  text-align: center;\n}\n\n.grayCls {\n  background: #f4f4f4;\n  border-radius: 4px;\n}\n\n.coustomTable tr td {\n  padding: 5px 2px !important;\n  white-space: nowrap;\n  color: #222;\n  background: inherit;\n  border: 1px solid #c8c8c8;\n  font-size: 11px !important;\n}\n\n.workflow-table-material {\n  padding-bottom: 50%;\n}\n\n.fileupload {\n  overflow: scroll;\n}\n\ninput[type=number], input[type=text], input[type=email], select {\n  height: 24px !important;\n  border-radius: 5px !important;\n}\n\n.modal-body p {\n  overflow: auto !important;\n}\n\n.form-horizontal b {\n  top: auto !important;\n}\n\n.email-content {\n  max-height: 300px;\n  overflow: scroll;\n}\n\n.email-content span p {\n  overflow: scroll;\n}"},"6fG1":function(e,t,s){"use strict";s.r(t),t.default='<div class="card new-card">\r\n    \x3c!-- <div class="col-md-12">\r\n           <h4 class="po-head-sm"> \r\n              Communication - Memo \r\n              <span *ngIf="!isView">\r\n              <a href="#" data-toggle="modal" data-target="#addNewMemo" (click)="addMemo()"\r\n               >\r\n                <i class="fa fa-plus-circle fa-lg"></i> </a>\r\n            </span>\r\n            </h4>\r\n        </div> --\x3e\r\n    <div class="card-header header">\r\n        <div class="row">\r\n            <div class="col">\r\n                <h4 class="header-name"> Communication - Memo </h4>\r\n            </div>\r\n            <div>\r\n                <button *ngIf="!isView" type="button"\r\n                 class="btn-sm header-button"\r\n                     data-toggle="modal" data-target="#addNewMemo"\r\n                    (click)="addMemo()">\r\n                    Create Memo\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="card-body header-body">\r\n        <p-table #dt class="rpo-table-cstm rro-table-cstm ptable-f10" [value]="data" [metaKeySelection]="true"\r\n            [first]="0" (onPage)="pageIndexChange($event)" [rows]="pageSize" [paginator]="true" [pageLinks]="3"\r\n            [rowsPerPageOptions]="[10, 20, 50, 100]" [columns]="selectedColumns" selectionMode="multiple"\r\n            [resizableColumns]="true" [reorderableColumns]="true" [totalRecords]="totalRecords" [scrollable]="true"\r\n            scrollHeight="450px">\r\n\r\n            <ng-template pTemplate="caption">\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <p-multiSelect [options]="headers" [(ngModel)]="selectedColumns"\r\n                            [ngModelOptions]="{ standalone: true }" optionLabel="header"\r\n                            selectedItemsLabel="{0} columns selected" [style]="{ minWidth: \'200px\' }"\r\n                            defaultLabel="Choose Columns" style="float:left"></p-multiSelect>\r\n\r\n\r\n                        \x3c!-- <div class="excel-upload excel-upload-cstm">\r\n                    <button type="button" class="btn btn-primary" matTooltip="Download Sample File"\r\n                        matTooltipPosition="above" (click)="sampleExcelDownload()" style="padding: 5px 10px !important;">\r\n                        Sample File Download\r\n                    </button>\r\n\r\n                    <input type="file" name="upload[]" id="upload" (change)="customExcelUpload($event)"\r\n                        class="uploaddoc upload-file" accept=".xlsx, .xls, .csv" />\r\n                    <label for="upload">\r\n                        <span matTooltip="Upload Data (Excel)" matTooltipPosition="above">\r\n                        <i class="fa fa-upload"></i>\r\n                        </span>\r\n                    </label>\r\n                    </div> --\x3e\r\n\r\n                    </div>\r\n                    <div class="col" style="text-align: end;">\r\n                        <div class="inner-addon right-addon w200 inline-block g-filter-search-cstm"\r\n                            style="float: right;">\r\n                            <i class="fa fa-search"></i>\r\n                            <input type="text" pInputText size="50" class="form-control"\r\n                                (input)="dt.filterGlobal($event.target.value, \'contains\')" placeholder=" Filter"\r\n                                style="height: 28px !important;" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <button type="button" class="btn btn-primary new-table-button" matTooltip="Download Data"\r\n                            matTooltipPosition="above" pButton icon="fa-download" iconPos="left" label="Export Data"\r\n                            data-toggle="modal" (click)="selectedOnly = false; targetData = dt;"\r\n                            data-target="#memodownloadConfirmation" style="padding:5px 10px !important;"></button>\r\n                        <button type="button" class="btn btn-primary new-table-button"\r\n                            matTooltip="Download Selected Data" matTooltipPosition="above" pButton icon="fa-download"\r\n                            iconPos="left" label="Export Selected Data" (click)="dt.exportCSV({ selectionOnly: true })"\r\n                            style="padding:5px 10px !important;"></button>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="">\r\n                            <div class="col" style="width: 395px; float: right; padding-top: 3px;">\r\n                                \x3c!-- <div \r\n                      style="text-align: end;padding-right: 2%;"\r\n                    > --\x3e\r\n                                <div class="form-group" style="float: right;">\r\n                                    <div class="checkbox-cstm pull-left" style="margin-left: 0;">\r\n                                        <label style="width: auto !important;margin-top: 3px;">\r\n                                            <input type="checkbox" [(ngModel)]="deletedStatusInfo" name="cparent55"\r\n                                                id="cparent55" (click)="getDeleteListByStatus($event.target.checked)" />\r\n                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>\r\n                                            Show Deleted List\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template pTemplate="colgroup" let-columns>\r\n                <colgroup>\r\n                    <col *ngFor="let col of columns" class="table-column-width">\r\n                </colgroup>\r\n            </ng-template>\r\n            <ng-template pTemplate="header" let-columns>\r\n                <tr>\r\n\r\n                    <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn\r\n                        [pSortableColumn]="col.field">\r\n                        {{ col.header }}\r\n                        <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                    </th>\r\n                    <th class="table-actions-column">\r\n                        Actions\r\n                    </th>\r\n                </tr>\r\n                <tr>\r\n                    \x3c!-- <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">\r\n                        <input style="width:100%;" pInputText type="text" class="incorn_border" (input)="\r\n                            dt.filter($event.target.value, col.field, \'contains\')\r\n                        " />  \r\n                    </th> --\x3e\r\n                    <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">\r\n                        <input class="incorn_border table-header-input-width"\r\n                            *ngIf="col.field != \'createdDate\' && col.field != \'updatedDate\'" pInputText type="text"\r\n                            (input)="dt.filter($event.target.value, col.field, \'contains\')">\r\n\r\n                        <input type="date" class="hidePlaceHolder table-header-input-width" *ngIf="col.field == \'createdDate\'"\r\n                            name="createdDate" (change)="dateFilterForTable($event.target.value, col.field)" />\r\n                        <input type="date" class="hidePlaceHolder table-header-input-width" *ngIf="col.field == \'updatedDate\'"\r\n                            name="updatedDate" (change)="dateFilterForTable($event.target.value,col.field)" />\r\n                    </th>\r\n\r\n\r\n\r\n                    <th class="table-actions-column"></th>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">\r\n                <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData">\r\n                    <ng-container *ngFor="let col of columns">\r\n                        <td class="table-column-width" *ngIf="col.field == \'SERIAL_NO\'" class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            <p class="m-0 p-0 text-right">{{rowData[col.field]}}</p>\r\n                            <span> </span>\r\n                        </td>\r\n                        <td class="table-column-width" *ngIf="col.field == \'description\'" class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            <p class="p_textEditor" [innerHTML]=rowData[col.field]></p>\r\n                        </td>\r\n                        <td class="table-column-width" *ngIf="col.field !=\'SERIAL_NO\' && col.field!=\'description\'">\r\n                            {{\r\n                                        col.field == \'createdDate\'\r\n                                          ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                          : rowData[col.field] && col.field == \'updatedDate\'\r\n                                          ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                          : rowData[col.field] \r\n                                      }}\r\n                        </td>\r\n                    </ng-container>\r\n                    <td class="action-icons-cstm table-column-width">\r\n                        \x3c!-- <button class="btn-edit ptable-wo-btns buton_back_bordernon" mat-icon-button data-target="#addNewMemo" data-toggle="modal"\r\n                            (click)="edit(rowData, i)" matTooltip="Edit">\r\n                                <mat-icon>edit</mat-icon>\r\n                            </button> --\x3e\r\n                        \x3c!-- <button class="btn btn-danger nobg" (click)="deleteMemo(rowData)">\r\n                                <i class="fa fa-trash" style="font-size: 14px;"></i>\r\n                            </button> --\x3e\r\n                        <span data-toggle="modal" data-target="#viewText"><a class="btn nobg btn-view-cstm"\r\n                                (click)="getViewData(rowData)" matTooltip="View" matTooltipPosition="above"><i\r\n                                    class="fa fa-eye"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==false && !isView" data-toggle="modal"\r\n                            data-target="#addNewMemo"><a class="btn nobg btn-edit-cstm" (click)="edit(rowData, rowIndex)"\r\n                                matTooltip="Edit" matTooltipPosition="above" data-dismiss="modal"><i\r\n                                    class="fa fa-pencil"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==false  && !isView"><a class="btn nobg btn-delete-cstm"\r\n                                (click)="deleteMemoConfirmation(rowData)" matTooltip="Delete"\r\n                                matTooltipPosition="above"><i class="fa fa-trash"></i></a> </span>\r\n                        <span *ngIf="deletedStatusInfo==true && !isView"><a class="btn nobg"\r\n                                (click)="restore(restoreId,rowData);" matTooltip="Restore Record"\r\n                                matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>\r\n                        <span data-target="#contentHistDocs" data-toggle="modal"><a class="btn nobg"\r\n                                (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above">\r\n                                <i class="fa fa-history"></i></a></span>\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="emptymessage" let-columns *ngIf="data.length == 0">\r\n                <tr>\r\n                    <td colspan="7" class="no-records-cstm no-records-msg">\r\n                        No records found\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer">Total:</label>\r\n                <input class="footer-input-width" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer">Pages Count:</label>\r\n                <input class="footer-input-width" [ngModel]="getPageCount(dt._totalRecords, pageSize)" [disabled]="true"\r\n                    pInputText type="text" />\r\n            </ng-template>\r\n        </p-table>\r\n        <div id="viewText" class="modal fade" role="dialog" data-backdrop="static">\r\n            <div class="modal-dialog modal-md">\r\n                \x3c!-- Modal content--\x3e\r\n                <div class="modal-content">\r\n                    <div class="modal-header">\r\n                        <button type="button" class="close" style="font-size:24px;"\r\n                            data-dismiss="modal">&times;</button>\r\n                        <h4 class="modal-title"> Memo Details</h4>\r\n                        \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                  </div> --\x3e\r\n                    </div>\r\n                    <div class="modal-body">\r\n\r\n\r\n                        <div class="col-sm-12">\r\n\r\n\r\n                            \x3c!-- <p><span class="label"><b>Mobile<span class="clr-red">*</span> : </b></span><span class="value">{{viewdata.mobile}}</span></p> --\x3e\r\n                            \x3c!-- <p><span class="label"><b>Contacted by<span class="clr-red">*</span> :   </b></span><span class="value">{{viewdata.contactBy}}</span></p> --\x3e\r\n                            <p>\r\n                                <span class="label"><strong> Memo: </strong></span><span class="value">\r\n                                    <p class="m-0 p-0 p_textEditor" [innerHTML]=viewdata.description></p>\r\n                                </span>\r\n                            </p>\r\n                            <p><span class="label"><b>Created Date: </b></span><span\r\n                                    class="value">{{viewdata.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                            <p><span class="label"><b>Created By: </b></span><span\r\n                                    class="value">{{viewdata.createdBy}}</span></p>\r\n                            <p><span class="label"><b>Updated Date: </b></span><span\r\n                                    class="value">{{viewdata.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                            <p><span class="label"><b>Updated By: </b></span><span\r\n                                    class="value">{{viewdata.updatedBy}}</span></p>\r\n\r\n                            <div class="clear"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="modal-footer">\r\n                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">\r\n\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Restore?</h4>\r\n\r\n                <button type="button" class="close" aria-label="Close" (click)="dismissModel()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                <strong style="    display: inline-flex;">\r\n                    Memo:\r\n                    \x3c!-- <span class="new-label">{{restorerecord.name}}</span> --\x3e\r\n                    <span class="value textareaMemos new-label" style="margin-left: 6px;"\r\n                        [innerHTML]="restorerecord.description"></span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" (click)="restoreRecord()">Yes</button>\r\n                <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n\r\n    <div class="modal fade" id="memodownloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">\r\n        <div class="modal-dialog modal-sm">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" (click)="closeDeleteModal()">&times;</button>\r\n                    <h4 class="modal-title">Are You Sure Want to Download?</h4>\r\n                </div>\r\n                <div class="modal-body" *ngIf="targetData">\r\n                    <strong>\r\n                        <span>\r\n                            You are attempting to export {{targetData.totalRecords}} of records.\r\n                        </span>\r\n                    </strong>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-primary"\r\n                        (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeDeleteModal();">Confirm</button>\r\n                    <button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="addNewMemo" class="modal fade" role="dialog" data-backdrop="static">\r\n        <div class="modal-dialog">\r\n            \x3c!-- Modal content--\x3e\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                    <h4 class="modal-title">{{ isEdit ? \'Edit\' : \'Add\'  }} Memo </h4>\r\n\r\n                    \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                  </div> --\x3e\r\n\r\n                </div>\r\n                <div class="modal-body">\r\n                    \x3c!-- <table class="table table-bordered table-fixed workflow-table-material">\r\n                        <thead>\r\n                            <th style="color: #fff;">Memo</th>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr class="material-tr" *ngFor="let material of addList; let i = index" id="row_{{i}}">\r\n                                <td>\r\n                                    <p-editor [(ngModel)]="material.description" [style]="{\'height\':\'320px\'}"\r\n                                        name="description" required></p-editor>\r\n                                  \r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table> --\x3e\r\n                    <div  class="material-tr" *ngFor="let material of addList; let i = index" id="row_{{i}}">\r\n                    <p-editor [(ngModel)]="material.description" [style]="{\'height\':\'320px\'}"\r\n                    name="description" required></p-editor>\r\n                    </div>\r\n                    <div class="editor-buttons">\r\n                        <button class="btn btn-primary editor-buttons-margin" (click)="saveMemo()">\r\n                            Save\r\n                        </button>\r\n                        <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div id="deleteRowConfirmation" class="modal fade" role="dialog" data-backdrop="static">\r\n        <div class="modal-dialog modal-sm">\r\n\r\n            \x3c!-- Modal content--\x3e\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <h4 class="modal-title">Are You Sure Want to Delete ?</h4>\r\n                    <button type="button" class="close" aria-label="Close" data-dismiss="modal">\r\n                        <span aria-hidden="true">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <strong style="    display: inline-flex;" *ngIf="deletingRow">\r\n                        Memo:\r\n                        \x3c!-- <span class="new-label">{{restorerecord.name}}</span> --\x3e\r\n                        <span class="value textareaMemos new-label" style="margin-left: 6px;"\r\n                            [innerHTML]="deletingRow.description"></span>\r\n                    </strong>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                        (click)="deleteMemo(deletingRow)">Yes</button>\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div id="contentHistDocs" #contentHistDocs class="modal fade" role="dialog" data-backdrop="static"\r\n        data-keyboard="false">\r\n        <div class="modal-dialog modal-xlg">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n\r\n                    <h4 class="modal-title">History of Memo</h4>\r\n                    <button type="button" class="close" aria-label="Close" (click)="dismissModelHistory()">\r\n                        <span aria-hidden="true">&times;</span>\r\n                    </button>\r\n\r\n\r\n                </div>\r\n                <div class="modal-body">\r\n                    \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Legal Entity Name: </label>\r\n                            <span class="span-header-red"\r\n                             style="text-transform: capitalize"> {{legalEntityName }}\r\n                             </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Company Code: </label>\r\n                            <span class="span-header-red" \r\n                            style="text-transform: capitalize"> {{legalEntityCode }} \r\n                        </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n                    <div class="table-responsive history_hg">\r\n                        <table class="table table-bordered">\r\n                            <thead>\r\n                                <tr>\r\n                                    \x3c!-- <th>Memo Id </th> --\x3e\r\n                                    <th>Memo</th>\r\n                                    <th>Created Date</th>\r\n                                    <th>Created By</th>\r\n                                    <th> Updated Date</th>\r\n                                    <th>Updated By</th>\r\n                                    <th>Is Deleted</th>\r\n\r\n\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor="let audit of documentauditHisory; let i = index;">\r\n                                    \x3c!-- <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'memoId\', audit.memoId)  ? \'black\' : \'red\'  }">{{audit.memoId}}</td> --\x3e\r\n                                    <td\r\n                                        [ngStyle]="{\'color\': getColorCodeForHistory(i, \'description\', audit.description)  ? \'black\' : \'red\'  }">\r\n                                        <p [innerHTML]="audit.description"></p>\r\n                                    </td>\r\n                                    <td>{{audit.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                    <td>{{audit.createdBy}}</td>\r\n                                    <td>{{audit.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                    <td>{{audit.updatedBy}}</td>\r\n                                    <td style="text-align: center;">\r\n                                        <span class="value">\r\n                                            <label class="wauto">\r\n                                                <input type="checkbox" name="isDeleted"\r\n                                                    [checked]="audit.isDeleted == true" disabled>\r\n                                            </label>\r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-danger" (click)="dismissModelHistory()">Close</button>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="preloader" *ngIf="isSpinnerVisible">\r\n    <div class="loading">\r\n        <div class="lds-roller">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</div>'},Aa4m:function(e,t,s){"use strict";s.r(t),t.default='<div class="tableFixHead">\r\n<table class="table table-bordered" *ngIf="auditHistory.length> 0 else noDatavailable">\r\n    <thead>\r\n        <tr>\r\n            <ng-container *ngFor="let headername of auditHistoryHeader; let z = index;">\r\n                <th *ngIf="headername.isRequired == true">{{headername.header}}<span style="color: #ff0000;">*</span></th>\r\n                <th *ngIf="headername.isRequired == false">{{headername.header}}</th>\r\n            </ng-container>\r\n        </tr>\r\n    </thead>\r\n    <tbody class="audithistory-cstm">\r\n        <tr *ngFor="let audit of auditHistory; let i = index;">\r\n            <ng-container *ngFor="let headername of auditHistoryHeader; let j = index;">\r\n            <td *ngIf="headername.field != \'isDeleted\'"\r\n                [ngStyle]="{\'color\':  getColorCodeForHistory(i, headername.field, audit[headername.field])  ? \'black\' : \'red\'  }">\r\n                {{audit[headername.field]}}</td>\r\n\r\n                <td *ngIf="headername.field == \'isDeleted\'">\r\n                    <p style="background-color: #fff !important;"> <input type="checkbox"\r\n                                            name="isDeleted" [(ngModel)]="audit[headername.field]" disabled></p>\r\n                </td>\r\n            </ng-container>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n<ng-template #noDatavailable>\r\n    <div class="text-center">\r\n        <img src="../../../assets/images/binoculars.png" style="height: 100px; width: 100px;">\r\n        <h4 style="color: #ff5663;">No History Found </h4>\r\n    </div>\r\n</ng-template>\r\n</div>'},FPgC:function(e,t,s){"use strict";s.r(t),t.default='<ng-container>\r\n    <form #createPOAddressForm="ngForm">\r\n      <div class="form-row ro-view-address">\r\n          <div class="col-md-3">\r\n              <h5 class="po-head">Ship To</h5>\r\n              <div class="form-group">\r\n                  <label>User Type <span class="clr-red">*</span></label>\r\n                  <select [ngClass]="shipToUserTypeValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" name="shipToUserTypeId" [(ngModel)]="sourcePoApproval.shipToUserTypeId" (change)="clearInputShipTo(); onModuleTypeChange(); checkValidOnChange(sourcePoApproval.shipToUserTypeId, \'shipToUserTypeId\');" #shipUserType="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                      <option value="0">-- Select --</option>\r\n                      <ng-container *ngFor="let item of userTypes">\r\n                          <option [value]="item.moduleId" *ngIf="item.moduleName != \'Others\'">{{item.moduleName}}</option>\r\n                      </ng-container>\r\n                  </select>\r\n                  \x3c!-- <div *ngIf="sourcePoApproval.shipToUserTypeId.invalid && (sourcePoApproval.shipToUserTypeId.dirty || sourcePoApproval.shipToUserTypeId.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="sourcePoApproval.shipToUserTypeId.errors.required">\r\n                          <small> User Type is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>\r\n              <div class="form-group">\r\n                  <div class="form-row" >\r\n                      <div class="col-sm-12">\r\n                        <label> {{shippingModuleName}} Name <span class="clr-red">*</span></label>\r\n                         <p-autoComplete field="userName" [ngClass]="inputValidCheckAdd ? \'p-acomp-validate\' : \'\'" class="pautocomp-cstm"\r\n                                          (onClear)="clearInputShipTo()"\r\n                                          (onSelect)="onShipToSelected($event)"\r\n                                          [(ngModel)]="sourcePoApproval.shipToUserId" \r\n                                          name="shipCompanyName"\r\n                                          [suggestions]="userShipingList"\r\n                                          (completeMethod)="filterUsersForShiping($event, sourcePoApproval.shipToUserTypeId)"\r\n                                          [size]="30"\r\n                                          title="Ship to Name"\r\n                                          [minLength]="1"\r\n                                          [dropdown]="true"\r\n                                          errorMessage="Records not found"\r\n                                          [forceSelection]="true"\r\n                                          #shipCompanyName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                          </p-autoComplete>\r\n                          \r\n                          \x3c!-- <div *ngIf="shipCompanyName.invalid && (shipCompanyName.dirty || shipCompanyName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                              <div *ngIf="shipCompanyName.errors.required">\r\n                                  <small> Company Name is required </small>\r\n                              </div>\r\n                          </div> --\x3e\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>\r\n                      Site Name <span class="clr-red">*</span>                              \r\n                      <span style="margin-left:3px;cursor:pointer;"><a *ngIf="sourcePoApproval.shipToUserId" class="fa fa-plus-circle fa-lg" matTooltip="Add Site Name" matTooltipPosition="above" data-toggle="modal" data-target="#createPOSiteName" (click)="onClickShipSiteName(\'Add\')"></a></span>                                \r\n                      \x3c!-- <span style="margin-left:5px;cursor:pointer;">\r\n                        <a *ngIf="sourcePoApproval.shipToUserId && sourcePoApproval.shipToSiteId > 0"\r\n                             class="fa fa-edit fa-lg" matTooltip="Edit Site Name" matTooltipPosition="above"\r\n                              data-toggle="modal" data-target="#createPOSiteName" \r\n                              (click)="onClickShipSiteName(\'Edit\',sourcePoApproval)"></a></span> --\x3e\r\n\r\n                              <span style="margin-left:0px;cursor:pointer;"\r\n                              ><a\r\n                                class="btn nobg"\r\n                                *ngIf="sourcePoApproval.shipToUserId && sourcePoApproval.shipToSiteId > 0"\r\n                                matTooltip="Edit Site Name" matTooltipPosition="above"\r\n                                 data-toggle="modal" data-target="#createPOSiteName" \r\n                                 (click)="onClickShipSiteName(\'Edit\',sourcePoApproval)"\r\n                                ><i class="fa fa-pencil" ></i\r\n                              ></a>\r\n                              </span>\r\n                  </label>\r\n                  <select [ngClass]="shipToSiteNameValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" (change)="onShipToGetAddress(sourcePoApproval.shipToSiteId);" name="shipCusSiteName" [(ngModel)]="sourcePoApproval.shipToSiteId" #shipCusSiteName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                      <option value="0">-- Select --</option>\r\n                      <option *ngFor="let object of shipToSite" \r\n                      [ngValue]="object.siteId">{{object.siteName}}</option>\r\n                  </select>\r\n                  \x3c!-- <div *ngIf="shipCusSiteName.invalid && (shipCusSiteName.dirty || shipCusSiteName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="shipCusSiteName.errors.required">\r\n                          <small> Site Name is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Address</label>\r\n                  <input class="form-control" type="text" value="{{shipToAddress?.address1}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>City</label>\r\n                  <input class="form-control" type="text" value="{{shipToAddress?.city}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Primary State/Province</label>\r\n                  <input class="form-control" type="text" value="{{shipToAddress?.stateOrProvince}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Postal</label>\r\n                  <input class="form-control" type="text" value="{{shipToAddress?.postalCode}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Country</label>\r\n                  <input class="form-control" type="text" value="{{shipToAddress?.country}}" disabled>\r\n              </div>\r\n              <div class="form-group" >\r\n                  <label>Contact Name <span class="clr-red">*</span></label>\r\n                  <select [ngClass]="shipToSiteNameValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" name="shiptoContact" [(ngModel)]="sourcePoApproval.shipToContactId" #shiptoContact="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                    <option value="0">-- Select --</option>\r\n                    <option *ngFor="let object of shipToContactDataList" \r\n                    [ngValue]="object.contactId">{{object.name}}</option>\r\n                </select>\r\n                  \x3c!-- <select [ngClass]="inputValidCheckAdd ? \'select-validate-cstm\' : \'\'" class="form-control" [(ngModel)]="sourcePoApproval.shipToContactId" #shipCusContactName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                    <option value="0">-- Select --</option>\r\n                    <option *ngFor="let object of shipToContactDataList" [ngValue]="object.contactId">{{object.name}} </option>\r\n                </select> --\x3e\r\n                \x3c!-- <select [ngClass]="shipToSiteNameValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" (change)="onShipToGetAddress(sourcePoApproval , sourcePoApproval.shipToSiteId);" name="shipCusSiteName" [(ngModel)]="sourcePoApproval.shipToSiteId" #shipCusSiteName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                    <option value="0">-- Select --</option>\r\n                    <option *ngFor="let object of shipToSite" \r\n                    [ngValue]="object.siteId">{{object.siteName}}</option>\r\n                </select> --\x3e\r\n\r\n                  \x3c!-- <p-autoComplete field="name" [ngClass]="inputValidCheckAdd ? \'p-acomp-validate\' : \'\'" class="pautocomp-cstm"\r\n                                  [(ngModel)]="sourcePoApproval.shipToContactId" \r\n                                  title="Contact Name" name="shipToCustomerContactName" \r\n                                  [suggestions]="firstNamesShipTo" \r\n                                  (completeMethod)="filterContactsForShipTo($event)" \r\n                                  [size]="30" [minLength]="1" [dropdown]="true" #shipCusContactName="ngModel" \r\n                                  errorMessage="Records not found" [forceSelection]="true" \r\n                                  (onClear)="clearShipToContact()" \r\n                                  required></p-autoComplete> --\x3e\r\n                  \x3c!-- <div *ngIf="shipCusContactName.invalid && (shipCusContactName.dirty || shipCusContactName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="shipCusContactName.errors.required">\r\n                          <small> Contact Name is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>          \r\n              <div class="form-group memo-popup-cstm">\r\n                  <label>\r\n                      Memo \r\n                      \x3c!-- <i class="fa fa-info-circle fa-lg" \r\n                      matTooltipPosition="above" matTooltip="Add Memo"\r\n                              data-toggle="modal" data-target="#address-memo"\r\n                               (click)="onClickShipMemo()"></i> --\x3e\r\n\r\n                               <span style="margin-left:-7px"\r\n                               ><a\r\n                                 class="btn nobg"\r\n                                 matTooltipPosition="above" matTooltip="Add Memo"\r\n                                 data-toggle="modal" data-target="#address-memo"\r\n                                  (click)="onClickShipMemo()"\r\n                                 ><i class="fa fa-pencil" ></i\r\n                               ></a>\r\n                               </span>\r\n                  </label>\r\n                  <span>\r\n                      <div [innerHTML]="sourcePoApproval.shipToMemo"\r\n                      [matTooltip]="parsedText(sourcePoApproval.shipToMemo)"\r\n                       class="form-control"\r\n                           style="width:100%;padding:0px !important;" class="text_editor_box"></div>\r\n                  </span>\r\n    \r\n              </div>\r\n    \r\n              <div>\r\n                  <div class="form-group">\r\n                      <label>\r\n                          Ship Via <span class="clr-red">*</span>\r\n                          <span style="margin-left:3px;cursor:pointer;"><a *ngIf="sourcePoApproval.shipToUserId" class="fa fa-plus-circle fa-lg" matTooltip="Add Ship Via" matTooltipPosition="above" data-toggle="modal" data-target="#shipToShipVia" (click)="onEditShipVia(\'Add\',0)"></a></span>\r\n                          \x3c!-- <span style="margin-left:5px;cursor:pointer;">\r\n                            <a *ngIf="sourcePoApproval.shipToUserId && sourcePoApproval.shippingViaId > 0" \r\n                                class="fa fa-edit fa-lg" matTooltip="Edit Ship Via" matTooltipPosition="above"\r\n                                 data-toggle="modal" data-target="#shipToShipVia" \r\n                                 (click)="onEditShipVia(\'Edit\',sourcePoApproval.shippingViaId)"></a></span> --\x3e\r\n\r\n                                 <span style="margin-left:0px;cursor:pointer;"\r\n                                 ><a\r\n                                   class="btn nobg"\r\n                                   *ngIf="sourcePoApproval.shipToUserId && sourcePoApproval.shippingViaId > 0" \r\n                                   matTooltip="Edit Ship Via" matTooltipPosition="above"\r\n                                    data-toggle="modal" data-target="#shipToShipVia" \r\n                                    (click)="onEditShipVia(\'Edit\',sourcePoApproval.shippingViaId)"\r\n                                   ><i class="fa fa-pencil"></i\r\n                                 ></a>\r\n                                 </span>\r\n                                \r\n                      </label>\r\n                      <select [ngClass]="shipViaValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control"  title="Ship Via" name="cusShipViaId"  (ngModelChange)="getShipViaDetails($event); checkValidOnChange(sourcePoApproval.shippingViaId, \'shipViaId\');" [(ngModel)]="sourcePoApproval.shippingViaId" #cusShipViaId="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                          <option value="0">-- Select --</option>\r\n                          <option *ngFor="let object of shipViaList" [ngValue]="object.shippingViaId">{{object.name}}</option>\r\n                      </select>\r\n                      \x3c!-- <div *ngIf="cusShipViaId.invalid && (cusShipViaId.dirty || cusShipViaId.touched)" class="alert alert-danger alert-danger-cstm">\r\n                          <div *ngIf="cusShipViaId.errors.required">\r\n                              <small> Ship Via is required </small>\r\n                          </div>\r\n                      </div> --\x3e\r\n                  </div>\r\n                  <div class="form-group" *ngIf="addressType!= \'SOQ\'">\r\n                      <label>Shipping Cost</label>\r\n                      <input class="form-control text-right" type="text" pKeyFilter="money" name="cusShippingCost" [(ngModel)]="sourcePoApproval.shippingCost" (ngModelChange)="enableAddSave()" (change)="onChangeShippingHandlingCost(\'shippingCost\');">\r\n                  </div>\r\n                  <div class="form-group" *ngIf="addressType!= \'SOQ\'">\r\n                      <label>Handling Cost</label>\r\n                      <input class="form-control text-right" type="text" pKeyFilter="money" name="cusHandlingCost" [(ngModel)]="sourcePoApproval.handlingCost" (ngModelChange)="enableAddSave()" (change)="onChangeShippingHandlingCost(\'handlingCost\');">\r\n                  </div>\r\n                  <div class="form-group">\r\n                      <label>Shipping Acct Info</label>\r\n                      <input class="form-control" type="text" name="cusShippingAcctNum" [(ngModel)]="sourcePoApproval.shippingAccountNo" disabled>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n          <div class="col-md-3">\r\n              <h5 class="po-head">Bill To</h5>\r\n              <div class="form-group">\r\n                  <label>User Type <span class="clr-red">*</span></label>\r\n                  <select [ngClass]="billToUserTypeValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" name="billToUserTypeId" [(ngModel)]="sourcePoApproval.billToUserTypeId" (change)="clearInputBillTo(); checkValidOnChange(sourcePoApproval.billToUserTypeId, \'billToUserTypeId\');onModuleBillTypeChange();" #billUserType="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                      <option value="0">-- Select --</option>\r\n                      <ng-container *ngFor="let item of userTypes">\r\n                          <option [value]="item.moduleId" *ngIf="item.moduleName != \'Others\'">{{item.moduleName}}</option>\r\n                      </ng-container>\r\n                  </select>\r\n                  \x3c!-- <div *ngIf="billToUserTypeId.invalid && (billToUserTypeId.dirty || billToUserTypeId.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="billUserType.errors.required">\r\n                          <small> User Type is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>\r\n              <div class="form-group">\r\n                  <div class="form-row" >\r\n                      <div class="col-sm-12">\r\n                          <label>{{billingingModuleName}} Name <span class="clr-red">*</span></label>\r\n                          <p-autoComplete field="userName" [ngClass]="inputValidCheckAdd ? \'p-acomp-validate\' : \'\'" class="pautocomp-cstm"\r\n                                          (onClear)="clearInputBillTo()"\r\n                                          (onSelect)="onBillToSelected($event)"\r\n                                          [(ngModel)]="sourcePoApproval.billToUserId" name="billCompanyName"\r\n                                          [suggestions]="userBillingList"\r\n                                          (completeMethod)="filterUsersForBilling($event, sourcePoApproval.billToUserTypeId)"\r\n                                          [size]="30"\r\n                                          [minLength]="1"\r\n                                          [dropdown]="true"\r\n                                          errorMessage="Records not found"\r\n                                          [forceSelection]="true"\r\n                                          #billCompName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                          </p-autoComplete>\r\n                          \x3c!-- <div *ngIf="billCompName.invalid && (billCompName.dirty || billCompName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                              <div *ngIf="billCompName.errors.required">\r\n                                  <small> Company Name is required </small>\r\n                              </div>\r\n                          </div> --\x3e\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>\r\n                      Site Name <span class="clr-red">*</span>\r\n                      <span style="margin-left:3px;cursor:pointer;"><a *ngIf="sourcePoApproval.billToUserId"  class="fa fa-plus-circle fa-lg" matTooltip="Add Site Name" matTooltipPosition="above" data-toggle="modal" data-target="#createBillingSiteName" (click)="onClickBillSiteName(\'Add\')"></a></span>\r\n                      \x3c!-- <span style="margin-left:5px;cursor:pointer;"><a \r\n                        *ngIf="sourcePoApproval.billToUserId && sourcePoApproval.billToSiteId > 0"\r\n                           class="fa fa-edit fa-lg" matTooltip="Edit Site Name" matTooltipPosition="above"\r\n                            data-toggle="modal" data-target="#createBillingSiteName"\r\n                             (click)="onClickBillSiteName(\'Edit\', sourcePoApproval)"></a></span> --\x3e\r\n\r\n                             <span style="margin-left:0px;cursor:pointer;"\r\n                             ><a\r\n                               class="btn nobg"\r\n                               matTooltipPosition="above" matTooltip="Edit Site Name"\r\n                               *ngIf="sourcePoApproval.billToUserId && sourcePoApproval.billToSiteId > 0"\r\n                                data-toggle="modal" data-target="#createBillingSiteName"\r\n                                 (click)="onClickBillSiteName(\'Edit\', sourcePoApproval)"\r\n                               ><i class="fa fa-pencil" ></i\r\n                             ></a>\r\n                             </span>\r\n                  </label>\r\n                  <select [ngClass]="billToSiteNameValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" (change)="onBillToGetAddress(sourcePoApproval.billToSiteId); checkValidOnChange(sourcePoApproval.billToSiteId, \'billToSiteId\');" name="billCusSiteName" [(ngModel)]="sourcePoApproval.billToSiteId" #billCusSiteName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                      <option value="0">-- Select --</option>\r\n                      <option *ngFor="let object of billToSite" [ngValue]="object.siteId">{{object.siteName}} </option>\r\n                  </select>\r\n    \r\n                  \x3c!-- <div *ngIf="billCusSiteName.invalid && (billCusSiteName.dirty || billCusSiteName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="billCusSiteName.errors.required">\r\n                          <small> Site Name is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Address </label>\r\n                  <input class="form-control" type="text" value="{{billToAddress?.address1}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>City</label>\r\n                  <input class="form-control" type="text" value="{{billToAddress?.city}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Primary State/Province</label>\r\n                  <input class="form-control" type="text" value="{{billToAddress?.stateOrProvince}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Postal</label>\r\n                  <input class="form-control" type="text" value="{{billToAddress?.postalCode}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Country</label>\r\n                  <input class="form-control" type="text" value="{{billToAddress?.country}}" disabled>\r\n              </div>\r\n              <div class="form-group">\r\n                  <label>Contact Name <span class="clr-red">*</span></label>\r\n                  <select [ngClass]="shipToSiteNameValidCheck ? \'select-validate-cstm\' : \'\'" class="form-control" name="billtoContact" [(ngModel)]="sourcePoApproval.billToContactId" #billtoContact="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                    <option value="0">-- Select --</option>\r\n                    <option *ngFor="let object of billToContactDataList" \r\n                    [ngValue]="object.contactId">{{object.name}}</option>\r\n                </select>\r\n                  \x3c!-- <select [ngClass]="inputValidCheckAdd ? \'select-validate-cstm\' : \'\'" class="form-control" [(ngModel)]="sourcePoApproval.billToContactId" #billCusContactName="ngModel" (ngModelChange)="enableAddSave()" required>\r\n                    <option value="0">-- Select --</option>\r\n                    <option *ngFor="let object of billToContactDataList" [ngValue]="object.contactId">{{object.name}} </option>\r\n                </select> --\x3e\r\n\r\n                  \x3c!-- <p-autoComplete field="name" title="Contact Name " [ngClass]="inputValidCheckAdd ? \'p-acomp-validate\' : \'\'" class="pautocomp-cstm" \r\n                            [(ngModel)]="sourcePoApproval.billToContactId" \r\n                            name="customerContactsForBillTo" \r\n                            [suggestions]="firstNamesBillTo" \r\n                            (completeMethod)="filterContactsForBillTo($event)" [size]="30" \r\n                            errorMessage="Records not found" [forceSelection]="true" [minLength]="1" \r\n                            [dropdown]="true" #billCusContactName="ngModel" (onClear)="clearBillToContact()" \r\n                            (ngModelChange)="enableAddSave()" required>\r\n                  </p-autoComplete> --\x3e\r\n                  \x3c!-- <div *ngIf="billCusContactName.invalid && (billCusContactName.dirty || billCusContactName.touched)" class="alert alert-danger alert-danger-cstm">\r\n                      <div *ngIf="billCusContactName.errors.required">\r\n                          <small> Contact Name is required </small>\r\n                      </div>\r\n                  </div> --\x3e\r\n              </div>\r\n              <div class="form-group memo-popup-cstm">\r\n                  <label>\r\n                      Memo \r\n                      \x3c!-- <i class="fa fa-info-circle fa-lg" \r\n                        matTooltipPosition="above"\r\n                              matTooltip="Add Memo" data-toggle="modal" \r\n                              data-target="#address-memo"\r\n                              (click)="onClickBillMemo()"></i> --\x3e\r\n\r\n                              <span style="margin-left:-7px"\r\n                              ><a\r\n                                class="btn nobg"\r\n                                matTooltipPosition="above"\r\n                                matTooltip="Add Memo" data-toggle="modal" \r\n                                data-target="#address-memo"\r\n                                (click)="onClickBillMemo()"\r\n                                ><i class="fa fa-pencil" ></i\r\n                              ></a>\r\n                              </span>\r\n\r\n                  </label>\r\n                  <span>\r\n    \r\n                      <div [innerHTML]="sourcePoApproval.billToMemo"\r\n                      [matTooltip]="parsedText(sourcePoApproval.billToMemo)" class="form-control"\r\n                           style="width:100%;padding:0px !important;" class="text_editor_box"></div>\r\n    \r\n                  </span>\r\n    \r\n              </div>\r\n          </div>\r\n      </div>\r\n      <div>\r\n        <button class="btn btn-primary pull-right" (click)="savePurchaseOrderAddress()" [disabled]="!enableAddSaveBtn">{{isEditModeAdd ? \'Update\' : \'Save\'}}</button>\r\n           </div>\r\n    </form>\r\n    </ng-container>\r\n\r\n    <div class="modal fade" id="createPOSiteName" role="dialog" data-backdrop="static" data-keyboard="false">\r\n        <div class="modal-dialog partsList-modal">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" (click)="resetAddressShippingForm();">&times;</button>\r\n                    <h4 class="modal-title">{{addressSiteNameHeader}}</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="form-row">\r\n                        <form #addSiteNameForm="ngForm" class="form-horizontal">\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Is Primary </label>\r\n                                <input type="checkbox" name="isPrimary"  class="form-control col-md-6"  [(ngModel)]="addressFormForShipping.isPrimary"  (ngModelChange)="shipAddChange()">\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Site Name <span class="clr-red">*</span> :</label>\r\n                                <p-autoComplete                 \r\n                                class="autocomp-customer-cstm" \r\n                                name="siteName"\r\n                                [(ngModel)]="addressFormForShipping.siteName" \r\n                                [suggestions]="lstfilterShippingSite"                     \r\n                                emptyMessage="No Match Found" \r\n                                field="siteName" \r\n                                (onKeyUp)="checkShippingSiteNameExist($event.target.value)"\r\n                                (onChange)="checkShippingSiteNameExist($event.target.value)"\r\n                                (onSelect)="checkShippingSiteNameSelect()"\r\n                                (completeMethod)="filterShippingSite($event);" \r\n                                (ngModelChange)="shipAddChange()" \r\n                                [size]="30" [minLength]="1" [dropdown]="true" required>\r\n                              </p-autoComplete>\r\n                              <div *ngIf="isShippingSiteNameAlreadyExists" class="clr-red">\r\n                                        Site Name Already Exists\r\n                              </div>\r\n                                \x3c!-- <input type="text" class="form-control col-md-6" name="siteName" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.siteName" required>--\x3e\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Address 1 <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="address1" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.address1" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Address 2:</label>\r\n                                <input type="text" class="form-control col-md-6" name="address2" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.address2">\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">City <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="city" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.city" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">State <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="stateOrProvince" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.stateOrProvince" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Postal <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="postalCode" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.postalCode" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Country <span class="clr-red">*</span></label>\r\n                                <p-autoComplete field="label" class="pautocomp-cstm" (onSelect)="shipAddChange()" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.countryId" name="country" [suggestions]="countriesList" (completeMethod)="filterCountries($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" required></p-autoComplete>\r\n                            </div>\r\n                            <div class="form-group col-md-12" style="margin-top: 8px;">\r\n                                <button type="button" class="btn btn-primary" *ngIf="(!isEditModeShippingPoOnly && !isEditModeShipping) || isEditModeShipping" (click)="saveShippingAddress();"  [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists)"  data-dismiss="modal">{{isEditModeShipping ? \'Update\' : \'Save\' }}</button> \x3c!--resetAddressShippingForm();--\x3e\r\n                                <button type="button" class="btn btn-primary" *ngIf="showIsPoOnlyButton &&  (!isEditModeShippingPoOnly && !isEditModeShipping) || isEditModeShippingPoOnly" [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists) || addressFormForShipping.isPrimary" (click)="saveShippingAddressToPO();"   data-dismiss="modal">{{isEditModeShippingPoOnly ? \'Update to this PO\' : \'Save to this PO\' }}</button>\r\n                                \x3c!--<button type="button" class="btn btn-primary" *ngIf="(!isEditModeShippingPoOnly && !isEditModeShipping) || isEditModeShipping" (click)="saveShippingAddress();"  [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists)"  data-dismiss="modal">{{isEditModeShipping ? \'Update\' : \'Save\' }}</button> \r\n                                <button type="button" class="btn btn-primary" *ngIf="showIsPoOnlyButton &&  (!isEditModeShippingPoOnly && !isEditModeShipping) || isEditModeShippingPoOnly" [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists)" (click)="saveShippingAddressToPO();"   data-dismiss="modal">{{isEditModeShippingPoOnly ? \'Update to this PO\' : \'Save to this PO\' }}</button>--\x3e\r\n                            </div>\r\n    \r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="resetAddressShippingForm();">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="modal fade" id="createBillingSiteName" role="dialog" data-backdrop="static" data-keyboard="false">\r\n        <div class="modal-dialog partsList-modal">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" (click)="resetAddressBillingForm();">&times;</button>\r\n                    <h4 class="modal-title">{{addressSiteNameHeader}}</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="form-row">\r\n                        <form #addBillNameForm="ngForm" class="form-horizontal">\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Is Primary </label>\r\n                                <input type="checkbox" name="isPrimary"  class="form-control col-md-6"  [(ngModel)]="addressFormForBilling.isPrimary"  (ngModelChange)="billAddChange()">\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Site Name <span class="clr-red">*</span></label>\r\n                                <p-autoComplete                 \r\n                                class="autocomp-customer-cstm" \r\n                                name="siteName"\r\n                                [(ngModel)]="addressFormForBilling.siteName" \r\n                                [suggestions]="lstfilterBillingSite"                     \r\n                                emptyMessage="No Match Found" \r\n                                field="siteName" \r\n                                (onKeyUp)="checkSiteNameExist($event.target.value)"\r\n                                (onChange)="checkSiteNameExist($event.target.value)"\r\n                                (onSelect)="checkSiteNameSelect()"\r\n                                (completeMethod)="filterBillingSite($event);" \r\n                                (ngModelChange)="billAddChange()" \r\n                                [size]="30" [minLength]="1" [dropdown]="true" required>\r\n                              </p-autoComplete>\r\n                              <div *ngIf="isSiteNameAlreadyExists" class="clr-red">\r\n                                        Site Name Already Exists\r\n                              </div>\r\n                            </div>\r\n                            \x3c!-- <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Site Name <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="siteName" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.siteName" required>\r\n                            </div> --\x3e\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Address 1 <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="address1"  (change)="billAddChange()" [(ngModel)]="addressFormForBilling.address1" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Address 2 </label>\r\n                                <input type="text" class="form-control col-md-6" name="address2" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.address2">\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">City <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="city" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.city" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">State <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="stateOrProvince" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.stateOrProvince" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Postal <span class="clr-red">*</span></label>\r\n                                <input type="text" class="form-control col-md-6" name="postalCode" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.postalCode" required>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Country <span class="clr-red">*</span></label>\r\n                                <p-autoComplete field="label" class="pautocomp-cstm"  (onSelect)="billAddChange()" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.countryId" name="country" [suggestions]="countriesList" (completeMethod)="filterCountries($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" required></p-autoComplete>\r\n                            </div>\r\n                            <div class="form-group col-md-12" style="margin-top: 8px;">\r\n                                  <button type="button" class="btn btn-primary" \r\n                                  (click)="saveBillingAddress();"  \r\n                                  *ngIf="(!isEditModeBilling && !isEditModeBillingPoOnly) || isEditModeBilling"\r\n                                   [disabled]="!(addBillNameForm.valid && billAddbutton && !isSiteNameAlreadyExists)" \r\n                                    data-dismiss="modal">{{isEditModeBilling ? \'Update\' : \'Save\' }}</button>                                \r\n\r\n                                  <button type="button" class="btn btn-primary"   *ngIf="showIsPoOnlyButton && ((!isEditModeBilling && !isEditModeBillingPoOnly) || isEditModeBillingPoOnly)" [disabled]="!addBillNameForm.valid" (click)="saveBillingAddressToPO();" [disabled]="!(addBillNameForm.valid && billAddbutton && !isSiteNameAlreadyExists) || addressFormForBilling.isPrimary"  data-dismiss="modal">{{isEditModeBillingPoOnly ? \'Update to this PO\' : \'Save to this PO\' }}</button>\r\n\r\n                                  \x3c!--<button type="button" class="btn btn-primary" \r\n                                    *ngIf="showIsPoOnlyButton && ((!isEditModeBilling && !isEditModeBillingPoOnly) || isEditModeBillingPoOnly)"\r\n                                     [disabled]="!addBillNameForm.valid" \r\n                                     (click)="saveBillingAddressToPO();" \r\n                                     [disabled]="!(addBillNameForm.valid && billAddbutton && !isSiteNameAlreadyExists)" \r\n                                      data-dismiss="modal">{{isEditModeBillingPoOnly ? \'Update to this PO\' : \'Save to this PO\' }}</button>--\x3e\r\n\r\n                            </div>\r\n    \r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="resetAddressBillingForm();">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="preloader" *ngIf="isSpinnerVisible">\r\n        <div class="loading">\r\n            <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="modal fade" id="shipToShipVia" role="dialog" data-backdrop="static" data-keyboard="false">\r\n        <div class="modal-dialog partsList-modal">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" (click)="resetAddressShipViaForm()">&times;</button>\r\n                    <h4 class="modal-title"> {{ ShipViaHeader }} </h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="form-row">\r\n                        <form #addShipViaForm="ngForm" class="form-horizontal">\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Ship Via: <span class="clr-red">*</span></label>\r\n                                <select class="form-control col-md-6" title="Ship Via" name="shipVia" [(ngModel)]="addShipViaFormForShipping.shipViaId" (change)="shipViaChange()" required>\r\n                                    <option *ngFor="let object of allShipViaInfo" [ngValue]="object.value">{{object.label}}</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class="form-group col-md-12">\r\n                                <label class="col-md-6">Shipping Acct Info:</label>\r\n                                <input type="text" class="form-control col-md-6" name="shippingAcctInfo" (change)="shipViaChange()" [(ngModel)]="addShipViaFormForShipping.shippingAccountInfo">\r\n                            </div>\r\n                          \r\n                            <div class="form-group col-md-12">                               \r\n                                <label class="col-md-6" style="vertical-align: top;">Memo:</label>\r\n                                <div  class="col-md-6">\r\n                                <div class="form-group memo-popup-cstm" > \r\n                                        <div [innerHTML]="addShipViaFormForShipping.memo" class="form-control"\r\n                                       class="text_editor_box" style="width:100%;padding:0px !important;line-height:1.6">\r\n                                    </div>\r\n                                        \x3c!-- <i class="fa fa-info-circle fa-lg pull-right"\r\n                                             style="margin-top:-20px;margin-right:-18px"\r\n                                                data-toggle="modal"\r\n                                                data-target="#ship-via-memo" matTooltip="Memo"\r\n                                                matTooltipPosition="above"\r\n                                                (click)="onAddShipMemo()"></i>        --\x3e\r\n\r\n                                              <i class="fa fa-pencil btn nobg pull-right"  style="margin-top:-25px;margin-right:-29px" \r\n                                                  data-toggle="modal"\r\n                                                data-target="#ship-via-memo" matTooltip="Memo"\r\n                                                matTooltipPosition="above"\r\n                                                (click)="onAddShipMemo()"></i>\r\n                                        </div>  \r\n                                </div>      \r\n\r\n                             </div>\r\n                            <div class="form-group col-md-12" style="margin-top: 8px;">\r\n                                   <button type="button" class="btn btn-primary" data-dismiss="modal" style="display: none;" [disabled]="!addShipViaForm.valid " (click)="saveShipToShipViaDetailsToPO()">Save to this PO</button>\r\n                            </div>\r\n    \r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-primary" data-dismiss="modal" [disabled]="!(addShipViaForm.valid && ShipViabutton)" (click)="saveShipViaForShipTo(); resetAddressShipViaForm();">{{ isEditModeShipVia ? \'Update\' : \'Save\' }}</button>                          \r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div> \r\n\r\n    <div class="modal fade" id="ship-via-memo" style="z-index: 10000;" role="dialog" data-backdrop="static" data-keyboard="false">\r\n        <div class="modal-dialog">\r\n          <div class="modal-content">\r\n            <div class="modal-header">\r\n              <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n              <h4 class="modal-title">Edit Memo</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n              \x3c!-- <table class="table table-bordered table-fixed workflow-table-material">\r\n                <thead>\r\n                  <th style="color: #fff;">Memo</th>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>\r\n                      <p-editor [(ngModel)]="tempAddshipViaMemo" \r\n                      [style]="{\'height\':\'320px\'}" name="tempAddshipViaMemo" \r\n                      required></p-editor>\t\t\t\t\t\t\t\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table> --\x3e\r\n              <p-editor [(ngModel)]="tempAddshipViaMemo" \r\n              [style]="{\'height\':\'320px\'}" name="tempAddshipViaMemo" \r\n              required></p-editor>\r\n              <div class="editor-buttons">\r\n                <button type="button" class="btn btn-primary editor-buttons-margin"\t\t\t\t\t\t \r\n                 (click)="onSaveTextAreaInfo()">Save</button>\r\n                <button type="button" class="btn btn-danger editor-buttons-margin"\r\n                 (click)="closeMemoModel()"\r\n                  >Close</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    <div class="modal fade" id="address-memo"\r\n     role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close"\r\n                        data-dismiss="modal">\r\n                    &times;\r\n                </button>\r\n                <h4 class="modal-title">\r\n                    {{addressMemoLabel == \'Edit Ship\' || addressMemoLabel == \'Edit Bill\' ? \'Edit\': addressMemoLabel }} Memo\r\n                </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <table class="table table-bordered\r\n                        table-fixed workflow-table-material">\r\n                    <thead>\r\n                    <th style="color: #fff;">Memo</th>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <p-editor [(ngModel)]="tempMemo"\r\n                                          [style]="{\'height\':\'320px\'}" name="tempMemo" required></p-editor>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table> --\x3e\r\n                <p-editor [(ngModel)]="tempMemo"\r\n                                          [style]="{\'height\':\'320px\'}" name="tempMemo" required></p-editor>\r\n                <div class="editor-buttons">\r\n                    <button type="button" class="btn btn-primary editor-buttons-margin"\r\n                            data-dismiss="modal" (click)="onSaveAddressMemo()">\r\n                        Save\r\n                    </button>\r\n                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n    '},JTuQ:function(e,t,s){"use strict";s.r(t),t.default="<p>\r\n  common-modules works!\r\n</p>\r\n"},Kppz:function(e,t,s){"use strict";s.r(t),t.default=""},LPWc:function(e,t,s){"use strict";s.r(t),t.default='\r\n    <div class="card new-card">\r\n        \x3c!-- <div class="col-md-12">\r\n            <h4 class="po-head-sm">\r\n                  Communication - Phone \r\n                  <a href="#" data-toggle="modal" data-target="#addNewPhone"\r\n                  (click)="addPhone()" *ngIf="!isView">\r\n                  <i class="fa fa-plus-circle fa-lg"></i></a>\r\n            </h4>\r\n        </div> --\x3e\r\n        <div class="card-header header">\r\n            <div class="row">\r\n              <div class="col">\r\n                <h4 class="header-name">  Communication - Phone </h4>\r\n              </div>\r\n              <div>\r\n                <button *ngIf="!isView"\r\n                  type="button" \r\n                  class="btn-sm header-button"\r\n                  data-toggle="modal" data-target="#addNewPhone"\r\n                  (click)="addPhone()">\r\n                 Create Phone\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n    \r\n    <div class="card-body header-body">\r\n        <p-table #dt\r\n        class="rpo-table-cstm rro-table-cstm tab-table-cstm"\r\n        [value]="data"\r\n        [metaKeySelection]="true"\r\n        [first]="0"\r\n        (onPage)="pageIndexChange($event)"\r\n        [rows]="pageSize"\r\n        [paginator]="true"\r\n        [pageLinks]="3"\r\n        [rowsPerPageOptions]="[10, 20, 50, 100]"\r\n        [columns]="selectedColumns"\r\n        selectionMode="multiple"\r\n        [resizableColumns]="true"\r\n        [reorderableColumns]="true"\r\n        [totalRecords]="totalRecords"\r\n        [scrollable]="true" scrollHeight="450px">\r\n        <ng-template pTemplate="caption">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <p-multiSelect [options]="headers" [(ngModel)]="selectedColumns"\r\n                    [ngModelOptions]="{ standalone: true }" optionLabel="header" \r\n                    selectedItemsLabel="{0} columns selected"\r\n                    class="multiselect-field" defaultLabel="Choose Columns"></p-multiSelect>\r\n                      \r\n                </div>\r\n            <div class="col">\r\n                <div\t\t\t\t\t\r\n\t\t\t\t\t\tclass="global-search-field inner-addon right-addon inline-block"\r\n\t\t\t\t\t  >\r\n                    <i class="fa fa-search"></i>\r\n                    <input type="text" pInputText size="50" class="form-control"\r\n                        (input)="dt.filterGlobal($event.target.value, \'contains\')" placeholder=" Filter"\r\n                       />\r\n                </div>\r\n            </div>\r\n            </div>\r\n            <div class="row">\r\n            <div class="col">\r\n                <button type="button" class="btn btn-primary exports-button" matTooltip="Download Data" matTooltipPosition="above"\r\n                pButton icon="fa-download" iconPos="left" label="Export Data" \r\n                data-toggle="modal" \r\n                (click)="selectedOnly = false; targetData = dt;"\r\n                 data-target="#phonedownloadConfirmation"></button>\r\n                <button type="button" class="btn btn-primary exports-button" matTooltip="Download Selected Data"\r\n                matTooltipPosition="above" pButton icon="fa-download" iconPos="left" label="Export Selected Data"\r\n                (click)="dt.exportCSV({ selectionOnly: true })"></button>\r\n\r\n            </div>\r\n            <div class="pull-right buttons-div-align">\r\n                <div class="col">\r\n                  <div class="col buttons-top-padding">\r\n                  <div class="form-group" style="float: right;"> \r\n                 <div class="checkbox-cstm pull-left" style="margin-left: 0;">\r\n                        <label style="width: auto !important;margin-top: 3px;">\r\n                            <input type="checkbox" [(ngModel)]="deletedStatusInfo" name="cparent55" id="cparent55" (click)="getDeleteListByStatus($event.target.checked)" />\r\n                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>\r\n                            Show  Deleted List\r\n                        </label>\r\n                    </div>\r\n                    </div>\r\n                    </div>\r\n\r\n              </div>\r\n          </div>\r\n          </div>\r\n        </ng-template>\r\n\r\n\r\n            \x3c!-- <ng-template pTemplate="colgroup" let-columns>\r\n                <colgroup>\r\n                    <ng-container *ngFor="let col of headers">\r\n                        <col *ngIf="col.field == \'phoneNo\' || col.field == \'contactBy\' || col.field == \'createdDate\' || col.field == \'createdBy\'" >\r\n                        <col *ngIf="col.field == \'notes\'"  >\r\n                    </ng-container>\r\n                </colgroup>\r\n            </ng-template> --\x3e\r\n            <ng-template pTemplate="colgroup" let-columns>\r\n                <colgroup>\r\n                    <col *ngFor="let col of headers" class="table-column-width">\r\n                </colgroup>\r\n            </ng-template>\r\n            <ng-template pTemplate="header" let-columns>\r\n                <tr>\r\n                    <ng-container *ngFor="let col of headers">\r\n                        <th class="table-column-width"\r\n                        *ngIf="col.field == \'phoneNo\' || col.field == \'contactBy\'"\r\n                        pResizableColumn\r\n                        pReorderableColumn\r\n                        [pSortableColumn]="col.field">\r\n                        {{ col.header }}\r\n                            <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                        </th>\r\n                        <th class="table-column-width"\r\n                        *ngIf="col.field != \'phoneNo\' && col.field != \'contactBy\'"\r\n                        pResizableColumn\r\n                        pReorderableColumn\r\n                        [pSortableColumn]="col.field">\r\n                        {{ col.header }}\r\n                            <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                        </th>\r\n                    </ng-container>\r\n                    \x3c!-- <th style="width:auto"\r\n                        \r\n                        pResizableColumn\r\n                        pReorderableColumn\r\n                        [pSortableColumn]="col.field">\r\n                        {{ col.header }}\r\n                        <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                    </th> --\x3e\r\n                    <th class="table-actions-column">\r\n                        Actions\r\n                    </th>\r\n                </tr>\r\n\r\n                <tr>\r\n                    <ng-container *ngFor="let col of headers">\r\n                        <th class="table-column-width" *ngIf="col.field == \'phoneNo\' || col.field == \'contactBy\'" [ngSwitch]="col.field">\r\n                            <input  pInputText type="text" class="incorn_border table-header-input-width" (input)="\r\n                                dt.filter($event.target.value, col.field, \'contains\')\r\n                            " />\r\n                        </th>\r\n                        <th class="table-column-width" *ngIf="col.field != \'phoneNo\' && col.field != \'contactBy\'" [ngSwitch]="col.field">\r\n                            <input pInputText type="text"  class="incorn_border table-header-input-width" (input)="\r\n                                dt.filter($event.target.value, col.field, \'contains\')\r\n                            " />\r\n                        </th>\r\n                    </ng-container>\r\n                    \x3c!-- <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">\r\n                        <input style="width:100%;" pInputText type="text" (input)="\r\n                            dt.filter($event.target.value, col.field, \'contains\')\r\n                        " />\r\n                    </th> --\x3e\r\n                    <th class="table-actions-column"></th>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">\r\n                    <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData">\r\n                        <ng-container *ngFor="let col of columns" >\r\n                            <td class="table-column-width"\r\n                            *ngIf="col.field == \'notes\'"\r\n                            class="ui-resizable-column"\r\n                            pReorderableRowHandle>\r\n                            <p class="m-0 p-0 p_textEditor" style="white-space: nowrap;" \r\n                            matTooltip="view" matTooltipPosition="above" [innerHTML]=rowData[col.field]></p>\r\n                        </td>\r\n                            <td class="table-column-width" *ngIf="col.field !=\'notes\'">\r\n                                {{\r\n                                    col.field == \'createdDate\'\r\n                                      ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                      : rowData[col.field] && col.field == \'updatedDate\'\r\n                                      ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                      : rowData[col.field] \r\n                                  }}\r\n                            </td>\r\n                    </ng-container>\r\n                        <td class="action-icons-cstm table-column-width">\r\n                            <span data-toggle="modal" data-target="#viewPhone"><a class="btn nobg btn-view-cstm"\r\n                                (click)="phoneView(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>\r\n                            <span  *ngIf="deletedStatusInfo==false  && !isView" data-target="#addNewPhone" data-toggle="modal"><a class="btn nobg btn-edit-cstm"\r\n                                (click)="edit(rowData, rowIndex)" matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>\r\n                          \r\n                            <span *ngIf="deletedStatusInfo==false  && !isView" ><a class="btn nobg btn-delete-cstm" (click)="showDeletePhoneConfirmation(rowData)" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></a> </span>\r\n                            <span *ngIf="deletedStatusInfo==true && !isView"><a class="btn nobg" (click)="restore(restoreId,rowData);"  matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>\r\n                            <span data-target="#contentHistDocs" data-toggle="modal"><a class="btn nobg" \r\n                                (click)="openHistory(rowData)"\r\n                                 matTooltip="History"  matTooltipPosition="above">\r\n                                 <i class="fa fa-history"></i></a></span>\r\n                        </td>\r\n                    </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="emptymessage" let-columns *ngIf="data.length == 0">\r\n                <tr>\r\n                  <td colspan="8" class="no-records-cstm no-records-msg">\r\n                    No records found\r\n                  </td>\r\n                </tr>\r\n            </ng-template>\r\n            \x3c!-- <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer" class="footer">No\'of records:</label>\r\n                <input style="width: 5%;"\r\n                        [(ngModel)]="totalRecords"\r\n                        [disabled]="true"\r\n                        pInputText\r\n                        type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer" class="footer1">Pages Count:</label>\r\n                <input style="width: 5%;"\r\n                        [(ngModel)]="totalPages"\r\n                        [disabled]="true"\r\n                        pInputText\r\n                        type="text" />\r\n            </ng-template> --\x3e\r\n            <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer">Total:</label>\r\n                <input class="footer-input-width" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer">Pages Count:</label>    \r\n                <input class="footer-input-width" [ngModel]="getPageCount(dt._totalRecords, pageSize)" [disabled]="true" pInputText type="text" />\r\n              </ng-template>\r\n        </p-table>\r\n        <ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">\r\n    \r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Restore?</h4>\r\n          \r\n                <button type="button" class="close" aria-label="Close" (click)="dismissModel()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body" *ngIf="restorerecord">\r\n                <strong>\r\n                   Phone:\r\n                    <span class="new-label">{{restorerecord.phoneNo}}</span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" (click)="restoreRecord()">Yes</button>\r\n                <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>\r\n            </div>\r\n          </ng-template> \r\n</div>\r\n</div>\r\n\r\n<div class="modal fade" id="phonedownloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">\r\n\t<div class="modal-dialog modal-sm">\r\n\t\t<div class="modal-content">\r\n\t\t\t<div class="modal-header">\r\n\t\t\t\t<button type="button" class="close" (click)="closeDeleteModal()">&times;</button>\r\n\t\t\t\t<h4 class="modal-title">Are You Sure Want to Download?</h4>\r\n\t\t\t</div>\r\n\t\t\t<div class="modal-body" *ngIf="targetData">\r\n\t\t\t\t<strong>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tYou are attempting to export {{targetData.totalRecords}} of records. \r\n\t\t\t\t\t</span> \r\n\t\t\t\t</strong>\r\n\t\t\t</div>\r\n\t\t\t<div class="modal-footer">\r\n\t\t\t\t<button type="button" class="btn btn-primary" (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeDeleteModal();">Confirm</button>\r\n\t\t\t\t<button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div id="addNewPhone" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title">{{ isEdit ? \'Edit\' : \'Add\'  }} Phone </h4>\r\n           \r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                  </div> --\x3e\r\n           \r\n            </div>\r\n            <form #phoneForm="ngForm" class="form-horizontal" ngNativeValidate>\r\n            <div class="modal-body" *ngIf="addList.length > 0">\r\n                <div class="form-row">                   \r\n                    <div class="col-md-6">\r\n                        <div class="form-group">\r\n                            <label class="col-md-12"><span *ngIf="type==1">Customer</span><span *ngIf="type==2">Vendor</span> Contact <span class="clr-red">*</span></label>\r\n                            <p-autoComplete field="firstName"\r\n                            [(ngModel)]="customerContact" required\r\n                            name="cusContact" #cusContact="ngModel"\r\n                            errorMessage="Records not found" [forceSelection]="true"\r\n                            [dropdown]="true" [suggestions]="cusContactList"\r\n                            (completeMethod)="filterCustomerContact($event)" (ngModelChange)="getmemo()"\r\n                            [size]="30" [minLength]="1" [dropdown]="true"\r\n                            (onSelect)="contactSelected($event)" \r\n                            class="p-autoComplete-ctsm">\r\n                            </p-autoComplete>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label>Phone</label>\r\n                            <input class="form-control" type="text" (ngModelChange)="getmemo()" [(ngModel)] = "addList[0].phoneNo" maxlength="20" name="phoneNo" required disabled/>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-12">Contacted By</label>\r\n                            \x3c!-- <select [(ngModel)]="addList[0].contactId"\r\n                                class="form-control" name="contactedBy" required>\r\n                                <option value="">Select</option>\r\n                                <option *ngFor="let employee of employees" [value]="employee.value">{{employee.label}}</option>\r\n                            </select> --\x3e\r\n                            <p-autoComplete field="name"\r\n                                [(ngModel)]="addList[0].contactId" (ngModelChange)="getmemo()"\r\n                                name="employees" errorMessage="Records not found" [forceSelection]="true"\r\n                                [dropdown]="true" [suggestions]="employees"\r\n                                (completeMethod)="filterEmployee($event)"\r\n                                [size]="30" [minLength]="1" [dropdown]="true"\r\n                                class="p-autoComplete-ctsm" required>\r\n                            </p-autoComplete>\r\n                        </div>                        \r\n                    </div>\r\n                    <div class="col-md-12">\r\n                        <div class="form-group">\r\n                            <label>Notes</label>\r\n                            <p-editor class="p-editor-cstm" [(ngModel)]="addList[0].notes" (ngModelChange)="getmemo()" style="overflow-y: auto;;"\r\n                                     [style]="{\'height\':\'150px\'}" name="notes"></p-editor>\r\n                            \x3c!-- <p-editor [(ngModel)]="addList[0].notes" [style]="{\'height\':\'320px\'}" name="notes"></p-editor> --\x3e\r\n                        </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="editor-buttons">\r\n                <button class="btn btn-primary editor-buttons-margin" data-dismiss="modal" (click)="savePhone()" [disabled]="!phoneForm.valid || disableUpdateButton">\r\n                    {{(!isEdit)?\'Save\':\'Update\'}}\r\n                </button>\r\n                <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </form>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div id="viewPhone" class="modal fade"\r\n role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-md">\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title"> Phone Details</h4>\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerName}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerName}}\r\n                        </span>\r\n                      </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                      <p class="fs12">\r\n                        <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                        </label>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="isSubWorkOrder">\r\n                            {{subWorkOrderDetails.customerCode}}\r\n                        </span>\r\n                        <span class="span-header-red" style="text-transform: capitalize" *ngIf="!isSubWorkOrder">\r\n                            {{savedWorkOrderData.customerId.customerCode}}\r\n                        </span>\r\n                      </p>\r\n                    </div> \r\n                  </div> --\x3e\r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <div class="col-sm-12" *ngIf="phoneViewData">\r\n                    <p>\r\n                        <span class="label"><strong> <span *ngIf="type==1">Customer</span><span *ngIf="type==2">Vendor</span>: </strong></span><span class="value">{{\r\n                            phoneViewData.customerContact\r\n                        }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> Phone: </strong></span><span class="value">{{\r\n                            phoneViewData.phoneNo\r\n                        }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> Contact By: </strong></span><span class="value">{{\r\n                            phoneViewData.contactBy\r\n                        }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> Notes: </strong></span><span class="value">\r\n                            <p class="m-0 p-0 p_textEditor" [innerHTML]=phoneViewData.notes></p></span>\r\n                    </p>\r\n                </div> --\x3e\r\n                <p><span class="label"><b><span *ngIf="type==1">Customer</span><span *ngIf="type==2">Vendor</span> Contact<span class="clr-red">*</span> : </b></span><span class="value">\r\n                    <span *ngIf="type==1"> {{phoneViewData.customerContact}}</span>\r\n                    <span *ngIf="type==2"> {{phoneViewData.vendorContact}}</span>\r\n                   </span></p>\r\n                <p><span class="label"><b>Phone <span class="clr-red">*</span> :   </b></span><span class="value">{{phoneViewData.phoneNo}}</span></p>\r\n                <p><span class="label"><b>Contacted By <span class="clr-red">*</span> :   </b></span><span class="value">{{phoneViewData.contactBy}}</span></p>\r\n             \r\n                <p>\r\n                    <span class="label"><strong> Notes: </strong></span><span class="value">\r\n                        <p class="m-0 p-0 p_textEditor" [innerHTML]=phoneViewData.notes></p></span>\r\n                </p>\r\n                 <p><span class="label"><b>Created Date: </b></span><span class="value">{{phoneViewData.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                <p><span class="label"><b>Created By: </b></span><span class="value">{{phoneViewData.createdBy}}</span></p>\r\n                <p><span class="label"><b>Updated Date: </b></span><span class="value">{{phoneViewData.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</span></p>\r\n                <p><span class="label"><b>Updated By: </b></span><span class="value">{{phoneViewData.updatedBy}}</span></p>\r\n              \r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n </div>\r\n\r\n <div id="deleteRowConfirmation" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-sm">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Delete ?</h4>\r\n                <button type="button" class="close" aria-label="Close" (click)="closeRestore()" data-dismiss="modal">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body" *ngIf="deletingRecord">\r\n                <strong>\r\n                   Phone:\r\n                    <span class="new-label">{{deletingRecord.phoneNo}}</span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deletePhone(deletingRecord)">Yes</button>\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeRestore()">No</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n <div class="preloader" *ngIf="isSpinnerVisible">\r\n    <div class="loading">\r\n        <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\r\n    </div>\r\n</div>\r\n<div  id="contentHistDocs" #contentHistDocs class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-xlg">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n\r\n                <h4 class="modal-title">History of Phone</h4>\r\n                <button type="button" class="close" aria-label="Close" (click)="dismissModelHistory()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n        \r\n        \r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Legal Entity Name: </label>\r\n                            <span class="span-header-red"\r\n                             style="text-transform: capitalize"> {{legalEntityName }}\r\n                             </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Company Code: </label>\r\n                            <span class="span-header-red" \r\n                            style="text-transform: capitalize"> {{legalEntityCode }} \r\n                        </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n                <div class="table-responsive history_hg">\r\n                    <table class="table table-bordered">\r\n                        <thead>\r\n                            <tr>\r\n                                <th><span *ngIf="type==1">Customer</span><span *ngIf="type==2">Vendor</span> Contact </th>\r\n                                <th>Phone</th>\r\n                                <th>Contacted By</th>\r\n                                <th>Notes</th>\r\n                                <th>Created Date</th>\r\n                                <th>Created By</th>\r\n                                <th> Updated Date</th>\r\n                                <th>Updated By</th>\r\n                                <th>Is Deleted</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor="let audit of documentauditHisory; let i = index;">\r\n                                <td *ngIf="type==1" [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'customerContact\', audit.customerContact)  ? \'black\' : \'red\'  }">{{audit.customerContact}}</td>\r\n                                <td *ngIf="type==2" [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'vendorContact\', audit.vendorContact)  ? \'black\' : \'red\'  }">{{audit.vendorContact}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'phoneNo\', audit.phoneNo)  ? \'black\' : \'red\'  }">{{audit.phoneNo}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'contactBy\', audit.contactBy)  ? \'black\' : \'red\'  }">{{audit.contactBy}}</td>\r\n                                 <td [ngStyle]="{\'color\': getColorCodeForHistory(i, \'notes\', audit.notes)  ? \'black\' : \'red\'  }">\r\n                                    <p [innerHTML]="audit.notes"></p>\r\n                                </td>\r\n                                <td>{{audit.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td>{{audit.createdBy}}</td>\r\n                                <td>{{audit.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td>{{audit.updatedBy}}</td>\r\n                                <td style="text-align: center;">\r\n                                    <span class="value">\r\n                                      <label class="wauto">\r\n                                          <input type="checkbox" name="isDeleted" [checked]="audit.isDeleted == true" disabled>\r\n                                      </label>\r\n                                    </span>\r\n                                  </td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n        \r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-danger" (click)="dismissModelHistory()">Close</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'},NoKm:function(e,t,s){"use strict";var a=s("mrSG"),i=s("8Y7J"),r=s("G0yt"),n=s("EVdn"),o=s("3LUQ"),l=s("hZbH"),d=s("lGQG"),c=s("wd/R"),p=s("SVse");let h=class{constructor(e,t,s,a,i,r){this.activeModal=e,this.communicationService=t,this.alertService=s,this.authService=a,this.datePipe=i,this.modalService=r,this.isView=!1,this.savedWorkOrderData=[],this.selectedPartNumber={},this.isSubWorkOrder=!1,this.pageSize=10,this.pageIndex=0,this.selectedOnly=!1,this.totalRecords=0,this.data=[],this.headers=[{field:"SERIAL_NO",header:"Serial No"},{field:"description",header:"Memo"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.selectedColumns=[{field:"SERIAL_NO",header:"Serial No"},{field:"descriptionData",header:"Memo"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.addList=[],this.moduleName="Communication",this.isSpinnerVisible=!1,this.documentauditHisory=[],this.restorerecord={},this.viewdata={},this.deletedStatusInfo=!1}ngOnInit(){}ngOnChanges(){this.referenceId=this.referenceId,this.moduleId=this.moduleId,this.getAllMemoList()}dismissModel(){this.activeModal.close()}loadData(e){this.lazyLoadEventData=e;const t=parseInt(e.first)/e.rows;this.pageIndex=t,this.pageSize=e.rows,e.first=t}exportCSV(e){e._value=e._value.map(e=>Object.assign({},e,{createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MMM-dd-yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MMM-dd-yyyy hh:mm a"):""})),e.exportCSV()}closeDeleteModal(){n("#memodownloadConfirmation").modal("hide")}addMemo(){this.isEdit=!1,this.addList=[],this.addList.push({memoId:"",description:""})}edit(e,t){this.isEdit=!0,this.addList=[e]}deleteMemo(e){this.communicationService.deleteCommonMemoList(e.memoId,this.userName).subscribe(e=>{this.alertService.showMessage(this.moduleName,"Deleted Succesfully",o.d.success),this.getAllMemoList()},e=>{this.errorMessageHandler()})}openHistory(e){this.communicationService.getCOmmonMemoHistory(e.memoId).subscribe(e=>{this.documentauditHisory=e},e=>{this.errorMessageHandler()})}getColorCodeForHistory(e,t,s){const a=this.documentauditHisory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}dismissModelHistory(){n("#contentHistDocs").modal("hide")}deleteMemoConfirmation(e){this.deletingRow=e,n("#deleteRowConfirmation").modal("show")}saveMemo(){if(this.isEdit){n("#addNewMemo").modal("hide");let e=this.formData(this.addList[0]);this.isSpinnerVisible=!0,this.communicationService.updateCommonMemo(e).subscribe(e=>{this.isSpinnerVisible=!1,this.getAllMemoList()},e=>{this.errorMessageHandler()})}else{n("#addNewMemo").modal("hide");let e=this.formData(this.addList[0]);this.isSpinnerVisible=!0,this.communicationService.saveCommonMemo(e).subscribe(e=>{this.isSpinnerVisible=!1,this.getAllMemoList()},e=>{this.errorMessageHandler()})}this.addList=[]}formData(e){let t={MemoCode:0,ModuleId:this.moduleId,ReferenceId:this.referenceId,MasterCompanyId:this.authService.currentUser.masterCompanyId,CreatedBy:"admin",UpdatedBy:"admin",CreatedDate:new Date,UpdatedDate:new Date,IsActive:!0,IsDeleted:!1,Description:e.description};return this.isEdit&&(t.MemoId=e.memoId),t}restore(e,t){this.restorerecord=t,this.modal=this.modalService.open(e,{size:"sm",backdrop:"static",keyboard:!1})}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}restoreRecord(){this.communicationService.restoreMemo(this.restorerecord.memoId,!0,this.userName).subscribe(e=>{this.modal.close(),this.getDeleteListByStatus(!0),this.alertService.showMessage("Success","Successfully Updated Status",o.d.success)},e=>{this.errorMessageHandler()})}getViewData(e){this.viewdata=e}dismissModelRestore(){this.modal.close()}getDeleteListByStatus(e){this.deletedStatusInfo=e||!1,this.isSpinnerVisible=!0,this.getAllMemoList(),this.isSpinnerVisible=!1}getAllMemoList(){this.data=[],this.communicationService.getCommonMemoList(this.referenceId,this.moduleId,this.deletedStatusInfo).subscribe(e=>{e&&e.length>0?(e=e.map(e=>Object.assign({},e,{descriptionData:this.getString(e.description),createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MM/dd/yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MM/dd/yyyy hh:mm a"):""})),this.newdata=e.map((e,t)=>(e.SERIAL_NO=t+1,e)),this.data=this.newdata?this.newdata.reverse():[]):this.data=[],this.totalRecords=e.length,this.totalPages=Math.ceil(this.totalRecords/this.pageSize)},e=>{this.errorMessageHandler()})}pageIndexChange(e){this.pageSize=e.rows}getHtml(e,t){return"description"==t?n.parseHTML(e)[0]:e}getPageCount(e,t){return Math.ceil(e/t)}errorMessageHandler(){this.isSpinnerVisible=!1}getString(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}dateFilterForTable(e,t){e&&(e=c(e).format("MM/DD/YYYY"),c(e).format("MM/DD/YY"),""!=e&&c(e,"MM/DD/YYYY",!0).isValid())}};h.ctorParameters=()=>[{type:r.b},{type:l.a},{type:o.b},{type:d.a},{type:p.DatePipe},{type:r.c}],a.b([Object(i.Input)()],h.prototype,"workOrderId",void 0),a.b([Object(i.Input)()],h.prototype,"isView",void 0),a.b([Object(i.Input)()],h.prototype,"savedWorkOrderData",void 0),a.b([Object(i.Input)()],h.prototype,"selectedPartNumber",void 0),a.b([Object(i.Input)()],h.prototype,"customerContactList",void 0),a.b([Object(i.Input)()],h.prototype,"subWorkOrderDetails",void 0),a.b([Object(i.Input)()],h.prototype,"isSubWorkOrder",void 0),a.b([Object(i.Input)()],h.prototype,"subWOPartNoId",void 0),a.b([Object(i.Input)()],h.prototype,"moduleId",void 0),a.b([Object(i.Input)()],h.prototype,"referenceId",void 0),h=a.b([Object(i.Component)({selector:"app-common-memo",template:a.c(s("6fG1")).default,styles:[a.c(s("Oy8R")).default]})],h);var m=s("Hocb"),u=s("OlR4");let g=class{constructor(e,t,s,a,i,r,n){this.activeModal=e,this.communicationService=t,this.commonService=s,this.alertService=a,this.datePipe=i,this.authService=r,this.modalService=n,this.isView=!1,this.savedWorkOrderData=[],this.selectedPartNumber={},this.phoneViewData={},this.isEdit=!1,this.pageSize=10,this.viewPageSize=10,this.pageIndex=0,this.viewPageIndex=0,this.totalRecords=0,this.viewTotalRecords=0,this.selectedOnly=!1,this.employees=[],this.employeeList=[],this.data=[],this.viewdata=[],this.headers=[{field:"phoneNo",header:"Phone"},{field:"contactBy",header:"Contacted By"},{field:"notes",header:"Notes"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.selectedColumns=[{field:"phoneNo",header:"Phone"},{field:"contactBy",header:"Contacted By"},{field:"notesData",header:"Notes"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.addList=[],this.moduleName="Communication",this.isSpinnerVisible=!1,this.ContactList=[],this.setEditArray=[],this.editTextData={},this.arrayContactlist=[],this.restorerecord={},this.deletedStatusInfo=!1,this.disableUpdateButton=!1,this.documentauditHisory=[]}ngOnInit(){1==this.type?(this.headers.unshift({field:"customerContact",header:"Customer Contact"}),this.selectedColumns.unshift({field:"customerContact",header:"Customer Contact"})):(this.selectedColumns.unshift({field:"vendorContact",header:"Customer Contact"}),this.headers.unshift({field:"vendorContact",header:"Customer Contact"}))}ngOnChanges(){this.getAllPhoneList(),0==this.isView&&(this.getAllEmployees(""),1==this.type?this.customerContacts(""):this.vendorContacts("")),this.moduleId=this.moduleId,this.referenceId=this.referenceId,this.ContactList=this.ContactList}customerContacts(e){this.setEditArray=[],1==this.isEdit?this.setEditArray.push(this.customerContact.customerContactId?this.customerContact.customerContactId:0):this.setEditArray.push(0);const t=e||"";this.commonService.autoDropListCustomerContacts(this.commonContactId,t,20,this.setEditArray.join()).subscribe(e=>{this.ContactList=e.map(e=>Object.assign({},e,{contactId:e.contactId,firstName:e.customerContactName})),this.cusContactList=this.ContactList},e=>{})}vendorContacts(e){this.setEditArray=[],1==this.isEdit?this.setEditArray.push():this.setEditArray.push(0);const t=e||"";this.commonService.autoDropListVendorContacts(this.commonContactId,t,20,this.setEditArray.join()).subscribe(e=>{this.ContactList=e.map(e=>Object.assign({},e,{contactId:e.contactId,firstName:e.vendoreContactName})),this.cusContactList=this.ContactList},e=>{})}filterCustomerContact(e){1==this.type?void 0!==e.query&&null!==e.query?this.customerContacts(e.query):this.customerContacts(""):void 0!==e.query&&null!==e.query?this.vendorContacts(e.query):this.vendorContacts("")}contactSelected(e){console.log("ev",e),this.addList[0].phoneNo=e.workPhone}getmemo(){this.disableUpdateButton=!1}edit(e,t){this.isEdit=!0,this.disableUpdateButton=!0,console.log("edit Dt",e),this.editTextData=e,1==this.type?this.customerContact={contactId:e.customerContactId,firstName:e.customerContact}:this.customerContact={contactId:e.customerContactId,firstName:e.vendorContact},this.getAllEmployees(""),console.log("edit11 Dt",e),e.contactId==this.authService.currentEmployee.employeeId?e.contactId=this.authService.currentEmployee:setTimeout(()=>{this.addList[0].contactId=Object(m.d)("employeeId",e.contactId,this.employees)},1e3),this.addList=[Object.assign({},e)]}getAllEmployees(e=""){this.arrayContactlist=[],1==this.isEdit?this.editTextData&&"string"==typeof this.editTextData.contactId?this.arrayContactlist.push(this.editTextData?this.editTextData.contactId:0):this.arrayContactlist.push(this.editTextData?this.editTextData.contactId.value:0):this.arrayContactlist.push(0),this.commonService.autoCompleteSmartDropDownEmployeeList("firstName",e,!0,this.arrayContactlist.join()).subscribe(e=>{this.employees=e.map(e=>Object.assign({},e,{employeeId:e.value,name:e.label}))},e=>{this.errorMessageHandler()})}restore(e,t){this.restorerecord=t,this.modal=this.modalService.open(e,{size:"sm",backdrop:"static",keyboard:!1})}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}restoreRecord(){this.communicationService.restorePhone(this.restorerecord.communicationPhoneId,!0,this.userName).subscribe(e=>{this.modal.close(),this.getDeleteListByStatus(!0),this.alertService.showMessage("Success","Successfully Updated Status",o.d.success)},e=>{this.errorMessageHandler()})}dismissModelRestore(){this.modal.close()}getDeleteListByStatus(e){this.deletedStatusInfo=e||!1,this.getAllPhoneList()}getAllPhoneList(){this.isSpinnerVisible=!0,this.communicationService.getCommonPhoneData(this.referenceId,this.moduleId,this.deletedStatusInfo,this.type).subscribe(e=>{e=e.map(e=>Object.assign({},e,{notesData:this.getString(e.notes)})),this.isSpinnerVisible=!1,e&&0!=e.length&&(this.data=e.map(e=>Object.assign({},e,{createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MM/dd/yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MM/dd/yyyy hh:mm a"):""}))),this.totalRecords=e.length,this.totalPages=Math.ceil(this.totalRecords/this.pageSize)},e=>{this.errorMessageHandler()})}getString(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}dismissModel(){this.activeModal.close()}exportCSV(e){e._value=e._value.map(e=>Object.assign({},e,{createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MMM-dd-yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MMM-dd-yyyy hh:mm a"):""})),e.exportCSV()}closeDeleteModal(){n("#phonedownloadConfirmation").modal("hide")}loadData(e){this.lazyLoadEventData=e;const t=parseInt(e.first)/e.rows;this.pageIndex=t,e.first=t}addPhone(){this.isEdit=!1,this.addList=[],this.addList.push({phoneNo:"",contactId:this.authService.currentEmployee,notes:""}),this.ContactList.length>0&&this.ContactList.forEach(e=>{this.customerContact=e,this.addList[0].phoneNo=e.workPhone.trim()})}savePhone(){if(this.isEdit){let e=this.formData(this.addList);this.isSpinnerVisible=!0,this.communicationService.updateCommonPhone(e[0]).subscribe(e=>{this.disableUpdateButton=!0,this.isSpinnerVisible=!1,this.getAllPhoneList(),this.isEdit=!1},e=>{this.errorMessageHandler()})}else{let e=this.formData(this.addList);this.isSpinnerVisible=!0,this.communicationService.saveCommonPhone(e[0]).subscribe(e=>{this.isSpinnerVisible=!1,this.getAllPhoneList()},e=>{this.errorMessageHandler()})}this.addList=[],this.customerContact=null}formData(e){let t={PhoneNo:e[0].phoneNo,Notes:e[0].notes,ContactById:this.getEmpId(e[0].contactId),WorkOrderPartNo:this.partNo,customerContactId:(this.type,this.customerContact.contactId),ModuleId:this.moduleId,ReferenceId:this.referenceId,MasterCompanyId:this.authService.currentUser.masterCompanyId,CreatedBy:"admin",UpdatedBy:"admin",CreatedDate:"2019-12-31T04:30:28.21",UpdatedDate:"2019-12-31T04:30:28.21",IsActive:!0,IsDeleted:!1,Phonetype:this.type};return this.isEdit&&(t.communicationPhoneId=e[0].communicationPhoneId),[t]}getPhoneData(e){this.communicationService.getPhoneData(this.workOrderId,this.partNo,this.moduleId,e.phoneNo).subscribe(e=>{this.viewdata=e,this.viewTotalRecords=e.length,this.viewTotalPages=Math.ceil(this.totalRecords/this.pageSize)},e=>{this.errorMessageHandler()})}getEmpId(e){return e.employeeId?e.employeeId:null}filterEmployee(e){void 0!==e.query&&null!==e.query?this.getAllEmployees(e.query):this.getAllEmployees("")}showDeletePhoneConfirmation(e){this.deletingRecord=e,n("#deleteRowConfirmation").modal("show")}closeRestore(){n("#deleteRowConfirmation").modal("hide")}deletePhone(e){this.isSpinnerVisible=!0,this.communicationService.deleteCommonPhoneList(e.communicationPhoneId,this.userName).subscribe(e=>{this.isSpinnerVisible=!1,this.alertService.showMessage(this.moduleName,"Deleted Succesfully",o.d.success),this.getAllPhoneList()},e=>{this.errorMessageHandler()})}getPageCount(e,t){return Math.ceil(e/t)}pageIndexChange(e){this.pageSize=e.rows}viewPageIndexChange(e){this.viewPageSize=e.rows}phoneView(e){this.phoneViewData=e}dismissModelHistory(){n("#contentHistDocs").modal("hide")}openHistory(e){this.communicationService.getCOmmonPhoneHistory(e.communicationPhoneId,this.type).subscribe(e=>{this.documentauditHisory=e},e=>{this.errorMessageHandler()})}getColorCodeForHistory(e,t,s){const a=this.documentauditHisory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}errorMessageHandler(){this.isSpinnerVisible=!1}};g.ctorParameters=()=>[{type:r.b},{type:l.a},{type:u.a},{type:o.b},{type:p.DatePipe},{type:d.a},{type:r.c}],a.b([Object(i.Input)()],g.prototype,"moduleId",void 0),a.b([Object(i.Input)()],g.prototype,"referenceId",void 0),a.b([Object(i.Input)()],g.prototype,"workOrderId",void 0),a.b([Object(i.Input)()],g.prototype,"isView",void 0),a.b([Object(i.Input)()],g.prototype,"savedWorkOrderData",void 0),a.b([Object(i.Input)()],g.prototype,"selectedPartNumber",void 0),a.b([Object(i.Input)()],g.prototype,"commonContactId",void 0),a.b([Object(i.Input)()],g.prototype,"type",void 0),g=a.b([Object(i.Component)({selector:"app-common-phone",template:a.c(s("LPWc")).default,styles:[a.c(s("VQwj")).default]})],g);var b=s("v6zA");let v=class{constructor(e,t,s,a,i,r,n){this.activeModal=e,this.communicationService=t,this.datePipe=s,this.modalService=a,this.commonService=i,this.alertService=r,this.authService=n,this.isView=!1,this.savedWorkOrderData=[],this.selectedPartNumber={},this.isSubWorkOrder=!1,this.disableSaveMemo=!0,this.pageSize=10,this.pageIndex=0,this.selectedOnly=!1,this.totalRecords=0,this.employees=[],this.employeeList=[],this.data=[],this.headers=[{field:"mobile",header:"Mobile"},{field:"contactBy",header:"Contacted By"},{field:"notes",header:"Notes"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.selectedColumns=[{field:"mobile",header:"Mobile"},{field:"contactBy",header:"Contacted By"},{field:"notesData",header:"Notes"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.addList=[],this.moduleName="Communication",this.viewdata={},this.viewPageSize=10,this.viewPageIndex=0,this.viewTotalRecords=0,this.isSpinnerVisible=!1,this.phonePattern=Object(b.e)(),this.editTextData={},this.arrayContactlist=[],this.updateDisabledText=!0,this.restorerecord={},this.deletedStatusInfo=!1,this.documentauditHisory=[]}ngOnInit(){}ngOnChanges(){this.getAllTextList(),0==this.isView&&this.getAllEmployees(),this.referenceId=this.referenceId,this.moduleId=this.moduleId}dismissModel(){this.modal.close()}loadData(e){this.lazyLoadEventData=e;const t=parseInt(e.first)/e.rows;this.pageIndex=t,this.pageSize=e.rows,e.first=t}enableSaveMemo(){this.disableSaveMemo=!1}parsedText(e){if(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent}}onClickMemo(){this.memoPopupContent=this.addList[0].notes,this.disableSaveMemo=!0}onClickPopupSave(){this.addList[0].notes=this.memoPopupContent,this.memoPopupContent="",n("#text-memo-popup").modal("hide")}closeMemoModel(){n("#text-memo-popup").modal("hide")}addText(){this.isEdit=!1,this.addList=[],this.addList.push({mobile:"",contactId:this.authService.currentEmployee,notes:""})}patternMobilevalidationWithSpl(e){let t=String.fromCharCode(e.charCode);8==e.keyCode||/[0-9\+\-()\ ]/.test(t)||e.preventDefault()}edit(e,t){this.isEdit=!0,this.editTextData=e,console.log("Chnages",this.editTextData),this.updateDisabledText=!0,this.getAllEmployees(""),e.contactId==this.authService.currentEmployee.employeeId?e.contactId=this.authService.currentEmployee:setTimeout(()=>{this.addList[0].contactId=Object(m.d)("employeeId",e.contactId,this.employees)},1e3),this.addList=[Object.assign({},e)]}getAllEmployees(e=""){this.arrayContactlist=[],1==this.isEdit?this.editTextData&&"string"==typeof this.editTextData.contactId?this.arrayContactlist.push(this.editTextData?this.editTextData.contactId:0):this.arrayContactlist.push(this.editTextData?this.editTextData.contactId.value:0):this.arrayContactlist.push(0),this.commonService.autoCompleteSmartDropDownEmployeeList("firstName",e,!0,this.arrayContactlist.join()).subscribe(e=>{this.employees=e.map(e=>Object.assign({},e,{employeeId:e.value,name:e.label}))},e=>{this.errorMessageHandler()})}exportCSV(e){e._value=e._value.map(e=>Object.assign({},e,{createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MMM-dd-yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MMM-dd-yyyy hh:mm a"):""})),e.exportCSV()}closeDeleteModal(){n("#textdownloadConfirmation").modal("hide")}savePhone(){if(this.updateDisabledText=!0,this.isEdit){let e=this.formData(this.addList);this.isSpinnerVisible=!0,this.communicationService.updateCommonText(e[0]).subscribe(e=>{this.isSpinnerVisible=!1,this.getAllTextList(),this.isEdit=!1},e=>{this.errorMessageHandler()})}else{let e=this.formData(this.addList);this.isSpinnerVisible=!0,this.communicationService.saveCommonText(e[0]).subscribe(e=>{this.isSpinnerVisible=!1,this.getAllTextList()},e=>{this.errorMessageHandler()})}n("#addNewText").modal("hide"),this.addList=[]}formData(e){return e.map(e=>{let t={Mobile:e.mobile,Notes:e.notes,ContactById:this.getEmpId(e.contactId),WorkOrderPartNo:this.partNo,ModuleId:this.moduleId,ReferenceId:this.referenceId,MasterCompanyId:this.authService.currentUser.masterCompanyId,CreatedBy:"admin",UpdatedBy:"admin",CreatedDate:"2019-12-31T04:30:28.21",UpdatedDate:"2019-12-31T04:30:28.21",IsActive:!0,IsDeleted:!1};return this.isEdit&&(t.communicationTextId=e.communicationTextId),t})}getEmpId(e){return e.employeeId?e.employeeId:null}setvaliDate(){this.updateDisabledText=!1}filterEmployee(e){void 0!==e.query&&null!==e.query?this.getAllEmployees(e.query):this.getAllEmployees("")}restore(e,t){this.restorerecord=t,this.modal=this.modalService.open(e,{size:"sm",backdrop:"static",keyboard:!1})}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}dismissModelRestore(){this.modal.close()}restoreRecord(){this.communicationService.restoreText(this.restorerecord.communicationTextId,!0,this.userName).subscribe(e=>{this.modal.close(),this.getDeleteListByStatus(!0),this.alertService.showMessage("Success","Successfully Updated Status",o.d.success)},e=>{this.errorMessageHandler()})}getDeleteListByStatus(e){this.deletedStatusInfo=e||!1,this.getAllTextList()}getAllTextList(){this.isSpinnerVisible=!0,this.communicationService.getCOmmonTextList(this.referenceId,this.moduleId,this.deletedStatusInfo).subscribe(e=>{e&&0!=e.length&&(e=e.map(e=>Object.assign({},e,{notesData:this.getString(e.notes),createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MM/dd/yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MM/dd/yyyy hh:mm a"):""}))),this.isSpinnerVisible=!1,this.data=e,this.totalRecords=e.length,this.totalPages=Math.ceil(this.totalRecords/this.pageSize)},e=>{this.errorMessageHandler()})}getString(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}deleteText(e){this.isSpinnerVisible=!0,this.communicationService.deleteCommonTextList(e.communicationTextId,this.userName).subscribe(e=>{this.isSpinnerVisible=!1,this.alertService.showMessage(this.moduleName,"Deleted Succesfully",o.d.success),this.getAllTextList()},e=>{this.errorMessageHandler()})}pageIndexChange(e){this.pageSize=e.rows}getPageCount(e,t){return Math.ceil(e/t)}viewPageIndexChange(e){this.viewPageSize=e.rows}getViewData(e){this.viewdata=e}dismissModelHistory(){n("#contentHistDocs").modal("hide")}openHistory(e){this.communicationService.getCOmmonTextHistory(e.communicationTextId).subscribe(e=>{this.documentauditHisory=e})}getColorCodeForHistory(e,t,s){const a=this.documentauditHisory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}errorMessageHandler(){this.isSpinnerVisible=!1}enableSave(){}};v.ctorParameters=()=>[{type:r.b},{type:l.a},{type:p.DatePipe},{type:r.c},{type:u.a},{type:o.b},{type:d.a}],a.b([Object(i.Input)()],v.prototype,"moduleId",void 0),a.b([Object(i.Input)()],v.prototype,"referenceId",void 0),a.b([Object(i.Input)()],v.prototype,"workOrderId",void 0),a.b([Object(i.Input)()],v.prototype,"isView",void 0),a.b([Object(i.Input)()],v.prototype,"savedWorkOrderData",void 0),a.b([Object(i.Input)()],v.prototype,"selectedPartNumber",void 0),a.b([Object(i.Input)()],v.prototype,"customerContactList",void 0),a.b([Object(i.Input)()],v.prototype,"subWorkOrderDetails",void 0),a.b([Object(i.Input)()],v.prototype,"isSubWorkOrder",void 0),a.b([Object(i.Input)()],v.prototype,"subWOPartNoId",void 0),v=a.b([Object(i.Component)({selector:"app-common-text",template:a.c(s("0l2l")).default,styles:[a.c(s("jyDa")).default]})],v);var y=s("JPLv"),f=s("Q3MU"),S=s("IBlc");let I=class{constructor(e,t,s,a,i,r,n,o,l){this.activeModal=e,this.communicationService=t,this.commonService=s,this.datePipe=a,this.authService=i,this.modalService=r,this.salesQuoteService=n,this.alertService=o,this.configurations=l,this.isView=!1,this.selectedPartNumber={},this.ContactList=[],this.emailPattern=Object(b.a)(),this.formData=new FormData,this.pageSize=10,this.pageIndex=0,this.totalRecords=0,this.totalPages=0,this.data=[],this.headers=[{field:"emailType",header:"Email Type"},{field:"toEmail",header:"To Email"},{field:"subject",header:"Subject"},{field:"contactBy",header:"Contacted By"},{field:"contactDate",header:"Contact Date"}],this.selectedColumns=this.headers,this.addList=[],this.selectedOnly=!1,this.employeeList=[],this.employeesOriginalData=[],this.emailViewData={},this.customerDetails={},this.moduleName="Communication",this.isSpinnerVisible=!1,this.setEditArray=[],this.arrayContactlist=[],this.restorerecord={},this.documentauditHisory=[],this.deletedStatusInfo=!1,this.isEditMode=!1}ngOnInit(){1==this.type?this.headers.unshift({field:"customerContact",header:"Customer Contact"}):this.headers.unshift({field:"vendorContact",header:"Customer Contact"})}ngOnChanges(){0==this.isView&&(this.getAllEmployees(""),this.getAllEmailType("")),this.getAllEmail(),this.moduleId=this.moduleId,this.referenceId=this.referenceId}dismissModel(){this.modal.close()}filterCustomerContact(e){1==this.type?void 0!==e.query&&null!==e.query?this.customerContacts(e.query):this.customerContacts(""):void 0!==e.query&&null!==e.query?this.vendorContacts(e.query):this.vendorContacts("")}customerContacts(e){this.setEditArray=[],this.setEditArray.push(0);const t=e||"";this.commonService.autoDropListCustomerContacts(this.commonContactId,t,20,this.setEditArray.join()).subscribe(e=>{this.ContactList=e.map(e=>Object.assign({},e,{contactId:e.contactId,firstName:e.customerContactName})),this.cusContactList=this.ContactList},e=>{})}vendorContacts(e){this.setEditArray=[],this.setEditArray.push(0);const t=e||"";this.commonService.autoDropListVendorContacts(this.commonContactId,t,20,this.setEditArray.join()).subscribe(e=>{this.ContactList=e.map(e=>Object.assign({},e,{contactId:e.vendorContactId,firstName:e.vendoreContactName})),this.cusContactList=this.ContactList},e=>{})}loadData(e){this.lazyLoadEventData=e;const t=parseInt(e.first)/e.rows;this.pageIndex=t,this.pageSize=e.rows,e.first=t}addMemo(){this.isEditMode=!1,this.formData=new FormData,this.ContactList.length>0&&this.ContactList.forEach(e=>{console.log("cc",e),this.customerContact=e,this.contactSelected(e)}),this.bcc="",this.cc="",this.emailBody="",this.contactBy=this.authService.currentEmployee,this.subject="",this.emailTypes.forEach(e=>{"Manual"==e.label&&(this.emailType=e.value)}),this.fileUploadInput.clear(),this.addList.push({memoId:"",memo:""})}contactSelected(e){console.log("even",e),this.toEmail=e.email?e.email:""}showDeleteConfirmation(e){this.deletingRecord=e}delete(e){this.isSpinnerVisible=!0,this.communicationService.deleteCommonEmailList(e.emailId,this.userName).subscribe(()=>{this.isSpinnerVisible=!1,this.alertService.showMessage(this.moduleName,"Deleted Succesfully",o.d.success),this.getAllEmail()},e=>{this.errorMessageHandler()})}fileUpload(e){for(let t of e.files)this.formData.append(t.name,t)}removeFile(e){this.formData.delete(e.file.name)}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}send(e){if(e)if("SalesQuote"==this.CurrentModuleName){let e=this.emailQuotePopup;this.getQuotePDF(),this.modal=this.modalService.open(e,{size:"sm"})}else if("SalesOrder"==this.CurrentModuleName){let e=this.emailQuotePopup;this.getSOPDF(),this.modal=this.modalService.open(e,{size:"sm"})}else this.triggerMail()}triggerMailSalesQuote(){this.formData=new FormData,null==this.cc&&(this.cc=""),null==this.bcc&&(this.bcc="");const e={WorkOrderPartNo:this.selectedPartNumber.workOrderPartNumberId,fromEmail:S.a.FROM_EMAIL_FOR_SENDING_MAIL,toEmail:this.toEmail,masterCompanyId:this.authService.currentUser.masterCompanyId,cc:this.cc,bcc:this.bcc,subject:this.subject,emailBody:this.emailBody,moduleId:this.moduleId,referenceId:this.referenceId,createdBy:this.userName,updatedBy:this.userName,createdDate:new Date,updatedDate:new Date,isActive:!0,isDeleted:!1,contactById:this.contactBy.employeeId,emailType:this.emailType,Type:this.type,customerContact:(this.type,this.customerContact.contactId)};for(var t in e)this.formData.append(t,e[t]);this.isSpinnerVisible=!0,("SalesQuote"==this.CurrentModuleName||"SalesOrder"==this.CurrentModuleName)&&(this.closeModal(),n("#addNewMemo").modal("hide")),this.communicationService.saveAndUpdateEmail(this.formData).subscribe(e=>{this.isSpinnerVisible=!1,this.contactBy=null,this.emailType=null,this.cc="",this.bcc="",this.toEmail="",this.emailBody="",this.subject="","SalesQuote"!=this.CurrentModuleName&&n("#addNewMemo").modal("hide"),this.alertService.showMessage("Success","Successfully Sent Email",o.d.success),this.getAllEmail(),this.fileUploadInput&&this.fileUploadInput.clear()},e=>{this.errorMessageHandler()})}triggerMail(){const e={WorkOrderPartNo:this.partNo,fromEmail:S.a.FROM_EMAIL_FOR_SENDING_MAIL,toEmail:this.toEmail,masterCompanyId:this.authService.currentUser.masterCompanyId,cc:this.cc,bcc:this.bcc,subject:this.subject,emailBody:this.emailBody,moduleId:this.moduleId,referenceId:this.referenceId,createdBy:this.userName,updatedBy:this.userName,createdDate:new Date,updatedDate:new Date,isActive:!0,isDeleted:!1,contactById:this.contactBy.employeeId,emailType:this.emailType,customerContactId:1==this.type?this.customerContact.customerContactId:this.customerContact.vendorContactId,Type:this.type};for(var t in e)this.formData.append(t,e[t]);this.isSpinnerVisible=!0,n("#addNewMemo").modal("hide"),this.communicationService.saveAndUpdateEmail(this.formData).subscribe(e=>{this.isSpinnerVisible=!1,this.contactBy=null,this.emailType=null,this.cc="",this.bcc="",this.toEmail="",this.emailBody="",this.subject="",this.alertService.showMessage("Success","Successfully Sent Email",o.d.success),this.getAllEmail(),"SalesQuote"==this.CurrentModuleName&&this.closeModal()},e=>{this.errorMessageHandler()})}emailView(e){this.isSpinnerVisible=!0,this.communicationService.getEmailDataByEmailId(e.emailId).subscribe(e=>{this.isSpinnerVisible=!1,this.emailViewData=e},e=>{this.errorMessageHandler()})}downloadFileUpload(e){const t=`${this.configurations.baseUrl}/api/FileUpload/downloadattachedfile?filePath=${e}`;window.location.assign(t)}exportCSV(e){e._value=e._value.map(e=>Object.assign({},e,{contactDate:e.contactDate?this.datePipe.transform(e.contactDate,"MMM-dd-yyyy hh:mm a"):""})),e.exportCSV()}closeDeleteModal(){n("#emaildownloadConfirmation").modal("hide")}getQuotePDF(){this.isSpinnerVisible=!0,this.communicationService.soqsendmailpdfpreview(this.referenceId).subscribe(e=>{this.isSpinnerVisible=!1,this.pdfPath=e},e=>{this.errorMessageHandler()})}getSOPDF(){this.isSpinnerVisible=!0,this.communicationService.sosendmailpdfpreview(this.referenceId).subscribe(e=>{this.isSpinnerVisible=!1,this.pdfPath=e},e=>{this.errorMessageHandler()})}getAllEmployees(e=""){this.arrayContactlist.push(0),this.commonService.autoCompleteSmartDropDownEmployeeList("firstName",e,!0,this.arrayContactlist.join()).subscribe(e=>{this.employeeList=e.map(e=>Object.assign({},e,{employeeId:e.value,name:e.label}))},e=>{this.errorMessageHandler()})}filterEmployee(e){void 0!==e.query&&null!==e.query?this.getAllEmployees(e.query):this.getAllEmployees("")}filterEmployee1(e){if(this.employeeList=this.employeesOriginalData,void 0!==e.query&&null!==e.query){const t=[...this.employeesOriginalData.filter(t=>t.label.toLowerCase().includes(e.query.toLowerCase()))];this.employeeList=t}}restore(e,t){this.restorerecord=t,this.modal=this.modalService.open(e,{size:"sm",backdrop:"static",keyboard:!1})}restoreRecord(){this.communicationService.restoreEmail(this.restorerecord.emailId,!0,this.userName).subscribe(e=>{this.modal.close(),this.getDeleteListByStatus(!0),this.alertService.showMessage("Success","Successfully Updated Status",o.d.success)},e=>{this.errorMessageHandler()})}openHistory(e){this.communicationService.getCOmmonEmailHistory(e.emailId).subscribe(e=>{this.documentauditHisory=e},e=>{this.errorMessageHandler()})}getColorCodeForHistory(e,t,s){const a=this.documentauditHisory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}dismissModelRestore(){this.modal.close()}getDeleteListByStatus(e){this.deletedStatusInfo=e||!1,this.getAllEmail()}getAllEmail(){this.isSpinnerVisible=!0,this.communicationService.getCommonEmailList(this.referenceId,this.moduleId,this.deletedStatusInfo,this.type).subscribe(e=>{this.isSpinnerVisible=!1,e&&0!=e.length&&(this.data=e.map(e=>Object.assign({},e,{contactDate:e.contactDate?this.datePipe.transform(e.contactDate,"MM/dd/yyyy hh:mm a"):"",createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MM/dd/yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MM/dd/yyyy hh:mm a"):""})))},e=>{this.errorMessageHandler()})}getAllEmailType(e){this.setEditArray=[],this.setEditArray.push(0);const t=e||"";this.commonService.autoSuggestionSmartDropDownList("EmailType","EmailTypeId","Name",t,!0,20,this.setEditArray.join()).subscribe(e=>{this.emailTypes=e},e=>{this.errorMessageHandler()})}editEmail(e){this.toEmail=e.toEmail,this.cc=e.cc,this.bcc=e.bcc,this.subject=e.subject,this.emailBody=e.emailBody,this.contactBy=e.contactBy,this.emailType=e.emailType,this.isEditMode=!0}getPageCount(e,t){return Math.ceil(e/t)}closeModal(){this.modal.close(),this.fileUploadInput&&this.fileUploadInput.clear()}dismissModelHistory(){n("#contentHistDocs").modal("hide")}checkValidEmails(){let e=!1;var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(this.cc||this.bcc){if(e=!0,this.cc){let e=this.cc.split(","),s=!1;if(e.forEach(e=>{t.test(e)||(s=!0)}),s)return!0}if(this.bcc){let e=this.bcc.split(","),s=!1;if(e.forEach(e=>{t.test(e)||(s=!0)}),s)return!0}e=!1}return e}errorMessageHandler(){this.isSpinnerVisible=!1}downloadFile(e){}};I.ctorParameters=()=>[{type:r.b},{type:l.a},{type:u.a},{type:p.DatePipe},{type:d.a},{type:r.c},{type:f.a},{type:o.b},{type:y.a}],a.b([Object(i.Input)()],I.prototype,"moduleId",void 0),a.b([Object(i.Input)()],I.prototype,"CurrentModuleName",void 0),a.b([Object(i.Input)()],I.prototype,"referenceId",void 0),a.b([Object(i.ViewChild)("fileUploadInput",{static:!1})],I.prototype,"fileUploadInput",void 0),a.b([Object(i.Input)()],I.prototype,"workOrderId",void 0),a.b([Object(i.Input)()],I.prototype,"isView",void 0),a.b([Object(i.Input)()],I.prototype,"selectedPartNumber",void 0),a.b([Object(i.Input)()],I.prototype,"type",void 0),a.b([Object(i.Input)()],I.prototype,"commonContactId",void 0),a.b([Object(i.ViewChild)("emailQuotePopup",{static:!1})],I.prototype,"emailQuotePopup",void 0),I=a.b([Object(i.Component)({selector:"app-common-email",template:a.c(s("Wf8N")).default,encapsulation:i.ViewEncapsulation.None,styles:[a.c(s("wOIX")).default]})],I);var T=s("8YFm"),C=s("UPO+"),A=s("Mz6y"),x=s("NGzr"),D=s("DgWh"),M=s("Jfay"),w=s("s7LF"),P=s("sa3O");let N=class{constructor(e,t){this.activeModal=e,this.commonService=t,this.isViewMode=!1,this.memoStyle=!1,this.emailstyle=!1,this.phoneStyle=!1,this.textStyle=!1,this.attachmoduleList=[]}ngOnInit(){this.selectedTab(1),this.memoStyle=!0,this.idForContact=this.idForContact}ngOnChanges(){this.moduleName=this.moduleName,this.referenceId=this.referenceId,this.selectedTab(1),this.getModuleList(),this.memoStyle=!0}selectedTab(e){1==e?(this.memoStyle=!0,this.emailstyle=!1,this.phoneStyle=!1,this.textStyle=!1):2==e?(this.memoStyle=!1,this.emailstyle=!0,this.phoneStyle=!1,this.textStyle=!1):3==e?(this.memoStyle=!1,this.emailstyle=!1,this.phoneStyle=!0,this.textStyle=!1):4==e&&(this.memoStyle=!1,this.emailstyle=!1,this.phoneStyle=!1,this.textStyle=!0)}getModuleList(){this.commonService.smartDropDownList("Module","ModuleId","ModuleName").subscribe(e=>{this.attachmoduleList=e,this.attachmoduleList.forEach(e=>{e.label==this.moduleName&&(this.moduleId=e.value)})},e=>{})}};N.ctorParameters=()=>[{type:r.b},{type:u.a}],a.b([Object(i.Input)()],N.prototype,"referenceId",void 0),a.b([Object(i.Input)()],N.prototype,"isViewMode",void 0),a.b([Object(i.Input)()],N.prototype,"moduleName",void 0),a.b([Object(i.Input)()],N.prototype,"idForContact",void 0),a.b([Object(i.Input)()],N.prototype,"type",void 0),N=a.b([Object(i.Component)({selector:"app-communication",template:a.c(s("QbUr")).default,encapsulation:i.ViewEncapsulation.None,styles:[a.c(s("5Eom")).default]})],N),s.d(t,"a",(function(){return V}));let V=class{};V=a.b([Object(i.NgModule)({declarations:[h,g,v,I,N],imports:[p.CommonModule,T.TableModule,A.a,x.FileUploadModule,C.a,D.EditorModule,M.MultiSelectModule,w.FormsModule,P.AutoCompleteModule],exports:[h,g,v,I,N]})],V)},Oy8R:function(e,t,s){"use strict";s.r(t),t.default=".p_textEditor {\n  margin: 0;\n  padding: 0;\n}\n\n.btn-edit {\n  position: relative;\n  top: 4px;\n}"},QbUr:function(e,t,s){"use strict";s.r(t),t.default='<div>\r\n    <div class="mt-2" style="margin-bottom: 12px;">\r\n        \x3c!-- <ul class="nav nav-pills"> --\x3e\r\n           <button class="btn btn-default grayCls"  [ngClass]="memoStyle ? \'btn-primary\' : \'\'" style="margin-right: 3px; " (click)="selectedTab(1)">Memo</button>\r\n           <button class="btn btn-default grayCls" [ngClass]="emailstyle ? \'btn-primary\' : \'\'" style="margin-right: 3px; " (click)="selectedTab(2)" >Email</button>\r\n           <button class="btn btn-default grayCls" [ngClass]="phoneStyle ? \'btn-primary\' : \'\'" style="margin-right: 3px; " (click)="selectedTab(3)">Phone</button>\r\n           <button class="btn btn-default grayCls" [ngClass]="textStyle ? \'btn-primary\' : \'\'" style="margin-right: 3px; " (click)="selectedTab(4)" >Text</button>\r\n        \r\n    </div>\r\n    <div *ngIf="moduleId && referenceId">\r\n       <div *ngIf="memoStyle">\r\n        <app-common-memo [isView]="isViewMode" [moduleId]="moduleId" [referenceId]="referenceId"></app-common-memo>\r\n       </div>\r\n       <div *ngIf="emailstyle">\r\n            \x3c!-- type ==1 for customer, type==2 for vendor contacts --\x3e\r\n        <app-common-email [isView]="isViewMode" [type]="type" [commonContactId]="idForContact" [CurrentModuleName]="moduleName" [moduleId]="moduleId" [referenceId]="referenceId"></app-common-email>\r\n       </div>\r\n       <div *ngIf="phoneStyle">\r\n           \x3c!-- type ==1 for customer, type==2 for vendor contacts --\x3e\r\n        <app-common-phone [isView]="isViewMode" [type]="type"  [moduleId]="moduleId" [commonContactId]="idForContact" [referenceId]="referenceId"></app-common-phone>\r\n       </div>\r\n       <div *ngIf="textStyle">\r\n        <app-common-text [isView]="isViewMode" [moduleId]="moduleId" [referenceId]="referenceId"></app-common-text>\r\n       </div>\r\n    </div>\r\n</div>'},VQwj:function(e,t,s){"use strict";s.r(t),t.default='.select-read-only {\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  text-indent: 1px;\n  text-overflow: "";\n  box-shadow: none !important;\n}\n\nselect-read-only {\n  background-color: white !important;\n}\n\nselect:disabled {\n  background-color: white !important;\n}\n\ninput[type=number], input[type=text], input[type=email], select {\n  height: 24px !important;\n  border-radius: 5px !important;\n}'},Wf8N:function(e,t,s){"use strict";s.r(t),t.default='<div class="card new-card">\r\n    \x3c!-- <div class="col-md-12">\r\n        <h4 class="po-head-sm">\r\n            Communication - Email\r\n            <a href="#" data-toggle="modal" data-target="#addNewMemo" (click)="addMemo()" *ngIf="!isView">\r\n                <i class="fa fa-plus-circle fa-lg"></i></a>\r\n        </h4>\r\n    </div> --\x3e\r\n    <div class="card-header header">\r\n        <div class="row">\r\n          <div class="col">\r\n            <h4 class="header-name">  Communication - Email </h4>\r\n          </div>\r\n          <div>\r\n            <button *ngIf="!isView"   \r\n              type="button"\r\n              class="btn-sm header-button"\r\n              data-toggle="modal" data-target="#addNewMemo" (click)="addMemo()">\r\n             Create Email\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n<div class="card-body header-body">\r\n    <p-table #dt class="rpo-table-cstm rro-table-cstm ptable-f10" [value]="data" [first]="0" [rows]="pageSize"\r\n        [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10, 20, 50, 100]" [columns]="selectedColumns"\r\n        selectionMode="multiple" [metaKeySelection]="true" [lazy]="false" [resizableColumns]="true"\r\n        [reorderableColumns]="true" [totalRecords]="totalRecords" [scrollable]="true" scrollHeight="450px">\r\n        \x3c!--(onLazyLoad)="loadData($event)"--\x3e\r\n        <ng-template pTemplate="caption">\r\n  \r\n            <div class="row">\r\n                <div class="col">\r\n                    <p-multiSelect [options]="headers" [(ngModel)]="selectedColumns" [ngModelOptions]="{ standalone: true }"\r\n                    optionLabel="header" selectedItemsLabel="{0} columns selected"\r\n                    class="multiselect-field"\r\n                    defaultLabel="Choose Columns"></p-multiSelect>\r\n              \r\n              \r\n                </div>\r\n                \r\n            \t<div class="col">\r\n                    <div\t\t\t\t\t\r\n                      class="global-search-field inner-addon right-addon inline-block"\r\n                    >\r\n                    <i class="fa fa-search"></i>\r\n                    <input type="text" pInputText size="50" class="form-control"\r\n                        (input)="dt.filterGlobal($event.target.value, \'contains\')" placeholder=" Filter"\r\n                       />\r\n                </div>\r\n            </div>\r\n            </div>\r\n            <div class="row">\r\n            <div class="col">\r\n                <button type="button" class="btn btn-primary exports-button" matTooltip="Download Data" matTooltipPosition="above"\r\n                pButton icon="fa-download" iconPos="left" label="Export Data"\r\n                data-toggle="modal" \r\n                (click)="selectedOnly = false; targetData = dt;"\r\n                 data-target="#emaildownloadConfirmation"></button>\r\n            <button type="button" class="btn btn-primary exports-button" matTooltip="Download Selected Data"\r\n                matTooltipPosition="above" pButton icon="fa-download" iconPos="left" label="Export Selected Data"\r\n                (click)="dt.exportCSV({ selectionOnly: true })"></button>\r\n            </div>\r\n            <div class="pull-right buttons-div-align">\r\n                <div class="col">\r\n                  <div class="col buttons-top-padding">\r\n                  <div class="form-group" style="float: right;"> \r\n                 <div class="checkbox-cstm pull-left checkbox-align">\r\n                        <label class="checkbox-label-align">\r\n                            <input type="checkbox" [(ngModel)]="deletedStatusInfo" name="cparent55" id="cparent55" (click)="getDeleteListByStatus($event.target.checked)" />\r\n                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>\r\n                            Show  Deleted List\r\n                        </label>\r\n                    </div>\r\n                    </div>\r\n                    </div>\r\n\r\n              </div>\r\n          </div>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate="colgroup" let-columns>\r\n            <colgroup>\r\n                <col *ngFor="let col of columns" class="table-column-width">\r\n            </colgroup>\r\n        </ng-template>\r\n        <ng-template pTemplate="header" let-columns>\r\n            <tr>\r\n                <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn\r\n                    [pSortableColumn]="col.field">\r\n                    {{ col.header }}\r\n                    <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                </th>\r\n                <th class="table-actions-column">\r\n                    Actions\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">\r\n                    <input class="table-header-input-width" pInputText type="text" class="incorn_border" (input)="\r\n                            dt.filter($event.target.value, col.field, \'contains\')\r\n                        " />\r\n                </th>\r\n                <th class="table-actions-column" ></th>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate="body" let-rowData let-columns="columns">\r\n            <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData">\r\n                <td class="table-column-width" *ngFor="let col of columns" class="ui-resizable-column" pReorderableRowHandle>\r\n                    \x3c!-- {{rowData[col.field]}} --\x3e\r\n                    \x3c!-- <td *ngIf="col.field !=\'SERIAL_NO\' && col.field!=\'description\'"> --\x3e\r\n                        {{\r\n                            col.field == \'createdDate\'\r\n                              ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                              : rowData[col.field] && col.field == \'contactDate\'\r\n                              ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                              : rowData[col.field] \r\n                          }}\r\n                    \x3c!-- </td> --\x3e\r\n                </td>\r\n                <td class="action-icons-cstm table-column-width">\r\n                    \x3c!-- <button class="btn-edit ptable-wo-btns" mat-icon-button data-target="#addNewMemo" data-toggle="modal"\r\n                            (click)="editEmail(rowData)" matTooltip="Edit">\r\n                                <mat-icon>edit</mat-icon>\r\n                            </button> --\x3e\r\n                    <span ><a class="btn nobg btn-view-cstm" data-toggle="modal" data-target="#viewEmail"\r\n                            (click)="emailView(rowData)" matTooltip="View" matTooltipPosition="above"><i\r\n                                class="fa fa-eye"></i></a> </span>\r\n                    <span  *ngIf="deletedStatusInfo==false && !isView" data-toggle="modal" data-target="#deleteRowConfirmation"><a class="btn nobg btn-delete-cstm"\r\n                            (click)="showDeleteConfirmation(rowData)" matTooltip="Delete" matTooltipPosition="above"><i\r\n                                class="fa fa-trash"></i></a> </span>\r\n                    \x3c!-- <button class="btn btn-danger nobg" > (click)="data.splice(i, 1)"\r\n                                <a href="#" data-toggle="modal" data-target="#viewEmail" (click)="emailView(rowData)">\r\n                            <i _ngcontent-c313="" class="fa fa-eye view_icon_adjust"></i></a>\r\n                        </button> --\x3e\r\n                    \x3c!-- <button class="btn btn-danger nobg" (click)="addList.splice(i, 1)">\r\n                                <i class="fa fa-trash"></i>\r\n                            </button> --\x3e\r\n                            <span data-target="#contentHistDocs" data-toggle="modal"><a class="btn nobg" \r\n                                (click)="openHistory(rowData)"\r\n                                 matTooltip="History"  matTooltipPosition="above">\r\n                                 <i class="fa fa-history"></i></a></span>\r\n                            <span *ngIf="deletedStatusInfo==true && !isView">\r\n                                <a class="btn nobg" (click)="restore(restoreId,rowData);"  matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>\r\n                </td>\r\n            </tr>\r\n        </ng-template>\r\n        \x3c!-- <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer" class="footer">No\'of records:</label>\r\n                <input style="width: 5%;"\r\n                        [(ngModel)]="totalRecords"\r\n                        [disabled]="true"\r\n                        pInputText\r\n                        type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer" class="footer1">Pages Count:</label>\r\n                <input style="width: 5%;"\r\n                        [(ngModel)]="totalPages"\r\n                        [disabled]="true"\r\n                        pInputText\r\n                        type="text" />\r\n            </ng-template> --\x3e\r\n        <ng-template pTemplate="emptymessage" let-columns *ngIf="data.length == 0">\r\n            <tr>\r\n                <td colspan="7" class="no-records-cstm no-records-msg">\r\n                    No records found\r\n                </td>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate="summary" id="footer">\r\n            <label id="footer">Total:</label>\r\n            <input class="footer-input-width" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText type="text" />\r\n            &nbsp;&nbsp;\r\n            <label id="footer">Pages Count:</label>\r\n            <input class="footer-input-width" [ngModel]="getPageCount(dt._totalRecords, pageSize)" [disabled]="true" pInputText\r\n                type="text" />\r\n        </ng-template>\r\n    </p-table>\r\n    <ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">\r\n    \r\n        <div class="modal-header">\r\n            <h4 class="modal-title">Are You Sure Want to Restore?</h4>\r\n      \r\n            <button type="button" class="close" aria-label="Close" (click)="dismissModel()">\r\n                <span aria-hidden="true">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div class="modal-body" *ngIf="restorerecord">\r\n            <strong>\r\n               To Email:\r\n                <span class="new-label">{{restorerecord.toEmail}}</span>\r\n            </strong>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="button" class="btn btn-primary" (click)="restoreRecord()">Yes</button>\r\n            <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>\r\n        </div>\r\n      </ng-template> \r\n</div>\r\n</div>\r\n<div  id="contentHistDocs" #contentHistDocs class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-xlg">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n\r\n                <h4 class="modal-title">History of Email</h4>\r\n                <button type="button" class="close" aria-label="Close" (click)="dismissModelHistory()">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n        \r\n        \r\n            </div>\r\n            <div class="modal-body">\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Legal Entity Name: </label>\r\n                            <span class="span-header-red"\r\n                             style="text-transform: capitalize"> {{legalEntityName }}\r\n                             </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-4">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header"\r\n                             style="width: auto;">Company Code: </label>\r\n                            <span class="span-header-red" \r\n                            style="text-transform: capitalize"> {{legalEntityCode }} \r\n                        </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n                <div class="table-responsive history_hg">\r\n                    <table class="table table-bordered">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Email Type</th>\r\n                                <th>To Email</th>\r\n                                <th>CC </th>\r\n                                <th>BCC </th>\r\n                                <th>Subject</th>\r\n                                <th>Contacted By</th>\r\n                                <th>Contact Date</th>\r\n                                <th><span *ngIf="type==1">Customer</span> <span *ngIf="type==2">Vendor</span> Contact</th>\r\n                                <th>Email Content</th>\r\n                                <th>File Name</th>\r\n                                <th>Created Date</th>\r\n                                <th>Created By</th>\r\n                                <th> Updated Date</th>\r\n                                <th>Updated By</th>\r\n                                <th>Is Deleted</th>\r\n\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor="let audit of documentauditHisory; let i = index;">\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'emailType\', audit.emailType)  ? \'black\' : \'red\'  }">{{audit.emailType}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'toEmail\', audit.toEmail)  ? \'black\' : \'red\'  }">{{audit.toEmail}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'cc\', audit.cc)  ? \'black\' : \'red\'  }">{{audit.cc}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'bcc\', audit.bcc)  ? \'black\' : \'red\'  }">{{audit.bcc}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'subject\', audit.subject)  ? \'black\' : \'red\'  }">{{audit.subject}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'contactBy\', audit.contactBy)  ? \'black\' : \'red\'  }">{{audit.contactBy}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'contactDate\', audit.contactDate)  ? \'black\' : \'red\'  }">{{audit.contactDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                        \r\n                                <td *ngIf="type==1" [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'customerContact\', audit.customerContact)  ? \'black\' : \'red\'  }">{{audit.customerContact}}</td>\r\n                                <td *ngIf="type==2" [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'vendorContact\', audit.vendorContact)  ? \'black\' : \'red\'  }">{{audit.vendorContact}}</td>\r\n                                <td [ngStyle]="{\'color\': getColorCodeForHistory(i, \'emailBody\', audit.emailBody)  ? \'black\' : \'red\'  }">\r\n                                    <p [innerHTML]="audit.emailBody"></p>\r\n                                </td>\r\n                                <td>\r\n                                    <tr *ngFor="let x of audit.attachmentDetails">\r\n                                        <a [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'fileName\', audit.fileName)  ? \'black\' : \'red\'  }" class="filelink" (click)="downloadFile(x)"> {{x.fileName}} <span *ngIf="audit.attachmentDetails && audit.attachmentDetails.length>0">,</span></a>\r\n                                    </tr>\r\n                \r\n                \r\n                                 \r\n                                    </td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'createdDate\', audit.createdDate)  ? \'black\' : \'red\'  }">{{audit.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'createdBy\', audit.createdBy)  ? \'black\' : \'red\'  }">{{audit.createdBy}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'updatedDate\', audit.updatedDate)  ? \'black\' : \'red\'  }">{{audit.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'updatedBy\', audit.updatedBy)  ? \'black\' : \'red\'  }">{{audit.updatedBy}}</td>\r\n\r\n                                <td style="text-align: center;">\r\n                                    <span class="value">\r\n                                      <label class="wauto">\r\n                                          <input type="checkbox" name="isDeleted" [checked]="audit.isDeleted == true" disabled>\r\n                                      </label>\r\n                                    </span>\r\n                                  </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-danger" (click)="dismissModelHistory()">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal fade" id="emaildownloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">\r\n\t<div class="modal-dialog modal-sm">\r\n\t\t<div class="modal-content">\r\n\t\t\t<div class="modal-header">\r\n\t\t\t\t<button type="button" class="close" (click)="closeDeleteModal()">&times;</button>\r\n\t\t\t\t<h4 class="modal-title">Are You Sure Want to Download?</h4>\r\n\t\t\t</div>\r\n\t\t\t<div class="modal-body" *ngIf="targetData">\r\n\t\t\t\t<strong>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tYou are attempting to export {{targetData.totalRecords}} of records. \r\n\t\t\t\t\t</span> \r\n\t\t\t\t</strong>\r\n\t\t\t</div>\r\n\t\t\t<div class="modal-footer">\r\n\t\t\t\t<button type="button" class="btn btn-primary" (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeDeleteModal();">Confirm</button>\r\n\t\t\t\t<button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div id="addNewMemo" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog" style="margin-top:0%;">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title">Add Email</h4>\r\n\r\n\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                            </label>\r\n                            <span class="span-header-red" style="text-transform: capitalize">\r\n                                {{customerDetails.customerName}}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                            </label>\r\n                            <span class="span-header-red" style="text-transform: capitalize">\r\n                                {{customerDetails.customerCode}}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n            </div>\r\n            <form #attachDocForm="ngForm" class="form-horizontal" ngNativeValidate>\r\n                <div class="modal-body">\r\n                    <div class="form-row">\r\n                        <div class="col-md-12">\r\n                            <div class="col-md-6">\r\n                                <div class="form-group col-md-12">\r\n                                    <label>Email Type <span class="clr-red">*</span></label>\r\n                                    <select [(ngModel)]="emailType" class="form-control" name="emailType" required>\r\n                                        <option value="">Select</option>\r\n                                        <option *ngFor="let emailTy of emailTypes" [value]="emailTy.value">\r\n                                            {{emailTy.label}}</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div class="form-group col-md-12"> \r\n                                    <label class="col-md-12"><span *ngIf="type==1">Customer</span> <span *ngIf="type==2">Vendor</span> Contact <span class="clr-red">*</span></label>\r\n                                    <p-autoComplete field="firstName" [(ngModel)]="customerContact" required\r\n                                        name="cusContact" #cusContact="ngModel" errorMessage="Records not found"\r\n                                        [forceSelection]="true" [dropdown]="true" [suggestions]="cusContactList"\r\n                                        (completeMethod)="filterCustomerContact($event)" [size]="30" [minLength]="1"\r\n                                        (onSelect)="contactSelected($event)" class="p-autoComplete-ctsm">\r\n                                    </p-autoComplete>\r\n                                </div>\r\n                                <div class="form-group col-md-12">\r\n                                    <label>BCC</label>\r\n                                    <input class="form-control" type="email"  [pattern]="emailPattern" #bccEmail="ngModel"   name="bcc" [(ngModel)]="bcc"\r\n                                        multiple="true">\r\n\r\n                                       <div *ngIf="bccEmail.errors" [ngClass]="\'error\'"> \r\n                                            <div *ngIf="bccEmail.errors.pattern">\r\n                                                <span style="color:red">Email  not valid</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                            <div class="col-md-6">\r\n\r\n                                <div class="form-group col-md-12">\r\n                                    <label class="col-md-12">Contacted By <span class="clr-red">*</span></label>\r\n                                    \x3c!-- <select [(ngModel)]="contactBy" class="form-control" name="createdBy" required>\r\n                                    <option value="">Select</option>\r\n                                    <option *ngFor="let employee of employeeList" [value]="employee.employeeId">{{employee.firstName}}</option>\r\n                                </select> --\x3e\r\n                                    <p-autoComplete field="name" [(ngModel)]="contactBy" required name="employees"\r\n                                        #employees="ngModel" errorMessage="Records not found" [forceSelection]="true"\r\n                                        [dropdown]="true" [suggestions]="employeeList"\r\n                                        (completeMethod)="filterEmployee($event)" [size]="30" [minLength]="1"\r\n                                        [dropdown]="true" class="p-autoComplete-ctsm">\r\n                                    </p-autoComplete>\r\n                                </div>\r\n                                <div class="form-group col-md-12">\r\n                                    <label>Email To <span class="clr-red">*</span></label>\r\n                                    <input class="form-control" type="email" name="email" [(ngModel)]="toEmail" required\r\n                                        disabled>\r\n                                </div>\r\n                                <div class="form-group col-md-12" style="margin-top:-7px">\r\n                                    <label>CC</label>\r\n                                    <input class="form-control"  type="email" name="cc"  [pattern]="emailPattern" #ccEmail="ngModel" [(ngModel)]="cc" multiple="true">\r\n                                    <div *ngIf="ccEmail.errors" [ngClass]="\'error\'">  \r\n                                        <div *ngIf="ccEmail.errors.pattern">\r\n                                            <span style="color:red">Email  not valid</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="col-md-12 ">\r\n                            <div class="form-group">\r\n                                <label class="col-md-12">Email Subject <span class="clr-red">*</span></label>\r\n                                <input class="form-control" type="text" [(ngModel)]="subject" name="subject" rows="1"\r\n                                    required>\r\n                            </div>\r\n\r\n                            <div class="col-md-12">\r\n                                <div class="form-group">\r\n                                    <label>Email Body</label>\r\n                                    <p-editor class="p-editor-cstm" [(ngModel)]="emailBody" style="overflow-y: auto;;"\r\n                                        [style]="{\'height\':\'150px\'}" name="emailBody" required></p-editor>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class="col-md-12">\r\n                                <div class="form-group">\r\n                                    <label style="float: none;width: auto;">Attachments:</label>\r\n                                    <p-fileUpload #fileUploadInput name="fileupload[]" multiple="multiple"\r\n                                        [showCancelButton]="false" [showUploadButton]="false" customUpload="true"\r\n                                        (onSelect)="fileUpload($event)" (onRemove)="removeFile($event)"\r\n                                        class="form-control col-md-12 fileupload"></p-fileUpload>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \x3c!-- || checkValidEmails() --\x3e\r\n                    <div class="modal-footer" style="padding-top:0px; padding-bottom:0px;">\r\n                        <button type="submit" class="btn btn-primary btn-primary" (click)="send(attachDocForm.valid)"\r\n                            style="padding: 6px 12px !important;margin-top: 10px;"\r\n                            [disabled]="!attachDocForm.valid || bccEmail.errors || ccEmail.errors">\r\n                            Send\r\n                        </button>\r\n                        <button type="button" class="btn btn-danger" data-dismiss="modal"\r\n                            style="padding: 6px 12px !important;margin-top: 10px;">Close</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<div class="preloader" *ngIf="isSpinnerVisible">\r\n    <div class="loading">\r\n        <div class="lds-roller">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div id="deleteRowConfirmation" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-sm">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Are You Sure Want to Delete ?</h4>\r\n                <button type="button" class="close" aria-label="Close" data-dismiss="modal">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body" *ngIf="deletingRecord">\r\n                <strong>\r\n                   To Email:\r\n                    <span class="new-label">{{deletingRecord.toEmail}}</span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" data-dismiss="modal"\r\n                    (click)="delete(deletingRecord)">Yes</button>\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n<div id="viewEmail" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-sm">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title"> Email Details</h4>\r\n                \x3c!-- <div class="col-md-12 shadow-box-cstm">\r\n                    <div class="col-md-6">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header" style="width: auto;">Customer Name:\r\n                            </label>\r\n                            <span class="span-header-red" style="text-transform: capitalize">\r\n                                {{customerDetails.customerName}}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-md-6">\r\n                        <p class="fs12">\r\n                            <label class="control-label labels-font-header" style="width: auto;">Customer Code:\r\n                            </label>\r\n                            <span class="span-header-red" style="text-transform: capitalize">\r\n                                {{customerDetails.customerCode}}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                </div> --\x3e\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="col-sm-12">\r\n                    <p>\r\n                        <span class="label"><strong> Email Type <span class="clr-red">*</span> : </strong></span><span class="value">{{\r\n                            emailViewData.emailType\r\n                          }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong>To Email  <span class="clr-red">*</span> : </strong></span><span class="value">{{\r\n                            emailViewData.toEmail\r\n                          }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> CC: </strong></span><span class="value">{{\r\n                                emailViewData.cc\r\n                            }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> BCC: </strong></span><span class="value">{{\r\n                                emailViewData.bcc\r\n                            }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong>Subject <span class="clr-red">*</span>: </strong></span><span class="value">{{\r\n                                emailViewData.subject\r\n                            }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> Contacted By <span class="clr-red">*</span>: </strong></span><span class="value">{{\r\n                                emailViewData.contactBy\r\n                            }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> Contact Date: </strong></span><span class="value">{{\r\n                                emailViewData.contactDate | date: \'MM/dd/yyyy h:mm a \'\r\n                            }}</span>\r\n                    </p>\r\n                    <p>\r\n                        <span class="label"><strong> <span *ngIf="type==1">Customer</span><span *ngIf="type==2">Vendor</span> Contact : </strong></span><span class="value">\r\n                            <span *ngIf="type==1">  {{\r\n                                emailViewData.customerContact   \r\n                            }}</span>\r\n                            <span *ngIf="type==2"> {{\r\n                                emailViewData.vendorContact   \r\n                            }} </span>\r\n                           </span>\r\n                    </p>\r\n                    \r\n                    \x3c!-- <hr> --\x3e\r\n                    <p class="email-content">\r\n                        <span class="label" style="float: left;"><strong> Email Content: </strong></span>\r\n                        <span class="value" [innerHTML]="emailViewData.emailBody"></span>\r\n                    </p>\r\n                    <div>\r\n                        <label class="label"\r\n                            style="float:left;width: 30%; padding: 0;display: inline-block;">Attachments:</label>\r\n                        <ul style="list-style: none;">\r\n                            <li *ngFor="let attachment of emailViewData.attachmentDetails">\r\n                                {{attachment.fileName}} - <a class="filelink"\r\n                                    (click)="downloadFileUpload(attachment.link)">\r\n                                    {{ attachment.link }}</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="editor-buttons">\r\n                        <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n    </div>\r\n\r\n    <ng-template #emailQuotePopup let-c="close" let-d="dismiss">\r\n        <div class="modal-header">\r\n            <button type="button" class="close" data-dismiss="modal" (click)="closeModal()">&times;</button>\r\n            <h4 class="modal-title">Confirmation</h4>\r\n        </div>\r\n        <div class="modal-body">\r\n            <h6 >\r\n                Are you sure you want to send this Quote to Customer?\r\n            </h6>\r\n            <a style="padding:0px" class="filelink btn btn-link" (click)="downloadFileUpload(pdfPath)" target="_blank" download>Preview\r\n                Quote</a>\r\n            \x3c!-- <a href="{{pdfPath}}" class="btn btn-link" target="_blank" >Preview Quote</a> --\x3e\r\n        </div>\r\n        <div class="editor-buttons">\r\n\r\n            <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal" (click)="closeModal()">No</button>\r\n            <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"\r\n                (click)="triggerMailSalesQuote()">Yes</button>\r\n        </div>\r\n    </ng-template>'},"Y/47":function(e,t,s){"use strict";var a=s("mrSG"),i=s("8Y7J"),r=s("SVse");let n=class{constructor(){}ngOnInit(){}};n=a.b([Object(i.Component)({selector:"app-common-modules",template:a.c(s("JTuQ")).default,styles:[a.c(s("ZTpb")).default]})],n);var o,l=s("u9T3"),d=s("s7LF"),c=s("TSSN"),p=s("8YFm"),h=s("MCl+"),m=s("CYTX"),u=s("bv+N"),g=s("Jfay"),b=s("BY74"),v=s("I0ai"),y=s("3/N/"),f=s("sa3O"),S=s("Mz6y"),I=s("DgWh"),T=s("x0yz"),C=s("Q3MU"),A=s("ix9C"),x=s("EVdn"),D=s("iInd"),M=s("6W4t"),w=s("c0NH"),P=s("3LUQ"),N=s("OlR4"),V=s("0zL+"),k=s("lGQG"),O=s("slO+");!function(e){e.SalesOrderQuote="SOQ",e.PurchaseOrder="PO",e.SalesOrder="SO"}(o||(o={}));var L=s("Hocb"),E=s("rY54");let B=class{constructor(e,t,s,a,i,r,n){this.alertService=e,this.commonService=t,this.customerService=s,this._actRoute=a,this.authService=i,this.purchaseOrderService=r,this.salesQuoteService=n,this.firstNamesShipTo=[],this.firstNamesBillTo=[],this.shipToAddressList=[],this.shipToContactDataList=[],this.billToContactDataList=[],this.billToAddressList=[],this.sourcePoApprovalObj={},this.sourcePoApproval={},this.shipToAddress={},this.shipViaList=[],this.shipToSite=[],this.shipToContactData=[],this.vendorSelected=[],this.billToAddress={},this.isSpinnerVisible=!1,this.userTypes=[],this.userShipingList=[],this.userShipingIdList=[],this.userBillingList=[],this.userBillingIdList=[],this.isEditModeAdd=!1,this.enableAddSaveBtn=!1,this.isEditModeShipping=!1,this.isEditModeShippingPoOnly=!1,this.isEditModeBilling=!1,this.isEditModeBillingPoOnly=!1,this.isEditModeShipVia=!1,this.shippingModuleName="Company",this.billingingModuleName="Company",this.addressSiteNameHeader="",this.addressFormForShipping=new M.a,this.addressFormForBilling=new M.a,this.allCountriesList=[],this.countriesList=[],this.addShipViaFormForShipping=new w.a,this.allShipViaInfo=[],this.arrayBillingIdlist=[],this.changeName=!1,this.isSiteNameAlreadyExists=!1,this.editSiteName="",this.arrayShippingIdlist=[],this.isShippingSiteNameAlreadyExists=!1,this.tempAddshipViaMemo={},this.ShipViaHeader="",this.ShipViabutton=!1,this.ShipAddbutton=!1,this.billAddbutton=!1,this.defaultMSCOMPANYID=0}ngOnInit(){this.loadModuleListForVendorComp(),this.getCountriesList(),this.loadShippingViaList(),this.showIsPoOnlyButton=this.addressType==o.PurchaseOrder,this.sourcePoApproval.shipToUserTypeId=this.companyModuleId,this.sourcePoApproval.billToUserTypeId=this.companyModuleId,0!==this.id&&void 0!==this.id&&(this.addressType==o.PurchaseOrder?(this.ModuleID=E.a.PurchaseOrder,this.commonService.getAllAddEditID(this.id,this.ModuleID).subscribe(e=>{this.getShipToBillToDropDown(e)})):this.addressType==o.SalesOrderQuote?(this.ModuleID=E.a.SalesQuate,this.commonService.getAllAddEditID(this.id,this.ModuleID).subscribe(e=>{this.getShipToBillToDropDown(e)})):this.addressType==o.SalesOrder&&(this.ModuleID=E.a.SalesOrder,this.commonService.getAllAddEditID(this.id,this.ModuleID).subscribe(e=>{this.getShipToBillToDropDown(e)})))}getShipToBillToDropDown(e){const t=e;var s=9,a=9;t&&t.length>0&&(t.forEach(e=>{"SHIP_TYPE"==e.label?(s=e.value,this.sourcePoApproval.shipToUserTypeId=e.value):"BILL_TYPE"==e.label?(a=e.value,this.sourcePoApproval.billToUserTypeId=e.value):"BILL_USERID"==e.label?this.userBillingIdList.push(e.value):"SHIP_USERID"==e.label?this.userShipingIdList.push(e.value):"MSCOMPANYID"==e.label&&(this.defaultMSCOMPANYID=e.value,this.userBillingIdList.push(e.value),this.userShipingIdList.push(e.value))}),this.isSpinnerVisible=!0,this.userShipingIdList&&0==this.userShipingIdList.length&&this.userShipingIdList.push(0),this.commonService.autoSuggestionSmartuserDropDownList(s,"",!0,20,this.userShipingIdList.join()).subscribe(e=>{this.userShipingList=e,this.userBillingIdList&&0==this.userBillingIdList.length&&this.userBillingIdList.push(0),this.commonService.autoSuggestionSmartuserDropDownList(a,"",!0,20,this.userBillingIdList.join()).subscribe(e=>{this.userBillingList=e,this.getAddressById(this.id),this.isSpinnerVisible=!1},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}))}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}get currentUserMasterCompanyId(){return this.authService.currentUser?this.authService.currentUser.masterCompanyId:null}onAddShipMemo(){this.tempAddshipViaMemo=this.addShipViaFormForShipping.memo}onSaveTextAreaInfo(){this.addShipViaFormForShipping.memo=this.tempAddshipViaMemo,this.ShipViabutton=!0,x("#ship-via-memo").modal("hide")}filterBillingSite(e){if(this.lstfilterBillingSite=this.billingSieListOriginal,void 0!==e.query&&null!==e.query){const t=[...this.billingSieListOriginal.filter(t=>t.siteName.toLowerCase().includes(e.query.toLowerCase()))];this.lstfilterBillingSite=t}}checkShippingSiteNameExist(e){if(0==this.isEditModeShippingPoOnly&&0==this.isEditModeShipping){if(this.changeName=!0,this.isShippingSiteNameAlreadyExists=!1,this.ShipAddbutton=!0,null!=e&&null!=e&&this.shippingSieListOriginal&&0!=this.shippingSieListOriginal.length)for(let t=0;t<this.shippingSieListOriginal.length;t++)if((this.addressFormForShipping.siteName==this.shippingSieListOriginal[t].siteName||e.toLowerCase()==this.shippingSieListOriginal[t].siteName.toLowerCase())&&""!=this.addressFormForShipping.siteName)return this.isShippingSiteNameAlreadyExists=!0,void(this.ShipAddbutton=!1)}else if(this.changeName=!0,this.isShippingSiteNameAlreadyExists=!1,this.ShipAddbutton=!0,null!=e&&null!=e&&e!=this.editSiteName&&this.shippingSieListOriginal&&0!=this.shippingSieListOriginal.length)for(let t=0;t<this.shippingSieListOriginal.length;t++)if((this.addressFormForShipping.siteName==this.shippingSieListOriginal[t].siteName||e.toLowerCase()==this.shippingSieListOriginal[t].siteName.toLowerCase())&&""!=this.addressFormForShipping.siteName)return this.isShippingSiteNameAlreadyExists=!0,void(this.ShipAddbutton=!1)}checkShippingSiteNameSelect(){0==this.isEditModeShippingPoOnly&&0==this.isEditModeShipping||this.editSiteName!=Object(L.a)("siteName",this.addressFormForShipping.siteName)?(this.isShippingSiteNameAlreadyExists=!0,this.ShipAddbutton=!1):(this.isShippingSiteNameAlreadyExists=!1,this.ShipAddbutton=!0)}filterShippingSite(e){if(this.lstfilterShippingSite=this.shippingSieListOriginal,void 0!==e.query&&null!==e.query){const t=[...this.shippingSieListOriginal.filter(t=>t.siteName.toLowerCase().includes(e.query.toLowerCase()))];this.lstfilterShippingSite=t}}checkSiteNameExist(e){if(0==this.isEditModeBillingPoOnly&&0==this.isEditModeBilling){if(this.changeName=!0,this.isSiteNameAlreadyExists=!1,this.billAddbutton=!0,null!=e&&null!=e&&this.billingSieListOriginal&&0!=this.billingSieListOriginal.length)for(let t=0;t<this.billingSieListOriginal.length;t++)if((this.addressFormForBilling.siteName==this.billingSieListOriginal[t].siteName||e.toLowerCase()==this.billingSieListOriginal[t].siteName.toLowerCase())&&""!=this.addressFormForBilling.siteName)return this.isSiteNameAlreadyExists=!0,void(this.billAddbutton=!1)}else if(this.changeName=!0,this.isSiteNameAlreadyExists=!1,this.billAddbutton=!0,null!=e&&null!=e&&e!=this.editSiteName&&this.billingSieListOriginal&&0!=this.billingSieListOriginal.length)for(let t=0;t<this.billingSieListOriginal.length;t++)if((this.addressFormForBilling.siteName==this.billingSieListOriginal[t].siteName||e.toLowerCase()==this.billingSieListOriginal[t].siteName.toLowerCase())&&""!=this.addressFormForBilling.siteName)return this.isSiteNameAlreadyExists=!0,void(this.billAddbutton=!1)}checkSiteNameSelect(){0==this.isEditModeBillingPoOnly&&0==this.isEditModeBilling||this.editSiteName!=Object(L.a)("siteName",this.addressFormForBilling.siteName)?(this.isSiteNameAlreadyExists=!0,this.billAddbutton=!1):(this.isSiteNameAlreadyExists=!1,this.billAddbutton=!0)}loadShippingViaList(){this.commonService.smartDropDownList("ShippingVia","ShippingViaId","Name").subscribe(e=>{this.allShipViaInfo=e},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}getCountriesList(){this.commonService.smartDropDownList("Countries","countries_id","nice_name").subscribe(e=>{this.allCountriesList=e},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}filterCountries(e){if(this.countriesList=this.allCountriesList,void 0!==e.query&&null!==e.query){const t=[...this.allCountriesList.filter(t=>t.label.toLowerCase().includes(e.query.toLowerCase()))];this.countriesList=t}}loadModuleListForVendorComp(){this.commonService.getModuleListByUserType(this.addressType).subscribe(e=>{this.userTypes=e,this.userTypes.map(e=>{"COMPANY"==e.moduleName.toUpperCase()?this.companyModuleId=e.moduleId:"VENDOR"==e.moduleName.toUpperCase()?this.vendorModuleId=e.moduleId:"CUSTOMER"==e.moduleName.toUpperCase()&&(this.customerModuleId=e.moduleId)})},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}errorMessageHandler(e){const t=e;var s="";if(t.message){if(t.error&&t.error.errors&&t.error.errors.length>0)for(let e=0;e<t.error.errors.length;e++)s=s+t.error.errors[e].message+"<br/>";this.alertService.showMessage(t.error.message,s,P.d.error)}else this.alertService.showMessage("Error",e.error,P.d.error)}onModuleTypeChange(){9==this.sourcePoApproval.shipToUserTypeId?this.shippingModuleName="Company":2==this.sourcePoApproval.shipToUserTypeId?this.shippingModuleName="Vendor":1==this.sourcePoApproval.shipToUserTypeId&&(this.shippingModuleName="Customer")}onModuleBillTypeChange(){9==this.sourcePoApproval.billToUserTypeId?this.billingingModuleName="Company":2==this.sourcePoApproval.billToUserTypeId?this.billingingModuleName="Vendor":1==this.sourcePoApproval.billToUserTypeId&&(this.billingingModuleName="Customer")}clearInputShipTo(){this.sourcePoApproval.shipToUserId=0,this.sourcePoApproval.shipToAddressId=0,this.sourcePoApproval.shipToContactId=0,this.sourcePoApproval.shipToMemo="",this.sourcePoApproval.shipViaId=0,this.sourcePoApproval.shippingViaId=0,this.sourcePoApproval.shippingAccountNo="",this.shipToAddress={},this.shipViaList=[],this.shipToSite=[],this.vendorSelected=[],this.companySiteList_Shipping=[]}clearInputBillTo(){this.sourcePoApproval.billToUserId=0,this.sourcePoApproval.billToAddressId=0,this.sourcePoApproval.billToContactId=0,this.billToAddress={},this.sourcePoApproval.billToMemo="",this.billToSite=[],this.vendorSelectedForBillTo=[],this.companySiteList_Billing=[]}clearInputOnClickUserIdShipTo(){this.sourcePoApproval.shipToSiteId=0,this.sourcePoApproval.shipToAddressId=0,this.sourcePoApproval.shipToContactId=0,this.shipToAddress={},this.shipViaList=[],this.shipToSite=[],this.vendorSelected=[]}clearInputOnClickUserIdBillTo(){this.sourcePoApproval.billToSiteId=0,this.sourcePoApproval.billToAddressId=0,this.sourcePoApproval.billToContactId=0,this.billToSite=[],this.vendorSelected=[]}shipViaChange(){this.ShipViabutton=!0}shipAddChange(){this.ShipAddbutton=!0}billAddChange(){this.billAddbutton=!0}onEditShipVia(e,t){if("Add"==e)this.ShipViaHeader="Add Ship Via",this.resetAddressShipViaForm(),this.ShipViabutton=!0;else{if(this.ShipViaHeader="Edit Ship Via",this.shipViaList&&0!=this.shipViaList.length)for(var s=0;s<this.shipViaList.length;s++)this.shipViaList[s].shippingViaId==t&&(this.addShipViaFormForShipping.ShippingViaId=this.shipViaList[s].shippingViaId,this.addShipViaFormForShipping.shipViaId=this.shipViaList[s].shipViaId,this.addShipViaFormForShipping.shipVia=this.shipViaList[s].name,this.addShipViaFormForShipping.shippingAccountInfo=this.shipViaList[s].shippingAccountInfo,this.addShipViaFormForShipping.shippingId="",this.addShipViaFormForShipping.shippingURL="",this.addShipViaFormForShipping.memo=this.shipViaList[s].memo,this.addShipViaFormForShipping.isPrimary=this.shipViaList[s].isPrimary);this.ShipViabutton=!1,this.isEditModeShipVia=!0}}saveShipViaForShipTo(){return a.a(this,void 0,void 0,(function*(){this.sourcePoApproval.shipViaId=0,this.sourcePoApproval.shippingAccountNo="";const e=Object.assign({},this.addShipViaFormForShipping,{name:Object(L.g)("label","value",this.addShipViaFormForShipping.shipViaId,this.allShipViaInfo),createdBy:this.userName,updatedBy:this.userName,masterCompanyId:this.currentUserMasterCompanyId,isActive:!0,UserType:parseInt(this.sourcePoApproval.shipToUserTypeId)}),t=Object.assign({},e,{ReferenceId:this.sourcePoApproval.shipToUserId.userID,AddressId:this.sourcePoApproval.shipToSiteId?this.sourcePoApproval.shipToSiteId:0});this.isEditModeShipVia?yield this.commonService.createShipVia(t).subscribe(e=>{this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,0,0,e.shipViaId),this.enableAddSaveBtn=!0,this.alertService.showMessage("Success","Updated Ship Via Information Sucessfully",P.d.success)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}):yield this.commonService.createShipVia(t).subscribe(e=>{this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,0,0,e.shipViaId),this.enableAddSaveBtn=!0,this.alertService.showMessage("Success","Saved Ship Via Information Sucessfully ",P.d.success)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}),x("#shipToShipVia").modal("hide")}))}parsedText(e){if(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent}}getShipViaDetailsForShipTo(e){this.commonService.getShipViaDetailsByModule(this.sourcePoApproval.shipToUserTypeId,this.shipToSelectedvalue).subscribe(t=>{if(this.shipViaList=t,this.shipViaList&&0!=this.shipViaList.length)for(var s=0;s<this.shipViaList.length;s++)this.shipViaList[s].isPrimary&&(this.sourcePoApproval.shipViaId=this.shipViaList[s].shipViaId,this.getShipViaDetailsold(this.sourcePoApproval.shipViaId));e&&(this.sourcePoApproval.shipViaId=e,this.getShipViaDetailsold(e))},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}getShipViaDetailsold(e){this.sourcePoApproval.shippingAccountNo="";var t=this.sourcePoApproval.shipToUserTypeId?parseInt(this.sourcePoApproval.shipToUserTypeId):0;const s=e?Object(L.g)("shippingViaId","shipViaId",e,this.shipViaList):0;0!=s&&null!=s&&this.commonService.getShipViaDetailsById(s,t).subscribe(e=>{const t=e;this.sourcePoApproval.shippingAccountNo=t.shippingAccountInfo,this.sourcePoApproval.shipVia=t.shipVia},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}checkValidOnChange(e,t){null!=e&&0!=e&&"companyId"==t&&(this.managementValidCheck=!1),null!=e&&0!=e&&"shipToUserTypeId"==t&&(this.shipToUserTypeValidCheck=!1),null!=e&&0!=e&&"shipToSiteId"==t&&(this.shipToSiteNameValidCheck=!1),null!=e&&0!=e&&"shipViaId"==t&&(this.shipViaValidCheck=!1),null!=e&&0!=e&&"billToUserTypeId"==t&&(this.billToUserTypeValidCheck=!1),null!=e&&0!=e&&"billToSiteId"==t&&(this.billToSiteNameValidCheck=!1)}clearShipToContact(){}onShipToSelectedEdit(e,t,s){const a=t>0?t:this.sourcePoApproval.shipToUserTypeId,i=s>0?s:e.userID;i>0&&this.commonService.getaddressdetailsbyuser(a,i,"Ship",this.id).subscribe(e=>{this.shipViaList=e.shipVia,this.shipToAddressList=e.address,this.shipToAddress=e.address[0],this.shipToContactDataList=e.contacts,9==a?this.shippingModuleName="Company":2==a?this.shippingModuleName="Vendor":1==a&&(this.shippingModuleName="Customer"),this.shipToSite=e.site,this.shipToSite&&0!=this.shipToSite.length&&(this.shippingSieListOriginal=this.shipToSite.map(e=>({siteName:e.siteName,siteId:e.siteId}))),this.sourcePoApproval.shipToSiteId&&this.onShipToGetAddress(this.sourcePoApproval.shipToSiteId),this.sourcePoApproval.shippingViaId&&this.getShipViaDetails(this.sourcePoApproval.shippingViaId)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}onBillToSelectedEdit(e,t,s){const a=t>0?t:this.sourcePoApproval.billToUserTypeId,i=s>0?s:e.userID;i>0&&this.commonService.getaddressdetailsbyuser(a,i,"Bill",this.id).subscribe(e=>{this.billToAddressList=e.address,this.billToAddress=e.address[0],this.billToContactDataList=e.contacts,9==a?this.billingingModuleName="Company":2==a?this.billingingModuleName="Vendor":1==a&&(this.billingingModuleName="Customer"),this.billToSite=e.site,this.sourcePoApproval.billToSiteId&&this.onBillToGetAddress(this.sourcePoApproval.billToSiteId),this.billToSite&&0!=this.billToSite.length&&(this.billingSieListOriginal=this.billToSite.map(e=>({siteName:e.siteName,siteId:e.siteId})))},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}onShipToSelected(e,t,s,a,i,r){this.clearInputOnClickUserIdShipTo();const n=t>0?t:this.sourcePoApproval.shipToUserTypeId,o=s>0?s:e.userID;o>0&&this.commonService.getaddressdetailsbyuser(n,o,"Ship",this.id).subscribe(e=>{if(this.shipViaList=e.shipVia,this.shipToAddressList=e.address,this.shipToContactDataList=e.contacts,9==n?this.shippingModuleName="Company":2==n?this.shippingModuleName="Vendor":1==n&&(this.shippingModuleName="Customer"),this.shipToSite=e.site,a>0){if(this.shipToSite&&0!=this.shipToSite.length)for(var t=0;t<this.shipToSite.length;t++)this.shipToSite[t].siteId==a&&(this.sourcePoApproval.shipToSiteId=this.shipToSite[t].siteId,this.sourcePoApproval.shipToAddressId=this.shipToSite[t].addressId,this.onShipToGetAddress(this.shipToSite[t].siteId))}else if(this.shipToSite&&0!=this.shipToSite.length)for(t=0;t<this.shipToSite.length;t++)this.shipToSite[t].isPrimary&&(this.sourcePoApproval.shipToSiteId=this.shipToSite[t].siteId,this.sourcePoApproval.shipToAddressId=this.shipToSite[t].addressId,this.onShipToGetAddress(this.shipToSite[t].siteId));if(this.shipToContactDataList&&this.shipToContactDataList.length>0&&(this.sourcePoApproval.shipToContactId=this.shipToContactDataList[0].contactId),this.shipViaList&&this.shipViaList.length>0&&(this.sourcePoApproval.shippingViaId=this.shipViaList[0].shippingViaId,this.getShipViaDetails(this.sourcePoApproval.shippingViaId)),r>0&&this.shipViaList&&0!=this.shipViaList.length)for(let s=0;s<this.shipViaList.length;s++)this.shipViaList[s].shipViaId==r&&(this.sourcePoApproval.shippingViaId=this.shipViaList[s].shippingViaId,this.sourcePoApproval.shipViaId=this.shipViaList[s].shipViaId,this.sourcePoApproval.shipVia=this.shipViaList[s].name,this.sourcePoApproval.shippingAccountNo=this.shipViaList[s].shippingAccountInfo);this.shipToSite&&0!=this.shipToSite.length&&(this.shippingSieListOriginal=this.shipToSite.map(e=>({siteName:e.siteName,siteId:e.siteId}))),this.enableAddSaveBtn=!0},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}saveShipToShipViaDetailsToPO(){}closeMemoModel(){x("#ship-via-memo").modal("hide")}onBillToSelected(e,t,s,a,i){this.clearInputOnClickUserIdBillTo();const r=t>0?t:this.sourcePoApproval.billToUserTypeId,n=s>0?s:e.userID;n>0&&this.commonService.getaddressdetailsbyuser(r,n,"Bill",this.id).subscribe(e=>{if(this.billToAddressList=e.address,this.billToContactDataList=e.contacts,9==r?this.billingingModuleName="Company":2==r?this.billingingModuleName="Vendor":1==r&&(this.billingingModuleName="Customer"),this.billToSite=e.site,a>0){if(this.billToSite&&0!=this.billToSite.length)for(var t=0;t<this.billToSite.length;t++)this.billToSite[t].siteId==a&&(this.sourcePoApproval.billToSiteId=this.billToSite[t].siteId,this.sourcePoApproval.billToAddressId=this.billToSite[t].addressId,this.onBillToGetAddress(this.billToSite[t].siteId))}else if(this.billToSite&&0!=this.billToSite.length)for(t=0;t<this.billToSite.length;t++)this.billToSite[t].isPrimary&&(this.sourcePoApproval.billToSiteId=this.billToSite[t].siteId,this.sourcePoApproval.billToAddressId=this.billToSite[t].addressId,this.onBillToGetAddress(this.billToSite[t].siteId));this.billToContactDataList&&this.billToContactDataList.length>0&&(this.sourcePoApproval.billToContactId=this.billToContactDataList[0].contactId),this.billingSieListOriginal=this.billToSite.map(e=>({siteName:e.siteName,siteId:e.siteId})),this.enableAddSaveBtn=!0},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}onShipToGetAddress(e){if(this.shipToAddressList&&0!=this.shipToAddressList.length)for(let t=0;t<this.shipToAddressList.length;t++){if(this.shipToAddressList[t].siteID==e)return this.shipToAddress=this.shipToAddressList[t],this.sourcePoApproval.shipAddIsPoOnly=this.shipToAddressList[t].isPoOnly,this.sourcePoApproval.shipToSiteName=this.shipToAddressList[t].siteName,this.sourcePoApproval.shipToAddressId=this.shipToAddressList[t].addressId,this.sourcePoApproval.shipToAddress1=this.shipToAddressList[t].address1,this.sourcePoApproval.shipToAddress2=this.shipToAddressList[t].address2,this.sourcePoApproval.shipToCity=this.shipToAddressList[t].city,this.sourcePoApproval.shipToStateOrProvince=this.shipToAddressList[t].stateOrProvince,this.sourcePoApproval.shipToPostalCode=this.shipToAddressList[t].postalCode,this.sourcePoApproval.shipToCountryId=Object(L.e)("value",this.shipToAddressList[t].countryId,this.allCountriesList),void(this.sourcePoApproval.shipToCountry=this.shipToAddressList[t].country);this.shipToAddress={},this.sourcePoApproval.shipAddIsPoOnly=!1,this.sourcePoApproval.shipToSiteName="",this.sourcePoApproval.shipToAddressId=0,this.sourcePoApproval.shipToAddress1="",this.sourcePoApproval.shipToAddress2="",this.sourcePoApproval.shipToCity="",this.sourcePoApproval.shipToStateOrProvince="",this.sourcePoApproval.shipToPostalCode="",this.sourcePoApproval.shipToCountryId=0,this.sourcePoApproval.shipToCountry=""}}onBillToGetAddress(e){if(this.billToAddressList&&0!=this.billToAddressList.length)for(let t=0;t<this.billToAddressList.length;t++){if(this.billToAddressList[t].siteID==e)return this.billToAddress=this.billToAddressList[t],this.sourcePoApproval.billAddIsPoOnly=this.billToAddressList[t].isPoOnly,this.sourcePoApproval.billToSiteName=this.billToAddressList[t].siteName,this.sourcePoApproval.billToAddressId=this.billToAddressList[t].addressId,this.sourcePoApproval.billToAddress1=this.billToAddressList[t].address1,this.sourcePoApproval.billToAddress2=this.billToAddressList[t].address2,this.sourcePoApproval.billToCity=this.billToAddressList[t].city,this.sourcePoApproval.billToStateOrProvince=this.billToAddressList[t].stateOrProvince,this.sourcePoApproval.billToPostalCode=this.billToAddressList[t].postalCode,this.sourcePoApproval.billToCountryId=Object(L.e)("value",this.billToAddressList[t].countryId,this.allCountriesList),void(this.sourcePoApproval.billToCountry=this.billToAddressList[t].country);this.billToAddress={},this.sourcePoApproval.billAddIsPoOnly=!1,this.sourcePoApproval.billToSiteName="",this.sourcePoApproval.billToAddressId=0,this.sourcePoApproval.billToAddress1="",this.sourcePoApproval.billToAddress2="",this.sourcePoApproval.billToCity="",this.sourcePoApproval.billToStateOrProvince="",this.sourcePoApproval.billToPostalCode="",this.sourcePoApproval.billToCountryId=0,this.sourcePoApproval.billToCountry=""}}filterContactsForShipTo(e){if(this.firstNamesShipTo=this.shipToContactDataList,void 0!==e.query&&null!==e.query){const t=[...this.shipToContactDataList.filter(t=>t.name.toLowerCase().includes(e.query.toLowerCase()))];this.firstNamesShipTo=t}}filterUsersForShiping(e,t){void 0!==e.query&&null!==e.query&&this.getUserShipingList(e.query,t)}getUserShipingList(e="",t){this.userShipingIdList&&0==this.userShipingIdList.length&&this.userShipingIdList.push(0),this.commonService.autoSuggestionSmartuserDropDownList(t,e,!0,20,this.userShipingIdList.join()).subscribe(e=>{this.userShipingList=e},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}filterUsersForBilling(e,t){void 0!==e.query&&null!==e.query&&this.getUserBillingList(e.query,t)}getUserBillingList(e="",t){this.userBillingIdList&&0==this.userBillingIdList.length&&this.userBillingIdList.push(0),this.commonService.autoSuggestionSmartuserDropDownList(t,e,!0,20,this.userBillingIdList.join()).subscribe(e=>{this.userBillingList=e},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}clearBillToContact(){}getAddressById(e){this.isSpinnerVisible=!0,this.commonService.getAddressById(e,this.addressType,this.ModuleID).subscribe(e=>{this.sourcePoApproval={shipToPOAddressId:e[0].ShipToPOAddressId,shipToUserTypeId:e[0].ShipToUserType,shipToSiteId:e[0].ShipToSiteId,shipToSiteName:e[0].ShipToSiteName,shipAddIsPoOnly:e[0].ShipAddIsPoOnly,shipToContactId:e[0].ShipToContactId,shipToContact:e[0].ShipToContact,shipToMemo:e[0].ShipToMemo,shipToAddressId:e[0].ShipToAddressId,shipToAddress1:e[0].ShipToAddress1,shipToAddress2:e[0].ShipToAddress2,shipToCity:e[0].ShipToCity,shipToStateOrProvince:e[0].ShipToState,shipToPostalCode:e[0].ShipToPostalCode,shipToCountryId:e[0].ShipToCountryId?Object(L.e)("value",e[0].ShipToCountryId,this.allCountriesList):0,shipToCountry:e[0].ShipToCountryName,poShipViaId:e[0].POShipViaId,billToPOAddressId:e[0].BillToPOAddressId,billToUserTypeId:e[0].BillToUserType,billToSiteId:e[0].BillToSiteId,billToSiteName:e[0].BillToSiteName,billAddIsPoOnly:e[0].BillAddIsPoOnly,billToContactId:e[0].BillToContactId,billToContactName:e[0].BillToContactName,billToMemo:e[0].BillToMemo,billToAddressId:e[0].BillToAddressId,billToAddress1:e[0].BillToAddress1,billToAddress2:e[0].BillToAddress2,billToCity:e[0].BillToCity,billToStateOrProvince:e[0].BillToState,billToPostalCode:e[0].BillToPostalCode,billToCountryId:e[0].BillToCountryId?Object(L.e)("value",e[0].BillToCountryId,this.allCountriesList):0,billToCountry:e[0].BillToCountryName,shippingViaId:e[0].ShippingViaId,shipViaId:e[0].ShipViaId,shipVia:e[0].ShipVia,shippingCost:Object(L.b)(e[0].ShippingCost,2),handlingCost:Object(L.b)(e[0].HandlingCost,2),shippingAccountNo:e[0].ShippingAccountNo},this.shipToAddress={address1:this.sourcePoApproval.shipToAddress1,address2:this.sourcePoApproval.shipToAddress2,city:this.sourcePoApproval.shipToCity,stateOrProvince:this.sourcePoApproval.shipToStateOrProvince,country:this.sourcePoApproval.ShipToCountry,countryId:Object(L.h)("value",this.sourcePoApproval.ShipToCountryId),postalCode:this.sourcePoApproval.shipToPostalCode},this.billToAddress={address1:this.sourcePoApproval.billToAddress1,address2:this.sourcePoApproval.billToAddress2,city:this.sourcePoApproval.billToCity,stateOrProvince:this.sourcePoApproval.billToStateOrProvince,country:this.sourcePoApproval.billToCountry,countryId:Object(L.h)("value",this.sourcePoApproval.billToCountryId),postalCode:this.sourcePoApproval.billToPostalCode},this.sourcePoApproval&&this.sourcePoApproval.shipToUsertypeId&&(this.sourcePoApproval.shipToUsertypeId=this.sourcePoApproval.shipToUsertypeId),this.sourcePoApproval&&this.sourcePoApproval.billToUsertypeId&&(this.sourcePoApproval.billToUsertypeId=this.sourcePoApproval.billToUsertypeId),e[0].ShipToUserId&&e[0].ShipToUserId>0&&e[0].ShipToUserType&&e[0].ShipToUserType>0&&(this.sourcePoApproval.shipToUserId=Object(L.d)("userID",e[0].ShipToUserId,this.userShipingList),this.onShipToSelectedEdit(null,e[0].ShipToUserType,e[0].ShipToUserId)),e[0].BillToUserId&&e[0].BillToUserId>0&&e[0].BillToUserType&&e[0].BillToUserType>0&&(this.sourcePoApproval.billToUserId=Object(L.d)("userID",e[0].BillToUserId,this.userBillingList),this.onBillToSelectedEdit(null,e[0].BillToUserType,e[0].BillToUserId)),this.sourcePoApproval&&e[0].ShipToPOAddressId>0?(this.isEditModeAdd=!0,this.isSpinnerVisible=!1):(this.isEditModeAdd=!1,this.sourcePoApproval.shipToUserTypeId=this.companyModuleId,this.sourcePoApproval.billToUserTypeId=this.companyModuleId,this.defaultMSCOMPANYID>0&&(this.sourcePoApproval.shipToUserId=Object(L.d)("userID",this.defaultMSCOMPANYID,this.userShipingList),this.sourcePoApproval.billToUserId=Object(L.d)("userID",this.defaultMSCOMPANYID,this.userBillingList),this.sourcePoApproval.billToUserId&&this.sourcePoApproval.billToUserId.userID&&this.sourcePoApproval.billToUserId.userID>0&&this.onBillToSelected(this.sourcePoApproval.billToUserId),this.sourcePoApproval.shipToUserId&&this.sourcePoApproval.shipToUserId.userID&&this.sourcePoApproval.shipToUserId.userID>0&&this.onShipToSelected(this.sourcePoApproval.shipToUserId))),this.isSpinnerVisible=!1},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}resetAddressShippingForm(){this.addressFormForShipping=new M.a,this.isEditModeShipping=!1,this.isEditModeShippingPoOnly=!1}resetAddressBillingForm(){this.addressFormForBilling=new M.a,this.isEditModeBilling=!1,this.isEditModeBillingPoOnly=!1}getShipToUserIdEdit(e){this.getUserShipingList(e,e.moduleId)}enableAddSave(){this.enableAddSaveBtn=!0}onClickBillSiteName(e,t){if(this.resetAddressBillingForm(),"Add"===e&&(this.addressSiteNameHeader="Add Ship To "+this.billingingModuleName+" Details",this.billAddbutton=!0,this.editSiteName="",this.isEditModeBillingPoOnly=!1,this.isEditModeBilling=!1),"Edit"===e&&(this.addressSiteNameHeader="Edit Ship To "+this.billingingModuleName+" Details",this.billAddbutton=!1,this.sourcePoApproval.billAddIsPoOnly?this.isEditModeBillingPoOnly=!0:this.isEditModeBilling=!0,this.billToAddressList&&0!=this.billToAddressList.length))for(let s=0;s<this.billToAddressList.length;s++)if(this.billToAddressList[s].siteID==this.sourcePoApproval.billToSiteId)return this.addressFormForBilling.isPrimary=this.billToAddressList[s].isPrimary,this.addressFormForBilling.siteId=this.billToAddressList[s].siteID,this.editSiteName=this.billToAddressList[s].siteName,this.addressFormForBilling.siteName=Object(L.e)("siteName",this.billToAddressList[s].siteName,this.billingSieListOriginal),this.addressFormForBilling.addressID=this.billToAddressList[s].addressId,this.addressFormForBilling.address1=this.billToAddressList[s].address1,this.addressFormForBilling.address2=this.billToAddressList[s].address2,this.addressFormForBilling.city=this.billToAddressList[s].city,this.addressFormForBilling.stateOrProvince=this.billToAddressList[s].stateOrProvince,this.addressFormForBilling.postalCode=this.billToAddressList[s].postalCode,void(this.addressFormForBilling.countryId=Object(L.e)("value",this.billToAddressList[s].countryId,this.allCountriesList))}onClickShipSiteName(e,t){if(this.resetAddressShippingForm(),"Add"===e&&(this.addressSiteNameHeader="Add Ship To "+this.shippingModuleName+" Details",this.ShipAddbutton=!0,this.editSiteName="",this.isEditModeShippingPoOnly=!1,this.isEditModeShipping=!1),"Edit"===e&&(this.ShipAddbutton=!1,this.addressSiteNameHeader="Edit Ship To "+this.shippingModuleName+" Details",this.sourcePoApproval.shipAddIsPoOnly?this.isEditModeShippingPoOnly=!0:this.isEditModeShipping=!0,this.shipToAddressList&&0!=this.shipToAddressList.length))for(let s=0;s<this.shipToAddressList.length;s++)if(this.shipToAddressList[s].siteID==this.sourcePoApproval.shipToSiteId)return this.addressFormForShipping.isPrimary=this.shipToAddressList[s].isPrimary,this.addressFormForShipping.siteId=this.shipToAddressList[s].siteID,this.editSiteName=this.shipToAddressList[s].siteName,this.addressFormForShipping.siteName=Object(L.e)("siteName",this.shipToAddressList[s].siteName,this.shippingSieListOriginal),this.addressFormForShipping.addressID=this.shipToAddressList[s].addressId,this.addressFormForShipping.address1=this.shipToAddressList[s].address1,this.addressFormForShipping.address2=this.shipToAddressList[s].address2,this.addressFormForShipping.city=this.shipToAddressList[s].city,this.addressFormForShipping.stateOrProvince=this.shipToAddressList[s].stateOrProvince,this.addressFormForShipping.postalCode=this.shipToAddressList[s].postalCode,void(this.addressFormForShipping.countryId=Object(L.e)("value",this.shipToAddressList[s].countryId,this.allCountriesList))}saveShippingAddressToPO(){const e=Object.assign({},this.addressFormForShipping,{createdBy:this.userName,updatedBy:this.userName,masterCompanyId:this.currentUserMasterCompanyId,isActive:!0}),t=Object.assign({},e,{purchaseOrderID:this.id,isPoOnly:!0,siteName:Object(L.a)("siteName",e.siteName),userTypeId:this.sourcePoApproval.shipToUserTypeId,userId:this.sourcePoApproval.shipToUserId.userID,countryId:Object(L.h)("value",e.countryId)});this.isEditModeShippingPoOnly?this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,e),this.alertService.showMessage("Success","Shipping Information Updated Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}):this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,e,!0),this.alertService.showMessage("Success","Saved Shipping Information Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}saveShippingAddress(){const e=Object.assign({},this.addressFormForShipping,{createdBy:this.userName,updatedBy:this.userName,masterCompanyId:this.currentUserMasterCompanyId,isActive:!0}),t=Object.assign({},e,{userTypeId:this.sourcePoApproval.shipToUserTypeId,userId:this.sourcePoApproval.shipToUserId.userID,siteName:Object(L.a)("siteName",e.siteName),countryId:Object(L.h)("value",e.countryId)});this.isEditModeShipping?this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,e),this.alertService.showMessage("Success","Shipping Information Updated Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}):this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onShipToSelected(this.sourcePoApproval.shipToUserId,0,0,e),this.alertService.showMessage("Success","Saved Shipping Information Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}saveBillingAddress(){const e=Object.assign({},this.addressFormForBilling,{createdBy:this.userName,updatedBy:this.userName,masterCompanyId:this.currentUserMasterCompanyId,isActive:!0}),t=Object.assign({},e,{siteName:Object(L.a)("siteName",e.siteName),userTypeId:this.sourcePoApproval.billToUserTypeId,userId:this.sourcePoApproval.billToUserId.userID,countryId:Object(L.h)("value",e.countryId),addressType:"Bill"});this.isEditModeBilling?this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onBillToSelected(this.sourcePoApproval.billToUserId,0,0,e),this.alertService.showMessage("Success","Shipping Information Updated Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}):this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onBillToSelected(this.sourcePoApproval.billToUserId,0,0,e),this.alertService.showMessage("Success","Saved Shipping Information Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}saveBillingAddressToPO(){const e=Object.assign({},this.addressFormForBilling,{createdBy:this.userName,updatedBy:this.userName,masterCompanyId:this.currentUserMasterCompanyId,isActive:!0}),t=Object.assign({},e,{purchaseOrderID:this.id,isPoOnly:!0,siteName:Object(L.a)("siteName",e.siteName),userTypeId:this.sourcePoApproval.billToUserTypeId,userId:this.sourcePoApproval.billToUserId.userID,countryId:Object(L.h)("value",e.countryId),addressType:"Bill"});this.isEditModeShippingPoOnly?this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onBillToSelected(this.sourcePoApproval.billToUserId,0,0,e),this.alertService.showMessage("Success","Shipping Information Updated Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)}):this.commonService.createAllAddres(t).subscribe(e=>{e?(this.onBillToSelected(this.sourcePoApproval.billToUserId,0,0,e,!0),this.alertService.showMessage("Success","Saved Shipping Information Successfully",P.d.success)):this.alertService.showMessage("Error","Eroor While Saving Shipping Address",P.d.error)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}onChangeShippingHandlingCost(e){this.sourcePoApproval[e]=this.sourcePoApproval[e]?Object(L.b)(this.sourcePoApproval[e],2):"0.00"}getShipViaDetails(e){if(this.shipViaList&&0!=this.shipViaList.length)for(let t=0;t<this.shipViaList.length;t++)this.shipViaList[t].shippingViaId==e&&(this.sourcePoApproval.shippingViaId=this.shipViaList[t].shippingViaId,this.sourcePoApproval.shipViaId=this.shipViaList[t].shipViaId,this.sourcePoApproval.shipVia=this.shipViaList[t].name,this.sourcePoApproval.shippingAccountNo=this.shipViaList[t].shippingAccountInfo)}resetAddressShipViaForm(){this.addShipViaFormForShipping=new w.a,this.isEditModeShipVia=!1}postSiteNameForBilling(e,t){if(void 0!==e&&void 0!==t)return e=parseInt(e),Object(L.g)("siteName","siteId",t,this.billToSite)}postSiteNameForShipping(e,t){if(void 0!==e&&void 0!==t)return e=parseInt(e),Object(L.g)("siteName","siteId",t,this.shipToSite)}savePurchaseOrderAddress(){if(this.createPOAddressForm.invalid||0==this.sourcePoApproval.shipToUserTypeId||null==this.sourcePoApproval.shipToUserTypeId||0==this.sourcePoApproval.shipToUserId.userID||null==this.sourcePoApproval.shipToUserId.userID||0==this.sourcePoApproval.shipToSiteId||null==this.sourcePoApproval.shipToSiteId||0==this.sourcePoApproval.shipToContactId||null==this.sourcePoApproval.shipToContactId||0==this.sourcePoApproval.shippingViaId||null==this.sourcePoApproval.shippingViaId||0==this.sourcePoApproval.billToUserTypeId||null==this.sourcePoApproval.billToUserTypeId||0==this.sourcePoApproval.billToUserId.userID||null==this.sourcePoApproval.billToUserId.userID||0==this.sourcePoApproval.billToSiteId||null==this.sourcePoApproval.billToSiteId||0==this.sourcePoApproval.billToContactId||null==this.sourcePoApproval.billToContactId)this.alertService.showMessage("Address","Please enter required highlighted fields for Address!",P.d.error),this.inputValidCheckAdd=!0,0==this.sourcePoApproval.shipToUserTypeId&&(this.shipToUserTypeValidCheck=!0),0==this.sourcePoApproval.shipToSiteId&&(this.shipToSiteNameValidCheck=!0),0==this.sourcePoApproval.shippingViaId&&(this.shipViaValidCheck=!0),0==this.sourcePoApproval.billToUserTypeId&&(this.billToUserTypeValidCheck=!0),0==this.sourcePoApproval.billToAddressId&&(this.billToSiteNameValidCheck=!0);else{this.isSpinnerVisible=!0,this.getShipViaDetails(this.sourcePoApproval.shippingViaId),this.sourcePoApprovalObj={purchaseOrderId:this.id,moduleId:this.ModuleID,shipToPOAddressId:this.sourcePoApproval.shipToPOAddressId?this.sourcePoApproval.shipToPOAddressId:0,shipToUserTypeId:this.sourcePoApproval.shipToUserTypeId?parseInt(this.sourcePoApproval.shipToUserTypeId):0,shipToUserId:this.sourcePoApproval.shipToUserId&&this.sourcePoApproval.shipToUserId.userID?this.sourcePoApproval.shipToUserId.userID:0,shipToSiteId:this.sourcePoApproval.shipToSiteId?this.sourcePoApproval.shipToSiteId:0,shipToSiteName:this.postSiteNameForShipping(this.sourcePoApproval.shipToUserTypeId,this.sourcePoApproval.shipToSiteId),shipToMemo:this.sourcePoApproval.shipToMemo?this.sourcePoApproval.shipToMemo:"",shipToContactId:this.sourcePoApproval.shipToContactId?Object(L.a)("contactId",this.sourcePoApproval.shipToContactId):0,shipToContact:this.sourcePoApproval.shipToContactId?Object(L.g)("name","contactId",this.sourcePoApproval.shipToContactId,this.shipToContactDataList):"",shipAddIsPoOnly:this.sourcePoApproval.shipAddIsPoOnly,shipToAddressId:this.shipToAddress.addressId?this.shipToAddress.addressId:0,shipToAddress1:this.shipToAddress.address1,shipToAddress2:this.shipToAddress.address2,shipToAddress3:this.shipToAddress.address3,shipToCity:this.shipToAddress.city,shipToStateOrProvince:this.shipToAddress.stateOrProvince,shipToPostalCode:this.shipToAddress.postalCode,shipToCountry:this.shipToAddress.country,shipToCountryId:this.shipToAddress.countryId,billToPOAddressId:this.sourcePoApproval.billToPOAddressId?this.sourcePoApproval.billToPOAddressId:0,billToUserTypeId:this.sourcePoApproval.billToUserTypeId?parseInt(this.sourcePoApproval.billToUserTypeId):0,billToUserId:this.sourcePoApproval.billToUserId&&this.sourcePoApproval.billToUserId.userID?this.sourcePoApproval.billToUserId.userID:0,billToSiteId:this.sourcePoApproval.billToSiteId?this.sourcePoApproval.billToSiteId:0,billToSiteName:this.postSiteNameForBilling(this.sourcePoApproval.billToUserTypeId,this.sourcePoApproval.billToSiteId),billToMemo:this.sourcePoApproval.billToMemo?this.sourcePoApproval.billToMemo:"",billToContactId:this.sourcePoApproval.billToContactId?Object(L.a)("contactId",this.sourcePoApproval.billToContactId):0,billToContact:this.sourcePoApproval.billToContactId?Object(L.g)("name","contactId",this.sourcePoApproval.billToContactId,this.billToContactDataList):"",billAddIsPoOnly:this.sourcePoApproval.billAddIsPoOnly,billToAddressId:this.billToAddress.addressId?this.billToAddress.addressId:0,billToAddress1:this.billToAddress.address1,billToAddress2:this.billToAddress.address2,billToCity:this.billToAddress.city,billToStateOrProvince:this.billToAddress.stateOrProvince,billToPostalCode:this.billToAddress.postalCode,billToCountry:this.billToAddress.country,billToCountryId:this.billToAddress.countryId,poShipViaId:this.sourcePoApproval.poShipViaId?this.sourcePoApproval.poShipViaId:0,shipViaId:this.sourcePoApproval.shipViaId,shippingCost:this.sourcePoApproval.shippingCost?parseFloat(this.sourcePoApproval.shippingCost.toString().replace(/\,/g,"")):0,handlingCost:this.sourcePoApproval.handlingCost?parseFloat(this.sourcePoApproval.handlingCost.toString().replace(/\,/g,"")):0,shippingViaId:this.sourcePoApproval.shippingViaId,shipVia:this.sourcePoApproval.shipVia,shippingAccountNo:this.sourcePoApproval.shippingAccountNo,MasterCompanyId:this.currentUserMasterCompanyId,createdBy:this.userName,updatedBy:this.userName};const e=Object.assign({},this.sourcePoApprovalObj,{purchaseOrderId:parseInt(this.id)});this.SaveAllAddress(e),this.isSpinnerVisible=!1}}SaveAllAddress(e){this.commonService.saveAllAddress(Object.assign({},e)).subscribe(e=>{e.value.shipToPOAddressId&&e.value.shipToPOAddressId>0?(this.sourcePoApproval={shipToPOAddressId:e.value.shipToPOAddressId,shipToUserTypeId:e.value.shipToUserType,shipToUserId:Object(L.d)("userID",e.value.shipToUserId,this.userShipingList),shipToSiteId:e.value.shipToSiteId,shipToSiteName:e.value.shipToSiteName,shipAddIsPoOnly:e.value.shipAddIsPoOnly,shipToContactId:e.value.shipToContactId,shipToContact:e.value.shipToContact,shipToMemo:e.value.shipToMemo,shipToAddressId:e.value.shipToAddressId,shipToAddress1:e.value.shipToAddress1,shipToAddress2:e.value.shipToAddress2,shipToCity:e.value.shipToCity,shipToStateOrProvince:e.value.shipToState,shipToPostalCode:e.value.shipToPostalCode,ShipToCountryId:e.value.shipToCountryId?Object(L.e)("value",e.value.shipToCountryId,this.allCountriesList):0,poShipViaId:e.value.poShipViaId,billToPOAddressId:e.value.billToPOAddressId,billToUserTypeId:e.value.billToUserType,billToUserId:Object(L.d)("userID",e.value.billToUserId,this.userBillingList),billToSiteId:e.value.billToSiteId,billToSiteName:e.value.billToSiteName,billAddIsPoOnly:e.value.billAddIsPoOnly,billToContactId:e.value.billToContactId,billToContactName:e.value.billToContactName,billToMemo:e.value.billToMemo,billToAddressId:e.value.billToAddressId,billToAddress1:e.value.billToAddress1,billToAddress2:e.value.billToAddress2,billToCity:e.value.billToCity,billToStateOrProvince:e.value.billToState,billToPostalCode:e.value.billToPostalCode,billToCountryId:e.value.billToCountryId?Object(L.e)("value",e.value.billToCountryId,this.allCountriesList):0,shippingViaId:e.value.shippingViaId,shipViaId:e.value.shipViaId,shipVia:e.value.shipVia,shippingCost:Object(L.b)(e.value.shippingCost,2),handlingCost:Object(L.b)(e.value.handlingCost,2),shippingAccountNo:e.value.ShippingAccountNo},this.isEditModeAdd=!0):this.isEditModeAdd=!1,this.isSpinnerVisible=!1,this.enableAddSaveBtn=!1,this.getShipViaDetails(this.sourcePoApproval.shippingViaId),this.alertService.showMessage("Success","Address Saved Successfully",P.d.success)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}SavePurchaseOrderNew(e){this.purchaseOrderService.savePurchaseOrderAddress(Object.assign({},e)).subscribe(e=>{e.value.shipToPOAddressId&&e.value.shipToPOAddressId>0?(this.sourcePoApproval={shipToPOAddressId:e.value.shipToPOAddressId,shipToUserTypeId:e.value.shipToUserType,shipToUserId:Object(L.d)("userID",e.value.shipToUserId,this.userShipingList),shipToSiteId:e.value.shipToSiteId,shipToSiteName:e.value.shipToSiteName,shipAddIsPoOnly:e.value.shipAddIsPoOnly,shipToContactId:e.value.shipToContactId,shipToContact:e.value.shipToContact,shipToMemo:e.value.shipToMemo,shipToAddressId:e.value.shipToAddressId,shipToAddress1:e.value.shipToAddress1,shipToAddress2:e.value.shipToAddress2,shipToCity:e.value.shipToCity,shipToStateOrProvince:e.value.shipToState,shipToPostalCode:e.value.shipToPostalCode,ShipToCountryId:e.value.shipToCountryId?Object(L.e)("value",e.value.shipToCountryId,this.allCountriesList):0,poShipViaId:e.value.poShipViaId,billToPOAddressId:e.value.billToPOAddressId,billToUserTypeId:e.value.billToUserType,billToUserId:Object(L.d)("userID",e.value.billToUserId,this.userBillingList),billToSiteId:e.value.billToSiteId,billToSiteName:e.value.billToSiteName,billAddIsPoOnly:e.value.billAddIsPoOnly,billToContactId:e.value.billToContactId,billToContactName:e.value.billToContactName,billToMemo:e.value.billToMemo,billToAddressId:e.value.billToAddressId,billToAddress1:e.value.billToAddress1,billToAddress2:e.value.billToAddress2,billToCity:e.value.billToCity,billToStateOrProvince:e.value.billToState,billToPostalCode:e.value.billToPostalCode,billToCountryId:e.value.billToCountryId?Object(L.e)("value",e.value.billToCountryId,this.allCountriesList):0,shippingViaId:e.value.shippingViaId,shipViaId:e.value.shipViaId,shipVia:e.value.shipVia,shippingCost:Object(L.b)(e.value.shippingCost,2),handlingCost:Object(L.b)(e.value.handlingCost,2),shippingAccountNo:e.value.ShippingAccountNo},this.isEditModeAdd=!0):this.isEditModeAdd=!1,this.isSpinnerVisible=!1,this.enableAddSaveBtn=!1,this.getShipViaDetails(this.sourcePoApproval.shippingViaId),this.alertService.showMessage("Success","Address Saved Successfully",P.d.success)},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}SaveSalesOrderQuoteNew(e){this.salesQuoteService.saveSalesOrderQuoteAddress(Object.assign({},e)).subscribe(e=>{e.value.shipToPOAddressId&&e.value.shipToPOAddressId>0?(this.sourcePoApproval={shipToPOAddressId:e.value.shipToPOAddressId,shipToUserTypeId:e.value.shipToUserType,shipToUserId:Object(L.d)("userID",e.value.shipToUserId,this.userShipingList),shipToSiteId:e.value.shipToSiteId,shipToSiteName:e.value.shipToSiteName,shipAddIsPoOnly:e.value.shipAddIsPoOnly,shipToContactId:e.value.shipToContactId,shipToContact:e.value.shipToContact,shipToMemo:e.value.shipToMemo,shipToAddressId:e.value.shipToAddressId,shipToAddress1:e.value.shipToAddress1,shipToAddress2:e.value.shipToAddress2,shipToCity:e.value.shipToCity,shipToStateOrProvince:e.value.shipToState,shipToPostalCode:e.value.shipToPostalCode,ShipToCountryId:e.value.shipToCountryId?Object(L.e)("value",e.value.shipToCountryId,this.allCountriesList):0,poShipViaId:e.value.poShipViaId,billToPOAddressId:e.value.billToPOAddressId,billToUserTypeId:e.value.billToUserType,billToUserId:Object(L.d)("userID",e.value.billToUserId,this.userBillingList),billToSiteId:e.value.billToSiteId,billToSiteName:e.value.billToSiteName,billAddIsPoOnly:e.value.billAddIsPoOnly,billToContactId:e.value.billToContactId,billToContactName:e.value.billToContactName,billToMemo:e.value.billToMemo,billToAddressId:e.value.billToAddressId,billToAddress1:e.value.billToAddress1,billToAddress2:e.value.billToAddress2,billToCity:e.value.billToCity,billToStateOrProvince:e.value.billToState,billToPostalCode:e.value.billToPostalCode,billToCountryId:e.value.billToCountryId?Object(L.e)("value",e.value.billToCountryId,this.allCountriesList):0,shippingViaId:e.value.shippingViaId,shipViaId:e.value.shipViaId,shipVia:e.value.shipVia,shippingCost:Object(L.b)(e.value.shippingCost,2),handlingCost:Object(L.b)(e.value.handlingCost,2),shippingAccountNo:e.value.ShippingAccountNo},this.isEditModeAdd=!0):this.isEditModeAdd=!1,this.isSpinnerVisible=!1,this.enableAddSaveBtn=!1,this.getShipViaDetails(this.sourcePoApproval.shippingViaId),this.alertService.showMessage("Success","Saved Address Successfully",P.d.success)},e=>{this.isSpinnerVisible=!1})}onClickBillMemo(){this.addressMemoLabel="Edit Bill",this.tempMemo=this.sourcePoApproval.billToMemo}onClickShipMemo(){this.addressMemoLabel="Edit Ship",this.tempMemo=this.sourcePoApproval.shipToMemo}onSaveAddressMemo(){"Edit Ship"==this.addressMemoLabel&&(this.sourcePoApproval.shipToMemo=this.tempMemo),"Edit Bill"==this.addressMemoLabel&&(this.sourcePoApproval.billToMemo=this.tempMemo),this.enableAddSaveBtn=!0}};B.ctorParameters=()=>[{type:P.b},{type:N.a},{type:V.a},{type:D.ActivatedRoute},{type:k.a},{type:O.a},{type:C.a}],a.b([Object(i.Input)()],B.prototype,"addressType",void 0),a.b([Object(i.Input)()],B.prototype,"id",void 0),a.b([Object(i.ViewChild)("createPOAddressForm",{static:!1})],B.prototype,"createPOAddressForm",void 0),B=a.b([Object(i.Component)({selector:"app-address-component",template:a.c(s("FPgC")).default,styles:[a.c(s("ZDLp")).default]})],B);var F=s("G0yt"),U=s("XvK8");let H=class{constructor(e,t,s,a,i,r){this.poapprovalService=e,this.datePipe=t,this.modalService=s,this.authService=a,this.commonService=i,this.alertService=r,this.currentDeletedstatus=!1,this.currentStatus="Active",this.arrayEmplsit=[],this.enableSaveBtn=!1,this.checked=!0,this.unchecked=!1,this.pageIndex=0,this.totalRecords=0,this.totalRecordsemp=0,this.totalPages=0,this.poApprovalData=[],this.arrayLegalEntitylsit=[],this.maincompanylist=[],this.bulist=[],this.departmentList=[],this.divisionlist=[],this.taskID=3,this.poTaskID=3,this.soqTaskID=6,this.rowDataToDelete={},this.isSpinnerVisible=!1,this.pageSizeemp=5,this.pageSize=10,this.employeeNames=[],this.auditHistory=[],this.emplColumns=[{field:"employee",header:"Employee"},{field:"seqNo",header:"Seq No"}],this.newDataObject={approvalRuleId:0,approvalTaskId:null,ruleNumberId:0,amountId:null,value:null,lowerValue:null,upperValue:null,companyId:0,buId:0,divisionId:0,departmentId:0,enforceApproval:!1,approver:this.employeeNames,managementStructureId:this.currentUserManagementStructureId,memo:"",masterCompanyId:this.currentUserMasterCompanyId,createdBy:this.userName,updatedBy:this.userName,createdDate:new Date,updatedDate:new Date,isActive:!0,isDeleted:!1},this.dropdownSettings={},this.headers=[{field:"taskName",header:"Task Name"},{field:"ruleNo",header:"Rule No"},{field:"amount",header:"Amount"},{field:"value",header:"Value"},{field:"lowerValue",header:"Lower Value"},{field:"upperValue",header:"Upper Value"},{field:"companyName",header:"Level 01"},{field:"buName",header:"Level 02"},{field:"deptName",header:"Level 03"},{field:"divName",header:"Level 04"},{field:"approver",header:"Approver"},{field:"createdDate",header:"Created Date"},{field:"createdBy",header:"Created By"},{field:"updatedDate",header:"Updated Date"},{field:"updatedBy",header:"Updated By"}],this.selectedColumns=this.headers,this.isEdit=!1}onSaveChange(){this.enableSaveBtn=!0}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"value",textField:"label",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,allowSearchFilter:!1},this.getRuleNumber(),this.getPoAmountList(),this.creatingData=Object.assign({},this.newDataObject),"PO"==this.moduleType?this.moduleName="Purchase Order":"SOQ"==this.moduleType?this.moduleName="Sales Order Quote":"SO"==this.moduleType?this.moduleName="Sales Order":"RO"==this.moduleType&&(this.moduleName="Repair Order"),this.getTaskNames()}get currentUserMasterCompanyId(){return this.authService.currentUser?this.authService.currentUser.masterCompanyId:null}get employeeId(){return this.authService.currentUser?this.authService.currentUser.employeeId:0}get userName(){return this.authService.currentUser?this.authService.currentUser.userName:""}get currentUserManagementStructureId(){return this.authService.currentUser?this.authService.currentUser.managementStructureId:null}filterapprover(e){void 0!==e.query&&null!==e.query&&this.employeedata(e.query,this.creatingData.managementStructureId)}closeHistoryModal(){x("#approvalHistory").modal("hide")}handleChange(e,t){this.onSaveChange(),this.alertService.showMessage("Success","Approver Status change Successfully",P.d.success)}makePrimary(e){this.employeeNames.forEach(t=>{t.employeeId==e?(t.isPrimary=!0,t.seqNo=1):t.isPrimary=!1});var t=1;this.employeeNames.forEach(e=>{1==e.isPrimary?e.seqNo=1:(t+=1,e.seqNo=t)}),this.onSaveChange()}openDeletesemployee(e,t,s){this.tagIndex=s,this.tagRowData=t,this.modal=this.modalService.open(e,{size:"sm",backdrop:"static",keyboard:!1})}onAddApprover(){if(this.employeelist&&this.employeelist.value&&this.employeelist.value>0){var e=!0,t=!1,s=1;if(this.employeeNames.forEach(s=>{s.employeeId==this.employeelist.value&&(t=!0),1==s.isPrimary&&(e=!1)}),t)return void this.alertService.showMessage("Error","Employee Already Exists",P.d.error);e||(s=Math.max.apply(Math,this.employeeNames.map((function(e){return e.seqNo}))),s+=1),this.employeeNames.push({approverId:0,isPrimary:e,approvalRuleId:this.creatingData.approvalRuleId,seqNo:s,employeeId:this.employeelist.value,employee:this.employeelist.label,createdBy:this.userName,updatedBy:this.userName,createdDate:new Date,updatedDate:new Date,isActive:!0,isDeleted:!1}),this.employeeNames.map(e=>Object.assign({},e)),this.totalRecordsemp=this.employeeNames.length,this.alertService.showMessage("Success","Employee Added Successfully",P.d.success),this.onSaveChange()}}onDeleteTagName(){this.employeeNames.splice(this.tagIndex,1),this.modal.close(),this.alertService.showMessage("Success","Employee Deleted Successfully",P.d.success),this.onSaveChange()}dismissModel(){this.modal.close()}onClickMemo(){this.memoPopupContent=this.creatingData.memo}onClickPopupSave(){this.creatingData.memo=this.memoPopupContent,this.memoPopupContent="",x("#memo-popup").modal("hide")}closeMemoModel(){x("#memo-popup").modal("hide")}parsedText(e){if(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent}}getTaxPageCount(e,t){return e&&t&&e>t?Math.ceil(e/t):1}getManagementStructureDetails(e,t=0,s=0){t=0==t?this.employeeId:t,s=this.isEdit?s=e:0,this.commonService.getManagmentStrctureData(e,t,s).subscribe(e=>{if(e){const t=e;t[0]&&"Level1"==t[0].level?(this.maincompanylist=t[0].lstManagmentStrcture,this.creatingData.companyId=t[0].managementStructureId,this.creatingData.managementStructureId=t[0].managementStructureId,this.creatingData.buId=0,this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.bulist=[],this.divisionlist=[],this.departmentList=[]):(this.creatingData.companyId=0,this.creatingData.buId=0,this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.maincompanylist=[],this.bulist=[],this.divisionlist=[],this.departmentList=[]),t[1]&&"Level2"==t[1].level?(this.bulist=t[1].lstManagmentStrcture,this.creatingData.buId=t[1].managementStructureId,this.creatingData.managementStructureId=t[1].managementStructureId,this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.divisionlist=[],this.departmentList=[]):(t[1]&&"NEXT"==t[1].level&&(this.bulist=t[1].lstManagmentStrcture),this.creatingData.buId=0,this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.divisionlist=[],this.departmentList=[]),t[2]&&"Level3"==t[2].level?(this.divisionlist=t[2].lstManagmentStrcture,this.creatingData.divisionId=t[2].managementStructureId,this.creatingData.managementStructureId=t[2].managementStructureId,this.creatingData.departmentId=0,this.departmentList=[]):(t[2]&&"NEXT"==t[2].level&&(this.divisionlist=t[2].lstManagmentStrcture),this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.departmentList=[]),t[3]&&"Level4"==t[3].level?(this.departmentList=t[3].lstManagmentStrcture,this.creatingData.departmentId=t[3].managementStructureId,this.creatingData.managementStructureId=t[3].managementStructureId):(this.creatingData.departmentId=0,t[3]&&"NEXT"==t[3].level&&(this.departmentList=t[3].lstManagmentStrcture))}},e=>{this.isSpinnerVisible=!1;const t=e;this.errorMessageHandler(t)})}employeedata(e="",t=0,s=!1){0==this.arrayEmplsit.length&&this.arrayEmplsit.push(0),this.arrayEmplsit.push(null==this.employeeId?0:this.employeeId),this.commonService.autoCompleteDropdownsEmployeeByMS(e,!0,20,this.arrayEmplsit.join(),t).subscribe(e=>{this.approverList=e,s&&this.employeeNames.forEach(e=>{e.employee=Object(L.g)("label","value",e.employeeId,this.approverList)})},e=>{const t=e;this.errorMessageHandler(t)})}getBUList(e){this.creatingData.buId=0,this.creatingData.divisionId=0,this.creatingData.departmentId=0,this.bulist=[],this.divisionlist=[],this.departmentList=[],0!=e&&null!=e&&null!=e?(this.creatingData.managementStructureId=e,this.creatingData.companyId=e,this.commonService.getManagementStructurelevelWithEmployee(e,this.employeeId).subscribe(e=>{this.bulist=e})):(this.creatingData.managementStructureId=0,this.creatingData.companyId=0),this.employeedata("",this.creatingData.managementStructureId),this.onSaveChange()}getDivisionlist(e){this.divisionlist=[],this.departmentList=[],this.creatingData.divisionId=0,this.creatingData.departmentId=0,0!=e&&null!=e&&null!=e?(this.creatingData.managementStructureId=e,this.creatingData.buId=e,this.commonService.getManagementStructurelevelWithEmployee(e,this.employeeId).subscribe(e=>{this.divisionlist=e})):this.creatingData.managementStructureId=this.creatingData.companyId,this.employeedata("",this.creatingData.managementStructureId),this.onSaveChange()}getDepartmentlist(e){this.creatingData.departmentId=0,this.departmentList=[],0!=e&&null!=e&&null!=e?(this.creatingData.divisionId=e,this.creatingData.managementStructureId=e,this.commonService.getManagementStructurelevelWithEmployee(e,this.employeeId).subscribe(e=>{this.departmentList=e})):(this.creatingData.managementStructureId=this.creatingData.buId,this.creatingData.divisionId=0),this.employeedata("",this.creatingData.managementStructureId),this.onSaveChange()}getDepartmentId(e){0!=e&&null!=e&&null!=e?(this.creatingData.managementStructureId=e,this.creatingData.departmentId=e):(this.creatingData.managementStructureId=this.creatingData.divisionId,this.creatingData.departmentId=0),this.employeedata("",this.creatingData.managementStructureId),this.onSaveChange()}errorMessageHandler(e){this.alertService.showMessage("Error",e.error,P.d.error)}addNewApproval(){this.creatingData=Object.assign({},this.newDataObject),"PO"==this.moduleType&&(this.moduleName="Purchase Order",this.creatingData.approvalTaskId=this.taskID),"SOQ"==this.moduleType&&(this.moduleName="Sales Order Quote",this.creatingData.approvalTaskId=this.taskID),"RO"==this.moduleType&&(this.moduleName="Repair Order",this.creatingData.approvalTaskId=this.taskID),"SO"==this.moduleType&&(this.moduleName="Sales Order",this.creatingData.approvalTaskId=this.taskID),this.getManagementStructureDetails(this.currentUserManagementStructureId,this.employeeId),this.creatingData.managementStructureId=this.currentUserManagementStructureId,this.arrayEmplsit=[],this.employeedata("",this.currentUserManagementStructureId),this.employeeNames=[]}getTaskNames(){return a.a(this,void 0,void 0,(function*(){this.isSpinnerVisible=!0,yield this.commonService.smartDropDownList("ApprovalTask","ApprovalTaskId","Name").subscribe(e=>{this.taskNameList=e,e.forEach(e=>{("PO Approval"==e.label&&"PO"==this.moduleType||"Sales Quote Approval"==e.label&&"SOQ"==this.moduleType||"RO Approval"==e.label&&"RO"==this.moduleType||"SO Approval"==e.label&&"SO"==this.moduleType)&&(this.taskID=e.value)}),this.creatingData.approvalTaskId=this.taskID,this.getPoApprovalList(this.taskID),this.isSpinnerVisible=!1},e=>{this.isSpinnerVisible=!1})}))}getRuleNumber(){return a.a(this,void 0,void 0,(function*(){yield this.commonService.smartDropDownList("ApprovalRuleNo","ApprovalRuleNoId","RuleNo").subscribe(e=>{this.ruleNumList=e})}))}getPoAmountList(){return a.a(this,void 0,void 0,(function*(){yield this.commonService.smartDropDownList("ApprovalAmount","ApprovalAmountId","Name").subscribe(e=>{this.approvalAmountList=e})}))}savePoApproval(){this.creatingData.approver=this.employeeNames,this.creatingData.updatedBy=this.userName,this.creatingData.updatedDate=new Date;var e=0;this.employeeNames.forEach(t=>{t.isActive&&e++}),5==this.creatingData.amountId&&this.creatingData.lowerValue&&this.creatingData.upperValue&&Number(this.creatingData.lowerValue)>Number(this.creatingData.upperValue)?this.alertService.showMessage("Error","Upper Value Should be grater than lower Value.",P.d.error):0!=e?(5==this.creatingData.amountId?this.creatingData.value=0:(this.creatingData.lowerValue=0,this.creatingData.upperValue=0),this.poapprovalService.createapprovalrulecommon(this.creatingData).subscribe(e=>{this.alertService.showMessage("Success",`Record ${this.isEdit?"Updated":"Created"} successfully`,P.d.success),this.getPoApprovalList(this.taskID),x("#addNewPOApproval").modal("hide")})):this.alertService.showMessage("Error","Aleast one Active Approver Required.",P.d.error)}getDeleteListByStatus(e){this.currentDeletedstatus=e,this.getPoApprovalList(this.taskID)}changeRuleStatus(e){this.isSpinnerVisible=!0,this.poapprovalService.updateActionforActive(e.approvalRuleId,e.isActive,this.userName).subscribe(e=>{this.isSpinnerVisible=!1,this.getPoApprovalList(this.taskID),this.alertService.showMessage("Success","Approval Rule Status change Successfully",P.d.success)},e=>{this.isSpinnerVisible=!1})}getruleByStatus(e){this.currentStatus=e,this.getPoApprovalList(this.taskID)}getPoApprovalList(e){this.isSpinnerVisible=!0,this.poapprovalService.getAllApprovalDataByTaskId(e,this.currentDeletedstatus,this.currentStatus).subscribe(e=>{this.poApprovalData=e.map(e=>Object.assign({},e,{createdDate:e.createdDate?this.datePipe.transform(e.createdDate,"MM/dd/yyyy hh:mm a"):"",updatedDate:e.updatedDate?this.datePipe.transform(e.updatedDate,"MM/dd/yyyy hh:mm a"):""})),this.totalRecords=e.length,this.totalPages=Math.ceil(this.totalRecords/this.pageSize),this.isSpinnerVisible=!1},e=>{this.isSpinnerVisible=!1})}pageIndexChange(e){this.pageSize=e.rows}getPageCount(e,t){return Math.ceil(e/t)}view(e){this.isSpinnerVisible=!0,this.isEdit=!0,this.creatingData=Object.assign({},this.newDataObject),this.poapprovalService.getapprovalrulebyidwithEmployee(e.approvalRuleId).subscribe(e=>{this.creatingData=e,this.employeeNames=this.creatingData.approver,this.ApprovalRuleName=Object(L.g)("label","value",this.creatingData.approvalTaskId,this.taskNameList),this.ApprovalNumber=Object(L.g)("label","value",this.creatingData.ruleNumberId,this.ruleNumList),this.AmountName=Object(L.g)("label","value",this.creatingData.amountId,this.approvalAmountList),this.arrayEmplsit=[],this.creatingData.approver.forEach(e=>{this.arrayEmplsit.push(e.employeeId)}),this.employeedata("",this.creatingData.managementStructureId,!0),this.getManagementStructureDetails(this.creatingData.managementStructureId,this.employeeId,this.creatingData.managementStructureId),this.creatingData.lowerValue=this.creatingData.lowerValue?Object(L.b)(this.creatingData.lowerValue,2):0,this.creatingData.upperValue=this.creatingData.upperValue?Object(L.b)(this.creatingData.upperValue,2):0,this.creatingData.value=this.creatingData.value?Object(L.b)(this.creatingData.value,2):0,this.isSpinnerVisible=!1,this.enableSaveBtn=!1},e=>{this.isSpinnerVisible=!0})}edit(e){this.isSpinnerVisible=!0,this.isEdit=!0,this.creatingData=Object.assign({},this.newDataObject),this.poapprovalService.getapprovalrulebyidwithEmployee(e.approvalRuleId).subscribe(e=>{this.creatingData=e,this.employeeNames=this.creatingData.approver,this.arrayEmplsit=[],this.creatingData.approver.forEach(e=>{this.arrayEmplsit.push(e.employeeId)}),this.employeedata("",this.creatingData.managementStructureId,!0),this.getManagementStructureDetails(this.creatingData.managementStructureId,this.employeeId,this.creatingData.managementStructureId),this.creatingData.lowerValue=this.creatingData.lowerValue?Object(L.b)(this.creatingData.lowerValue,2):0,this.creatingData.upperValue=this.creatingData.upperValue?Object(L.b)(this.creatingData.upperValue,2):0,this.creatingData.value=this.creatingData.value?Object(L.b)(this.creatingData.value,2):0,this.isSpinnerVisible=!1,this.enableSaveBtn=!1},e=>{this.isSpinnerVisible=!0})}onChangevalue(e){this.creatingData[e]=this.creatingData[e]?Object(L.b)(this.creatingData[e],2):0,"upperValue"==e&&this.creatingData.lowerValue&&this.creatingData.upperValue&&Number(this.creatingData.lowerValue)>Number(this.creatingData.upperValue)&&(this.alertService.showMessage("Error","Upper Value Should be grater than lower Value.",P.d.error),this.creatingData.upperValue=0)}changePage(e){this.pageSizeemp=e.rows}closeDeleteModal(){x("#poApprovalDelete").modal("hide")}delete(e){this.rowDataToDelete=e,x("#poApprovalDelete").modal("show")}Restore(e){this.rowDataToDelete=e,x("#poApprovalRestore").modal("show")}closeRestore(){x("#poApprovalRestore").modal("hide")}RestorePoApproval(){const{approvalRuleId:e}=this.rowDataToDelete;this.poapprovalService.restoreApprovalById(e,this.userName).subscribe(e=>{this.alertService.showMessage("Success","Rule Resored successfully",P.d.success),this.getPoApprovalList(this.taskID)})}getColorCodeForHistory(e,t,s){const a=this.auditHistory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}getAuditHistoryById(e){this.isSpinnerVisible=!0,this.poapprovalService.getApprovalRuleHistorycommon(e.approvalRuleId).subscribe(e=>{this.auditHistory=e,this.isSpinnerVisible=!1},e=>{this.isSpinnerVisible=!1})}deletePoApproval(){const{approvalRuleId:e}=this.rowDataToDelete;this.poapprovalService.deleteApprovalById(e,this.userName).subscribe(e=>{this.alertService.showMessage("Success","Rule Deleted successfully",P.d.success),this.getPoApprovalList(this.taskID)})}handleChanges(e,t){}};H.ctorParameters=()=>[{type:U.a},{type:r.DatePipe},{type:F.c},{type:k.a},{type:N.a},{type:P.b}],a.b([Object(i.Input)()],H.prototype,"moduleType",void 0),H=a.b([Object(i.Component)({selector:"app-all-approval-rule",template:a.c(s("YUwi")).default,providers:[r.DatePipe],styles:[a.c(s("Kppz")).default]})],H);let R=class{constructor(){}ngOnInit(){console.log("header1",this.auditHistoryHeader),console.log("data",this.auditHistory)}getColorCodeForHistory(e,t,s){const a=this.auditHistory,i=a.length;if(e>=0&&e<=i)return e+1===i||a[e+1][t]===s}};a.b([Object(i.Input)()],R.prototype,"auditHistoryHeader",void 0),a.b([Object(i.Input)()],R.prototype,"auditHistory",void 0),R=a.b([Object(i.Component)({selector:"app-audit-component",template:a.c(s("Aa4m")).default,styles:[a.c(s("dg+g")).default]})],R),s.d(t,"a",(function(){return j}));let j=class{};j=a.b([Object(i.NgModule)({imports:[r.CommonModule,r.CommonModule,l.a,d.FormsModule,d.ReactiveFormsModule,c.b,r.CommonModule,p.TableModule,h.ButtonModule,m.SelectButtonModule,u.InputTextModule,g.MultiSelectModule,v.InputSwitchModule,y.CheckboxModule,f.AutoCompleteModule,b.TabViewModule,S.a,I.EditorModule,T.a],declarations:[n,B,H,R],exports:[B,H,R],providers:[C.a,A.a]})],j)},YUwi:function(e,t,s){"use strict";s.r(t),t.default='<div>\r\n    <div class="card new-card">\r\n        <div class="card-header bg-primary new-card-header">\r\n            <div class="row">\r\n                <div class="col">\r\n                    <h4 class="new-card-heading">{{moduleName}} Approval Rule</h4>\r\n                </div>\r\n                <div>\r\n                    <button type="button" class="btn-sm new-btn-primary" data-toggle="modal"\r\n                        data-target="#addNewPOApproval" (click)="addNewApproval()" *ngIf="!isView">\r\n                        Create Approval Rule\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="card-body new-card-body">\r\n\r\n        <p-table #dt class="rpo-table-cstm rro-table-cstm" [value]="poApprovalData" [metaKeySelection]="true"\r\n            [first]="0" [style]="{ width: \'100%\' }" (onPage)="pageIndexChange($event)" [rows]="pageSize"\r\n            [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10, 20, 50, 100]" [columns]="selectedColumns"\r\n            selectionMode="multiple" [resizableColumns]="true" [reorderableColumns]="true" [totalRecords]="totalRecords"\r\n            [scrollable]="true" scrollHeight="450px">\r\n\r\n            <ng-template pTemplate="caption" let-columns>\r\n                \x3c!-- <div style="text-align: right; min-height: 30px;"> --\x3e\r\n                <div class="row">\r\n                    <div class="col">\r\n\r\n                        <p-multiSelect [options]="headers" [(ngModel)]="selectedColumns"\r\n                            [ngModelOptions]="{ standalone: true }" optionLabel="header"\r\n                            selectedItemsLabel="{0} columns selected" [style]="{ minWidth: \'200px\' }"\r\n                            defaultLabel="Choose Columns" style="float:left"></p-multiSelect>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div style="width: auto !important; float: right;"\r\n                            class="inner-addon right-addon w50 inline-block g-filter-search-cstm">\r\n                            <i class="fa fa-search"></i>\r\n                            <input type="text" pInputText size="50" class="form-control"\r\n                                (input)="dt.filterGlobal($event.target.value, \'contains\')" placeholder=" Filter"\r\n                                style="height: 28px !important;" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col">\r\n                        <button type="button" class="btn btn-primary new-table-button" matTooltip="Download Data"\r\n                            matTooltipPosition="above" pButton icon="fa-download" iconPos="left" label="Export Data"\r\n                            (click)="dt.exportCSV()" style="padding:5px 10px !important;"></button>\r\n                    </div>\r\n                    <div class="col">\r\n                        <div class="">\r\n                            <div class="col" style="width: 395px; float: right; padding-top: 3px;">\r\n                                <div class="form-group">\r\n                                    <div class="pull-left" style="margin-top: 4px; margin-right: 15px;">\r\n                                        <label class="radio-cstm wauto">\r\n                                            <input type="radio" name="RuleEmpStatus" class="form-control" value="Active"\r\n                                                (click)="getruleByStatus(\'Active\')" checked [(ngModel)]="currentStatus" />\r\n                                            <span class="checkmark"></span>Active\r\n                                        </label>\r\n                                    </div>\r\n                                    <div class="pull-left" style="margin-top: 4px; margin-right: 15px;">\r\n                                        <label class="radio-cstm wauto">\r\n                                            <input type="radio" name="RuleEmpStatus" class="form-control" value="InActive"\r\n                                                (click)="getruleByStatus(\'InActive\')" [(ngModel)]="currentStatus" />\r\n                                            <span class="checkmark"></span>In-Active\r\n                                        </label>\r\n                                    </div>\r\n                                    <div class="pull-left" style="margin-top: 4px; margin-right: 15px;">\r\n                                        <label class="radio-cstm wauto">\r\n                                            <input type="radio" name="RuleEmpStatus" class="form-control" value="All"\r\n                                                (click)="getruleByStatus(\'All\')" [(ngModel)]="currentStatus" />\r\n                                            <span class="checkmark"></span>All\r\n                                        </label>\r\n                                    </div>\r\n                                    <div class="checkbox-cstm" style="margin-left: 0; text-align: right;">\r\n                                        <label style="width: auto !important; margin-top: 3px;">\r\n                                            <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent"\r\n                                                id="cparent" (click)="getDeleteListByStatus($event.target.checked)" />\r\n                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>\r\n                                            Show Deleted List\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template pTemplate="colgroup" let-columns>\r\n                <colgroup>\r\n                    <col *ngFor="let col of columns" style="width:130px" />\r\n                </colgroup>\r\n            </ng-template>\r\n            <ng-template pTemplate="header" let-columns>\r\n                <tr>\r\n\r\n                    <ng-container *ngFor="let col of columns" style="width:150px">\r\n                        <th class="text-center"\r\n                            *ngIf="col.field!=\'companyName\' && col.field!=\'buName\' && col.field!=\'deptName\' && col.field!=\'divName\'"\r\n                            pResizableColumn pReorderableColumn [pSortableColumn]="col.field">\r\n                            {{col.header}}\r\n                            <p-sortIcon [field]="col.field"></p-sortIcon>\r\n                        </th>\r\n                        <th class="text-center" *ngIf="col.field==\'companyName\'" colspan="4" pResizableColumn\r\n                            pReorderableColumn [pSortableColumn]="col.field">\r\n                            Management Structure\r\n                        </th>\r\n                    </ng-container>\r\n                    <th style="width:140px;position:sticky;" *ngIf="selectedColumns.length > 0 && !isView">\r\n                        Action\r\n                    </th>\r\n                </tr>\r\n                <tr>\r\n                    <th style="width:auto" *ngFor="let col of columns" [ngSwitch]="col.field">\r\n                        <input style="width:100%;" *ngIf="col.field != \'createdDate\' && col.field != \'updatedDate\'"\r\n                            pInputText type="text" (input)="dt.filter($event.target.value, col.field, \'contains\')" />\r\n                        <input type="date" style="width:100%" class="hidePlaceHolder" *ngIf="col.field == \'createdDate\'"\r\n                            name="createdDate" (change)="dt.filter($event.target.value, col.field, \'contains\')" />\r\n                        <input type="date" style="width:100%" class="hidePlaceHolder" *ngIf="col.field == \'updatedDate\'"\r\n                            name="updatedDate" (change)="dt.filter($event.target.value, col.field, \'contains\')" />\r\n                    </th>\r\n                    <th style="width: 140px;position:sticky;"></th>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">\r\n                <tr [pSelectableRowDblClick]="rowData" [pSelectableRow]="rowData">\r\n                    <ng-container *ngFor="let col of columns">\r\n                        <td class="uiTable_td_ovrflw_control">\r\n                            {{\r\n                                col.field == \'createdDate\'\r\n                                  ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                  : rowData[col.field] && col.field == \'updatedDate\'\r\n                                  ? (rowData[col.field] | date: \'MM/dd/yyyy h:mm a\')\r\n                                  : rowData[col.field] \r\n                              }}\r\n                        </td>\r\n                    </ng-container>\r\n                    <td style="width:140px;position:sticky; border: 1px solid #c8c8c8;" class="action-icons-cstm"\r\n                        *ngIf="!isView">\r\n                        \x3c!-- <button class="btn-edit ptable-wo-btns buton_back_bordernon" mat-icon-button data-target="#addNewMemo" data-toggle="modal"\r\n                      (click)="edit(rowData, i)" matTooltip="Edit">\r\n                          <mat-icon>edit</mat-icon>\r\n                      </button> --\x3e\r\n                        \x3c!-- <button class="btn btn-danger nobg" (click)="deleteMemo(rowData)">\r\n                          <i class="fa fa-trash" style="font-size: 14px;"></i>\r\n                      </button> --\x3e\r\n                      <p-inputSwitch\r\n                        [disabled]="currentDeletedstatus"\r\n                        [(ngModel)]="rowData[\'isActive\']"\r\n                        name="isActive{{ rowIndex }}"\r\n                        matTooltip="{{ rowData[\'isActive\'] ? \'Active\' : \'In Active\' }}"\r\n                        matTooltipPosition="above"\r\n                        (onChange)="changeRuleStatus(rowData)"\r\n                    ></p-inputSwitch>\r\n                        <span data-toggle="modal" data-target="#viewPOApproval"><a class="btn nobg btn-edit-cstm"\r\n                                (click)="view(rowData)" matTooltip="View" matTooltipPosition="above"\r\n                                data-dismiss="modal"><i class="fa fa-eye"></i></a> </span>\r\n                        <span *ngIf="!currentDeletedstatus" data-toggle="modal" data-target="#addNewPOApproval"><a\r\n                                class="btn nobg btn-edit-cstm" (click)="edit(rowData)" matTooltip="Edit"\r\n                                matTooltipPosition="above" data-dismiss="modal"><i class="fa fa-pencil"></i></a> </span>\r\n\r\n                        <span *ngIf="!currentDeletedstatus" data-toggle="modal" data-target="#poApprovalDelete"><a\r\n                                class="btn nobg btn-delete-cstm" (click)="delete(rowData)" matTooltip="Delete"\r\n                                matTooltipPosition="above"><i class="fa fa-trash"></i></a> </span>\r\n                        <span *ngIf="currentDeletedstatus" data-toggle="modal" data-target="#poApprovalRestore"><a\r\n                                class="btn nobg btn-delete-cstm" (click)="Restore(rowData)" matTooltip="Restore"\r\n                                matTooltipPosition="above"><i class="fa fa-undo"></i></a> </span>\r\n\r\n                        <span data-toggle="modal" data-target="#approvalHistory">\r\n                            <a class="btn nobg btn-hist-cstm" (click)="getAuditHistoryById(rowData)"\r\n                                matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a>\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n\r\n            </ng-template>\r\n            <ng-template pTemplate="emptymessage" let-columns *ngIf="poApprovalData.length == 0">\r\n                <tr>\r\n                    <td [attr.colspan]="15" class="no-records-cstm">\r\n                        No records found\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate="summary" id="footer">\r\n                <label id="footer">Total:</label>\r\n                <input style="width: 5%;" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText type="text" />\r\n                &nbsp;&nbsp;\r\n                <label id="footer">Pages Count:</label>\r\n                <input style="width: 5%;" [ngModel]="getPageCount(dt._totalRecords, pageSize)" [disabled]="true"\r\n                    pInputText type="text" />\r\n            </ng-template>\r\n        </p-table>\r\n\r\n    </div>\r\n</div>\r\n\r\n\x3c!-- <ng-template #contentDelete let-c="close" let-d="dismiss">\r\n    <div class="modal-header">\r\n        <h4 class="modal-title">Are You Sure Want to Delete?</h4>\r\n        <button type="button" class="close" aria-label="Close"\r\n            (click)="dismissModel()">\r\n            <span aria-hidden="true">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class="modal-body">                               \r\n        <strong>\r\n            Employee Name:\r\n            <span class="new-label">{{tagRowData.employee}}</span>\r\n        </strong>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="button" class="btn btn-success"\r\n            (click)="onDeleteTagName()">Yes</button>\r\n        <button type="button" class="btn btn-danger"\r\n            (click)="dismissModel()">No</button>\r\n    </div>\r\n</ng-template> --\x3e\r\n<div class="modal fade" id="poApprovalDelete" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" (click)="closeDeleteModal()">&times;</button>\r\n                <h4 class="modal-title">Are You Sure Want to Delete?</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <strong>\r\n                    Rule Number :\r\n                    <span class="new-label">\r\n                        {{rowDataToDelete.ruleNo}}\r\n                    </span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary"\r\n                    (click)="deletePoApproval(); closeDeleteModal();">Yes</button>\r\n                <button type="button" class="btn btn-danger" (click)="closeDeleteModal()">No</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal fade" id="poApprovalRestore" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" (click)="closeRestore()">&times;</button>\r\n                <h4 class="modal-title">Are You Sure Want to Restore ?</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <strong>\r\n                    Rule Number :\r\n                    <span class="new-label">\r\n                        {{rowDataToDelete.ruleNo}}\r\n                    </span>\r\n                </strong>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary"\r\n                    (click)="RestorePoApproval(); closeRestore();">Yes</button>\r\n                <button type="button" class="btn btn-danger" (click)="closeRestore()">No</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="addNewPOApproval" class="modal fade" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-lg">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" (click)="isEdit = false;">&times;</button>\r\n                <h4 class="modal-title">{{ isEdit ? \'Edit\' : \'Add\'  }} Approval Rule</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form #poApprovalForm="ngForm">\r\n                    <div class="col-md-3" style="padding-left: 6px; padding-right: 6px;">\r\n                        <div class="form-group">\r\n                            <label style="width:auto">Approval Rule<span class="clr-red">*</span></label>\r\n                            <select disabled="true" [(ngModel)]="creatingData.approvalTaskId"\r\n                                (ngModelChange)="onSaveChange()" name="taskName" required>\r\n                                <option value="0">Select</option>\r\n                                <option *ngFor="let task of taskNameList" [value]="task.value">{{task.label}}</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <span class="label">Memo </span>\r\n                            \x3c!-- <input type="text" class="form-control text-right" \r\n                     (ngModelChange)="onSaveChange()" \r\n                      [(ngModel)]="creatingData.memo" />  --\x3e\r\n\r\n                            <div class="col-sm-11">\r\n                                <span>\r\n                                    <div class="form-group memo-popup-cstm mat_emo">\r\n                                        <div (ngModelChange)="onSaveChange()" [innerHTML]="creatingData.memo"\r\n                                            matTooltipPosition="above" [matTooltip]="parsedText(creatingData.memo)"\r\n                                            class="form-control" style="width: 100%;" class="text_editor_box"></div>\r\n                                    </div>\r\n                                </span>\r\n                            </div>\r\n                            <div class="col-sm-1" style="margin-top:-5px">\r\n                                <span>\r\n                                    <a class="btn nobg btn-edit-cstm" data-toggle="modal"\r\n                                        (ngModelChange)="onSaveChange()" data-target="#memo-popup"\r\n                                        (click)="onClickMemo()" matTooltip="Add Memo" matTooltipPosition="above">\r\n                                        <i class="fa fa-pencil"></i>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label>Rule Number <span class="clr-red">*</span></label>\r\n                            <select [(ngModel)]="creatingData.ruleNumberId" (ngModelChange)="onSaveChange()"\r\n                                name="ruleNum" required>\r\n                                <option value="0">Select</option>\r\n                                <option *ngFor="let rule of ruleNumList" [value]="rule.value">{{rule.label}}</option>\r\n                            </select>\r\n                        </div>\r\n                        \x3c!-- <div class="form-group">\r\n                    <label>Operator *</label>\r\n                    <select [(ngModel)]="creatingData.operatorId" name="operator" required>\r\n                        <option value="null">Select</option>\r\n                        <option value="1">And</option>\r\n                        <option value="2">Or</option>\r\n                    </select>\r\n                </div>  --\x3e\r\n\r\n                    </div>\r\n                    <div class="col-3" style="padding-left: 6px; padding-right: 6px;">\r\n                        <div class="form-group">\r\n                            <label style="margin-top: -8px;">Amount <span class="clr-red">*</span></label>\r\n                            <select [(ngModel)]="creatingData.amountId" (ngModelChange)="onSaveChange()" name="amount"\r\n                                required>\r\n                                <option value="null">Select</option>\r\n                                <option *ngFor="let approvalAmount of approvalAmountList"\r\n                                    [value]="approvalAmount.value">{{approvalAmount.label}}</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class="form-group" *ngIf="creatingData.amountId == 5">\r\n                            <label>Lower Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right" (ngModelChange)="onSaveChange()"\r\n                                pKeyFilter="money" [(ngModel)]="creatingData.lowerValue"\r\n                                (change)="onChangevalue(\'lowerValue\');" name="lowerValue" required />\r\n                        </div>\r\n                        <div class="form-group" *ngIf="creatingData.amountId == 5">\r\n                            <label>Upper Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right" (ngModelChange)="onSaveChange()"\r\n                                pKeyFilter="money" [(ngModel)]="creatingData.upperValue"\r\n                                (change)="onChangevalue(\'upperValue\');" name="upperValue" required />\r\n                        </div>\r\n                        <div class="form-group" *ngIf="creatingData.amountId && creatingData.amountId != 5">\r\n                            <label>Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right" (ngModelChange)="onSaveChange()"\r\n                                (click)="onAddApprover();" pKeyFilter="money" [(ngModel)]="creatingData.value"\r\n                                name="value" (change)="onChangevalue(\'value\');" required />\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label>Approver</label>\r\n                            <div class="inner-addon right-addon inline-block">\r\n                                <p-autoComplete field="label" class="pautocomp-cstm" [(ngModel)]="employeelist"\r\n                                    title="Add Approver" name="approverId" [suggestions]="approverList"\r\n                                    (completeMethod)="filterapprover($event)" [size]="30" [minLength]="1"\r\n                                    [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"\r\n                                    #approverId="ngModel">\r\n                                </p-autoComplete>\r\n                                <button type="button" class="btn btn-primary but_stl"\r\n                                    (click)="onAddApprover();">Add</button>\r\n                            </div>\r\n                            \x3c!-- <select [(ngModel)]="creatingData.approverId" name="approver" required>\r\n                        <option value="null">Select</option>\r\n                        <option *ngFor="let approver of approverList" [value]="approver.value">{{approver.label}}</option>\r\n                    </select>    --\x3e\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-3" style="padding-left: 6px; padding-right: 6px;">\r\n                        <div class="card">\r\n                            <div class="card-header" style="padding: 10px 12px;">\r\n                                <h5 style="margin-bottom: 0; font-size: 12px;">Management Structure <span\r\n                                        class="clr-red">*</span></h5>\r\n                            </div>\r\n                            <div class="card-body" style="padding: 12px 12px 4px;">\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        name="primaryCompany" [(ngModel)]="creatingData.companyId"\r\n                                        (change)="getBUList(creatingData.companyId);" #mCompanyName required>\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of maincompanylist" [ngValue]="name.value">\r\n                                            {{name.label}}</option>\r\n                                    </select>\r\n                                    <div *ngIf="mCompanyName.invalid && (mCompanyName.dirty || mCompanyName.touched)"\r\n                                        class="alert alert-danger alert-danger-cstm">\r\n                                        <div *ngIf="mCompanyName.errors.required">\r\n                                            <small> Company Name is required </small>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" [(ngModel)]="creatingData.buId"\r\n                                        name="primaryBU" (change)="getDivisionlist(creatingData.buId)"\r\n                                        class="form-control">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of bulist" [ngValue]="name.value">{{name.label}}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        [(ngModel)]="creatingData.divisionId" name="primaryDivision"\r\n                                        (change)="getDepartmentlist(creatingData.divisionId)">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of divisionlist" [ngValue]="name.value">{{name.label}}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        [(ngModel)]="creatingData.departmentId" name="primaryDept"\r\n                                        (change)="getDepartmentId(creatingData.departmentId)">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of departmentList" [ngValue]="name.value">\r\n                                            {{name.label}}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-3"></div>\r\n                    <div class="col-12">\r\n                        <p-table #ptabletagName class="rpo-table-cstm rro-table-cstm tab-table-cstm tag_t"\r\n                            [paginator]="true" [pageLinks]="3"\r\n                             [rowsPerPageOptions]="[5,10,20,50,100]"\r\n                            [scrollable]="true" scrollHeight="250px" \r\n                            [(value)]="employeeNames" [rows]="pageSizeemp"\r\n                            [first]="0" (onPage)="changePage($event)" \r\n                            [columns]="emplColumns"\r\n                            [totalRecords]="totalRecordsemp">\r\n                            <ng-template pTemplate="header" let-columns>\r\n                                <tr>\r\n                                    <th style="width: 50px; text-align: center;">\r\n                                        Flag\r\n                                    </th>\r\n                                    <th style="width: 120px;" *ngFor="let col of columns">\r\n                                        {{ col.header }}\r\n                                    </th>\r\n                                    <th style="width: 120px; text-align: center;">\r\n                                        Primary\r\n                                    </th>\r\n                                    <th style="width: 120px; position:sticky;text-align:center;">\r\n                                        Action\r\n                                    </th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td style="width: 50px; text-align: center;">\r\n                                    </td>\r\n                                    <th style="width: 120px;" style="width:auto" *ngFor="let col of columns"\r\n                                        [ngSwitch]="col.field">\r\n                                        <input [disabled]="col.field == \'isPrimary\'" style="width:100%;" pInputText\r\n                                            type="text" (input)="\r\n                                    ptabletagName.filter($event.target.value, col.field, \'contains\')\r\n                                    " />\r\n                                    </th>\r\n                                    <th style="width: 120px; text-align: center;">\r\n                                    </th>\r\n                                    <th style="width: 120px; position:sticky;text-align:center;">\r\n                                    </th>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-i="rowIndex">\r\n                                <tr>\r\n                                    <td style="width: 50px; text-align: center;">\r\n                                        <span class="flag">\r\n                                            <i *ngIf="rowData.isPrimary == true" [ngStyle]="{\r\n                                            color: rowData.isPrimary == true ? \'green\' : \'none\'\r\n                                          }" class="fa fa-flag" matTooltip="Primary" matTooltipPosition="above"\r\n                                                aria-hidden="true"></i>\r\n                                        </span>\r\n                                    </td>\r\n                                    <td style="width: 120px; text-align:left;" *ngFor="let col of columns">\r\n                                        {{ col.field != \'isPrimary\' ? rowData[col.field] : \'\'}}\r\n                                    </td>\r\n                                    <td style="width: 120px; text-align: center;">\r\n                                        <input *ngIf="rowData.isPrimary" disabled type="checkbox" name="isPrimary"\r\n                                            checked>\r\n                                        <input *ngIf="!rowData.isPrimary" (click)="makePrimary(rowData.employeeId)"\r\n                                            type="checkbox" name="isPrimary">\r\n                                    </td>\r\n                                    <td style="width: 120px; position:sticky;text-align:center;">\r\n                                        <p-inputSwitch [(ngModel)]="rowData[\'isActive\']" name="isActive{{i}}"\r\n                                            onLabel="on" offLabel="off"\r\n                                            matTooltip="{{ rowData[\'isActive\'] ? \'Active\' : \'In Active\'}}"\r\n                                            matTooltipPosition="above" (onChange)="handleChange(rowData,$event)">\r\n                                        </p-inputSwitch>\r\n                                        <span *ngIf="!rowData.isPrimary">\r\n                                            <a class="btn nobg btn-delete-cstm"\r\n                                                (click)="openDeletesemployee(contentDeleteTag,rowData,i)"\r\n                                                matTooltip="Remove" matTooltipPosition="above"><i\r\n                                                    class="fa fa-trash"></i></a>\r\n                                        </span>\r\n                                        <span *ngIf="rowData.isPrimary">\r\n                                            <a class="btn nobg btn-delete-cstm" matTooltipPosition="above"><i\r\n                                                    style="color: gray;" class="fa fa-trash"></i></a>\r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="emptymessage" let-columns *ngIf="employeeNames.length == 0">\r\n                                <tr>\r\n                                    <td [attr.colspan]="4" style="color: red; font-weight: bold; text-align: center">\r\n                                        No records found\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="summary" id="footer">\r\n                                <label id="footer" class="footer">Total: </label>\r\n                                <input style="width: 5%;" [value]="employeeNames.length" name="totalRecords" disabled\r\n                                    pInputText type="text" />\r\n\r\n                                &nbsp;&nbsp;\r\n                                <label id="footer" class="footer1">Pages Count:</label>\r\n\r\n                                <input style="width: 5%;" [ngModel]="getTaxPageCount(employeeNames.length,pageSizeemp)"\r\n                                    name="page count tax" disabled pInputText type="text" />\r\n                            </ng-template>\r\n                            <ng-template #contentDeleteTag let-c="close" let-d="dismiss">\r\n                                <div class="modal-header">\r\n                                    <h4 class="modal-title">Are You Sure Want to Delete?</h4>\r\n                                    <button type="button" class="close" aria-label="Close" (click)="dismissModel()">\r\n                                        <span aria-hidden="true">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class="modal-body">\r\n                                    <strong>\r\n                                        Employee Name:\r\n                                        <span class="new-label">{{tagRowData.employee}}</span>\r\n                                    </strong>\r\n                                </div>\r\n                                <div class="modal-footer">\r\n                                    <button type="button" class="btn btn-success"\r\n                                        (click)="onDeleteTagName()">Yes</button>\r\n                                    <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>\r\n                                </div>\r\n                            </ng-template>\r\n                        </p-table>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <div style="float:right">\r\n                    <button class="btn btn-primary btn-primary" (click)="savePoApproval()"\r\n                        style="padding: 6px 12px !important;margin-top: 10px;"\r\n                        [disabled]="!poApprovalForm.valid || employeeNames.length == 0 || creatingData.managementStructureId == 0 || creatingData.approvalTaskId == 0 || creatingData.ruleNumberId == 0 || !enableSaveBtn">\r\n                        {{(isEdit)?\'Update\':\'Save\'}}\r\n                    </button>\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal"\r\n                        style="padding: 6px 12px !important;margin-top: 10px;" (click)="isEdit = false;">Close</button>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n            <div class="modal fade" id="memo-popup" role="dialog" data-backdrop="static">\r\n                <div class="modal-dialog modal-sm">\r\n                    <div class="modal-content">\r\n                        <div class="modal-header">\r\n                            <button type="button" class="close" data-dismiss="modal">\r\n                                &times;\r\n                            </button>\r\n                            <h4 class="modal-title">Edit Memo</h4>\r\n                        </div>\r\n                        <div class="modal-body">\r\n                            <table class="table table-bordered table-fixed workflow-table-material">\r\n                                <thead>\r\n                                    <th style="color: #fff;">Memo</th>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td style="white-space: inherit">\r\n                                            <p-editor spellcheck="true" [(ngModel)]="memoPopupContent"\r\n                                                [style]="{ height: \'320px\' }" name="memoPopupContent"\r\n                                                (ngModelChange)="onSaveChange()" required></p-editor>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            <div style="float: right;">\r\n                                <button type="button" class="btn btn-primary"\r\n                                    style="padding: 6px 12px !important; margin-top: 10px;"\r\n                                    (click)="onClickPopupSave()">\r\n                                    Save\r\n                                </button>\r\n                                <button type="button" class="btn btn-danger" (click)="closeMemoModel()"\r\n                                    style="padding: 6px 12px !important; margin-top: 10px;">\r\n                                    Close\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">\r\n                <div class="loading">\r\n                    <div class="lds-roller">\r\n                        <div>\r\n                        </div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-spinner *ngIf="isSpinnerVisible"></app-spinner>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n<div id="approvalHistory" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\r\n    <div class="modal-dialog modal-xl">\r\n\r\n        \x3c!-- Modal content--\x3e\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" (click)="closeHistoryModal()">&times;</button>\r\n                <h4 class="modal-title">History of {{moduleName}} Approval Rule</h4>\r\n            </div>\r\n            <div class="modal-body" *ngIf="auditHistory">\r\n                <div class="table-responsive">\r\n                    <table class="table table-bordered" *ngIf="auditHistory.length> 0 else noDatavailable">\r\n                        <thead>\r\n                            <tr>\r\n                                <th rowspan="2">Task Name</th>\r\n                                <th rowspan="2">Rule No</th>\r\n                                <th rowspan="2">Amount</th>\r\n                                <th rowspan="2">Value</th>\r\n                                <th rowspan="2">Lower Value</th>\r\n                                <th rowspan="2">Upper Value</th>\r\n                                <th>Memo</th>\r\n                                <th colspan="4" rowspan="2">Management Structure</th>\r\n                                <th rowspan="2">Approver</th>\r\n                                <th rowspan="2">Created Date</th>\r\n                                <th rowspan="2">Created By</th>\r\n                                <th rowspan="2">Updated Date</th>\r\n                                <th rowspan="2">Updated By</th>\r\n                                <th rowspan="2">Is Active</th>\r\n                                <th rowspan="2">Is Deleted</th>\r\n\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody class="audithistory-cstm">\r\n                            \x3c!--*ngIf="auditHistory.length> 0"--\x3e\r\n                            <tr *ngFor="let audit of auditHistory; let i = index;">\r\n                                \x3c!-- auditHistory[i>0 ? i-1 : i] --\x3e\r\n                                <td\r\n                                    [ngStyle]="{\'color\':  getColorCodeForHistory(i, \'taskName\', audit.taskName)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.taskName}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'ruleNo\', audit.ruleNo)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.ruleNo}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'amount\', audit.amount)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.amount}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'value\', audit.value)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.value}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'lowerValue\', audit.lowerValue)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.lowerValue}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'upperValue\', audit.upperValue)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.upperValue}}</td>\r\n\r\n                                <td\r\n                                    [ngStyle]="{color: getColorCodeForHistory(i, \'memo\', audit.memo) ? \'black\' : \'red\'}">\r\n                                    <p class="p_editor" [innerHTML]="audit.memo"></p>\r\n                                </td>\r\n\r\n                                <td class="min-w-100"\r\n                                    [ngStyle]="{color: getColorCodeForHistory(i, \'companyName\', audit.companyName) ? \'black\' : \'red\'}">\r\n                                    {{ audit.companyName }}</td>\r\n                                <td class="min-w-100"\r\n                                    [ngStyle]="{color: getColorCodeForHistory(i, \'buName\', audit.buName) ? \'black\' : \'red\'}">\r\n                                    {{ audit.buName }}</td>\r\n                                <td class="min-w-100"\r\n                                    [ngStyle]="{color: getColorCodeForHistory(i, \'divName\', audit.divName) ? \'black\' : \'red\'}">\r\n                                    {{ audit.divName }}</td>\r\n                                <td class="min-w-100"\r\n                                    [ngStyle]="{color: getColorCodeForHistory(i, \'deptName\', audit.deptName) ? \'black\' : \'red\'}">\r\n                                    {{ audit.deptName }}</td>\r\n\r\n\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'approver\', audit.approver)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.approver}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'createdDate\', audit.createdDate)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.createdDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'createdBy\', audit.createdBy)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.createdBy}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'updatedDate\', audit.updatedDate)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.updatedDate | date: \'MM/dd/yyyy h:mm a \'}}</td>\r\n                                <td\r\n                                    [ngStyle]="{\'color\': getColorCodeForHistory(i, \'updatedBy\', audit.updatedBy)  ? \'black\' : \'red\'  }">\r\n                                    {{audit.updatedBy}}</td>\r\n                                <td>\r\n                                    <p style="background-color: #fff !important;"> <input type="checkbox"\r\n                                            name="isActive" [(ngModel)]="audit.isActive" disabled></p>\r\n                                </td>\r\n                                <td>\r\n                                    <p style="background-color: #fff !important;"> <input type="checkbox"\r\n                                            name="isActive" [(ngModel)]="audit.isDeleted" disabled></p>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <ng-template #noDatavailable>\r\n                        <div class="text-center">\r\n                            \x3c!-- <img src="../../../../assets/images/binoculars.png" style="height: 100px; width: 100px;"> --\x3e\r\n                            <h4 style="color: #ff5663;">No History Found </h4>\r\n                        </div>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n            <div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">\r\n                <div class="loading">\r\n                    <div class="lds-roller">\r\n                        <div>\r\n                        </div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-spinner *ngIf="isSpinnerVisible"></app-spinner>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-danger" (click)="closeHistoryModal()">Close</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n<div id="viewPOApproval" class="modal fade" style="z-index: 11000;" role="dialog" data-backdrop="static">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                <h4 class="modal-title">Approval Rule1</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form #poApprovalForm1="ngForm">\r\n                    <div class="col-md-4" style="padding-left: 6px; padding-right: 6px;">\r\n                        \x3c!-- <div class="form-group">\r\n                            <label style="margin-top: -8px;">Approval Rule<span class="clr-red">*</span></label>\r\n                            <select disabled="true" [(ngModel)]="creatingData.approvalTaskId"\r\n                                (ngModelChange)="onSaveChange()" name="taskName" required>\r\n                                <option value="0">Select</option>\r\n                                <option *ngFor="let task of taskNameList" [value]="task.value">{{task.label}}</option>\r\n                            </select>\r\n                        </div> --\x3e\r\n                        <p><span class="label"><b>Approval Rule <span class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.approvalTaskId ? ApprovalRuleName : \'-\'}}\r\n                            </span></p>\r\n                        \x3c!-- <div class="form-group">\r\n                            <span class="label">Memo </span>\r\n                           \r\n                            <div class="col-sm-12">\r\n                                <span>\r\n                                    <div class="form-group memo-popup-cstm mat_emo">\r\n                                        <div (ngModelChange)="onSaveChange()" [innerHTML]="creatingData.memo"\r\n                                            matTooltipPosition="above"  disabled="true" [matTooltip]="parsedText(creatingData.memo)"\r\n                                            class="form-control" style="width: 100%;" class="text_editor_box"></div>\r\n                                    </div>\r\n                                </span>\r\n                            </div>                            \r\n                        </div> --\x3e\r\n                        <p>\r\n                            <span class="label"><b>Memo: </b></span>\r\n                            <span class="value">\r\n                                <p class="p-0 m-0 p_textEditor" [innerHTML]="creatingData.memo"> </p>\r\n                            </span>\r\n                        </p>\r\n                        \x3c!-- <div class="form-group">\r\n                            <label>Rule Number <span class="clr-red">*</span></label>\r\n                            <select [(ngModel)]="creatingData.ruleNumberId"  disabled="true" (ngModelChange)="onSaveChange()"\r\n                                name="ruleNum" required>\r\n                                <option value="0">Select</option>\r\n                                <option *ngFor="let rule of ruleNumList" [value]="rule.value">{{rule.label}}</option>\r\n                            </select>\r\n                        </div> --\x3e\r\n\r\n                        <p><span class="label"><b>Rule number <span class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.ruleNumberId ? ApprovalRuleName : \'-\'}}\r\n                            </span></p>\r\n                        \x3c!-- <div class="form-group">\r\n                        <label>Operator *</label>\r\n                        <select [(ngModel)]="creatingData.operatorId" name="operator" required>\r\n                            <option value="null">Select</option>\r\n                            <option value="1">And</option>\r\n                            <option value="2">Or</option>\r\n                        </select>\r\n                    </div>  --\x3e\r\n\r\n\r\n                        \x3c!-- <div class="form-group">\r\n                            <label style="margin-top: -8px;">Amount <span class="clr-red">*</span></label>\r\n                            <select [(ngModel)]="creatingData.amountId"  disabled="true" (ngModelChange)="onSaveChange()" name="amount"\r\n                                required>\r\n                                <option value="null">Select</option>\r\n                                <option *ngFor="let approvalAmount of approvalAmountList"\r\n                                    [value]="approvalAmount.value">{{approvalAmount.label}}</option>\r\n                            </select>\r\n                        </div> --\x3e\r\n                        <p><span class="label"><b>Amount <span class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.amountId ? AmountName : \'-\'}}\r\n                            </span></p>\r\n\r\n                        \x3c!-- <div class="form-group" *ngIf="creatingData.amountId == 5">\r\n                            <label>Lower Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right"  disabled="true" (ngModelChange)="onSaveChange()"\r\n                                pKeyFilter="money" [(ngModel)]="creatingData.lowerValue"\r\n                                (change)="onChangevalue(\'lowerValue\');" name="lowerValue" required />\r\n                        </div> --\x3e\r\n                        <p *ngIf="creatingData.amountId == 5"><span class="label"><b>Lower Value <span\r\n                                        class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.lowerValue ? creatingData.lowerValue : \'-\'}}\r\n                            </span></p>\r\n\r\n                        \x3c!-- <div class="form-group" *ngIf="creatingData.amountId == 5">\r\n                            <label>Upper Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right"  disabled="true" (ngModelChange)="onSaveChange()"\r\n                                pKeyFilter="money" [(ngModel)]="creatingData.upperValue"\r\n                                (change)="onChangevalue(\'upperValue\');" name="upperValue" required />\r\n                        </div> --\x3e\r\n                        <p *ngIf="creatingData.amountId == 5"><span class="label"><b>Upper Value <span\r\n                                        class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.upperValue ? creatingData.upperValue : \'-\'}}\r\n                            </span></p>\r\n                        \x3c!-- <div class="form-group" *ngIf="creatingData.amountId && creatingData.amountId != 5">\r\n                            <label>Value <span class="clr-red">*</span></label>\r\n                            <input type="text" class="form-control text-right"  disabled="true" (click)="onAddApprover();"\r\n                                pKeyFilter="money" [(ngModel)]="creatingData.value" name="value"\r\n                                (change)="onChangevalue(\'value\');" required />\r\n                        </div>     --\x3e\r\n                        <p *ngIf="creatingData.amountId && creatingData.amountId != 5">\r\n                            <span class="label"><b>Value <span class="clr-red">*</span> : </b></span>\r\n                            <span class="value">\r\n                                {{creatingData.value ? creatingData.value : \'-\'}}\r\n                            </span></p>\r\n                    </div>\r\n\r\n                    <div class="col-3" style="padding-left: 6px; padding-right: 6px;">\r\n                        <div class="card">\r\n                            <div class="card-header" style="padding: 10px 12px;">\r\n                                <h5 style="margin-bottom: 0; font-size: 12px;">Management Structure <span\r\n                                        class="clr-red">*</span></h5>\r\n                            </div>\r\n                            <div class="card-body" style="padding: 12px 12px 4px;">\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        name="primaryCompany" [disabled]="true" [(ngModel)]="creatingData.companyId"\r\n                                        (change)="getBUList(creatingData.companyId);" #mCompanyName required>\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of maincompanylist" [ngValue]="name.value">\r\n                                            {{name.label}}</option>\r\n                                    </select>\r\n                                    <div *ngIf="mCompanyName.invalid && (mCompanyName.dirty || mCompanyName.touched)"\r\n                                        class="alert alert-danger alert-danger-cstm">\r\n                                        <div *ngIf="mCompanyName.errors.required">\r\n                                            <small> Company Name is required </small>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" [(ngModel)]="creatingData.buId"\r\n                                        name="primaryBU" [disabled]="true" (change)="getDivisionlist(creatingData.buId)"\r\n                                        class="form-control">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of bulist" [ngValue]="name.value">{{name.label}}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        [(ngModel)]="creatingData.divisionId" [disabled]="true" name="primaryDivision"\r\n                                        (change)="getDepartmentlist(creatingData.divisionId)">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of divisionlist" [ngValue]="name.value">{{name.label}}\r\n                                        </option>\r\n                                    </select>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <select style="border-radius: 5px !important;" class="form-control"\r\n                                        [(ngModel)]="creatingData.departmentId" [disabled]="true" name="primaryDept"\r\n                                        (change)="getDepartmentId(creatingData.departmentId)">\r\n                                        <option value="0">Select</option>\r\n                                        <option *ngFor="let name of departmentList" [ngValue]="name.value">\r\n                                            {{name.label}}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-3"></div>\r\n                    <div class="col-12">\r\n                        <p-table #ptabletagName class="rpo-table-cstm rro-table-cstm tab-table-cstm tag_t"\r\n                            [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20,50,100]"\r\n                            [scrollable]="true" scrollHeight="250px" [(value)]="employeeNames" [rows]="pageSizeemp"\r\n                            [first]="0" (onPage)="changePage($event)" [columns]="emplColumns"\r\n                            [totalRecords]="totalRecordsemp">\r\n                            <ng-template pTemplate="header" let-columns>\r\n                                <tr>\r\n                                    <th style="width: 50px; text-align: center;">\r\n                                        Flag\r\n                                    </th>\r\n                                    <th style="width: 120px;" *ngFor="let col of columns">\r\n                                        {{ col.header }}\r\n                                    </th>\r\n                                    <th style="width: 120px; text-align: center;">\r\n                                        Primary\r\n                                    </th>\r\n                                    <th style="width: 120px; position:sticky;text-align:center;">\r\n                                        Action\r\n                                    </th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td style="width: 50px; text-align: center;">\r\n                                    </td>\r\n                                    <th style="width: 120px;" style="width:auto" *ngFor="let col of columns"\r\n                                        [ngSwitch]="col.field">\r\n                                        <input [disabled]="col.field == \'isPrimary\'" style="width:100%;" pInputText\r\n                                            type="text" (input)="\r\n                                        ptabletagName.filter($event.target.value, col.field, \'contains\')\r\n                                        " />\r\n                                    </th>\r\n                                    <th style="width: 120px; text-align: center;">\r\n                                    </th>\r\n                                    <th style="width: 120px; position:sticky;text-align:center;">\r\n                                    </th>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-i="rowIndex">\r\n                                <tr>\r\n                                    <td style="width: 50px; text-align: center;">\r\n                                        <span class="flag">\r\n                                            <i *ngIf="rowData.isPrimary == true" [ngStyle]="{\r\n                                                color: rowData.isPrimary == true ? \'green\' : \'none\'\r\n                                              }" class="fa fa-flag" matTooltip="Primary" matTooltipPosition="above"\r\n                                                aria-hidden="true"></i>\r\n                                        </span>\r\n                                    </td>\r\n                                    <td style="width: 120px; text-align:left;" *ngFor="let col of columns">\r\n                                        {{ col.field != \'isPrimary\' ? rowData[col.field] : \'\' &&\r\n                                    col.field==\'employee\'?rowData[col.field]:\'\'}}\r\n                                    </td>\r\n                                    <td style="width: 120px; text-align: center;">\r\n                                        <input *ngIf="rowData.isPrimary" disabled type="checkbox" name="isPrimary"\r\n                                            checked>\r\n                                        <input *ngIf="!rowData.isPrimary" disabled type="checkbox" name="isPrimary">\r\n                                    </td>\r\n                                    <td style="width: 120px; position:sticky;text-align:center;">\r\n                                        <p-inputSwitch [disabled]="true" [(ngModel)]="rowData[\'isActive\']"\r\n                                            name="isActive{{i}}"\r\n                                            matTooltip="{{ rowData[\'isActive\'] ? \'Active\' : \'In Active\'}}"\r\n                                            matTooltipPosition="above" (onChange)="handleChanges(rowData, $event)">\r\n                                        </p-inputSwitch>\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="emptymessage" let-columns *ngIf="employeeNames.length == 0">\r\n                                <tr>\r\n                                    <td [attr.colspan]="4" style="color: red; font-weight: bold; text-align: center">\r\n                                        No records found\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-template>\r\n                            <ng-template pTemplate="summary" id="footer">\r\n                                <label id="footer" class="footer">Total: </label>\r\n                                <input style="width: 5%;" [value]="employeeNames.length" name="totalRecords" disabled\r\n                                    pInputText type="text" />\r\n\r\n                                &nbsp;&nbsp;\r\n                                <label id="footer" class="footer1">Pages Count:</label>\r\n\r\n                                <input style="width: 5%;" [ngModel]="getTaxPageCount(employeeNames.length,pageSizeemp)"\r\n                                    name="page count tax" disabled pInputText type="text" />\r\n                            </ng-template>\r\n                        </p-table>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <div style="float:right">\r\n                    <button type="button" class="btn btn-danger" data-dismiss="modal"\r\n                        style="padding: 6px 12px !important;margin-top: 10px;" (click)="isEdit = false;">Close</button>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n            <div class="modal fade" id="memo-popup" role="dialog" data-backdrop="static">\r\n                <div class="modal-dialog modal-sm">\r\n                    <div class="modal-content">\r\n                        <div class="modal-header">\r\n                            <button type="button" class="close" data-dismiss="modal">\r\n                                &times;\r\n                            </button>\r\n                            <h4 class="modal-title">Edit Memo</h4>\r\n                        </div>\r\n                        <div class="modal-body">\r\n                            <table class="table table-bordered table-fixed workflow-table-material">\r\n                                <thead>\r\n                                    <th style="color: #fff;">Memo</th>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td style="white-space: inherit">\r\n                                            <p-editor spellcheck="true" [(ngModel)]="memoPopupContent"\r\n                                                [style]="{ height: \'320px\' }" name="memoPopupContent"\r\n                                                (ngModelChange)="onSaveChange()" required></p-editor>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            <div style="float: right;">\r\n                                <button type="button" class="btn btn-primary"\r\n                                    style="padding: 6px 12px !important; margin-top: 10px;"\r\n                                    (click)="onClickPopupSave()">\r\n                                    Save\r\n                                </button>\r\n                                <button type="button" class="btn btn-danger" (click)="closeMemoModel()"\r\n                                    style="padding: 6px 12px !important; margin-top: 10px;">\r\n                                    Close\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">\r\n                <div class="loading">\r\n                    <div class="lds-roller">\r\n                        <div>\r\n                        </div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-spinner *ngIf="isSpinnerVisible"></app-spinner>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">\r\n    <div class="loading">\r\n        <div class="lds-roller">\r\n            <div>\r\n            </div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<app-spinner *ngIf="isSpinnerVisible"></app-spinner>'},ZDLp:function(e,t,s){"use strict";s.r(t),t.default=".red {\n  background-color: #ED2939 !important;\n}\n\n.gray-background {\n  background-color: #c9c9c9 !important;\n}\n\n.btn-header-list {\n  text-align: right;\n  margin-right: -20px !important;\n  margin-top: 15px;\n  margin-bottom: 0px !important;\n}\n\nlabel {\n  text-align: left;\n  width: 150px;\n  margin-right: 0;\n  font-weight: normal;\n}\n\ninput[type=text], input[type=number], select {\n  height: 24px !important;\n  border-radius: 5px !important;\n}\n\ntextarea {\n  border-radius: 5px !important;\n}\n\n.head-notes {\n  height: 25px !important;\n}\n\n.inner-addon .ui-autocomplete-input {\n  width: 100% !important;\n}\n\n.po-head {\n  font-weight: bold;\n  font-size: 16px;\n  color: #295d92;\n}\n\n.partsList-table-tr th {\n  min-width: 100px;\n}\n\n.addpn-btn {\n  padding: 5px 10px !important;\n  font-size: 13px;\n}\n\na.fa.fa-plus-circle {\n  color: green !important;\n}\n\n.partsList-modal .form-group {\n  margin-bottom: 6px !important;\n}\n\n.rpo-table-cstm th {\n  padding: 8px 5px !important;\n}\n\n.child-add-icon {\n  cursor: pointer;\n  margin: 2px -12px;\n}\n\n.child-add-icon a:before, .child-add-icon i:before {\n  font-size: 16px;\n}\n\n.approver-details-cstm {\n  margin-top: 7px;\n}\n\n.approver-details-cstm p {\n  float: left;\n  margin-right: 40px;\n}\n\n.approver-tab-cstm .col-md-3 {\n  padding-right: 40px;\n  margin-right: 0;\n}\n\n.approver-tab-cstm .form-row {\n  margin-top: 10px;\n}\n\n.pas-table-cstm thead tr th {\n  text-align: center;\n}\n\n.ui-tabview .ui-tabview-panel {\n  overflow: initial !important;\n}\n\n.approvers-table tr th {\n  padding: 5px 10px;\n  text-align: center;\n}\n\n.approvers-table tr td {\n  padding: 5px;\n}\n\n.approverslist-table tr th {\n  padding: 5px 10px;\n  text-align: center;\n  min-width: 80px;\n}\n\n.approverslist-table tr td {\n  padding: 5px;\n}\n\n@media (min-width: 768px) {\n  .col-md-3 {\n    max-width: 22%;\n    margin-right: 15px;\n  }\n\n  .col-md-4 {\n    max-width: 31.5%;\n    margin-right: 15px;\n  }\n\n  .col-md-9 {\n    max-width: 70%;\n    margin-right: 15px;\n  }\n\n  #addContactInfo .col-md-6 {\n    max-width: 44%;\n    margin-right: 15px;\n  }\n}\n\n.vendorCapes-generalInfo .label {\n  width: 100px !important;\n}\n\n.vendorCapes-generalInfo .value {\n  width: calc(100% - 100px) !important;\n}"},ZTpb:function(e,t,s){"use strict";s.r(t),t.default=""},"dg+g":function(e,t,s){"use strict";s.r(t),t.default=".tableFixHead {\n  overflow-y: auto;\n  height: 450px;\n}\n\n.tableFixHead thead th {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  width: 100%;\n}\n\nth,\ntd {\n  padding: 8px 16px;\n  border: 1px solid #ccc;\n}\n\nth {\n  background: #4298ff !important;\n}"},jyDa:function(e,t,s){"use strict";s.r(t),t.default='.select-read-only {\n  border: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  text-indent: 1px;\n  text-overflow: "";\n  box-shadow: none !important;\n}\n\nselect-read-only {\n  background-color: white !important;\n}\n\nselect:disabled {\n  background-color: white !important;\n}'},kFbg:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));class a{constructor(){this.docName="",this.docMemo="",this.docDescription=""}}},rY54:function(e,t,s){"use strict";var a;s.d(t,"a",(function(){return a})),function(e){e[e.Customer=1]="Customer",e[e.Vendor=2]="Vendor",e[e.Manufacturer=3]="Manufacturer",e[e.Others=4]="Others",e[e.Revision=5]="Revision",e[e.Version=6]="Version",e[e.SalesQuate=7]="SalesQuate",e[e.Employee=8]="Employee",e[e.Company=9]="Company",e[e.SalesOrder=10]="SalesOrder",e[e.SOPickTicket=11]="SOPickTicket",e[e.PurchaseOrder=13]="PurchaseOrder"}(a||(a={}))},wOIX:function(e,t,s){"use strict";s.r(t),t.default=".coustomTable tr th {\n  font-weight: 600 !important;\n  font-size: 10.5px !important;\n  color: #fff !important;\n  background-color: #4298ff;\n  border: 1px solid #3a7fd2;\n  letter-spacing: 0.3px;\n  line-height: 25px;\n  text-align: center;\n}\n\n.coustomTable tr td {\n  padding: 5px 2px !important;\n  white-space: nowrap;\n  color: #222;\n  background: inherit;\n  border: 1px solid #c8c8c8;\n  font-size: 11px !important;\n}\n\n.workflow-table-material {\n  padding-bottom: 50%;\n}\n\n.fileupload {\n  overflow: scroll;\n}\n\ninput[type=number], input[type=text], input[type=email], select {\n  height: 24px !important;\n  border-radius: 5px !important;\n}\n\n.modal-body p {\n  overflow: auto !important;\n}\n\n.form-horizontal b {\n  top: auto !important;\n}\n\n.email-content {\n  max-height: 300px;\n  overflow: scroll;\n}\n\n.email-content span p {\n  overflow: scroll;\n}"}}]);