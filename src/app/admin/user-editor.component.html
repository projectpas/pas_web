<form #form="ngForm" [formGroup]="userProfileForm" style="margin-top:15px !important;margin-left:-35px !important" novalidate
 (ngSubmit)="save()" fxLayout="column" [fxLayoutGap]="isEditMode ? '1em' : '0'" autocomplete="off">

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em" class="margin-bottom">
       <div class="form-group col-md-4">
      
        <label style="margin-right:-10%">{{'users.editor.JobTitle' | translate}}</label>
        <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>           
            <input matInput 
            style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;" 
            formControlName="jobTitle" [readonly]="!isEditMode" />
        </mat-form-field>
    
        </div>
        <div class="form-group col-md-4">
        <label style="margin-right:-12%">{{'users.editor.FullName' | translate}}</label>

        <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>
            <input matInput formControlName="fullName"
            style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;"
             [readonly]="!isEditMode" />
        </mat-form-field>
        </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em" class="margin-bottom">
     <div class="form-group col-md-4" >
        <label style="margin-right:-10%">{{'users.editor.Email' | translate}}</label>
        
        <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>
            <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;"
             formControlName="email" [readonly]="!isEditMode" required/>
            <mat-error *ngIf="email.hasError('required')">
                {{'users.editor.EmailRequired' | translate}}
            </mat-error>
            <mat-error *ngIf="!email.hasError('required') && email.hasError('email')">
                {{'users.editor.InvalidEmail' | translate}}
            </mat-error>
        </mat-form-field>
        </div>
<div class="form-group col-md-4">
    <label  style="margin-right:-17%;width:100px">{{'users.editor.PhoneNumber' | translate}}</label>

        <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>
            <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;"
             formControlName="phoneNumber" [readonly]="!isEditMode" />
        </mat-form-field>
        </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em" class="margin-bottom">
     <div class="form-group col-md-4">
        <label  style="margin-right:-16%;width:100px">{{'users.editor.UserName' | translate}}</label>
        
        <mat-form-field class="app-validate"  [floatLabel]="floatLabels" fxFlex>

            <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;" 
            formControlName="userName" [readonly]="!isEditMode" autocomplete="off" required/>
            <mat-error *ngIf="userName.hasError('required')">
                {{'users.editor.UserNameRequired' | translate}}
            </mat-error>
        </mat-form-field>
        </div>

        <div class="form-group col-md-4" *ngIf="(isEditMode && !isNewUser && userName.value != user.userName) || (isChangePassword && isEditingSelf)">
        <label  style="margin-right:-12%;width:100px">{{'users.editor.CurrentPassword' | translate}}</label>
        
        <mat-form-field class="app-validate" [floatLabel]="floatLabels" formGroupName="password"  fxFlex>
            <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;" 
            type="password" formControlName="currentPassword" />
            <mat-error *ngIf="currentPassword.hasError('required')">
                {{'users.editor.CurrentPasswordRequired' | translate}}
            </mat-error>
        </mat-form-field>
        </div>

    </div>

    <div *ngIf="isEditMode">

        <button mat-raised-button (click)="changePassword()" *ngIf="!(isChangePassword || isNewUser)" color="primary">{{'users.editor.ChangePassword' | translate}}</button>

        <div *ngIf="isChangePassword || isNewUser" formGroupName="password" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em" class="margin-bottom">
           <div class="form-group col-md-4">
            <label  style="margin-right:-10% ;width:100px">{{'users.editor.NewPassword' | translate}}</label>

            <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>
                <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;" 
                type="password" formControlName="newPassword" autocomplete="off" require/>
                <mat-error *ngIf="newPassword.hasError('required')">
                    {{'users.editor.NewPasswordRequired' | translate}}
                </mat-error>
                <mat-error *ngIf="!newPassword.hasError('required') && newPassword.hasError('pattern')">
                    {{'users.editor.NewPasswordRules' | translate}}
                </mat-error>
            </mat-form-field>
            </div>

            <div class="form-group col-md-4">
                <label  style="margin-right:-12%;width:100px">{{'users.editor.ConfirmPassword' | translate}}</label>

            <mat-form-field class="app-validate" [floatLabel]="floatLabels" fxFlex>
                <input matInput style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;"
                 type="password" formControlName="confirmPassword" required/>
                <mat-error *ngIf="confirmPassword.hasError('required')">
                    {{'users.editor.ConfirmationPasswordRequired' | translate}}
                </mat-error>
                <mat-error *ngIf="!confirmPassword.hasError('required') && confirmPassword.hasError('notEqual')">
                    Test
                    {{'users.editor.PasswordMismatch' | translate}}
                </mat-error>
            </mat-form-field>
            </div>

        </div>

    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em">

       <div class="form-group col-md-4">
        <label  style="margin-right:-10%;margin-top:-5px">{{'users.editor.Roles' | translate}}</label>
        <mat-form-field class="app-validate" appearance="none" [floatLabel]="floatLabels" fxFlex>
       
         
            <mat-select style="background-color: #fff !important;border:1px solid;padding: 5px !important;border-radius: 5px;" 
            formControlName="roles" [(value)]="user.roleName" multiple [attr.disabled]="!isEditMode || !canAssignRoles">
                <mat-option *ngFor="let role of assignableRoles" [value]="role.name" >
                    <span matTooltip="{{role.description}}">{{role.name}}</span>
                </mat-option>
            </mat-select>
            <mat-error *ngIf="assignedRoles.hasError('required')">
                {{'users.editor.RoleRequired' | translate}}
            </mat-error>
        </mat-form-field>
        </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="1em">

        <div fxFlex.gt-sm="0 1 calc(50% - 0.5em)">
            <mat-checkbox *ngIf="isEditMode" formControlName="isEnabled">{{'users.editor.Enabled' | translate}}</mat-checkbox>
        </div>

        <div>
            <button mat-button *ngIf="user.isLockedOut" clas="btn btn-primary" (click)="unlockUser()"
             [attr.disabled]="isSaving" color="accent"><mat-icon class="mat-button-icon">lock_open</mat-icon>{{'users.editor.Unblock' | translate}}</button>
            </div>

    </div>

   
    <div>&nbsp;</div>
</form>
 
