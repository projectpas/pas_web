<div class="card">
    <div class="card-body p-t-0">
        <div class="row">
            <div class="col-md-3" style="padding-left:25px; padding-top:5px">
                <div class="form-group">
                    <label>SO Num <span class="clr-red">*</span></label>
                    <input type="text" class="form-control" name="salesOrderNumber"
                        [(ngModel)]="salesOrder.salesOrderNumber" [disabled]="true" #accountTypeId="ngModel"
                        id="salesOrderNumber" #salesOrderNumber="ngModel" />
                </div>
            </div>
            <div class="col-md-3" style="padding-left:25px; padding-top:5px">
                <div class="form-group">
                    <label>SO Quote Num</label>
                    <input type="text" class="form-control" [(ngModel)]="salesOrder.salesOrderQuoteNumber"
                        name="salesOrderQuoteNumber" [disabled]="true" />
                </div>
            </div>
            <!-- <div class="col-md-3" style="padding-left:25px; padding-top:5px">
                <label></label>
                <div class="form-group">
                    <button type="submit" class="btn submit-btn btn btn-primary">Sales Order</button>
                </div>
            </div> -->
            <div class="col-md-6" style="padding-left:25px; padding-top:5px">
                <label style="width: 100%;"></label>
                <div class="form-group" style="float: right; margin-right: 10px;">
                    <button type="submit" class="btn  submit-btn btn btn-primary">Create Shipping</button>
                </div>
            </div>
        </div>
        <!-- <p-table #dt [value]="partsForBilling" class="rpo-table-cstm lastcol-fix" [first]="0" [rows]="pageSize"
            [paginator]="showPaginator" [pageLinks]="3" [rowsPerPageOptions]="[10, 20, 50, 100]"
            [columns]="selectedColumns" [lazy]="true" (onLazyLoad)="loadData($event)" [totalRecords]="totalRecords"
            [scrollable]="true" [style]="{ width: '100%' }"> -->
        <!-- <ng-template pTemplate="caption"> -->
        <!-- <div class="row">
                    <div class="col">
                    </div>
                </div> -->
        <!-- </ng-template> -->
        <!-- <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col *ngFor="let col of columns" class="table-column-width" />
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th class="table-column-width">Ready?</th>
                    <th class="table-column-width" *ngFor="let col of columns" [pSortableColumn]="col.field">
                        {{ col.header }}
                    </th>
                    <th class="table-column-width">Actions</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-columns="columns">
                <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" pReorderableRowHandle>
                    <td class="table-column-width">
                        <input type="checkbox" [(ngModel)]="rowData.selected"
                        [disabled]="!rowData.isApproved || rowData.isShipped"/>
                    </td>
                    <td class="table-column-width" *ngFor="let col of columns">
                        <span *ngIf="col.field == 'totalSales'" class="float-right">
                            {{convertDate(col.field , rowData) | twoDecimalGlobalNumberFormatPipe}}
                        </span>
                        <span *ngIf="col.field != 'totalSales'">
                            {{convertDate(col.field , rowData)}}
                        </span>
                    </td>
                    <td class="table-column-width">
                        <button type="submit" class="btn submit-btn btn btn-primary"
                            (click)="onSelectPartNumber(rowData)" [disabled]="!rowData.selected">Create
                            Shipping</button>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns *ngIf="partsForBilling.length == 0">
                <tr>
                    <td [attr.colspan]="10" class="no-records-cstm no-records-msg">
                        No records found
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="summary" id="footer">
                <label id="footer" class="footer">Total:</label>
                <input class="footer-input-width" [(ngModel)]="dt._totalRecords" [disabled]="true" pInputText
                    type="text" />
                &nbsp;&nbsp;
                <label id="footer" class="footer1">Pages Count:</label>

                <input class="footer-input-width" [ngModel]="totalPages" [disabled]="true" pInputText type="text" />
            </ng-template>
        </p-table> -->

        <div [ngClass]="'table-responsive pas-table-cstm rro-part-table-cstm poro-table-cstm parts-list-table-align parts-zindex'"
            style="min-height: 130px !important;">
            <div class="tableFixHead">
                <table class="table table-bordered" id="so-table">
                    <tr class="header-table-width" style="font-size: 10px">
                        <th *ngFor="let summaryColumn of headers">
                            <span>
                                {{ summaryColumn.header }}
                            </span>
                        </th>
                        <!-- <th colspan="26"></th> -->
                        <!-- <th>Actions</th> -->
                        <th colspan="5"></th>
                        <th></th>
                    </tr>
                    <ng-container *ngIf="shippingList.length > 0">
                        <ng-container *ngFor="let summaryPart of shippingList; let rowIndex = index;">
                            <tbody>
                                <tr ngClass="'row-bg1'" pReorderableRowHandle>
                                    <td *ngFor="let summaryColumn of headers"
                                        style="width:auto; background-color: #EAF2C5 !important;" pReorderableRowHandle>
                                        <span *ngIf="summaryColumn.field == 'itemNo'">
                                            Item {{summaryPart[summaryColumn.field] }}
                                        </span>
                                        <span *ngIf="summaryColumn.field != 'itemNo'">
                                            {{summaryPart[summaryColumn.field]}}
                                        </span>
                                    </td>
                                    <td colspan="5"></td>
                                    <td></td>
                                    <!-- <td style="position:sticky; width:80px">
                                  <span>
                                      <button class="btn nobg" mat-icon-button (click)="pickticketItemInterface(summaryPart,pickticketieminterface)" matTooltip="Add PT"
                                              matTooltipPosition="above" style="font-weight: bold;"
                                              [disabled]="summaryPart.qtyToShip >= summaryPart.qty">
                                              <i class="fa fa-plus"></i>
                                      </button>
                                  </span>
                              </td> -->
                                </tr>
                                <tr class="child-header splitship-head child-header-back">
                                    <th style="background-color: #fff !important;"></th>
                                    <th>Ready?</th>
                                    <th>Ship Date</th>
                                    <th>Shipping Num </th>
                                    <th>Pick Ticket Ref</th>
                                    <th>Item #</th>
                                    <th>PN</th>
                                    <th>PN Description</th>
                                    <th style="min-width: 120px;">Stk Line Num</th>
                                    <th style="min-width: 120px;">Serial Num</th>
                                    <th style="min-width: 70px;">Qty To Ship</th>
                                    <th style="min-width: 100px;">Customs Value</th>
                                    <th style="min-width: 120px;">Commodity Code</th>
                                    <!-- <th colspan="2"></th> -->
                                    <th style="min-width: 120px; position: sticky !important">Actions</th>
                                </tr>
                                <tr class="child-data splitship-child child-data-back"
                                    *ngFor="let ship of summaryPart.soshippingchildviewlist; let poIndex = index">
                                    <td></td>
                                    <td class="table-column-width" *ngIf="ship.qtyShipped > 0">
                                        <label style="color: #0F9D58">Shipped</label>
                                    </td>
                                    <td class="table-column-width" *ngIf="ship.qtyShipped == 0">
                                        <input id="{{poIndex}}" name="ship.selected{{poIndex}}" type="checkbox"
                                            (change)="checked($event,poIndex);" [(ngModel)]="ship.selected" />
                                    </td>
                                    <td>
                                        {{ ship.shipDate | date : "MM/dd/yyyy" }}
                                    </td>
                                    <td>
                                        {{ ship.soShippingNum }}
                                    </td>
                                    <td>
                                        {{ ship.soPickTicketNumber }}
                                    </td>
                                    <td>
                                        Item {{ ship.itemNo}}
                                    </td>
                                    <td>
                                        {{ ship.partNumber }}
                                    </td>
                                    <td>
                                        {{ ship.partDescription }}
                                    </td>
                                    <td>
                                        {{ ship.stockLineNumber }}
                                    </td>
                                    <td>
                                        {{ ship.serialNumber }}
                                    </td>
                                    <td>
                                        {{ ship.qtyToShip}}
                                    </td>
                                    <td>
                                        {{ ship.customsValue }}
                                    </td>
                                    <td>
                                        {{ ship.commodityCode }}
                                    </td>
                                    <!-- <td colspan="2"></td> -->
                                    <td class="zui-sticky-col" style="width:107px !important">
                                        <span>
                                            <button *ngIf="ship.qtyShipped == 0" type="submit" class="btn submit-btn btn btn-primary"
                                                (click)="onSelectPartNumber(ship)" matTooltip="Create Shipping"
                                                matTooltipPosition="above" style="font-weight: bold;"><i
                                                    class="fa fa-plus"></i></button>
                                            <!-- <button class="btn nobg" mat-icon-button (click)="ConfirmPTpopup(confirm,ship)" matTooltip="Confirm"
                                            matTooltipPosition="above" style="font-weight: bold;">
                                            <i class="fa fa-check"></i>
                                          </button> -->
                                        </span>
                                        <span>
                                            <button *ngIf="ship.qtyShipped != 0" class="btn nobg" mat-icon-button (click)="shippingEdit(ship,pickticketieminterface)" matTooltip="Edit"
                                              matTooltipPosition="above" style="font-weight: bold;"
                                              >
                                              <i class="fa fa-pencil"></i>
                                            </button>
                                    </span>
                                    </td>
                                </tr>
                            </tbody>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="shippingList.length == 0">
                        <tbody>
                            <tr>
                                <td colspan="48"
                                    style="color: red; font-weight: bold; text-align: left; text-transform: uppercase">
                                    No records found
                                </td>
                            </tr>
                        </tbody>
                    </ng-container>
                </table>
            </div>
        </div>
        <!-- <div class="card-body"> -->
        <div *ngIf="partSelected">
            <form #shippingForm="ngForm">
                <div class="form-row">
                    <div class="col-md-6">
                        <div class="card card-stock">
                            <div class="card-body">
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Shipping Order Num</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.soShippingNum" name="shippingOrderNum"
                                            disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Status<span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <select [(ngModel)]="shippingHeader.soShippingStatusId" name="status" required
                                            [disabled]="isView">
                                            <option value="">Select</option>
                                            <option
                                                *ngFor="let status of [{'label':'Open', 'id':1}, {'label':'Shipped', 'id':2}, {'label':'In Transit', 'id':3}, {'label':'Received', 'id':4}]"
                                                [value]="status.id">{{status.label}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Open Date <span
                                                class="clr-red">*</span> </label>
                                    </div>
                                    <div class="col-md-8">
                                        <p-calendar [showIcon]="true" (onSelect)="calculateExpiryDate()"
                                            [(ngModel)]="shippingHeader.openDate" name="openDate" [disabled]="isView"
                                            required></p-calendar>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Customer</label>
                                    </div>
                                    <div class="col-md-8" *ngIf="customerDetails">
                                        <input class="form-control" (change)="calculateExpiryDate()" type="text"
                                            [(ngModel)]="customerDetails.name" name="customer" disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12" *ngIf="customerDetails">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Cus Code</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="customerDetails.customerCode" name="customerCode" disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Cert Num</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="number" [(ngModel)]="validFor" name="certNum"
                                            disabled />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card card-stock">
                            <div class="card-body">
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Ship Via <span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <select [(ngModel)]="shippingHeader.shipviaId" [disabled]="isView"
                                            name="shipVia" required>
                                            <option value="">Select</option>
                                            <option *ngFor="let shipvia of shipViaList" [value]="shipvia.value">
                                                {{shipvia.label}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Ship Date<span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <p-calendar [showIcon]="true" (onSelect)="calculateExpiryDate()"
                                            [(ngModel)]="shippingHeader.shipDate" name="shipDate" [disabled]="isView"
                                            required></p-calendar>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">AWB/Tracking Num<span
                                                class="clr-red">*</span> </label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.airwayBill"
                                            name="airwayBill" [disabled]="isView" required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Weight</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input type="number" class="input-field-value" pKeyFilter="num" pInputText
                                            maxlength="10" [(ngModel)]="shippingHeader.weight" name="shipWeight"
                                            id="shipWeight" title="Export Weight" (keyup)="btnChange()" />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">UOM <span style="color: red;"
                                                *ngIf="shippingHeader.shipWeight">*</span>
                                        </label>
                                    </div>
                                    <div class="col-md-8">
                                        <p-dropdown [options]="allWeightUnitOfMeasureInfo" filter="true"
                                            [(ngModel)]="shippingHeader.shipWeightUnit" name="shipWeightUnit"
                                            [resetFilterOnHide]="true" placeholder="Select" [showClear]="true"
                                            [required]="shippingHeader.shipWeight > 0" (onChange)="btnChange()">
                                        </p-dropdown>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">Dimension (L, W, H)</label>
                                    </div>
                                    <div class="col-md-8">
                                        <span class="display-flex inline-block">
                                            <input type="number" name="exportLength" class="input-field-value"
                                                pInputText pKeyFilter="num" maxlength="10" (keyup)="btnChange()"
                                                [(ngModel)]="shippingHeader.shipSizeLength" />&nbsp;
                                            <input type="number" name="exportWidth" class="input-field-value" pInputText
                                                pKeyFilter="num" maxlength="10" (keyup)="btnChange()"
                                                [(ngModel)]="shippingHeader.shipSizeWidth" />&nbsp;
                                            <input type="number" name="exportHeight" class="input-field-value"
                                                pInputText pKeyFilter="num" maxlength="10" (keyup)="btnChange()"
                                                [(ngModel)]="shippingHeader.shipSizeHeight" />
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="sale-order-shipping-lable">
                                            UOM <span style="color: red;"
                                                *ngIf="shippingHeader.shipSizeLength || shippingHeader.shipSizeWidth || shippingHeader.shipSizeHeight">*</span>
                                        </label>
                                    </div>
                                    <div class="col-md-8">
                                        <p-dropdown [options]="allWeightUnitOfMeasureInfo" filter="true"
                                            [(ngModel)]="shippingHeader.shipSizeUnitOfMeasureId"
                                            name="shipSizeUnitOfMeasureId" [resetFilterOnHide]="true"
                                            placeholder="Select" [showClear]="true"
                                            [required]="shippingHeader.shipSizeLength > 0 || shippingHeader.shipSizeWidth > 0 || shippingHeader.shipSizeHeight > 0"
                                            (onChange)="btnChange()"></p-dropdown>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h4 class="heading">Address Details</h4>
                <div class="form-row">
                    <div class="col-md-4">
                        <div class="card card-stock">
                            <div class="card-header">
                                <h5 style="text-align: center;">Origin</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Name <span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <select [(ngModel)]="shippingHeader.originSiteId" name="originSiteId"
                                            (change)="setOriginToAddress(shippingHeader.originSiteId)" required>
                                            <option *ngFor="let site of orignSiteNames" [ngValue]="site.originSiteId">
                                                {{site.originName}}</option>
                                        </select>
                                        <!-- <input class="form-control" type="text" [(ngModel)]="shippingHeader.originName"
                                            name="originName" [disabled]="isView" required disabled /> -->
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 1<span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.originAddress1" name="originAddress1" disabled
                                            required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 2</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.originAddress2" name="originAddress2"
                                            disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>City<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.originCity"
                                            name="originCity" disabled required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>State<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.originState"
                                            name="originState" disabled required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Zip<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.originZip"
                                            name="originZip" required disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Country<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.originCountryName" name="originCountryName"
                                            required disabled />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-stock">
                            <div class="card-header">
                                <h5 style="text-align: center;">Bill To</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Name <span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <!-- <input class="form-control" type="text" [(ngModel)]="shippingHeader.soldToName"
                                            name="soldName" [disabled]="isView" required disabled /> -->
                                        <p-autoComplete field="userName" [(ngModel)]="shippingHeader.soldToName"
                                            name="soldToName" errorMessage="Records not found" [forceSelection]="true"
                                            (onSelect)="getSiteNamesBySoldCustomerId($event)"
                                            [suggestions]="customerNamesList"
                                            (completeMethod)="filterCustomerName($event)"
                                            (onKeyUp)="clearAddress('SoldTo', $event.target.value)" [size]="30"
                                            [minLength]="1" #customerName="ngModel" required [dropdown]="true"
                                            class="p-autoComplete-ctsm" [disabled]="isView">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Site <span class="clr-red">*</span>
                                            <span *ngIf="shippingHeader.soldToName" style="margin-left:3px;cursor:pointer;"><a class="fa fa-plus-circle fa-lg" matTooltip="Add Site Name" matTooltipPosition="above" data-toggle="modal" data-target="#createBillingSiteName" (click)="onClickBillSiteName('Add')"></a></span>
                                        </label>
                                    </div>
                                    <!-- <span style="margin-left:0px;cursor:pointer;">
                                        <a class="btn nobg"
                                        matTooltipPosition="above" matTooltip="Edit Site Name"
                                        *ngIf="shippingHeader.soldToSiteId > 0"
                                        data-toggle="modal" data-target="#createBillingSiteName"
                                        (click)="onClickBillSiteName('Edit', sourcePoApproval)">
                                        <i class="fa fa-pencil" ></i>
                                        </a>
                                    </span> -->
                                    <div class="col-md-8">
                                        <select [(ngModel)]="shippingHeader.soldToSiteId" (change)="setSoldToAddresses()"
                                            [disabled]="isView" name="soldToSite" required>
                                            <option value="">Select</option>
                                            <option *ngFor="let site of soldCustomerSiteList"
                                                [value]="site.customerBillingAddressId">
                                                {{site.siteName}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 1<span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.soldToAddress1" name="soldToAddress1" required
                                            [disabled]="isView" disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 2</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.soldToAddress2" name="soldToAddress2"
                                            [disabled]="isView" disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>City<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.soldToCity"
                                            name="soldToCity" [disabled]="isView" required disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>State<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.soldToState"
                                            name="soldToState" [disabled]="isView" required disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Zip<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.soldToZip"
                                            name="soldToZip" [disabled]="isView" required disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Country<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.soldToCountryName" name="soldToCountryName"
                                            [disabled]="isView" required disabled />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-stock">
                            <div class="card-header">
                                <!-- <div class="checkbox-cstm" style="margin-left: 0; width: 148px; display: inline-block;">
                                    <label style="width: auto !important;margin-top: 3px;">
                                        <input type="checkbox" [(ngModel)]="shippingHeader.isSameForShipTo"
                                            name="cparent" id="cparent"
                                            (click)="assignDetails($event.target.checked)" />
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Same as Bill To
                                    </label>
                                </div> -->
                                <h5 style="text-align: center;">Ship To</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Name <span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <p-autoComplete field="userName" [(ngModel)]="shippingHeader.shipToCustomerId"
                                            name="shipToName" errorMessage="Records not found" [forceSelection]="true"
                                            (onSelect)="getSiteNamesByShipCustomerId($event)"
                                            [suggestions]="customerNamesList"
                                            (completeMethod)="filterCustomerName($event)"
                                            (onKeyUp)="clearAddress('ShipTo', $event.target.value)" [size]="30"
                                            [minLength]="1" #customerName="ngModel" required [dropdown]="true"
                                            class="p-autoComplete-ctsm" [disabled]="isView">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Site <span class="clr-red">*</span>
                                            <span *ngIf="shippingHeader.shipToCustomerId" style="margin-left:3px;cursor:pointer;"><a class="fa fa-plus-circle fa-lg" matTooltip="Add Site Name" matTooltipPosition="above" data-toggle="modal" data-target="#createPOSiteName" (click)="onClickShipSiteName('Add')"></a></span>
                                        </label>
                                    </div>
                                    <div class="col-md-8">
                                        <select [(ngModel)]="shippingHeader.shipToSiteId" (change)="setShipToAddress()"
                                            [disabled]="isView" name="shipToSite" required>
                                            <option value="">Select</option>
                                            <option *ngFor="let site of shipCustomerSiteList"
                                                [value]="site.customerDomensticShippingId">{{site.siteName}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 1<span
                                                class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.shipToAddress1" name="shipToAddress1"
                                            disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label class="workorder-label">Address Line 2</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.shipToAddress2" name="shipToAddress2"
                                            disabled />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>City<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.shipToCity"
                                            name="shipToCity" disabled required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>State<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.shipToState"
                                            name="shipToState" disabled required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Zip<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text" [(ngModel)]="shippingHeader.shipToZip"
                                            name="shipToZip" disabled required />
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <div class="col-md-4">
                                        <label>Country<span class="clr-red">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <input class="form-control" type="text"
                                            [(ngModel)]="shippingHeader.shipToCountryName" name="shipToCountryName"
                                            disabled required />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-row"
                    *ngIf="(shippingHeader.originCountryId && shippingHeader.shipToCountryId) && shippingHeader.originCountryId !=shippingHeader.shipToCountryId">
                    <h4 class="heading">Custom Info </h4>
                    <div class="form-row">
                        <div class="col-md-4">
                            <div class="card card-stock">
                                <div class="card-body">
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>Entry Type <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['entryType']"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" name="entryType" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>Entry Num <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['entryNumber']"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" name="entryNumber" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label class="workorder-label">Entry Commodity Code</label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['commodityCode']"
                                                name="entryCommodityCode" [disabled]="isView" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card card-stock">
                                <div class="card-body">
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>EPU <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['epu']" name="epu"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>UCR <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['ucr']" name="ucr"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>Master UCR</label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['masterUCR']"
                                                name="masterUCR" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label class="workorder-label">Movement Ref No</label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="text"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['movementRefNo']"
                                                name="MovementRefNo" [disabled]="isView" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card card-stock">
                                <div class="card-body">
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label class="workorder-label">Customs Value <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="number"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['customsValue']"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" name="customsValue" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>Net Mass <span style="color: red;"
                                                *ngIf="shippingHeader.originCountryId !=shippingHeader.shipToCountryId">*</span></label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="number"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['netMass']"
                                                [required]="shippingHeader.originCountryId !=shippingHeader.shipToCountryId" name="netMass" [disabled]="isView" />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="col-md-4">
                                            <label>VAT Value</label>
                                        </div>
                                        <div class="col-md-8">
                                            <input class="form-control" type="number"
                                                [(ngModel)]="shippingHeader['salesOrderCustomsInfo']['vatValue']"
                                                name="VATValue" [disabled]="isView" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-row" style="padding-top: 5px;">
                    <div class="col-md-12">
                        <div class="card card-stock">
                            <div class="card-body">
                                <button *ngIf="!isView" class="btn btn-primary pull-right" style="width: 100px;"
                                    (click)="save()">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="preloader" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>

<div class="modal fade" id="createBillingSiteName" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog partsList-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="resetAddressBillingForm();">&times;</button>
                <h4 class="modal-title">Add Bill To Details</h4>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <form #addBillNameForm="ngForm" class="form-horizontal">
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Is Primary </label>
                            <input type="checkbox" name="isPrimary"  class="form-control col-md-6"  [(ngModel)]="addressFormForBilling.isPrimary"  (ngModelChange)="billAddChange()">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Site Name <span class="clr-red">*</span></label>
                            <p-autoComplete                 
                            class="autocomp-customer-cstm" 
                            name="siteName"
                            [(ngModel)]="addressFormForBilling.siteName" 
                            [suggestions]="lstfilterBillingSite"                     
                            emptyMessage="No Match Found" 
                            field="siteName" 
                            (onKeyUp)="checkSiteNameExist($event.target.value)"
                            (onChange)="checkSiteNameExist($event.target.value)"
                            (onSelect)="checkSiteNameSelect()"
                            (completeMethod)="filterBillingSite($event);" 
                            (ngModelChange)="billAddChange()" 
                            [size]="30" [minLength]="1" [dropdown]="true" required>
                          </p-autoComplete>
                          <div *ngIf="isSiteNameAlreadyExists" class="clr-red">
                                    Site Name Already Exists
                          </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 1 <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="address1"  (change)="billAddChange()" [(ngModel)]="addressFormForBilling.address1" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 2 </label>
                            <input type="text" class="form-control col-md-6" name="address2" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.address2">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">City <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="city" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.city" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">State <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="stateOrProvince" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.stateOrProvince" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Postal <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="postalCode" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.postalCode" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Country <span class="clr-red">*</span></label>
                            <p-autoComplete field="label" class="pautocomp-cstm"  (onSelect)="billAddChange()" (change)="billAddChange()" [(ngModel)]="addressFormForBilling.countryId" name="country" [suggestions]="countriesList" (completeMethod)="filterCountries($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" required></p-autoComplete>
                        </div>
                        <!-- <div class="form-group col-md-12" style="margin-top: 8px;">
                              <button type="button" class="btn btn-primary" 
                              (click)="saveBillingAddress();"  
                              *ngIf="(!isEditModeBilling) || isEditModeBilling"
                               [disabled]="!(addBillNameForm.valid && billAddbutton && !isSiteNameAlreadyExists)" 
                                data-dismiss="modal">{{isEditModeBilling ? 'Update' : 'Save' }}</button>
                        </div> -->
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" 
                              (click)="saveBillingAddress();"  
                              *ngIf="(!isEditModeBilling) || isEditModeBilling"
                               [disabled]="!(addBillNameForm.valid && billAddbutton && !isSiteNameAlreadyExists)" 
                                data-dismiss="modal">{{isEditModeBilling ? 'Update' : 'Save' }}</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="resetAddressBillingForm();">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="createPOSiteName" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog partsList-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="resetAddressShippingForm();">&times;</button>
                <h4 class="modal-title">Add Ship To Details</h4>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <form #addSiteNameForm="ngForm" class="form-horizontal">
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Is Primary </label>
                            <input type="checkbox" name="isPrimary"  class="form-control col-md-6"  [(ngModel)]="addressFormForShipping.isPrimary"  (ngModelChange)="shipAddChange()">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Site Name <span class="clr-red">*</span> :</label>
                            <p-autoComplete                 
                            class="autocomp-customer-cstm" 
                            name="siteName"
                            [(ngModel)]="addressFormForShipping.siteName" 
                            [suggestions]="lstfilterShippingSite"                     
                            emptyMessage="No Match Found" 
                            field="siteName" 
                            (onKeyUp)="checkShippingSiteNameExist($event.target.value)"
                            (onChange)="checkShippingSiteNameExist($event.target.value)"
                            (onSelect)="checkShippingSiteNameSelect()"
                            (completeMethod)="filterShippingSite($event);" 
                            (ngModelChange)="shipAddChange()" 
                            [size]="30" [minLength]="1" [dropdown]="true" required>
                          </p-autoComplete>
                          <div *ngIf="isShippingSiteNameAlreadyExists" class="clr-red">
                                    Site Name Already Exists
                          </div>
                            <!-- <input type="text" class="form-control col-md-6" name="siteName" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.siteName" required>-->
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 1 <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="address1" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.address1" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 2:</label>
                            <input type="text" class="form-control col-md-6" name="address2" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.address2">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">City <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="city" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.city" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">State <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="stateOrProvince" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.stateOrProvince" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Postal <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="postalCode" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.postalCode" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Country <span class="clr-red">*</span></label>
                            <p-autoComplete field="label" class="pautocomp-cstm" (onSelect)="shipAddChange()" (change)="shipAddChange()" [(ngModel)]="addressFormForShipping.countryId" name="country" [suggestions]="countriesList" (completeMethod)="filterCountries($event)" [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found" [forceSelection]="true" required></p-autoComplete>
                        </div>
                        <!-- <div class="form-group col-md-12" style="margin-top: 8px;">
                            <button type="button" class="btn btn-primary" *ngIf="(!isEditModeShipping) || isEditModeShipping" (click)="saveShippingAddress();"  [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists)"  data-dismiss="modal">{{isEditModeShipping ? 'Update' : 'Save' }}</button> <!--resetAddressShippingForm();-->
                            <!-- <button type="button" class="btn btn-primary" *ngIf="showIsPoOnlyButton &&  (!isEditModeShippingPoOnly && !isEditModeShipping) || isEditModeShippingPoOnly" [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists) || addressFormForShipping.isPrimary" (click)="saveShippingAddressToPO();"   data-dismiss="modal">{{isEditModeShippingPoOnly ? 'Update to this PO' : 'Save to this PO' }}</button>
                        </div> -->

                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" *ngIf="(!isEditModeShipping) || isEditModeShipping" (click)="saveShippingAddress();"  [disabled]="!(addSiteNameForm.valid && ShipAddbutton && !isShippingSiteNameAlreadyExists)"  data-dismiss="modal">{{isEditModeShipping ? 'Update' : 'Save' }}</button> <!--resetAddressShippingForm();-->
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="resetAddressShippingForm();">Close</button>
            </div>
        </div>
    </div>
</div>