<div class="table-responsive pas-table-cstm rro-part-table-cstm poro-table-cstm parts-list-table-align parts-zindex"
  style="min-height: 130px !important;">
  <div class="tableFixHead">
    <table class="table table-bordered " id="po-table">
      <thead>
        <tr class="font-size-10">
          <th class="min-width-30">Line#</th>
          <th class="th-width">PN</th>
          <th>PN Description</th>
          <th *ngIf="isViewMode == false"></th>
          <th>PN</th>
          <th>PN Description</th>
          <th>Item Type</th>
          <td>Qty</td>
          <td>Unit Price</td>
          <td>Est Price</td>
          <td>Occurance (%)*</td>
          <td>Notes</td>
          <td *ngIf="isViewMode == false">Action</td>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let partList of partListData;let row_index=index;">
          <tr class="table-parent-data purchase-td-back" *ngIf="!partList.isDeleted">

            <td>{{partList.itemNo}}</td>
            <td class="parts-des-td">{{partList.pn}}</td>
            <td class="parts-des-td">{{partList.description}}</td>
            <td *ngIf="isViewMode == false">
              <i class="fa fa-plus btn btn-success btn-cstm poro-plus-cstm btn-xs" matTooltip="Add PN"
                matTooltipPosition="above" style="padding: 0px 4px !important;" (click)="addNewPartNumber(partList)"></i>
            </td>
            <td>
              <p-autoComplete appendTo="body" [(ngModel)]="partList.partNumber" [suggestions]="partCollection"
                (completeMethod)="filterpartItems($event)" [size]="32" [minLength]="1" [dropdown]="true"
                class="wf-header-select" #partNum="ngModel" errorMessage="Records not found" field="partNumber"
                (onSelect)="onPartSelect($event,row_index)" [forceSelection]="true" title="PN" required
                name="pn_{{row_index}}">
              </p-autoComplete>
            </td>
            <td class="parts-des-td">{{partList.exPartDescription}}</td>
            <td class="parts-des-td">{{partList.exStockType}}</td>
            <td>
              <input type="text" class="form-control text-right" pInputText pKeyFilter="pnum" maxlength="15"
                (keyup)="calculateExtendedCost(partList)" [(ngModel)]="partList.exQuantity"
                [disabled]="partList['isEditPart'] == true" value="{{ partList.exQuantity }}" name="exQuantity_{{row_index}}" />
            </td>
            <td>
              <input type="text" class="form-control text-right" pInputText pKeyFilter="money"
                (change)="calculateExtendedCost(partList)" [(ngModel)]="partList.exUnitPrice"
                [disabled]="partList['isEditPart'] == true" value="{{ partList.exUnitPrice }}" name="exUnitPrice_{{row_index}}" maxlength="15" />
            </td>
            <td>
              <input type="text" class="form-control text-right" pInputText pKeyFilter="money"
                [(ngModel)]="partList.exExtPrice"
                value="{{ partList.exExtPrice }}" name="exExtPrice_{{row_index}}" maxlength="15" disabled/>
            </td>
            <td>
              <select class="form-control wf-pub-id full-width" id="ddlEstimatedOccurance"
                [disabled]="partList['isEditPart'] == true" [(ngModel)]="partList.exOccurance" name="exOccurance_{{row_index}}"> Occurance
                <option value="-1">--Select--</option>
                <option value="{{ occurance.label }}" *ngFor="
                                                let occurance of exclusionEstimatedOccurances;
                                                let i = index">{{ occurance.value }}</option>
              </select>
            </td>
            <td>
              <div class="form-group memo-popup-cstm mat_emo textarea-memo-div">
                <div [innerHTML]="partList.exNotes" class="text_editor_box" matTooltipPosition="above"
                  [matTooltip]="parsedText(partList.exNotes)"></div>
                <i class="fa fa-pencil ci_cls " data-toggle="modal" data-target="#textarea-popupexclusion"
                  matTooltip="Notes" matTooltipPosition="above" [class.disabled]="isViewMode"
                  [ngClass]="{'btn_disabled': isViewMode}" (click)="onAddTextAreaInfo(partList,row_index)"></i>
              </div>
            </td>
            <td *ngIf="isViewMode == false">
              <a [class.disabled]="isViewMode"
                                            [ngClass]="{'btn_disabled': isViewMode}"
                                            class="btn nobg view-part-eye" (click)="editPart(row_index)"
                                            matTooltip="Edit PN" matTooltipPosition="above">
                                            <i class="fa fa-pencil"></i>
                                        </a>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
  <div class="float-right" *ngIf="isViewMode == false">
    <button class="btn btn-primary m-t-10" (click)="saveSpeedQuoteExclusions(errorpopup)">
      Save
    </button>
  </div>
</div>
<div class="modal fade" id="textarea-popupexclusion" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="onCloseTextAreaInfo()">
          &times;
        </button>
        <h4 class="modal-title">Edit Notes</h4>
      </div>
      <div class="modal-body">
        <p-editor [(ngModel)]="textAreaInfo" (ngModelChange)="enableSaveMemo()" [style]="{'height':'320px'}"
          name="textAreaInfo" required></p-editor>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary editor-buttons-margin" [disabled]="disabledMemo"
          (click)="onSaveTextAreaInfo(textAreaInfo)">Save</button>
        <button type="button" class="btn btn-danger editor-buttons-margin"
          (click)="onCloseTextAreaInfo()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="preloader" *ngIf="isSpinnerVisible">
  <div class="loading">
      <div class="lds-roller">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
      </div>
  </div>
</div>
<ng-template class="modal fade" #errorpopup let-c="close" let-d="dismiss" data-backdrop="static">
  <div class="modal-content">
      <div class="modal-header">
          <h4 class="modal-title">Alert</h4>
          <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body">
          <strong>
              <span [ngStyle]="{'color':'red'}">
              <div [innerHTML]="alertText"></div>
              </span>
          </strong>
          
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-danger"
              (click)="dismissModel();">close</button>
      </div>
  </div>
</ng-template>