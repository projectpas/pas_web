<div class="card card-stock">
  <div class="card-body" style="padding: 10px;">
    <div class="row" style="padding-left: 3px;">
      <div class="col-md-12 col-sm-12 col-12">
        <div class="inline-block display-flex">
          <div>
            <label class="control-label">
              <input type="radio" [checked]="paymentType == 1" [value]="1" name="paymentType" [(ngModel)]="paymentType"
                (change)="onPaymentTypeClick(1)">
              Trade Receivables
            </label>
          </div>
          <div>
            <label class="control-label" style="padding-left: 15px;">
              <input type="radio" [value]="2" [checked]="paymentType == 2" name="paymentType" [(ngModel)]="paymentType"
                (change)="onPaymentTypeClick(2)">Misc Receipts
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="row" style="padding-left: 3px; padding-top: 0;">
      <div class="col-md-12 col-sm-12 col-12">
        <div class="inline-block display-flex">
          <div *ngIf="paymentType == 1">
            <label for="tradeReceivableGL">GL Cash Account <span class="clr-red">*</span></label>
            <select name="tradeReceivableGL" [(ngModel)]="tradeReceivableGL" required id="glAccount">
              <option *ngFor="let item of allGlInfo" [ngValue]="item.value">
                {{ item.label }}</option>
            </select>
          </div>
          <div *ngIf="paymentType == 2">
            <label for="miscReceiptsGL">GL Cash Account <span class="clr-red">*</span></label>
            <select name="miscReceiptsGL" [(ngModel)]="miscReceiptsGL" required id="miscReceiptsGL">
              <option *ngFor="let item of allGlInfo" [ngValue]="item.value">
                {{ item.label }}</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="row" style="padding: 0;">
      <div class="col-md-12 col-sm-12 col-12">
        <div class="col-2 column">
          <div class="form-group">
            <label class="control-label" style="width: 150px; text-align: left;">
              <input type="checkbox" id="cparent" name="deposite" (click)="onDepositeClick()"
                [(ngModel)]="isDeposite" />
              Check if this is a Deposit
            </label>
          </div>
        </div>
        <div class="inline-block display-flex">
          <div>
            <label class="control-label">
              <input type="radio" id="IsSingle" [checked]="paymentMethod == 1" value="1" [value]="1"
                name="paymentMethod" [(ngModel)]="paymentMethod" (change)="onPaymentMethodClick(1)">
              Single Payment Method
            </label>
          </div>
          <div>
            <label class="control-label" style="padding-left: 15px;">
              <input type="radio" id="IsMultiple" [value]="2" value="2" [checked]="paymentMethod == 2"
                name="paymentMethod" [(ngModel)]="paymentMethod" (change)="onPaymentMethodClick(2)">Multiple Payment
              Methods
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="row" style="padding: 0;" *ngIf="!objInvoicePayment.isMultiplePaymentMethod">
      <div class="col-md-12 col-sm-12 col-12">
        <div class="col-4 column">
          <div class="form-group inline-block display-flex">
            <label class="control-label" style="text-align: left;">
              <input type="radio" [checked]="chkPaymentMethod == 1" value="1" [value]="1" name="groupname2"
                [(ngModel)]="chkPaymentMethod">
              Check
            </label>
            <label class="control-label" style="text-align: left;">
              <input type="radio" [checked]="chkPaymentMethod == 2" value="2" [value]="2" name="groupname2"
                [(ngModel)]="chkPaymentMethod">
              Wire Transfer
            </label>
            <label class="control-label" style="text-align: left;">
              <input type="radio" [checked]="chkPaymentMethod == 3" value="3" [value]="3" name="groupname2"
                [(ngModel)]="chkPaymentMethod">
              Credit Card/Debit Card
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="row" *ngIf="objInvoicePayment.isMultiplePaymentMethod" style="padding: 0;">
      <div class="col-md-12 col-sm-12 col-12">
        <div class="col-4 column">
          <div class="form-group inline-block display-flex">
            <label style="text-align: left;">
              <input type="checkbox" id="cparent" name="check" (click)="onDepositeClick($event)"
                [(ngModel)]="objInvoicePayment.isCheckPayment" />
              Check
            </label>
            <label style="text-align: left;">
              <input type="checkbox" id="cparent" name="check" (click)="onDepositeClick($event)"
                [(ngModel)]="objInvoicePayment.isWireTransfer" />
              Wire Transfer
            </label>
            <label style="text-align: left;">
              <input type="checkbox" id="cparent" name="check" (click)="onDepositeClick($event)"
                [(ngModel)]="objInvoicePayment.isCCDCPayment" />
              Credit Card/Debit Card
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-container>
  <p-tabView class="pas-tabview" (onChange)="onTabChange($event)">
    <p-tabPanel header="Check" [selected]="true" *ngIf="(!objInvoicePayment.isMultiplePaymentMethod && chkPaymentMethod == 1) ||
      (objInvoicePayment.isMultiplePaymentMethod && objInvoicePayment.isCheckPayment)">
      <form #checkForm="ngForm">
        <div class="card new-card">
          <div class="card-body header-body">
            <div class="col-sm-3 w250 payment-blocks check-block" style="display: block;">
              <div class="form-group col-sm-12">
                <label>Check Date<span class="clr-red">*</span></label>
                <p-calendar name="checkDate" [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                  [(ngModel)]="objInvoicePayment.checkPayments.checkDate" [showIcon]="true" id="checkDate"
                  #checkDate="ngModel" required>
                </p-calendar>
                <div *ngIf="checkDate.invalid && (checkDate.dirty || checkDate.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="checkDate.errors.required">
                    <small> Check Date is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Check Number <span class="clr-red">*</span></label>
                <input type="text" class="form-control" name="checkNumber"
                  [(ngModel)]="objInvoicePayment.checkPayments.checkNumber" #checkNumber="ngModel" id="checkNumber"
                  required />
                <div *ngIf="checkNumber.invalid && (checkNumber.dirty || checkNumber.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="checkNumber.errors.required">
                    <small> Check Number is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Amount<span class="clr-red">*</span></label>
                <input type="text" class="form-control" style="text-align:right;" name="checkAmount"
                  [ngModel]="objInvoicePayment.checkPayments.amount"
                  (ngModelChange)="objInvoicePayment.checkPayments.amount=$event" pKeyFilter="money"
                  (change)="onChangeAmount($event, objInvoicePayment); formatCheckAmount()" required />
              </div>
              <div class="form-group col-sm-12">
                <label for="currencyId">Curr <span class="clr-red">*</span></label>
                <select name="currencyId" [(ngModel)]="objInvoicePayment.checkPayments.currencyId" required
                  id="currencyId" #currencyId="ngModel">
                  <option *ngFor="let item of currencyList" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="currencyId.invalid && (currencyId.dirty || currencyId.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="currencyId.errors.required">
                    <small> Currency is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Payor's Bank</label>
                <input type="text" class="form-control" name="payorsBank"
                  [(ngModel)]="objInvoicePayment.checkPayments.payorsBank" id="payorsBank" />
              </div>
              <div class="form-group col-sm-12">
                <label>Bank Account <span class="clr-red">*</span></label>
                <!-- <input type="text" class="form-control" name="bankAccount"
                  [(ngModel)]="objInvoicePayment.checkPayments.bankAccount" #bankAccount="ngModel" id="bankAccount"
                  required /> -->
                <p-dropdown class="p-dropdown-100" [options]="filteredBankNames" filter="true"
                  [(ngModel)]="objInvoicePayment.checkPayments.bankAccount" name="bankAccount"
                  [resetFilterOnHide]="true" placeholder="-- Select --" [showClear]="true" #bankAccount="ngModel"
                  required>
                </p-dropdown>
                <div *ngIf="bankAccount.invalid && (bankAccount.dirty || bankAccount.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="bankAccount.errors.required">
                    <small> Bank Account is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label for="glAccountId">GL Cash Account <span class="clr-red">*</span></label>
                <select name="glAccountId" [(ngModel)]="objInvoicePayment.checkPayments.glAccountNumber" required
                  id="glAccount" #glAccount="ngModel" [disabled]="true">
                  <option *ngFor="let item of allGlInfo" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="glAccount.invalid && (glAccount.dirty || glAccount.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="glAccount.errors.required">
                    <small> GL Cash Account is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12 memo-popup-cstm">
                <label>
                  Memo<i class=" fa fa-pencil" data-toggle="modal" matTooltipPosition="above" matTooltip="Add Memo"
                    (click)="openCheckMemo(); onAddCheckMemo()"></i>
                </label>
                <span>
                  <div class="form-group memo-popup-cstm mat_emo">
                    <div [innerHTML]="objInvoicePayment.checkPayments.memo"
                      [matTooltip]="parsedText(objInvoicePayment.checkPayments.memo)" matTooltipPosition="above"
                      class="form-control" style="height: 100px !important; width:90% !important"
                      class="text_editor_box">
                    </div>
                  </div>
                </span>
              </div>
            </div>
          </div>
        </div>
      </form>
    </p-tabPanel>
    <p-tabPanel header="Wire Transfer" *ngIf="(!objInvoicePayment.isMultiplePaymentMethod && chkPaymentMethod == 2) ||
      (objInvoicePayment.isMultiplePaymentMethod && objInvoicePayment.isWireTransfer)">
      <form #wireForm="ngForm">
        <div class="card new-card">
          <div class="card-body header-body">
            <div class="col-sm-3 w250 payment-blocks wire-block" style="display: block;">
              <div class="form-group col-sm-12">
                <label>Wire/ACH Date<span class="clr-red">*</span></label>
                <p-calendar name="wireDate" [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                  [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.wireDate" [showIcon]="true" id="wireDate"
                  #wireDate="ngModel" required>
                </p-calendar>
                <div *ngIf="wireDate.invalid && (wireDate.dirty || wireDate.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="wireDate.errors.required">
                    <small> Wire Date is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Reference #</label>
                <input type="text" class="form-control" name="referenceNo"
                  [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.referenceNo" #referenceNum="ngModel"
                  id="referenceNo" />
              </div>
              <div class="form-group col-sm-12">
                <label>Amount<span class="clr-red">*</span></label>
                <input type="text" class="form-control" style="text-align:right;" name="wireAmount"
                  [ngModel]="objInvoicePayment.invoiceWireTransferPayment.amount" pKeyFilter="money"
                  (ngModelChange)="objInvoicePayment.invoiceWireTransferPayment.amount=$event"
                  (change)="onChangeAmount($event, objInvoicePayment); formatWireAmount();" required />
              </div>
              <div class="form-group col-sm-12">
                <label for="wireCurrencyId">Curr <span class="clr-red">*</span></label>
                <select name="wireCurrencyId" [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.currencyId"
                  required id="wireCurrencyId" #wireCurrencyId="ngModel">
                  <option *ngFor="let item of currencyList" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="wireCurrencyId.invalid && (wireCurrencyId.dirty || wireCurrencyId.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="wireCurrencyId.errors.required">
                    <small> Currency is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Bank Acct Name</label>
                <!-- <input type="text" class="form-control" name="bankName"
                  [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.bankName" #bankName="ngModel"
                  id="bankName" /> -->
                <p-dropdown class="p-dropdown-100" [options]="filteredBankNames" filter="true"
                  [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.bankName" name="bankName"
                  [resetFilterOnHide]="true" placeholder="-- Select --" #bankName="ngModel" [showClear]="true" required>
                </p-dropdown>
              </div>
              <div class="form-group col-sm-12">
                <label for="wireGlAccountId">GL Cash Account <span class="clr-red">*</span></label>
                <select name="wireGlAccountId"
                  [(ngModel)]="objInvoicePayment.invoiceWireTransferPayment.glAccountNumber" required [disabled]="true"
                  id="wireGlAccount" #wireGlAccount="ngModel">
                  <option *ngFor="let item of allGlInfo" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="wireGlAccount.invalid && (wireGlAccount.dirty || wireGlAccount.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="wireGlAccount.errors.required">
                    <small> GL Cash Account is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12 memo-popup-cstm">
                <label>
                  Memo<i class=" fa fa-pencil" data-toggle="modal" matTooltipPosition="above" matTooltip="Add Memo"
                    (click)="openWireMemo(); onAddWireMemo()"></i>
                </label>
                <span>
                  <div class="form-group memo-popup-cstm mat_emo">
                    <div [innerHTML]="objInvoicePayment.invoiceWireTransferPayment.memo"
                      [matTooltip]="parsedText(objInvoicePayment.invoiceWireTransferPayment.memo)"
                      matTooltipPosition="above" class="form-control"
                      style="height: 100px !important; width:90% !important" class="text_editor_box">
                    </div>
                  </div>
                </span>
              </div>
            </div>
          </div>
        </div>
      </form>
    </p-tabPanel>
    <p-tabPanel header="Credit Card/Debit Card" *ngIf="(!objInvoicePayment.isMultiplePaymentMethod && chkPaymentMethod == 3) ||
      (objInvoicePayment.isMultiplePaymentMethod && objInvoicePayment.isCCDCPayment)">
      <form #ccForm="ngForm">
        <div class="card new-card">
          <div class="card-body header-body">
            <div class="col-sm-3 w250 payment-blocks cc-block" style="display: block;">
              <div class="form-group col-sm-12">
                <label>Payment Date<span class="clr-red">*</span></label>
                <p-calendar name="ccDate" [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.paymentDate" [showIcon]="true"
                  id="ccDate" #ccDate="ngModel" required>
                </p-calendar>
                <div *ngIf="ccDate.invalid && (ccDate.dirty || ccDate.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="ccDate.errors.required">
                    <small> Payment Date is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Reference #</label>
                <input type="text" class="form-control" name="referenceNo"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.referenceNo" #referenceNum="ngModel"
                  id="referenceNo" />
              </div>
              <div class="form-group col-sm-12">
                <label>Amount<span class="clr-red">*</span></label>
                <input type="text" class="form-control" style="text-align:right;" name="ccAmount"
                  [ngModel]="objInvoicePayment.invoiceCreditDebitCardPayment.amount" pKeyFilter="money"
                  (ngModelChange)="objInvoicePayment.invoiceCreditDebitCardPayment.amount=$event"
                  (change)="onChangeAmount($event, objInvoicePayment); formatCCAmount();" required />
              </div>
              <div class="form-group col-sm-12">
                <label for="ccCurrencyId">Curr <span class="clr-red">*</span></label>
                <select name="ccCurrencyId" [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.currencyId"
                  required id="ccCurrencyId" #ccCurrencyId="ngModel">
                  <option *ngFor="let item of currencyList" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="ccCurrencyId.invalid && (ccCurrencyId.dirty || ccCurrencyId.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="ccCurrencyId.errors.required">
                    <small> Currency is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label for="cardTypeId">Card Type <span class="clr-red">*</span></label>
                <select [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.cardTypeId" name="cardTypeId"
                  #cardTypeId="ngModel" required>
                  <option value=''>--Select--</option>
                  <option *ngFor="let item of cardTypeList" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="cardTypeId.invalid && (cardTypeId.dirty || cardTypeId.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="cardTypeId.errors.required">
                    <small> Card Type is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Card Number # <span class="clr-red">*</span></label>
                <input type="text" class="form-control" name="cardNumber"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.cardNumber" #cardNumber="ngModel"
                  id="cardNumber" />
                <div *ngIf="cardNumber.invalid && (cardNumber.dirty || cardNumber.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="cardNumber.errors.required">
                    <small> Card Number is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Exp Date<span class="clr-red">*</span></label>
                <p-calendar name="expiryDate" [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.expirationDate" [showIcon]="true"
                  id="expiryDate" #expiryDate="ngModel" required>
                </p-calendar>
                <div *ngIf="expiryDate.invalid && (expiryDate.dirty || expiryDate.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="expiryDate.errors.required">
                    <small> Expiry Date is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Security Code # <span class="clr-red">*</span></label>
                <input type="text" class="form-control" name="securityCode"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.securityCode" #securityCode="ngModel"
                  id="securityCode" required />
                <div *ngIf="securityCode.invalid && (securityCode.dirty || securityCode.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="securityCode.errors.required">
                    <small> Security Code is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Cardholder Name # <span class="clr-red">*</span></label>
                <input type="text" class="form-control" name="cardholderName"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.cardholderName" #cardholderName="ngModel"
                  id="cardholderName" required />
                <div *ngIf="cardholderName.invalid && (cardholderName.dirty || cardholderName.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="cardholderName.errors.required">
                    <small> Cardholder Name is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12">
                <label>Billing Address</label>
                <input type="text" class="form-control" name="billingAddress"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.billingAddress" #billingAddress="ngModel"
                  id="billingAddress" />
              </div>
              <!-- <div class="form-group col-sm-12">
              <label>Billing Postal Code # <span class="clr-red">*</span></label>
              <input type="text" class="form-control" name="billingPostalCode"
                [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.billingPostalCode"
                #billingPostalCode="ngModel" id="billingPostalCode" />
              <div *ngIf="billingPostalCode.invalid && (billingPostalCode.dirty || billingPostalCode.touched)"
                class="alert alert-danger alert-danger-cstm">
                <div *ngIf="billingPostalCode.errors.required">
                  <small> Billing Postal Code is required </small>
                </div>
              </div>
            </div> -->
              <div class="form-group col-sm-12">
                <label>Phone #</label>
                <input type="text" class="form-control" name="ccPhoneNum"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.phoneNo" #ccPhoneNum="ngModel"
                  id="ccPhoneNum" />
              </div>
              <div class="form-group col-sm-12">
                <label>Approval Ref</label>
                <input type="text" class="form-control" name="ccApprovalRef"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.approvalRef" #ccApprovalRef="ngModel"
                  id="ccApprovalRef" />
              </div>
              <!-- <div class="form-group col-sm-12">
              <label>Bank Account <span class="clr-red">*</span></label>
              <input type="text" class="form-control" name="ccBankAccount"
                [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.bankAccount" #ccBankAccount="ngModel"
                id="ccBankAccount" />
              <div *ngIf="ccBankAccount.invalid && (ccBankAccount.dirty || ccBankAccount.touched)"
                class="alert alert-danger alert-danger-cstm">
                <div *ngIf="ccBankAccount.errors.required">
                  <small> Bank Account is required </small>
                </div>
              </div>
            </div> -->
              <div class="form-group col-sm-12">
                <label for="ccGlAccountId">GL Cash Account <span class="clr-red">*</span></label>
                <select name="ccGlAccountId"
                  [(ngModel)]="objInvoicePayment.invoiceCreditDebitCardPayment.glAccountNumber" required
                  id="ccGlAccount" #ccGlAccount="ngModel">
                  <option *ngFor="let item of allGlInfo" [ngValue]="item.value">
                    {{ item.label }}</option>
                </select>
                <div *ngIf="ccGlAccount.invalid && (ccGlAccount.dirty || ccGlAccount.touched)"
                  class="alert alert-danger alert-danger-cstm">
                  <div *ngIf="ccGlAccount.errors.required">
                    <small> GL Cash Account is required </small>
                  </div>
                </div>
              </div>
              <div class="form-group col-sm-12 memo-popup-cstm">
                <label>
                  Memo<i class=" fa fa-pencil" data-toggle="modal" data-target="#add-description"
                    matTooltipPosition="above" matTooltip="Add Memo" (click)="openCCMemo(); onAddCCMemo()"></i>
                </label>
                <span>
                  <div class="form-group memo-popup-cstm mat_emo">
                    <div [innerHTML]="objInvoicePayment.invoiceCreditDebitCardPayment.memo"
                      [matTooltip]="parsedText(objInvoicePayment.invoiceCreditDebitCardPayment.memo)"
                      matTooltipPosition="above" class="form-control"
                      style="height: 100px !important; width:90% !important" class="text_editor_box">
                    </div>
                  </div>
                </span>
              </div>
            </div>
            <!-- <div class="col-sm-12 payment-blocks check-block" style="display: block;">
              <div class="form-group col-sm-12">
                <app-common-documents [moduleName]="moduleName" [referenceId]="referenceId" [isViewMode]="false"
                  [offLineUpload]="true"></app-common-documents>
              </div>
            </div> -->
          </div>
        </div>
      </form>
    </p-tabPanel>
  </p-tabView>
  <div class="form-group" style="width: 100%; text-align: right;">
    <button type="button" class="btn btn-primary editor-buttons-margin" (click)="enableCustSearch()"
      style="width: 70px;" [disabled]="checkFormValid()">
      OK
    </button>
  </div>
</ng-container>
<div class="card card-stock" style="margin-top: 5px;" *ngIf="paymentInfoFilled">
  <div class="card-header">
    Select Customer
  </div>
  <div class="card-body" style="padding: 10px;">
    <div class="form-group">
      <div class="row" style="padding: 0;">
        <div class="col-md-12 col-sm-12 col-12">
          <div class="col-2 column">
            <div class="form-group">
              <label>Cust Name <span class="clr-red">*</span></label>
              <div class="inner-addon right-addon inline-block">
                <p-autoComplete class="autocomp-customer-cstm" name="customerName" [(ngModel)]="objInvoicePayment.name"
                  (onKeyUp)=" checkCustomerNameExist($event.target.value)"
                  (onChange)=" checkCustomerNameExist($event.target.value)" (onSelect)="selectedCustomerName()"
                  [suggestions]="customerNames" [forceSelection]="false" field="name"
                  (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1" [dropdown]="true" required
                  value="" autocomplete="off">
                </p-autoComplete>
              </div>
            </div>
          </div>
          <div class="col-2 column">
            <div class="form-group">
              <label>&nbsp;</label>
              <button type="button" class="btn btn-primary" (click)="clearCustSearch()" style="width: 100px;">
                Clear
              </button>
            </div>
          </div>
          <div class="col-2 column" *ngIf="customerDetails">
            <div class="form-group">
              <label>Cust Code</label>
              <input class="form-control" type="text" name="customerCode" [(ngModel)]="customerDetails.customerCode"
                [disabled]="true" />
            </div>
          </div>
          <div class="col-2 column" *ngIf="customerDetails">
            <div class="form-group">
              <label>Payment Ref</label>
              <input class="form-control" type="text" name="paymentRef" [(ngModel)]="customerDetails.paymentRef"
                [disabled]="true" />
            </div>
          </div>
          <div class="col-2 column" *ngIf="customerDetails">
            <div class="form-group">
              <label>Amount</label>
              <input class="form-control" type="text" name="amount" style="text-align: right;"
                [ngModel]="customerDetails.amount | number:'1.2-2'" [disabled]="true" />
            </div>
          </div>
          <div class="col-2 column" *ngIf="customerDetails">
            <div class="form-group">
              <label>Amt Remaining</label>
              <input class="form-control" type="text" name="customerCode" style="text-align: right;"
                [ngModel]="customerDetails.amountRem | number:'1.2-2'" [disabled]="true" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="card card-stock" style="margin-top: 5px;" *ngIf="paymentInfoFilled">
  <div class="card-header">
    Open Invoices
  </div>
  <div class="card-body" style="padding: 10px;">
    <div class="form-group" style="width: 100%; text-align: left;">
      <button type="button" class="btn btn-primary editor-buttons-margin" (click)="enableCustSearch()"
        style="width: 100px;" [disabled]="true">
        Apply Payment
      </button>
    </div>
    <div class="form-group">
      <div class="row" style="padding: 0;">
        <div class="col-md-12 col-sm-12 col-12">
          <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align parts-zindex">
            <div class="tableFixHead">
              <table class="table table-bordered header-table-width" id="mpn-list-table">
                <thead>
                  <tr class="pad_workflo">
                    <th class="approver-th-align th-width">
                      <input type="checkbox" (click)="selectAllApproval('internal', selectall)"
                        [(ngModel)]="selectall" />
                    </th>
                    <th *ngFor="let header of headers">{{header.header}}</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngIf="!openInvoices || openInvoices.length == 0">
                    <tr>
                      <td colspan="21" class="no-records-cstm">
                        No records found
                      </td>
                    </tr>
                  </ng-container>
                  <ng-container *ngIf="openInvoices">
                    <tr class="mpn-row" style="display: table-row;" *ngFor="let invoice of openInvoices; let i=index;">
                      <td>
                        <input type="checkbox" [(ngModel)]="invoice.selected"
                          [disabled]="isView || !getPartToDisableOrNot(invoice)" (click)="onSelectRow(invoice)" />
                      </td>
                      <ng-container *ngFor="let field of headers">
                        <td class="table-column-width">
                          <span *ngIf="field.field == 'documentType'
                          || field.field == 'docNum'
                          || field.field == 'originalAmount'
                          || field.field == 'remainingAmount'
                          || field.field == 'newRemainingBal'
                          || field.field == 'glARAccount'
                          || field.field == 'currencyCode'
                          || field.field == 'fxRate'
                          || field.field == 'wosoNum'
                          || field.field == 'status'
                          || field.field == 'dsi'
                          || field.field == 'dso'
                          || field.field == 'amountPastDue'
                          || field.field == 'arBalance'
                          || field.field == 'creditTermName'
                          || field.field == 'cntrlNum'
                          || field.field == 'level1'
                          || field.field == 'level2'
                          || field.field == 'level3'
                          || field.field == 'level4'">
                            {{invoice[field.field]}}
                          </span>
                          <span *ngIf="field.field == 'invoiceDate'">
                            {{invoice[field.field] | date: "MM/dd/yyyy"}}
                          </span>
                          <span *ngIf="field.field == 'employee'">
                            <p-autoComplete class="p-autoComplete-ctsm" [(ngModel)]="this.employee" name="employee"
                              title="Employee" appendTo='body' [baseZIndex]="9999" field="label"
                              [suggestions]="employeesList" disabled="true" (completeMethod)="filterEmployees($event)"
                              [dropdown]="true">
                            </p-autoComplete>
                          </span>
                          <span *ngIf="field.field == 'paymentAmount'">
                            <input type="text" class="form-control" style="text-align: right;" name="paymentAmount"
                              [ngModel]="invoice[field.field] | twoDecimalGlobalNumberFormatPipe"
                              (change)="onChangePaymentAmount($event, invoice);" [disabled]="!invoice.selected" />
                          </span>
                          <span *ngIf="field.field == 'discAmount'">
                            <input type="text" class="form-control" style="text-align: right;" name="discAmount"
                              [ngModel]="invoice[field.field] | twoDecimalGlobalNumberFormatPipe"
                              (change)="onChangeDiscAmount($event, invoice);" [disabled]="!invoice.selected" />
                          </span>
                          <span *ngIf="field.field == 'discType'">
                            <select [(ngModel)]="invoice[field.field]" name="discType" [disabled]="!invoice.selected">
                              <option value="">--Select--</option>
                              <option *ngFor="let item of discTypeList" [ngValue]="item.value">
                                {{ item.label }}</option>
                            </select>
                          </span>
                          <span *ngIf="field.field == 'bankFeeAmount'">
                            <input type="text" class="form-control" style="text-align: right;" name="bankFeeAmount"
                              [ngModel]="invoice[field.field] | twoDecimalGlobalNumberFormatPipe"
                              (change)="onChangeBankFee($event, invoice);" [disabled]="!invoice.selected" />
                          </span>
                          <span *ngIf="field.field == 'bankFeeType'">
                            <select [(ngModel)]="invoice[field.field]" name="bankFeeType" [disabled]="!invoice.selected"
                              [required]="invoice[bankFeeAmount] > 0">
                              <option value="">--Select--</option>
                              <option *ngFor="let item of bankFeesTypeList" [ngValue]="item.value">
                                {{ item.label }}</option>
                            </select>
                          </span>
                          <span *ngIf="field.field == 'otherAdjustAmt'">
                            <input type="text" class="form-control" style="text-align: right;" name="otherAdjustAmt"
                              [ngModel]="invoice[field.field] | twoDecimalGlobalNumberFormatPipe"
                              (change)="onChangeOtherAdjustAmt($event, invoice);" [disabled]="!invoice.selected" />
                          </span>
                          <span *ngIf="field.field == 'reason'">
                            <select [(ngModel)]="invoice[field.field]" name="reason" [disabled]="!invoice.selected">
                              <option value="">--Select--</option>
                              <option *ngFor="let item of adjustReasonList" [ngValue]="item.value">
                                {{ item.label }}</option>
                            </select>
                          </span>
                        </td>
                      </ng-container>
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="row" style="padding: 0; text-align: left;">
        <div class="col-md-12 col-sm-12 col-12">
          <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
            [disabled]="!checkIfInvoiceSelected()" (click)="onSubmit();">
            Save
          </button>
          <!-- <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal">
            Enter Another Pmt
          </button> -->
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #addCheckMemo let-c=" close" let-d="dismiss" tabindex="-1" style="z-index: 1052;">
  <div class="modal-header">
    <button type="button" class="close" (click)="dismissCheckMemoModel()">&times;</button>
    <h4 class="modal-title">Edit Memo</h4>
  </div>
  <div class="modal-body">
    <p-editor [(ngModel)]="tempCheckMemo" [style]="{'height':'320px'}" name="tempCheckMemo" required>
    </p-editor>
    <div class="editor-buttons">
      <button type="button" class="btn btn-primary editor-buttons-margin" (click)="onSaveCheckMemo()">
        Save
      </button>
      <button type="button" class="btn btn-danger editor-buttons-margin" (click)="dismissCheckMemoModel()">
        Close
      </button>
    </div>
  </div>
</ng-template>
<ng-template #addWireMemo let-c="close" let-d="dismiss" tabindex="-1" style="z-index: 1052;">
  <div class="modal-header">
    <button type="button" class="close" (click)="dismissWireMemoModel()">&times;</button>
    <h4 class="modal-title">Edit Memo</h4>
  </div>
  <div class="modal-body">
    <p-editor [(ngModel)]="tempWireMemo" [style]="{'height':'320px'}" name="tempWireMemo" required>
    </p-editor>
    <div class="editor-buttons">
      <button type="button" class="btn btn-primary editor-buttons-margin" (click)="onSaveWireMemo()">
        Save
      </button>
      <button type="button" class="btn btn-danger editor-buttons-margin" (click)="dismissWireMemoModel()">
        Close
      </button>
    </div>
  </div>
</ng-template>
<ng-template #addCCMemo let-c="close" let-d="dismiss" tabindex="-1" style="z-index: 1052;">
  <div class="modal-header">
    <button type="button" class="close" (click)="dismissCCMemoModel()">&times;</button>
    <h4 class="modal-title">Edit Memo</h4>
  </div>
  <div class="modal-body">
    <p-editor [(ngModel)]="tempCCMemo" [style]="{'height':'320px'}" name="tempCCMemo" required>
    </p-editor>
    <div class="editor-buttons">
      <button type="button" class="btn btn-primary editor-buttons-margin" (click)="onSaveCCMemo()">
        Save
      </button>
      <button type="button" class="btn btn-danger editor-buttons-margin" (click)="dismissCCMemoModel()">
        Close
      </button>
    </div>
  </div>
</ng-template>