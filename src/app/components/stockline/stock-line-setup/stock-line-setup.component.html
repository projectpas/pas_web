﻿        <div class="card new-card">
            <div class="card-header header">
              <div class="row">
                <div class="col">
                  <h4 class="header-name">{{isEditMode ? 'Edit' : 'Create'}} Stock Line</h4>
                </div>
                <div>
                  <button
                    type="button"
                    class="btn-sm header-button"
                    [routerLink]="[
                    '/stocklinemodule/stocklinepages/app-stock-line-list']">
                    Stock Line List
                  </button>
                </div>
              </div>
            </div>
                <div class="card-body header-body">
            <form #stockLineSetupForm="ngForm">
                <div class="form-row">                            
                    <div class="col-md-3">
                        <div class="card card-stock">
                            <div class="card-header">
                                <h5>General</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="checkbox-cstm m-t-10 display-flex">
                                        <label>
                                            <input type="checkbox" name="isCustomerStock" [(ngModel)]="stockLineForm.isCustomerStock" (ngModelChange)="enableSave()" [disabled]="isEditMode">
                                            <span class="cr"><i class="cr-icon pi pi-check"(click)="ChekisCustomerStock(stockLineForm.isCustomerStock)"></i></span>
                                            Customer Stock 
                                        </label>
                                        <div class="display-flex m-l-10"  *ngIf="stockLineForm.isCustomerStock">
                                            <div>
                                                <label class="radio-cstm wauto">
                                                    <input type="radio" value="1" name="assetRadio" class="form-check-inline"
                                                    [checked]="stockLineForm.isCustomerstockType == true"
                                                    (change)="getStockStatus(1)" [disabled]="isEditMode">
                                                    <span class="checkmark"></span>  Rotable
                                                    <!-- Rotable Customer Stock -->
                                                </label>
                                            </div> 
                                            <div class="m-l-10">
                                                <label class="radio-cstm wauto">
                                                    <input type="radio" value="0" name="assetRadio" class="form-check-inline"
                                                    [checked]="stockLineForm.isCustomerstockType == false"
                                                    (change)="getStockStatus(0)"  [disabled]="isEditMode">
                                                    <span class="checkmark"></span>  Piece Parts
                                                </label>
                                            </div> 
                                        </div>
                                    </div>

                                    
                                </div>

                                <!-- <div class="form-group m-t-10" *ngIf="stockLineForm.isCustomerStock">
                                    <div>
                                        <label class="radio-cstm wauto">
                                            <input type="radio" value="1" name="assetRadio" class="form-check-inline"
                                            [checked]="stockLineForm.isCustomerstockType == true"
                                            (change)="getStockStatus(1)" [disabled]="isEditMode">
                                            <span class="checkmark"></span>  Rotable
                                          
                                        </label>
                                    </div> 
                                    <div>
                                        <label class="radio-cstm wauto">
                                            <input type="radio" value="0" name="assetRadio" class="form-check-inline"
                                            [checked]="stockLineForm.isCustomerstockType == false"
                                            (change)="getStockStatus(0)"  [disabled]="isEditMode">
                                            <span class="checkmark"></span>  Piece Parts
                                        </label>
                                    </div> 
                                </div> -->

                                <div class="form-group" *ngIf="stockLineForm.isCustomerStock">
                                    <label>Customer</label>
                                    <p-autoComplete field="label" class="pautocomp-cstm"
                                        [(ngModel)]="stockLineForm.customerId" name="vendorId" [suggestions]="customerNames"
                                        (completeMethod)="filterCustomerNames($event)" [size]="30" [minLength]="1"
                                        [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"
                                        (ngModelChange)="enableSave()"
                                         required [disabled]="isEditMode" > 
                                    </p-autoComplete>
                                </div>
                                <div class="form-group">
                                    <label>PN <span class="clr-red">*</span>
                                    </label>
                                    <div class="inner-addon right-addon inline-block">
                                        <p-autoComplete field="partnumber" class="pautocomp-cstm" [(ngModel)]="stockLineForm.itemMasterId" name="partNumber" [suggestions]="partNumbersCollection" (completeMethod)="filterPartNumbers($event)" [size]="30" [minLength]="1" [dropdown]="true" (onSelect)="onPartNumberSelected($event.itemMasterId);" #partNum="ngModel" errorMessage="Records not found" [forceSelection]="true" (ngModelChange)="enableSave()" required></p-autoComplete>
                                        <div *ngIf="partNum.invalid && (partNum.dirty || partNum.touched)" class="alert alert-danger alert-danger-cstm">
                                                <div *ngIf="partNum.errors.required">
                                                    <small> Part Number is required </small>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>PN Description</label>
                                    <input class="form-control" type="text" name="pnDescription" [(ngModel)]="stockLineForm.partDescription" (ngModelChange)="enableSave()" disabled>
                                </div>
                                <div class="form-group">
                                    <label>Revised PN</label>
                                    <div class="inner-addon right-addon inline-block">
                                        <p-autoComplete field="partnumber" class="pautocomp-cstm" [(ngModel)]="stockLineForm.revicedPNId" name="revicedPNId" [suggestions]="RevicepnList" (completeMethod)="filterRevicePartNumbers($event)" [size]="30" [minLength]="1" [dropdown]="true"  #partNum="ngModel" errorMessage="Records not found" [forceSelection]="true" (ngModelChange)="enableSave()"></p-autoComplete>
                                    </div>
                                    <!-- <input class="form-control" type="text" name="revisedPart" [(ngModel)]="stockLineForm.revisedPart" (ngModelChange)="enableSave()" disabled> -->
                                </div>
                                <div class="form-group m-t-10">
                                    <div>
                                        <label class="radio-cstm wauto">
                                            <input type="radio" name="oemPma" class="form-control" value="true" (change)="onCheckOem();"  [(ngModel)]="stockLineForm.oem" (ngModelChange)="enableSave()" disabled>
                                            <span class="checkmark"></span> OEM
                                        </label>
                                    </div> 
                                </div>

                            <div class="form-group m-t-10">
                                <div>
                                    <label class="radio-cstm wauto">
                                        <input type="radio" name="oemPma" class="form-control" value="false"
                                            (change)="onCheckPMA();" [(ngModel)]="stockLineForm.oem"
                                            (ngModelChange)="enableSave()" disabled>
                                        <span class="checkmark"></span> PMA
                                    </label>
                                </div>
                            </div>

                            <div *ngIf="stockLineForm.oem == 'false'">
                                <div>
                                    <label class="control-label">
                                        OEM PN <strong class="clr-red">*</strong>
                                    </label>
                                </div>
                                <div>
                                    <p-autoComplete [(ngModel)]="stockLineForm.isOemPNId" name="partnumber"
                                        (ngModelChange)="enableSave()" (onSelect)="selectedOEM($event)"
                                        field="partnumber" (completeMethod)="filterpn($event)" [suggestions]="oempnList"
                                        [forceSelection]="true" [size]="30" [minLength]="1"
                                        errorMessage="Records not found" [dropdown]="true" class="p-autoComplete-ctsm"
                                        required>
                                    </p-autoComplete>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="checkbox-cstm m-t-10">
                                    <label>
                                        <input type="checkbox" name="isDER" [(ngModel)]="stockLineForm.isDER"
                                            (ngModelChange)="enableSave()"  disabled>
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        DER
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Item Group</label>
                                <input class="form-control" type="text" name="itemGroup"
                                    [(ngModel)]="stockLineForm.itemGroup" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label>Condition <span class="clr-red">*</span></label>
                                <select name="conditionId" [(ngModel)]="stockLineForm.conditionId"
                                    (change)="onSelectConditionType(stockLineForm.conditionId); getUnitCostSalePrice()"
                                    (ngModelChange)="enableSave()" required>
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let condition of allConditionInfo" [ngValue]="condition.value">
                                        {{condition.label}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-cstm checkbox-cstm-d mt-10">
                                    <label>
                                        <input type="checkbox" name="isSerialized"
                                            [(ngModel)]="stockLineForm.isSerialized" (ngModelChange)="enableSave()"
                                            disabled>
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Is Serialized
                                    </label>
                                </div>
                            </div>
                            <div class="form-group" *ngIf="!hideSerialNumber">
                                <label>Serial Num <span class="clr-red">*</span></label>
                                <input class="form-control" type="text" name="serialNumber" #serialNumber="ngModel"
                                    [(ngModel)]="stockLineForm.serialNumber" (ngModelChange)="enableSave()" required>
                                <div *ngIf="serialNumber.invalid && (serialNumber.dirty || serialNumber.touched)"
                                    class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="serialNumber.errors.required">
                                        <small> Serial Num is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Stockline Num</label>
                                <input class="form-control" type="text" name="stockLineNumber"
                                    [(ngModel)]="stockLineForm.stockLineNumber" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label>Cntrl Num</label>
                                <input class="form-control" type="text" name="controlNumber"
                                    [(ngModel)]="stockLineForm.controlNumber" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label>Cntrl ID Num</label>
                                <input class="form-control" type="text" name="idNumber"
                                    [(ngModel)]="stockLineForm.idNumber" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label> National Stock Number (NSN)</label>
                                <input class="form-control" type="text" name="nationalStockNumber"
                                    [(ngModel)]="stockLineForm.nationalStockNumber" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Engine Serial Number (ESN)
                                </label>
                                <input class="form-control" type="text" name="engineSerialNumber"
                                    [(ngModel)]="stockLineForm.engineSerialNumber" (ngModelChange)="enableSave()">
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Expiration</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Days Since Received</label>
                                <input class="form-control text-right" type="text" name="daysReceived"
                                    [(ngModel)]="stockLineForm.daysReceived" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label>Mfg. Expiration Date</label>
                                <p-calendar class="workflow-clder" [yearNavigator]="true" [monthNavigator]="true"
                                    yearRange="1900:2100" [showIcon]="true" name="expirationDate"
                                    [minDate]="minDateValue" [(ngModel)]="stockLineForm.expirationDate"
                                    #expirationDate="ngModel"
                                    (onSelect)="onChangeMfgDate(stockLineForm.expirationDate);"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Days Since Mfg</label>
                                <input class="form-control text-right" type="text" name="manufacturingDays"
                                    [(ngModel)]="stockLineForm.manufacturingDays" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Days Since Tagged</label>
                                <input class="form-control text-right" type="text" name="tagDays"
                                    [(ngModel)]="stockLineForm.tagDays" (ngModelChange)="enableSave()" disabled>
                            </div>
                            <div class="form-group">
                                <label>Days Opened</label>
                                <input class="form-control text-right" type="text" name="openDays"
                                    [(ngModel)]="stockLineForm.openDays" (ngModelChange)="enableSave()" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Application</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label matTooltip="Next Higher Assembly" matTooltipPosition="right">NHA <span
                                        *ngIf="allNHAInfo.length > 0" class="clr-red">*</span></label>
                                <select [(ngModel)]="stockLineForm.nhaItemMasterId" name="nha"
                                    [required]="allNHAInfo.length > 0" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of allNHAInfo" [ngValue]="item.nhaItemMasterId">
                                        {{item.partNumber}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label matTooltip="Top Level Assembly" matTooltipPosition="right">TLA <span
                                        *ngIf="allTLAInfo.length > 0" class="clr-red">*</span></label>
                                <select [(ngModel)]="stockLineForm.tlaItemMasterId" name="tla"
                                    [required]="allTLAInfo.length > 0" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of allTLAInfo" [ngValue]="item.tlaItemMasterId">
                                        {{item.partNumber}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Aircraft Tail Num</label>
                                <input class="form-control" type="text" name="aircraftTailNumber"
                                    [(ngModel)]="stockLineForm.aircraftTailNumber" (ngModelChange)="enableSave()">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Manufacturer</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Manufacturer <span class="clr-red">*</span></label>
                                <select [(ngModel)]="stockLineForm.manufacturerId" name="manufacturerId"
                                    (change)="onSelectManufacturer(stockLineForm.manufacturerId)"
                                    (ngModelChange)="enableSave()" required>
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let manufacturer of allManufacturerInfo"
                                        [ngValue]="manufacturer.value">{{manufacturer.label}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Mfg. Lot Num</label>
                                <input class="form-control" type="text" name="manufacturerLotNumber"
                                    [(ngModel)]="stockLineForm.manufacturerLotNumber" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Mfg. Batch Num</label>
                                <input class="form-control" type="text" name="manufacturingBatchNumber"
                                    [(ngModel)]="stockLineForm.manufacturingBatchNumber" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Mfg. Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" [maxDate]="minDateValue"
                                    name="manufacturingDate" [(ngModel)]="stockLineForm.manufacturingDate"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Acquisition</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Acquisition Type</label>
                                <select name="acquistionTypeId" [(ngModel)]="stockLineForm.acquistionTypeId"
                                    (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of assetAcquisitionTypeList" [ngValue]="item.value">
                                        {{item.label}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Order Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" [maxDate]="minDateValue"
                                    name="orderDate" [(ngModel)]="stockLineForm.orderDate"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Entry Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" name="entryDate"
                                    [maxDate]="minDateValue" [(ngModel)]="stockLineForm.entryDate"
                                    (ngModelChange)="enableSave()" disabled></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>PO Num</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.purchaseOrderId" name="purchaseOrderId"
                                    [suggestions]="allPODetails" (completeMethod)="filterPOList($event)"
                                    [size]="30" [minLength]="1" (onSelect)="onChangePONum(stockLineForm.purchaseOrderId)"  [dropdown]="true" errorMessage="Records not found"
                                    (ngModelChange)="enableSave()" [forceSelection]="true">
                                </p-autoComplete>
                                <!-- <p-autoComplete field="purchaseOrderNumber" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.purchaseOrderId" name="purchaseOrderId"
                                    [suggestions]="polistInfo" (completeMethod)="filterPoNumber($event)" [size]="30"
                                    [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (onSelect)="onChangePONum(stockLineForm.purchaseOrderId)" [forceSelection]="true"
                                    (ngModelChange)="enableSave()" [disabled]="stockLineForm.repairOrderId">
                                </p-autoComplete> -->
                            </div>
                            <div class="form-group">
                                <label>RO Num</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                [(ngModel)]="stockLineForm.repairOrderId" name="repairOrderId"
                                [suggestions]="allRODetails" (completeMethod)="filterROList($event)"
                                [size]="30" [minLength]="1" (onSelect)="onChangeRONum(stockLineForm.repairOrderId)" [dropdown]="true" errorMessage="Records not found"
                                (ngModelChange)="enableSave()" [forceSelection]="true">
                            </p-autoComplete>
                                <!-- <p-autoComplete field="repairOrderNumber" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.repairOrderId" name="repairOrderId"
                                    [suggestions]="rolistInfo" (completeMethod)="filterRoNumber($event)" [size]="30"
                                    [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (onSelect)="onChangeRONum(stockLineForm.repairOrderId)" [forceSelection]="true"
                                    (ngModelChange)="enableSave()" [disabled]="stockLineForm.purchaseOrderId">
                                </p-autoComplete> -->
                            </div>
                            <div class="form-group">
                                <label>Vendor</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.vendorId" name="vendorId" [suggestions]="vendorNames"
                                    (completeMethod)="filterVendorNames($event)" [size]="30" [minLength]="1"
                                    [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"
                                    (ngModelChange)="enableSave()" [disabled]="disableVendor">
                                </p-autoComplete>
                            </div>
                            <div class="form-group">
                                <label>Requestor</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.requestorId" name="requestorId"
                                    [suggestions]="certifyByNames" (completeMethod)="filterEmployees($event)"
                                    [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (ngModelChange)="enableSave()" [forceSelection]="true">
                                </p-autoComplete>
                            </div>
                            <div class="form-group">
                                <label>Receiver Num <span class="clr-red">*</span></label>
                                <p-autoComplete class="pautocomp-cstm" name="receiverNumber" [suggestions]="receicerlistInfo" 
                                (completeMethod)="filterReceiverNumber($event)" placeholder="Select" [dropdown]="true" 
                                (ngModelChange)="enableSave()" errorMessage="Records not found" [(ngModel)]="receiverNumber" required></p-autoComplete>
                            </div>
                            <div class="form-group">
                                <label>Received Date <span class="clr-red">*</span></label>
                                <p-calendar class="workflow-clder" [showIcon]="true" name="receivedDate"
                                    [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                    [(ngModel)]="stockLineForm.receivedDate" #receivedDate="ngModel"
                                    (ngModelChange)="enableSave()" required></p-calendar>
                                <div *ngIf="receivedDate.invalid && (receivedDate.dirty || receivedDate.touched)"
                                    class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="receivedDate.errors.required">
                                        <small> Received Date is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Reconciliation Num</label>
                                <input class="form-control" type="text" name="reconciliationNumber"
                                    [(ngModel)]="stockLineForm.reconciliationNumber" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>WO Num</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.workOrderId" name="workOrderId"
                                    [suggestions]="allWorkOrderDetails" (completeMethod)="filterWorkOrderList($event)"
                                    [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (ngModelChange)="enableSave()" [forceSelection]="true">
                                </p-autoComplete>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Traceability</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Obtain From</label>
                                <select [(ngModel)]="stockLineForm.obtainFromType" name="obtainFromType"
                                    (change)="onSelectObrainFrom()" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of moduleListDropdown" [ngValue]="item.moduleId">
                                        {{item.moduleName}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="stockLineForm.obtainFromType == 1">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.obtainFrom" name="obtainFromCustomer"
                                            [suggestions]="customerNames" (completeMethod)="filterCustomerNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true"></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.obtainFromType == 2">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.obtainFrom" name="obtainFromVendor"
                                            [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.obtainFromType == 9">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.obtainFrom" name="obtainFromCompany"
                                            [suggestions]="companyNames" (completeMethod)="filterCompanyNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.obtainFromType == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="obtainFromOther"
                                            [(ngModel)]="stockLineForm.obtainFrom" (ngModelChange)="enableSave()">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Owner</label>
                                <select [(ngModel)]="stockLineForm.ownerType" name="ownerType"
                                    (change)="onSelectOwner()" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of moduleListDropdown" [ngValue]="item.moduleId">
                                        {{item.moduleName}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="stockLineForm.ownerType == 1">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.owner" name="ownerCustomer"
                                            [suggestions]="customerNames" (completeMethod)="filterCustomerNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true"></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.ownerType == 2">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.owner" name="ownerVendor"
                                            [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.ownerType == 9">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.owner" name="ownerCompany"
                                            [suggestions]="companyNames" (completeMethod)="filterCompanyNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.ownerType == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="ownerOther"
                                            [(ngModel)]="stockLineForm.owner" (ngModelChange)="enableSave()">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Traceable To</label>
                                <select [(ngModel)]="stockLineForm.traceableToType" name="traceableToType"
                                    (change)="onSelectTraceableTo()" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of moduleListDropdown" [ngValue]="item.moduleId">
                                        {{item.moduleName}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="stockLineForm.traceableToType == 1">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.traceableTo" name="traceableToCustomer"
                                            [suggestions]="customerNames" (completeMethod)="filterCustomerNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true"></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.traceableToType == 2">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.traceableTo" name="traceableToVendor"
                                            [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.traceableToType == 9">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.traceableTo" name="traceableToCompany"
                                            [suggestions]="companyNames" (completeMethod)="filterCompanyNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.traceableToType == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="traceableToOther"
                                            [(ngModel)]="stockLineForm.traceableTo" (ngModelChange)="enableSave()">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Export/International</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label matTooltip="Export Control Classification Number"
                                    matTooltipPosition="above">ECCN</label>
                                <input class="form-control" type="text" name="ExportECCN" disabled
                                    [(ngModel)]="stockLineForm.exportECCN" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label matTooltip="International Traffic in Arms Regulations Number"
                                    matTooltipPosition="above">ITAR</label>
                                <input class="form-control" type="text" name="ITARNumber" disabled
                                    [(ngModel)]="stockLineForm.itarNumber" (ngModelChange)="enableSave()">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Inventory</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Qty On Hand <span class="clr-red">*</span></label>
                                <input class="form-control text-right" type="text" pKeyFilter="pint"
                                    name="QuantityOnHand" (change)="resetQtyFields(); calculateQtyAvailable()"
                                    [(ngModel)]="stockLineForm.quantityOnHand" #quantityOnHand="ngModel"
                                    [disabled]="disableQtyOnHand" (ngModelChange)="enableSave()" required>
                                <div *ngIf="quantityOnHand.invalid && (quantityOnHand.dirty || quantityOnHand.touched)"
                                    class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="quantityOnHand.errors.required">
                                        <small> Qty On Hand is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>UOM <strong class="clr-red">*</strong></label>
                                <p-dropdown class="p-dropdown-100" (ngModelChange)="enableSave()"
                                    [options]="allPurchaseUnitOfMeasureinfo" filter="true"
                                    [(ngModel)]="stockLineForm.purchaseUnitOfMeasureId" name="purchaseUnitOfMeasureId"
                                    [resetFilterOnHide]="true" placeholder="-- Select --" [showClear]="true" required>
                                </p-dropdown>
                            </div>
                            <div class="form-group">
                                <label>Qty Reserved</label>
                                <input class="form-control  text-right" type="text" name="QuantityReserved"
                                    (change)="resetQtyIssued(); onChangeQtyReserved()"
                                    [(ngModel)]="stockLineForm.quantityReserved" (ngModelChange)="enableSave()"
                                    disabled>
                                <!--pKeyFilter="pint" [disabled]="stockLineForm.quantityOnHand == null" -->
                            </div>
                            <div class="form-group">
                                <label>Qty Issued</label>
                                <input class="form-control text-right" type="text" name="QuantityIssued"
                                    (change)="calcQtyReservedByQtyIssued()" [(ngModel)]="stockLineForm.quantityIssued"
                                    (ngModelChange)="enableSave()" disabled>
                                <!-- pKeyFilter="pint" [disabled]="stockLineForm.quantityOnHand == null" -->
                            </div>
                            <div class="form-group">
                                <label>Qty Avail</label>
                                <input class="form-control text-right" type="text" name="quantityAvailable"
                                    [(ngModel)]="stockLineForm.quantityAvailable" (ngModelChange)="enableSave()"
                                    disabled>
                            </div>
                            <div class="form-group">
                                <label>PO Unit Cost</label> 
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money" 
                                    name="purchaseOrderUnitCost" (change)="onChangePOUnitCost()"
                                    [(ngModel)]="stockLineForm.purchaseOrderUnitCost" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>RO Unit Cost</label>
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money" 
                                    name="repairOrderUnitCost" (change)="onChangeROUnitCost()"
                                    [(ngModel)]="stockLineForm.repairOrderUnitCost" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Unit Cost</label>
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money" 
                                    name="unitCost"
                                    [(ngModel)]="stockLineForm.unitCost" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Unit Sale Price</label>
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money"
                                    name="unitSalesPrice" (change)="onChangeUnitSalesPrice()"
                                    [(ngModel)]="stockLineForm.unitSalesPrice" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>Core Cost/Unit</label>
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money"
                                    name="coreUnitCost" (change)="onChangeCoreCost()"
                                    [(ngModel)]="stockLineForm.coreUnitCost" (ngModelChange)="enableSave()">
                            </div>
                            <div class="form-group">
                                <label>GL Account</label>
                                <input class="form-control" type="text" name="glAccountName"
                                    [(ngModel)]="stockLineForm.glAccountName" (ngModelChange)="enableSave()" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Location</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Site <span class="clr-red">*</span></label>
                                <select [(ngModel)]="stockLineForm.siteId" name="siteId"
                                    (change)="getWareHouseList(stockLineForm.siteId)" (ngModelChange)="enableSave()"
                                    required>
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allSites" [ngValue]="site.value">{{site.label}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Warehouse</label>
                                <select [(ngModel)]="stockLineForm.warehouseId" name="warehouseId"
                                    (change)="getLocationList(stockLineForm.warehouseId)"
                                    (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allWareHouses" [ngValue]="site.value">{{site.label}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Location</label>
                                <select [(ngModel)]="stockLineForm.locationId" name="locationId"
                                    (change)="getShelfList(stockLineForm.locationId)" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allLocations" [ngValue]="site.value">{{site.label}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Shelf</label>
                                <select [(ngModel)]="stockLineForm.shelfId" name="shelfId"
                                    (change)="getBinList(stockLineForm.shelfId)" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allShelfs" [ngValue]="site.value">{{site.label}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bin</label>
                                <select [(ngModel)]="stockLineForm.binId" name="binId" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let site of allBins" [ngValue]="site.value">{{site.label}}</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Lot & Consignment</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Lot Num</label>
                                <input class="form-control" type="text" name="lotNumber"
                                    [(ngModel)]="stockLineForm.lotNumber" (ngModelChange)="enableSave()" />
                            </div>
                            <div class="form-group">
                                <label>Lot Description</label>
                                <input class="form-control" type="text" name="lotDescription"
                                    [(ngModel)]="stockLineForm.lotDescription" (ngModelChange)="enableSave()" />
                            </div>
                            <div class="form-group">
                                <label>Lot Cost</label>
                                <input class="form-control text-right" type="text" pInputText pKeyFilter="money"
                                    name="lotCost" (change)="onChangelotCost()" [(ngModel)]="stockLineForm.lotCost"
                                    (ngModelChange)="enableSave()">
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Warnings</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="checkbox-cstm">
                                    <label class="m-t-10">
                                        <input type="checkbox" name="blackListed"
                                            [(ngModel)]="stockLineForm.blackListed" (ngModelChange)="enableSave()">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Black List
                                    </label>
                                </div>
                            </div>
                            <div class="form-group memo-popup-cstm col-sm-12" *ngIf="stockLineForm.blackListed == true"
                                (ngModelChange)="enableSave()">
                                <div class="col-sm-11 blacklist-memo-div">
                                    <span>
                                        <div [innerHTML]="stockLineForm.blackListedReason"
                                            [matTooltip]="parsedText(stockLineForm.blackListedReason)"
                                            class="form-control " class="text_editor_box stock-line-memo-width"></div>
                                    </span>
                                </div>
                                <div class="col-sm-1 black-reason">
                                    <i class="fa fa-pencil black-reason-icon-align" data-toggle="modal"
                                        data-target="#textarea-popup" (ngModelChange)="enableSave()"
                                        matTooltip="Add Black List Reason" matTooltipPosition="above"
                                        (click)="onAddTextAreaInfo('blackListedReason')"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-cstm">
                                    <label class="m-t-10">
                                        <input type="checkbox" name="accident" [(ngModel)]="stockLineForm.accident"
                                            (ngModelChange)="enableSave()">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Accident
                                    </label>
                                </div>
                            </div>
                            <div class="form-group memo-popup-cstm col-sm-12" *ngIf="stockLineForm.accident == true">
                                <div class="col-sm-11 blacklist-memo-div">
                                    <span>
                                        <div [innerHTML]="stockLineForm.accidentReason"
                                            [matTooltip]="parsedText(stockLineForm.accidentReason)"
                                             class="form-control"
                                             class="text_editor_box stock-line-memo-width"></div>
                                    </span>
                                </div>
                                <div class="col-sm-1 black-reason">
                                    <i class="fa fa-pencil" data-toggle="modal" (ngModelChange)="enableSave()"
                                        data-target="#textarea-popup" matTooltip="Add Accident Reason"
                                        matTooltipPosition="above" (click)="onAddTextAreaInfo('accidentReason')"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-cstm">
                                    <label class="m-t-10">
                                        <input type="checkbox" name="incident" [(ngModel)]="stockLineForm.incident"
                                            (ngModelChange)="enableSave()">
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        Incident
                                    </label>
                                </div>
                            </div>
                            <div class="form-group memo-popup-cstm col-sm-12" *ngIf="stockLineForm.incident == true">
                                <div class="col-sm-11 blacklist-memo-div">
                                    <span>
                                        <div [innerHTML]="stockLineForm.incidentReason" class="form-control"
                                            (ngModelChange)="enableSave()"
                                            [matTooltip]="parsedText(stockLineForm.incidentReason)"
                                            matTooltipPosition="above" class="text_editor_box  stock-line-memo-width">
                                        </div>
                                    </span>
                                </div>
                                <div class="col-sm-1 black-reason">
                                    <i class="fa fa-pencil" data-toggle="modal" data-target="#textarea-popup"
                                        matTooltip="Add Incident Reason" matTooltipPosition="above"
                                        (ngModelChange)="enableSave()"
                                        (click)="onAddTextAreaInfo('incidentReason')"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Management Structure <span class="clr-red">*</span></h5>
                        </div>
                        <div class="card-body structure-card-body">
                            <div class="form-group">
                                <select class="form-control" name="primaryCompany" [(ngModel)]="headerInfo.companyId"
                                    (change)="getBUList(headerInfo.companyId);" #mCompanyName
                                    (ngModelChange)="enableSave()" required>
                                    <option value="0">Select</option>
                                    <option *ngFor="let name of maincompanylist" [ngValue]="name.value">{{name.label}}
                                    </option>
                                </select>
                                <div *ngIf="mCompanyName.invalid && (mCompanyName.dirty || mCompanyName.touched)"
                                    class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="mCompanyName.errors.required">
                                        <small> Company Name is required </small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <select [(ngModel)]="headerInfo.buId" name="primaryBU"
                                    (change)="getDivisionlist(headerInfo.buId)" class="form-control"
                                    (ngModelChange)="enableSave()">
                                    <option value="0">Select</option>
                                    <option *ngFor="let name of bulist" [ngValue]="name.value">{{name.label}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <select class="form-control" [(ngModel)]="headerInfo.divisionId" name="primaryDivision"
                                    (change)="getDepartmentlist(headerInfo.divisionId)" (ngModelChange)="enableSave()">
                                    <option value="0">Select</option>
                                    <option *ngFor="let name of divisionlist" [ngValue]="name.value">{{name.label}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <select class="form-control" [(ngModel)]="headerInfo.departmentId" name="primaryDept"
                                    (change)="getDepartmentId(headerInfo.departmentId)" (ngModelChange)="enableSave()">
                                    <option value="0">Select</option>
                                    <option *ngFor="let name of departmentList" [ngValue]="name.value">{{name.label}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Certification, Tag and Inspection</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Part Cert Num</label>
                                <input class="form-control" type="text" name="partCertificationNumber"
                                    [(ngModel)]="stockLineForm.partCertificationNumber" (ngModelChange)="enableSave()">
                            </div>
                            <!-- <div class="form-group">
                                <label>Certify By
                                </label>
                                <input class="form-control" type="text" name="certifiedBy"
                                    [(ngModel)]="stockLineForm.certifiedBy" (ngModelChange)="enableSave()" />
                            </div> -->
                            <div class="form-group">
                                <label>Cert Type</label>
                                <select [(ngModel)]="stockLineForm.certifiedTypeId" name="certifiedTypeId"
                                    (change)="onSelectCertype()" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of moduleListDropdown" [ngValue]="item.moduleId">
                                        {{item.moduleName}}</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Cert By</label>
                                <div class="form-row" *ngIf="stockLineForm.certifiedTypeId == 1">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.certifiedById" name="certifiedByCustomer"
                                            [suggestions]="customerNames" (completeMethod)="filterCustomerNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true"></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.certifiedTypeId == 2">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.certifiedById" name="certifiedByVendor"
                                            [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.certifiedTypeId == 9">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.certifiedById" name="certifiedByCompany"
                                            [suggestions]="companyNames" (completeMethod)="filterCompanyNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.certifiedTypeId == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="certifiedByOther"
                                            [(ngModel)]="stockLineForm.certifiedBy" (ngModelChange)="enableSave()">
                                    </div>
                                </div>
                            </div> 
                            <div class="form-group">
                                <label>Certified Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" name="certifiedDate"
                                    [maxDate]="minDateValue" [(ngModel)]="stockLineForm.certifiedDate"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Certify Due Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" [minDate]="minDateValue"
                                    name="certifiedDueDate" [(ngModel)]="stockLineForm.certifiedDueDate"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Inspected By</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.inspectionBy" name="inspectionBy"
                                    [suggestions]="certifyByNames" (completeMethod)="filterEmployees($event)"
                                    [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (ngModelChange)="enableSave()" (onSelect)="onChangeInspectedDate()"
                                    [forceSelection]="true">
                                </p-autoComplete>
                            </div>
                            <div class="form-group">
                                <label>Inspected Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" name="inspectionDate"
                                    [(ngModel)]="stockLineForm.inspectionDate" (ngModelChange)="enableSave()">
                                </p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Tag Num</label>
                                <input class="form-control" type="text" name="tagNumber"
                                    [(ngModel)]="stockLineForm.tagNumber" (ngModelChange)="enableSave()" />
                            </div>
                            <div class="form-group">
                                <label>Tag Type</label>
                                <p-multiSelect [options]="allTagTypes" [(ngModel)]="stockLineForm.tagType"
                                    name="tagType" (ngModelChange)="enableSave()">
                                </p-multiSelect>
                            </div>
                            <div class="form-group">
                                <label>Tag By</label>
                                <select [(ngModel)]="stockLineForm.taggedByType" name="taggedByType"
                                    (change)="onSelectTaggedType()" (ngModelChange)="enableSave()">
                                    <option value="0">-- Select --</option>
                                    <option *ngFor="let item of moduleListDropdown" [ngValue]="item.moduleId">
                                        {{item.moduleName}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="form-row" *ngIf="stockLineForm.taggedByType == 1">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.taggedBy" name="taggedByCustomer"
                                            [suggestions]="customerNames" (completeMethod)="filterCustomerNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true"></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.taggedByType == 2">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.taggedBy" name="taggedByVendor"
                                            [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.taggedByType == 9">
                                    <div class="col-sm-12">
                                        <p-autoComplete field="label" class="pautocomp-cstm"
                                            [(ngModel)]="stockLineForm.taggedBy" name="taggedByCompany"
                                            [suggestions]="companyNames" (completeMethod)="filterCompanyNames($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" (ngModelChange)="enableSave()"
                                            [forceSelection]="true">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-row" *ngIf="stockLineForm.taggedByType == 4">
                                    <div class="col-sm-12">
                                        <input class="form-control" type="text" name="taggedByOther"
                                            [(ngModel)]="stockLineForm.taggedByName" (ngModelChange)="enableSave()">
                                    </div>
                                </div>
                            </div>                            
                            <div class="form-group">
                                <label>Tag Date</label>
                                <p-calendar class="workflow-clder" [showIcon]="true" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" name="tagDate"
                                    [maxDate]="minDateValue" [(ngModel)]="stockLineForm.tagDate"
                                    (ngModelChange)="enableSave()"></p-calendar>
                            </div>                            
                            <!-- <div class="form-group">
                                <label>Tagged By</label>
                                <p-autoComplete field="label" class="pautocomp-cstm"
                                    [(ngModel)]="stockLineForm.taggedBy" name="taggedBy"
                                    [suggestions]="TagByNames" (completeMethod)="filterTagEmployees($event)"
                                    [size]="30" [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    (ngModelChange)="enableSave()" 
                                    [forceSelection]="true">
                                </p-autoComplete>
                            </div> -->                            
                        </div>
                    </div>
                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Other</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Integration With</label>
                                <input class="form-control" type="text" name="integrationPortal"
                                    [(ngModel)]="stockLineForm.integrationPortal" (ngModelChange)="enableSave()"
                                    disabled />
                            </div>
                        </div>
                    </div>

                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Memo</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="checkbox-cstm">
                                    <label class="memo-label">
                                        Memo
                                    </label>
                                </div>
                            </div>
                            <div class="form-group memo-popup-cstm col-sm-12 stock-memo-margin">
                                <div class="col-sm-11 blacklist-memo-div">
                                    <span>
                                        <div [innerHTML]="stockLineForm.memo "
                                            [matTooltip]="parsedText(stockLineForm.memo)" class="form-control"
                                            class="text_editor_box  stock-line-memo-width" [ngStyle]="{'border':'1px solid red'}"></div>
                                    </span>
                                </div>
                                <div class="col-sm-1 black-reason">
                                    <i class="fa fa-pencil black-reason-icon-align" data-toggle="modal"
                                        data-target="#textarea-popup" matTooltip="Add Memo"
                                        (ngModelChange)="enableSave()" matTooltipPosition="above"
                                        (click)="onAddTextAreaInfo('memo')"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="form-row" *ngIf="sourceTimeLife.timeLife">
                <div class="col-md-6">
                    <div class="table-responsive form-group" style="padding: 0 5px;">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="15" class="text-center"><strong>Time Life Info (Hours)</strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th></th>
                                    <th class="text-center">Cycles</th>
                                    <th colspan="2" class="text-center">Time</th>
                                    <th colspan="2" class="text-center">Last</th>
                                </tr>
                                <tr>
                                    <td>Remaining</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text" 
                                            placeholder="hhh:mm" [pattern]="timePattern" #cyclesRemaining="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="cyclesRemaining"
                                            [(ngModel)]="sourceTimeLife.cyclesRemaining" />
                                        <div *ngIf="cyclesRemaining.errors">
                                            <div *ngIf="cyclesRemaining.errors" [ngClass]="'error'">
                                                <div *ngIf="cyclesRemaining.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->

                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #cyclesRemainingHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesRemainingHrs"
                                            [(ngModel)]="sourceTimeLife.cyclesRemainingHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #cyclesRemainingMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesRemainingMin"
                                            [(ngModel)]="sourceTimeLife.cyclesRemainingMin"
                                            (change)="onChangeTimeLifeMin('cyclesRemainingMin',sourceTimeLife.cyclesRemainingMin)">
                                    </td>
                                    <td>Remaining</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #timeRemaining="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="timeRemaining"
                                            [(ngModel)]="sourceTimeLife.timeRemaining" />
                                        <div *ngIf="timeRemaining.errors">
                                            <div *ngIf="timeRemaining.errors" [ngClass]="'error'">
                                                <div *ngIf="timeRemaining.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #timeRemainingHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeRemainingHrs"
                                            [(ngModel)]="sourceTimeLife.timeRemainingHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #timeRemainingMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeRemainingMin"
                                            [(ngModel)]="sourceTimeLife.timeRemainingMin"
                                            (change)="onChangeTimeLifeMin('timeRemainingMin',sourceTimeLife.timeRemainingMin)">
                                    </td>
                                    <td style="width:70px!important">Since New</td>
                                    <td class="clr2">
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #lastSinceNewHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceNewHrs"
                                            [(ngModel)]="sourceTimeLife.lastSinceNewHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #lastSinceNewMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceNewMin"
                                            [(ngModel)]="sourceTimeLife.lastSinceNewMin"
                                            (change)="onChangeTimeLifeMin('lastSinceNewMin',sourceTimeLife.lastSinceNewMin)">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Since New</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #cyclesSinceNew="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="cyclesSinceNew"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceNew" />
                                        <div *ngIf="cyclesSinceNew.errors">
                                            <div *ngIf="cyclesSinceNew.errors" [ngClass]="'error'">
                                                <div *ngIf="cyclesSinceNew.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->

                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #cyclesSinceNewHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceNewHrs"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceNewHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #cyclesSinceNewMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceNewMin"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceNewMin"
                                            (change)="onChangeTimeLifeMin('cyclesSinceNewMin',sourceTimeLife.cyclesSinceNewMin)">

                                    </td>
                                    <td>Since New</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #timeSinceNew="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="timeSinceNew"
                                            [(ngModel)]="sourceTimeLife.timeSinceNew" />
                                        <div *ngIf="timeSinceNew.errors">
                                            <div *ngIf="timeSinceNew.errors" [ngClass]="'error'">
                                                <div *ngIf="timeSinceNew.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #timeSinceNewHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceNewHrs"
                                            [(ngModel)]="sourceTimeLife.timeSinceNewHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #timeSinceNewMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceNewMin"
                                            [(ngModel)]="sourceTimeLife.timeSinceNewMin"
                                            (change)="onChangeTimeLifeMin('timeSinceNewMin',sourceTimeLife.timeSinceNewMin)">

                                    </td>
                                    <td style="width:70px!important">Since Ovh</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #lastSinceNew="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="lastSinceNew"
                                            [(ngModel)]="sourceTimeLife.lastSinceNew" />
                                        <div *ngIf="lastSinceNew.errors">
                                            <div *ngIf="lastSinceNew.errors" [ngClass]="'error'">
                                                <div *ngIf="lastSinceNew.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #lastSinceOVHHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceOVHHrs"
                                            [(ngModel)]="sourceTimeLife.lastSinceOVHHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #lastSinceOVHMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceOVHMin"
                                            [(ngModel)]="sourceTimeLife.lastSinceOVHMin"
                                            (change)="onChangeTimeLifeMin('lastSinceOVHMin',sourceTimeLife.lastSinceOVHMin)">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Since Ovh</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #cyclesSinceOVH="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="cyclesSinceOVH"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceOVH" />
                                        <div *ngIf="cyclesSinceOVH.errors">
                                            <div *ngIf="cyclesSinceOVH.errors" [ngClass]="'error'">
                                                <div *ngIf="cyclesSinceOVH.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #cyclesSinceOVHHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceOVHHrs"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceOVHHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #cyclesSinceOVHMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceOVHMin"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceOVHMin"
                                            (change)="onChangeTimeLifeMin('cyclesSinceOVHMin',sourceTimeLife.cyclesSinceOVHMin)">
                                    </td>
                                    <td>Since Ovh</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #timeSinceOVH="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="timeSinceOVH"
                                            [(ngModel)]="sourceTimeLife.timeSinceOVH" />
                                        <div *ngIf="timeSinceOVH.errors">
                                            <div *ngIf="timeSinceOVH.errors" [ngClass]="'error'">
                                                <div *ngIf="timeSinceOVH.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #timeSinceOVHHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceOVHHrs"
                                            [(ngModel)]="sourceTimeLife.timeSinceOVHHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #timeSinceOVHMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceOVHMin"
                                            [(ngModel)]="sourceTimeLife.timeSinceOVHMin"
                                            (change)="onChangeTimeLifeMin('timeSinceOVHMin',sourceTimeLife.timeSinceOVHMin)">
                                    </td>
                                    <td>Since Insp</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #lastSinceOVH="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="lastSinceOVH"
                                            [(ngModel)]="sourceTimeLife.lastSinceOVH" />
                                        <div *ngIf="lastSinceOVH.errors">
                                            <div *ngIf="lastSinceOVH.errors" [ngClass]="'error'">
                                                <div *ngIf="lastSinceOVH.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #lastSinceInspectionHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceInspectionHrs"
                                            [(ngModel)]="sourceTimeLife.lastSinceInspectionHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #lastSinceInspectionMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="lastSinceInspectionMin"
                                            [(ngModel)]="sourceTimeLife.lastSinceInspectionMin"
                                            (change)="onChangeTimeLifeMin('lastSinceInspectionMin',sourceTimeLife.lastSinceInspectionMin)">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Since Insp</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern"
                                            #cyclesSinceInspection="ngModel" mask="000:00"
                                            (ngModelChange)="enableSave()" name="cyclesSinceInspection"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceInspection" />
                                        <div *ngIf="cyclesSinceInspection.errors">
                                            <div *ngIf="cyclesSinceInspection.errors" [ngClass]="'error'">
                                                <div *ngIf="cyclesSinceInspection.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #cyclesSinceInspectionHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceInspectionHrs"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceInspectionHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #cyclesSinceInspectionMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceInspectionMin"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceInspectionMin"
                                            (change)="onChangeTimeLifeMin('cyclesSinceInspectionMin',sourceTimeLife.cyclesSinceInspectionMin)">
                                    </td>
                                    <td>Since Insp</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #timeSinceInspection="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="timeSinceInspection"
                                            [(ngModel)]="sourceTimeLife.timeSinceInspection" />
                                        <div *ngIf="timeSinceInspection.errors">
                                            <div *ngIf="timeSinceInspection.errors" [ngClass]="'error'">
                                                <div *ngIf="timeSinceInspection.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #timeSinceInspectionHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceInspectionHrs"
                                            [(ngModel)]="sourceTimeLife.timeSinceInspectionHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #timeSinceInspectionMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceInspectionMin"
                                            [(ngModel)]="sourceTimeLife.timeSinceInspectionMin"
                                            (change)="onChangeTimeLifeMin('timeSinceInspectionMin',sourceTimeLife.timeSinceInspectionMin)">
                                    </td>
                                    <td></td>
                                    <td style="background-color: #fff !important;"></td>
                                    <!-- <td class="clr2">
                                        <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #lastSinceInspection="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="lastSinceInspection"
                                            [(ngModel)]="sourceTimeLife.lastSinceInspection" />
                                        <div *ngIf="lastSinceInspection.errors">
                                            <div *ngIf="lastSinceInspection.errors" [ngClass]="'error'">
                                                <div *ngIf="lastSinceInspection.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </td> -->
                                </tr>
                                <tr>
                                    <td>Since Repair</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #cyclesSinceRepair="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="cyclesSinceRepair"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceRepair" />
                                        <div *ngIf="cyclesSinceRepair.errors">
                                            <div *ngIf="cyclesSinceRepair.errors" [ngClass]="'error'">
                                                <div *ngIf="cyclesSinceRepair.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #cyclesSinceRepairHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceRepairHrs"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceRepairHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #cyclesSinceRepairMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="cyclesSinceRepairMin"
                                            [(ngModel)]="sourceTimeLife.cyclesSinceRepairMin"
                                            (change)="onChangeTimeLifeMin('cyclesSinceRepairMin',sourceTimeLife.cyclesSinceRepairMin)">
                                    </td>
                                    <td>Since Repair</td>
                                    <td class="clr2">
                                        <!-- <input class="form-control width-input" matInput type="text"
                                            placeholder="hhh:mm" [pattern]="timePattern" #timeSinceRepair="ngModel"
                                            mask="000:00" (ngModelChange)="enableSave()" name="timeSinceRepair"
                                            [(ngModel)]="sourceTimeLife.timeSinceRepair" />
                                        <div *ngIf="timeSinceRepair.errors">
                                            <div *ngIf="timeSinceRepair.errors" [ngClass]="'error'">
                                                <div *ngIf="timeSinceRepair.errors.pattern">
                                                    <span class="clr-red">Please enter valid time format
                                                        (hhh:mm)</span>
                                                </div>
                                            </div>
                                        </div> -->
                                        <input class="form-control tl-input" matInput placeholder="HH"
                                            #timeSinceRepairHrs="ngModel" 
                                            (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceRepairHrs"
                                            [(ngModel)]="sourceTimeLife.timeSinceRepairHrs">
                                        <span> : </span>
                                        <input class="form-control tl-input" matInput placeholder="MM"
                                            #timeSinceRepairMin="ngModel" (ngModelChange)="enableSave()"
                                            type="number" 
                                            name="timeSinceRepairMin"
                                            [(ngModel)]="sourceTimeLife.timeSinceRepairMin"
                                            (change)="onChangeTimeLifeMin('timeSinceRepairMin',sourceTimeLife.timeSinceRepairMin)">
                                    </td>
                                    <td></td>
                                    <td style="background-color: #fff !important;"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col-md-12">
                <app-common-documents [moduleName]="moduleName" (parentTrigger)="changeOfStatus($event)"  [uploadDocsToser]="uploadDocs" [referenceId]="stockLineId"
                [isViewMode]="false" [offLineUpload]="true"></app-common-documents>
            </div>
                <!-- <div class="col-md-6">
                    <div class="card card-stock">
                        <div class="card-header">
                            <h5>Attachments</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Attachments
                                    <a class="plusicon-cstm" data-toggle="modal" data-target="#addDocumentDetailsNew"
                                        (click)="addDocumentDetails()"><i class="fa fa-plus-circle fa-lg"
                                            matTooltip="Create Documents" matTooltipPosition="above"></i></a>
                                </label>
                            </div>
                            <div>
                                <div class="form-row">
                                    <div class="col-md-8">
                                        <h6 class="panel-title stock-attachment-header">Attachment
                                            Details</h6>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="checkbox-cstm check-box-div">
                                            <label class="check-box-label">
                                                <input type="checkbox" [(ngModel)]="isShowDeletedList" name="cparent" />
                                                <span class="cr check-box-span"><i
                                                        class="cr-icon pi pi-check"></i></span>
                                                <p class="font-bold"> Show Deleted List </p>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" style="text-align: center;"
                                    *ngIf="(isShowDeletedList)?deletedDocumentList.length == 0:sourceViewforDocumentList.length == 0">
                                    No Record Found
                                </div>
                                <div
                                    *ngIf="(isShowDeletedList)?deletedDocumentList.length > 0:sourceViewforDocumentList.length > 0">
                                    <p-table #dt class="rpo-table-cstm rro-table-cstm"
                                        [value]="(isShowDeletedList)?deletedDocumentList:sourceViewforDocumentList"
                                        [first]="0" [(rows)]="pageSize" [paginator]="true" [pageLinks]="3"
                                        [rowsPerPageOptions]="[5, 10, 15, 20]" [columns]="selectedColumnsCertified"
                                        selectionMode="multiple" (onLazyLoad)="loadData($event)"
                                        [resizableColumns]="true" [reorderableColumns]="true"
                                        [totalRecords]="(isShowDeletedList)?deletedDocumentList.length:sourceViewforDocumentList.length"
                                        [metaKeySelection]="true" [scrollable]="true" scrollHeight="450px">
                                        <ng-template pTemplate="colgroup" let-columns>
                                            <colgroup>
                                                <ng-container *ngFor="let col of columns">
                                                    <col *ngIf="col.field == 'createdDate' || col.field == 'updatedDate'"
                                                       class="table-column-width" />
                                                    <col *ngIf="col.field != 'createdDate' && col.field != 'updatedDate'"
                                                    class="table-column-width" />
                                                </ng-container>
                                            </colgroup>
                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of columns" class="table-column-width">
                                                    {{ col.header }}
                                                </th>
                                                <th class="table-actions-column">Actions</th>
                                            </tr>

                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn
                                                    [pSortableColumn]="col.field">
                                                    {{ col.header }}
                                                    <p-sortIcon [field]="col.field">
                                                    </p-sortIcon>
                                                </th>
                                                <th class="table-actions-column">Actions</th>
                                            </tr>
                                            <tr>
                                                <th class="action-icons-cstm table-column-width" *ngFor="let col of columns"
                                                    [ngSwitch]="col.field">
                                                    <input type="text"
                                                        (input)="dt.filter($event.target.value, col.field,'contains') "
                                                        *ngIf="col.field != 'createdDate' && col.field != 'updatedDate'"
                                                      class="table-header-input-width" pInputText>
                                                    <input type="date" class="hidePlaceHolder table-header-input-width"
                                                        *ngIf="col.field == 'createdDate'" name="createdDate"
                                                       
                                                        (change)="dateFilterForTableNew($event.target.value, col.field )">
                                                    <input type="date" class="hidePlaceHolder table-header-input-width"
                                                        *ngIf="col.field == 'updatedDate'" name="updatedDate"
                                                       
                                                        (change)="dateFilterForTableNew($event.target.value, col.field )">
                                                </th>
                                                <th class="table-actions-column"></th>

                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-rowData let-columns="columns"
                                            let-rowIndex="rowIndex">
                                            <tr [pSelectableRow]="rowData" pReorderableRowHandle>
                                                <ng-container *ngFor="let col of columns">
                                                    <td class="table-column-width" *ngIf="col.field != 'fileName' && col.field !='docMemo'"
                                                        class="ui-resizable-column" pReorderableRowHandle>
                                                        {{
                                                        col.field == 'createdDate'
                                                        ? (rowData[col.field] | date: 'MM/dd/yyyy')
                                                        : rowData[col.field] && col.field == 'updatedDate'
                                                        ? (rowData[col.field] | date: 'MM/dd/yyyy')
                                                        : rowData[col.field]
                                                        }}
                                                    </td>
                                                    <td class="table-column-width" *ngIf="col.field == 'fileName'">
                                                        <a class="filelink" *ngIf="rowData.isFileFromServer == true"
                                                            (click)="downloadFileUpload(rowData)">
                                                            {{ rowData[col.field] }}
                                                        </a>
                                                        <a *ngIf="rowData.isFileFromServer == false"
                                                            [href]="rowData.link" download="{{rowData.fileName}}"
                                                            matTooltip="Download" matTooltipPosition="above"
                                                            class="filelink">
                                                            {{ rowData[col.field] }}

                                                        </a>
                                                    </td>
                                                    <td class="table-column-width" *ngIf="col.field == 'docMemo'">
                                                        <p class="p_textEditor" [innerHTML]=rowData[col.field]></p>
                                                    </td>
                                                </ng-container>
                                                <td class="table-column-width action-icons-cstm" *ngIf="!isShowDeletedList">
                                                    <span data-toggle="modal" data-target="#addDocumentDetailsNew">
                                                        <a class="btn nobg"
                                                            (click)="editStockLineDocument(rowData,rowIndex)"
                                                            matTooltip="Edit" matTooltipPosition="above"><i
                                                                class="fa fa-pencil"></i></a>
                                                    </span>

                                                    <a class="btn btn-danger nobg"
                                                        (click)="deleteAttachmentRow(rowData, rowIndex,deleteContent)"
                                                        matTooltip="Delete" matTooltipPosition="above"
                                                        data-target="#delete" data-toggle="modal">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                    <span *ngIf="rowData.attachmentId">
                                                        <a class="btn nobg"
                                                            (click)="openHistory(contentAuditHist, rowData)"
                                                            matTooltip="History" matTooltipPosition="above"><i
                                                                class="fa fa-history"></i></a>
                                                    </span>
                                                </td>
                                                <td style="width: 110px;" *ngIf="isShowDeletedList">
                                                    <span><a class="btn nobg" (click)="restoreRecord(rowData);"
                                                            matTooltip="Restore Record" matTooltipPosition="above"><i
                                                                class="fa fa-undo" aria-hidden="true"></i></a>
                                                    </span>
                                                </td>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary" id="footer">
                                            <label id="footer" class="footer">Total:</label>
                                            <input class="footer-input-width" [(ngModel)]="dt._totalRecords"
                                                name="no'of records" disabled pInputText type="text" />
                                            &nbsp;&nbsp;
                                            <label id="footer" class="footer1">Pages Count:</label>

                                            <input class="footer-input-width"
                                                [ngModel]="getPageCount(dt._totalRecords, dt.rows)" name="page count"
                                                disabled pInputText type="text" />
                                        </ng-template>

                                    </p-table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
            <div class="form-row pull-right">
                <button type="button" class="btn btn-primary" (keydown.enter)="$event.preventDefault()" (click)="onSaveStockLine()"
                    [disabled]="!stockLineSetupForm.valid || disableMagmtStruct || disableCustomer|| disableManufacturer || disableCondition || disableSiteName || disableSaveForEdit">{{isEditMode
                    ? 'Update' : 'Save'}} </button>
            </div>
        </form>
    </div>

    <div class="modal fade" id="textarea-popup" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Edit {{textAreaLabel}}</h4>
                </div>
                <div class="modal-body">
                    <p-editor [(ngModel)]="textAreaInfo"  (ngModelChange)="enableSaveMemo()"
                    [style]="{'height':'320px'}" name="textAreaInfo" required></p-editor>
                    <div class="editor-buttons">
                        <button type="button" class="btn btn-primary editor-buttons-margin"
                        data-dismiss="modal" (click)="onSaveTextAreaInfo()"[disabled]="disableSaveMemo" >Save</button>
                        <button type="button" class="btn btn-danger editor-buttons-margin"
                         data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade popup-blur" id="addDocumentDetailsNew" data-backdrop="static">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" (click)="closeMyModel('#addDocumentDetailsNew')">
                        &times;
                    </button>
                    <h4 class="modal-title">{{isEditButton ? 'Edit' : 'Add' }} Document Details</h4>
                </div>
                <form #addDocumentForm="ngForm" class="form-horizontal">
                    <div class="modal-body">
                        <div class="form-row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Name <span class="clr-red">*</span></label>
                                    <input class="form-control" type="text" name="name"
                                        [(ngModel)]="documentInformation.docName" (ngModelChange)="enableSaveDocument()"
                                        required />
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea class="form-control" name="description"
                                        [(ngModel)]="documentInformation.docDescription"
                                        (ngModelChange)="enableSaveDocument()">
                                </textarea>
                                </div>
                                <div class="form-group" class="memo-popup-cstm">
                                    <label>Memo</label>
                                    <span>
                                        <div [innerHTML]="documentInformation.docMemo" class="form-control"
                                            class="text_editor_box doc-memo-width"></div>
                                        <i class="fa fa-pencil doc-memo-pencil-align" data-toggle="modal" data-target="#memo-popup"
                                            matTooltip="Add Memo" (ngModelChange)="enableSaveDocument()"
                                            matTooltipPosition="above" (click)="onAddTextAreaInfo('memo')"
                                        ></i>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-12 m-t-10">
                                <div class="form-group">
                                    <label style="float: none;">Attachments <span class="clr-red">*</span></label>
                                    <p-fileUpload #fileUploadInput name="fileupload[]" multiple="multiple"
                                        [showCancelButton]="false" [showUploadButton]="false" customUpload="true"
                                        (onRemove)="fileUploadCertifiedDeSelect($event)"
                                        (onSelect)="fileUploadCertified($event);enableSaveDocument();" required>
                                    </p-fileUpload>
                                </div>
                            </div>
                            <div class="table-responsive table-overflow" *ngIf="isEditButton">
                                <h6 class="panel-title" style="padding-left: 10px;">
                                    Attachment Details:
                                </h6>
                                <div class="tableFixHead">

                                <table class="table-responsive ptable-cus-pma">
                                    <tr>
                                        <th>File Name</th>
                                        <th>Memo</th>
                                        <th>Download</th>
                                    </tr>
                                    <tr>
                                        <td>{{sourceViewforDocument.fileName}}</td>
                                        <td>
                                            <p class="p-0 m-0 p_textEditor" [innerHTML]="sourceViewforDocument.docMemo">
                                            </p>
                                        </td>
                                        <td>
                                            <a *ngIf="sourceViewforDocument.attachmentDetailId > 0"
                                                (click)="downloadFileUpload(sourceViewforDocument)"
                                                matTooltip="Download" matTooltipPosition="above"
                                                class="btn nobg btn-cstm">
                                                <span><i class="fa fa-download"></i></span>
                                            </a>
                                            <a *ngIf="sourceViewforDocument.attachmentDetailId==0"
                                                [href]="sourceViewforDocument.link"
                                                download="{{sourceViewforDocument.fileName}}" matTooltip="Download"
                                                matTooltipPosition="above" class="filelink">
                                                <span><i class="fa fa-download"></i></span>
                                            </a>
                                        </td>
                                    </tr>
                                </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" *ngIf="!isEditButton" class="btn btn-primary pull-right submit-btn"                        
                            (click)="addDocumentInformation('#addDocumentDetailsNew',documentInformation)"
                            [disabled]="!addDocumentForm.valid ||disableFileAttachmentSubmit==false || selectedFileAttachment.length == 0">
                            Add
                        </button>
                        <button type="button" *ngIf="isEditButton" class="btn btn-primary pull-right submit-btn"                          
                            (click)="addDocumentInformation('#addDocumentDetailsNew',documentInformation)"
                            [disabled]="!addDocumentForm.valid || disableSaveForEditDocument">
                            Update
                        </button>
                        <button type="button" class="btn btn-danger"
                            (click)="dismissDocumentPopupModel('#addDocumentDetailsNew'); closeMyModel('#addDocumentDetailsNew')">
                            Close
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal" id="memo-popup" data-backdrop="static">

        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Edit Memo</h4>
                </div>
                <div class="modal-body">
                    <p-editor [(ngModel)]="documentInformation.docMemo"
                    [style]="{'height':'320px'}"  (ngModelChange)="enableSaveMemo()" name="textAreaInfo" required></p-editor>
                    <div class="editor-buttons">
                        <button type="button" class="btn btn-primary editor-buttons-margin"
                        data-dismiss="modal" (click)="onSaveTextAreaInfo()" [disabled]="disableSaveMemo">Save</button>
                        <button type="button" class="btn btn-danger editor-buttons-margin"
                         data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ng-template #deleteContent let-c="close" let-d="dismiss" data-backdrop="static">
        <div class="modal-header">
            <h4 class="modal-title">Are You Sure Want to Delete?</h4>
            <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="modal-body">
            <strong>
                Document Name:
                <span class="new-label">{{ selectedRowForDelete.docName }}</span>
            </strong>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="deleteItemAndCloseModel()">
                Yes
            </button>
            <button type="button" class="btn btn-danger" (click)="dismissModel()">
                No
            </button>
        </div>
    </ng-template>

    <ng-template #contentAuditHist let-c="close" let-d="dismiss" style="width:auto" data-backdrop="static">
        <div class="modal-header">
            <h4 class="modal-title">History of Documents</h4>
            <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Document Name</th>
                            <th>Description</th>
                            <th>Memo</th>
                            <th>File Name</th>
                            <th>Created Date</th>
                            <th>Created By</th>
                            <th>Updated Date</th>
                            <th>Updated By</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let audit of sourceViewforDocumentAudit"></tr>
                        <tr *ngFor="let audit of sourceViewforDocumentAudit; let i = index">
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(i, 'docName', audit.docName)
                                ? 'black'
                                : 'red'
                            }">
                                {{ audit.docName }}
                            </td>
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(
                                i,
                                'docDescription',
                                audit.docDescription
                                )
                                ? 'black'
                                : 'red'
                            }">
                                {{ audit.docDescription }}
                            </td>
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(i, 'docMemo', audit.docMemo)
                                ? 'black'
                                : 'red'
                            }">
                                <p class="p-0 m-0 p_textEditor" [innerHTML]="audit.docMemo">
                                </p>
                            </td>
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(i, 'fileName', audit.fileName)
                                ? 'black'
                                : 'red'
                            }">
                                {{ audit.fileName }}
                            </td>
                            <td>{{ audit.createdDate | date: 'dd-MM-yyyy h:mm a ' }}</td>
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(i, 'createdBy', audit.createdBy)
                                ? 'black'
                                : 'red'
                            }">
                                {{ audit.createdBy }}
                            </td>
                            <td>{{ audit.updatedDate | date: 'dd-MM-yyyy h:mm a ' }}</td>
                            <td [ngStyle]="{
                                color: getColorCodeForHistory(i, 'updatedBy', audit.updatedBy)
                                ? 'black'
                                : 'red'
                            }">
                                {{ audit.updatedBy }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" (click)="dismissModel()">
                Close
            </button>
        </div>
    </ng-template>

    <div class="preloader" *ngIf="isSpinnerVisible">
        <div class="loading">
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>
</div>