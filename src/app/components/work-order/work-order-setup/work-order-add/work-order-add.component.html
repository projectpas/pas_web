<div [@fadeInOut] class="page-content work_order_cont">
    <p-breadcrumb [model]="breadcrumbs" [home]="home" *ngIf="!isSubWorkOrder && !isView"></p-breadcrumb>
    <div class="right_col" role="main">
        <form #workOrderForm="ngForm">
            <div class="x_content mr_3">
                <div class="card new-card" *ngIf="!isSubWorkOrder">

                    <div class="card-header header " *ngIf="!isSubWorkOrder">
                        <div class="row">
                            <div class="col">
                                <h4 class="header-name">
                                  <span *ngIf="!isView">
                                    {{ isEdit ? 'Edit' : 'Create' }} Work Order
                                  </span>
                                  <span *ngIf="isView">
                                   View Work Order
                                  </span>
                                    <button class="btn-sm header-button header-button-alignment"
                                        (click)="toggleDisplayMode()">
                                        {{isDetailedView ? 'Collapse' : 'Expand'}}</button>
                                </h4>
                            </div>
                            <div  >
                                <button *ngIf="isView && isEdit" type="button" class="btn-sm header-button pull-right"
                                    [routerLink]="['/workordersmodule/workorderspages/app-work-order-list']">
                                    Work Order List </button>

                                    <button *ngIf="!isEdit" type="button" class="btn-sm header-button pull-right"
                                    [routerLink]="['/workordersmodule/workorderspages/app-work-order-list']">
                                    Work Order List </button>

                                    <button *ngIf="isEdit && !isView"  type="button" class="btn-sm header-button pull-right"
                                    [routerLink]="['/workordersmodule/workorderspages/app-work-order-list']">
                                    Work Order List </button>
                            </div>
                        </div>
                    </div>
                    <div class="clear"></div>
                    <div class="card card-border">
                        <div class="card-body new-card-body">
                            <!-- <div class="col-sm-12 link-block">
                                <h4 class="pull-right style_h4">
                                    <button *ngIf="isView" class="btn-sm header-button expand-left"
                                        (click)="toggleDisplayMode()">
                                        {{isDetailedView ? 'Collapse' : 'Expand'}}</button>
                                </h4>
                            </div> -->
                            <div class="less-details" [hidden]="isDetailedView">

                                <div class="col-sm-3">
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4" style="padding-top:5px !important">
                                            WO Num
                                        </label>
                                        <div class="col-sm-7" matTooltipPosition="above"
                                            matTooltip="This field should display 'creating' before the header info is saved WO ID should be autogenerated.  Allow siffices or prefeices depending on what config in the WO setup screen">
                                            <input *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.workOrderNumber !== '' "
                                                type="text" class="form-control"
                                                value={{workOrderGeneralInformation.workOrderNumber}} disabled>
                                            <input *ngIf="workOrderGeneralInformation &&  workOrderGeneralInformation.workOrderNumber === '' "
                                                type="text" class="form-control" value='' disabled>
                                        </div>
                                    </div> 
                                </div>

                                <div class="col-sm-3">
                                    <div class="form-group col-sm-12">
                                        <label class="control-label col-sm-4" style="padding-top:5px !important">Cust
                                            Name</label>
                                        <div class="col-sm-7" matTooltipPosition="above"
                                            matTooltip="This field should display 'creating' before the header info is saved WO ID should be autogenerated.  Allow siffices or prefeices depending on what config in the WO setup screen">
                                            <input *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.customerId !== null" type="text"
                                                class="form-control"
                                                value={{workOrderGeneralInformation.customerId.customerName}} disabled>
                                            <input *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.customerId === null" type="text"
                                                class="form-control" value='' disabled>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clear"></div>
                            <div class="more-details" [hidden]="!isDetailedView">
                                <div class="col-md-12 row">
                                    <div class="col-md-3">
                                        <label class="wauto" matTooltipPosition="above"
                                            [ngClass]="{pointerEvents : isEdit && !isRecCustomer}"
                                            matTooltip="Single MPN">
                                            <input type="radio" [value]=true name="type" #type="ngModel"
                                                (click)="SingleMpnValid()" class="radio_adjust"
                                                [(ngModel)]="workOrderGeneralInformation.isSinglePN">
                                            Single MPN
                                        </label>
                                        <label class="wauto" matTooltipPosition="above"
                                            [ngClass]="{pointerEvents : isEdit && !isRecCustomer}"
                                            matTooltip="Multiple MPN">
                                            <input type="radio" [value]=false name="type" #type="ngModel"
                                                class="radio_adjust" (click)="SingleMpnValid()"
                                                [(ngModel)]="workOrderGeneralInformation.isSinglePN">
                                            Multiple MPN
                                        </label>
                                    </div>
                                    <div class="col-md-6">
                                        <div *ngFor="let workOrderType of workOrderTypes" class="align-row">
                                            <label matTooltipPosition="above" matTooltip="Work Order Type" class="wauto"
                                                [ngClass]="{pointerEvents : workOrderGeneralInformation.isRecCustomer || isEdit}">
                                                <input type="radio" class="radio_adjust" name="work-type"
                                                    [value]="workOrderType.id"
                                                    (click)="woDealerChange($event.target.value)"
                                                    [disabled]="workOrderType.description !='Customer'"
                                                    [checked]="workOrderGeneralInformation.workOrderTypeId == workOrderType.id"
                                                    (change)="selectedCustomerType()">
                                                {{workOrderType.description}}
                                            </label>
                                        </div>

                                    </div>
                                </div>
                                <div class="clear"></div>
                                <hr>
                                <div class="form-row">
                                    <div class="col-md-6 main_ar">
                                        <div class="form-row">
                                            <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label for="workflownum">
                                                        WO Num
                                                    </label>
                                                    <input class="form-control" matTooltipPosition="above" type="text"
                                                        name="workOrderNumber" #workOrderNumber="ngModel" disabled
                                                        [(ngModel)]="workOrderGeneralInformation.workOrderNumber"
                                                        matTooltip="This field should display 'creating' before the header info is saved WO ID should be autogenerated.  Allow siffices or prefeices depending on what config in the WO setup screen" />
                                                </div>
                                                <div class="form-group">
                                                    <label for="opendate">
                                                        Open Date <span class="clr-red">*</span>
                                                    </label>
                                                    <p-calendar [showIcon]="true" class="calender-cstm "
                                                        [yearNavigator]="true" [monthNavigator]="true"
                                                        yearRange="1900:2100" name="openDate" #openDate="ngModel"
                                                        required (ngModelChange)="getmemo($event)"
                                                        [(ngModel)]="workOrderGeneralInformation.openDate"
                                                        [disabled]="true" appendTo="body">
                                                    </p-calendar>
                                                </div>
                                                <div class="form-group">
                                                    <label for="credit" class="width-100">
                                                        WO Status
                                                        <span class="clr-red">*</span>
                                                    </label>
                                                    <input class="form-control" matTooltipPosition="above" required
                                                        type="text" name="WoSatus" #contactName="ngModel" disabled
                                                        [ngModel]="workOrderNumberStatus" />
                                                </div>
                                                <div class="form-group memo-popup-cstm">
                                                    <label>
                                                        Notes <i class="fa fa-pencil" *ngIf="!isView"
                                                            data-toggle="modal" data-target="#add-description"
                                                            matTooltipPosition="above" matTooltip="Notes"
                                                            (click)="onAddDescription(1)"></i>
                                                    </label>
                                                    <span>
                                                        <div class="form-group memo-popup-cstm mat_emo">
                                                            <div [innerHTML]="workOrderGeneralInformation.notes"
                                                                [matTooltip]="parsedText(workOrderGeneralInformation.notes)"
                                                                matTooltipPosition="above"
                                                                class="form-control text_editor_box memo_cehck1">
                                                            </div>
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="customername">
                                                        Customer Name
                                                        <span class="clr-red">*</span>
                                                        <span *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.customerId !== null ">
                                                            <a matTooltipPosition="above"
                                                                matTooltip="Customer Email: {{workOrderGeneralInformation.customerId.customerEmail}}, Customer Phone: {{workOrderGeneralInformation.customerPhoneNo}}"
                                                                (click)="viewCustomerDetails(workOrderGeneralInformation.customerId.customerId)">
                                                                <i class="fa fa-eye view_icon_adjust"></i>
                                                            </a>
                                                        </span>
                                                    </label>
                                                    <p-autoComplete field="customerName"
                                                        [(ngModel)]="workOrderGeneralInformation.customerId"
                                                        name="customerName" errorMessage="Records not found"
                                                        [forceSelection]="true"
                                                        (onSelect)="selectCustomer($event, workOrderGeneralInformation ,'formHtml')"
                                                        [suggestions]="customerNamesList"
                                                        (completeMethod)="filterCustomerName($event)"
                                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'customerId' )"
                                                        [size]="30" [minLength]="1" #customerName="ngModel" required
                                                        [dropdown]="true" class="p-autoComplete-ctsm"
                                                        [disabled]="workOrderGeneralInformation.isRecCustomer || isView || isEdit">
                                                    </p-autoComplete>

                                                    <div *ngIf="customerName.invalid && (customerName.dirty || customerName.touched)"
                                                        class="alert alert-danger alert-danger-cstm">
                                                        <div *ngIf="customerName.errors.required">
                                                            <small> Customer Name is required </small>
                                                        </div>
                                                    </div>
                                                    <div class="clear"></div>
                                                </div>
                                                <div class="form-group">
                                                    <label>Contact Name<span class="text-danger">*</span></label>
                                                    <input type="text" *ngIf="isView" class="form-control"
                                                        name="customercontact"
                                                        [(ngModel)]="workOrderGeneralInformation.customerContact"
                                                        disabled>
                                                    <p-autoComplete *ngIf="!isView"
                                                        (onSelect)="onSelectCustomerContact(myCustomerContact)"
                                                        field="customerContact" class="pautocomp-cstm"
                                                        [(ngModel)]="myCustomerContact" name="customerContactId"
                                                        [suggestions]="customerContactInfo"
                                                        (completeMethod)="filterCustContacts($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true"
                                                        (ngModelChange)="getmemo($event)"
                                                        errorMessage="Records not found" [forceSelection]="true"
                                                        #cusContact="ngModel" required [disabled]="isView">
                                                    </p-autoComplete>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="workflownum">
                                                        Contact Phone
                                                    </label>
                                                    <input class="form-control" matTooltipPosition="above" type="text"
                                                        name="customerPhoneNo" #contactPhone="ngModel" disabled
                                                        [(ngModel)]="workOrderGeneralInformation.customerPhoneNo" />
                                                </div>
                                                <div class="form-group ">
                                                    <label for="workflownum">
                                                        Warning
                                                    </label>
                                                    <input class="form-control" matTooltipPosition="above" type="text"
                                                        name="warningMessag" #adminUsername="ngModel" disabled
                                                        [(ngModel)]="currentWarningMessage" />
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="credit">
                                                Credit Limit &amp; Term
                                                <span class="clr-red">*</span>
                                            </label>
                                            <div class="col-md-12 set_padNone">
                                                <div class="col-md-6">
                                                    <input type="text" class="form-control wo-input text_right"
                                                        name="creditLimit" #creditLimit="ngModel"
                                                        [(ngModel)]="workOrderGeneralInformation.creditLimit" required
                                                        [readonly]="true">
                                                </div>

                                                <div class="col-md-6">
                                                    <input type="text" class="form-control wo-input" name="creditTerm"
                                                        #creditTerms="ngModel"
                                                        [(ngModel)]="workOrderGeneralInformation.creditTerms" required
                                                        [readonly]="true">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group p-t-10" style="clear: both;">

                                            <label for="employee">
                                                Salesperson / Agent
                                            </label>

                                            <p-autoComplete field="name"
                                                [(ngModel)]="workOrderGeneralInformation.salesPerson" name="salesPerson"
                                                #salesPerson="ngModel" errorMessage="Records not found"
                                                [forceSelection]="true" [dropdown]="true"
                                                [suggestions]="salesPersonList" (ngModelChange)="getmemo($event)"
                                                (completeMethod)="filterSalesPerson($event)"
                                                (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'salesPersonId' )"
                                                [size]="30" [minLength]="1" [dropdown]="true"
                                                class="p-autoComplete-ctsm" [disabled]="true">
                                            </p-autoComplete>
                                        </div>
                                        <div class="form-group ">
                                            <label for="customercontact">
                                                CSR
                                            </label>
                                            <p-autoComplete field="name" [(ngModel)]="workOrderGeneralInformation.csr"
                                                name="csr" #csr="ngModel" errorMessage="Records not found"
                                                (ngModelChange)="getmemo($event)" [forceSelection]="true"
                                                [dropdown]="true" [suggestions]="csrList"
                                                (completeMethod)="filterCsr($event)"
                                                (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'csr' )"
                                                [size]="30" [minLength]="1" class="p-autoComplete-ctsm"
                                                [disabled]="true">
                                            </p-autoComplete>
                                        </div>

                                        <div class="form-group ">
                                            <label for="employee">
                                                Employee
                                            </label>
                                            <input type="text" class="form-control wo-input" name="woEmployee"
                                                #woEmployee="ngModel"
                                                [(ngModel)]="workOrderGeneralInformation.woEmployee" required
                                                [readonly]="true">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group memo-popup-cstm">
                                            <label>
                                                Memo <i *ngIf="!isView" class="fa fa-pencil" data-toggle="modal"
                                                    data-target="#add-description" matTooltipPosition="above"
                                                    matTooltip="Memo" (click)="onAddDescription(2)"></i>
                                            </label>
                                            <span>
                                                <div class="form-group memo-popup-cstm mat_emo ">
                                                    <div [innerHTML]="workOrderGeneralInformation.memo"
                                                        matTooltipPosition="above"
                                                        [matTooltip]="parsedText(workOrderGeneralInformation.memo)"
                                                        class="form-control text_editor_box memo_cehck1 adjust_he word-wrap-class">
                                                    </div>
                                                </div>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer_adjust" *ngIf="isEdit && !isRecCustomer && !isView">
                                    <button class="btn btn-primary pull-right" type="button"
                                        [disabled]="!workOrderForm.valid || disableSaveForEdit"
                                        (click)="saveWorkOrder()">
                                        Update
                                    </button>
                                    <button class="btn btn-primary pull-right"
                                        *ngIf="(!showTabsGrid && !isEdit) || isRecCustomer" type="button"
                                        [disabled]="!workOrderForm.valid" (click)="saveWorkOrder()">
                                        Save
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

               
                <div>
                    
                </div>
            
                <!-- <span data-toggle="modal" data-target="#workflowView"
                [ngClass]="{pointerEvents : workOrderPartNumber.workflowId==0 || workOrderPartNumber.workflowId==null}">
                <a class="btn nobg btn-view-cstm"
                    (click)="viewWorkflow(workOrderPartNumber)"
                    matTooltip="View Workflow" matTooltipPosition="above">
                    <i class="fa fa-eye"></i>
                </a>
            </span> -->
            <button  data-toggle="modal" (click)="summaryShow()" data-target="#summarizedView" *ngIf="workOrderGeneralInformation && !workOrderGeneralInformation.isSinglePN && workOrderId"
            class="btn btn-primary pull-right addMPN_details" >
            Summary OverView
        </button>
                <div *ngIf="!hideWOHeader && !isView">
                    <button *ngIf="!workOrderGeneralInformation.isSinglePN && !workOrderQuoteId"
                        class="btn btn-primary pull-right addMPN_details" (click)="addMPN()">
                        Add MPN
                    </button>
                </div>

                <div>
                </div>

                <div id="summarizedView" class="modal fade" role="dialog" data-backdrop="static">
                    <div class="modal-dialog modal-xlg">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                    (click)="closeModel()">&times;</button>
                                <h4 class="modal-title">Summary of WO OverView</h4>

                            </div>
                            <div  class="modal-body" *ngIf="isShowSummary && workOrderGeneralInformation && !workOrderGeneralInformation.isSinglePN && workOrderId">
                                <app-common-wo-summarization [workOrderId]="workOrderId" [savedWorkOrderData]="savedWorkOrderData"
                                    [mpnPartNumbersList]="mpnPartNumbersList" [employeesOriginalData]="employeesOriginalData"
                                    [taskList]="taskList" [workOrderWorkFlowOriginalData]="workOrderWorkFlowOriginalData"
                                    [customerContactList]="customerContactList" [defaultTab]="defaultTab"
                                    (resetSelectedTab)="resetSelectedTab()"></app-common-wo-summarization>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-dismiss="modal"
                                    (click)="closeModel()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class=" wid_cal card" *ngIf="!hideWOHeader">
                    <div *ngIf="!isSubWorkOrder">
                        <div class="table-responsive add-wo-grid pas-table-cstm poro-table-cstm parts-list-table-align">
                            <div class="tableFixHead">
                                <table class="table table-bordered lastcol-fix mpn-list-table header-table-width"
                                    id="mpn-list-table">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">MPN <span class="clr-red">*</span></th>
                                            <th rowspan="2">MPN Description <span class="clr-red">*</span></th>
                                            <th rowspan="2">Revised MPN</th>
                                            <th rowspan="2" style="min-width:90px !important">Serial Num </th>
                                            <th rowspan="2" style="min-width:60px !important">Qty</th>
                                            <th rowspan="2" style="min-width:80px !important">Rec'd Date </th>
                                            <th rowspan="2" style="min-width:80px !important">Cust Req Date <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style="min-width:80px !important"> Promised Date <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style="min-width:80px !important">Est. Comp Date <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style="min-width:80px !important">Est. Ship Date <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2">Stage <span class="clr-red">*</span></th>
                                            <th rowspan="2" style="min-width:90px !important">Status <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2">Tech Name <span class="clr-red">*</span></th>
                                            <th rowspan="2" style="min-width: 100px !important;">Station ID</th>
                                            <th rowspan="2" style=" min-width: 100px !important;">Work Scope <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style=" min-width: 100px !important;">Priority <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style=" min-width: 100px !important;">Cond <span
                                                    class="clr-red">*</span></th>
                                            <th rowspan="2" style=" min-width: 100px !important;">CMM/Pub Ref</th>
                                            <th rowspan="2" style=" min-width: 100px !important;">Workflow ID </th>
                                            <th rowspan="2" style="width:130px !important">Item Group</th>
                                            <th rowspan="2">Cust Ref</th>
                                            <th rowspan="2" style="min-width:60px !important"
                                                *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.workOrderTypeId==1">Contract</th>
                                            <th rowspan="2" *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.workOrderTypeId==1"
                                                style="min-width: 80px !important;">Contract No</th>
                                            <th rowspan="2" style="min-width:86px !important">Stk Line </th>

                                            <th rowspan="2" style="min-width:60px !important">NTE</th>
                                            <th rowspan="2" style="min-width:32px !important">Restrict PMA</th>
                                            <th rowspan="2" style="min-width:32px !important">Restrict DER</th>
                                            <th rowspan="2" style="min-width:75px !important">TAT Current</th>
                                            <th rowspan="2" style="z-index:1;min-width:80px !important">TAT Standard
                                            </th>
                                            <!-- <th colspan="2">Restriction</th> -->
                                            <!-- 
                                  
                                     <th colspan="2">TAT (Days)</th> -->
                                            <th rowspan="2" colspan="4">Management Structure </th>
                                            <th rowspan="2" class="table-column-icon-width" *ngIf="!isView">Actions</th>
                                        </tr>
                                        <!-- <tr>
                                    <th rowspan="2" style="min-width:60px !important">PMA</th>
                                    <th rowspan="2" style="min-width:60px !important">DER</th>
                                    <th rowspan="2" style="min-width:60px !important">Current</th>    
                                    <th rowspan="2" style="z-index:1;min-width:60px !important">Standard</th>
                                </tr> -->
                                    </thead>
                                    <tbody>
                                        <tr class="mpn-row" style="display: table-row;"
                                            *ngFor="let workOrderPartNumber of workOrderGeneralInformation.partNumbers; let i=index;">
                                            <td>
                                                <!-- getWorkFlowByPNandScope(workOrderPartNumber); -->
                                                <p-autoComplete field="partNumber"
                                                    [(ngModel)]="workOrderPartNumber.masterPartId" name="mpn{{i}}"
                                                    #mpn="ngModel" errorMessage="Records not found"
                                                    [forceSelection]="true" [dropdown]="true"
                                                    [suggestions]="partNumberList" (ngModelChange)="getValid()"
                                                    (onSelect)="onSelectedPartNumber($event, workOrderPartNumber, i,'html');  getStockLineByItemMasterIdOnChangePN(workOrderPartNumber,i);"
                                                    (completeMethod)="filterPartNumber($event)" emptyMessage=" "
                                                    (onClear)="clearautoCompleteInput(workOrderPartNumber, 'masterPartId' )"
                                                    [size]="30" [minLength]="1"
                                                    class="p-autoComplete-ctsm custome_automo p-autocomplete-mh120"
                                                    required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved' || (isEdit && workOrderPartNumber.itemMasterId)"
                                                    appendTo="body">
                                                </p-autoComplete>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control  w200" name="description{{i}}"
                                                    #description="ngModel" [(ngModel)]="workOrderPartNumber.description"
                                                    required disabled>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control w100 width-100"
                                                    name="revisedPartNo{{i}}" #description="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.revisedPartNo" disabled>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control w100 width-100"
                                                    name="serialNumber{{i}}" #serialNumber="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.serialNumber" disabled>
                                            </td>
                                            <td>
                                                <input type="number" class="form-control w100 text_right width-100"
                                                    name="quantity{{i}}" [(ngModel)]="workOrderPartNumber.quantity"
                                                    disabled>
                                            </td>
                                            <td>
                                                <p-calendar [showIcon]="true" name="receivedDate{{i}}"
                                                    class="calender-cstm woAdd" [yearNavigator]="true"
                                                    [monthNavigator]="true" yearRange="1900:2100"
                                                    (ngModelChange)="getValid()" #receivedDate="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.receivedDate" disabled
                                                    appendTo="body">
                                                </p-calendar>
                                            </td>
                                            <td>
                                                <p-calendar [showIcon]="true" name="customerRequestDate{{i}}"
                                                    [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                                    class="calender-cstm woAdd" #customerRequestDate="ngModel"
                                                    (ngModelChange)="getValid()"
                                                    [(ngModel)]="workOrderPartNumber.customerRequestDate"
                                                    [minDate]="workOrderPartNumber.receivedDate" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body"></p-calendar>
                                            </td>
                                            <td>
                                                <p-calendar [showIcon]="true" name="promisedDate{{i}}"
                                                    class="calender-cstm woAdd" [yearNavigator]="true"
                                                    [monthNavigator]="true" yearRange="1900:2100"
                                                    (ngModelChange)="getValid()" #promisedDate="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.promisedDate"
                                                    [minDate]="workOrderPartNumber.receivedDate" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-calendar>
                                            </td>
                                            <td>
                                                <p-calendar [showIcon]="true" name="estimatedCompletionDate{{i}}"
                                                    class="calender-cstm woAdd" #estimatedCompletionDate="ngModel"
                                                    (onSelect)="doSomething(workOrderPartNumber.estimatedCompletionDate,workOrderPartNumber,i)"
                                                    [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                                    [minDate]="workOrderPartNumber.receivedDate"
                                                    (ngModelChange)="getValid()"
                                                    [(ngModel)]="workOrderPartNumber.estimatedCompletionDate" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-calendar>
                                            </td>
                                            <td>
                                                <p-calendar [showIcon]="true" class="calender-cstm woAdd"
                                                    name="estimatedShipDate{{i}}" (ngModelChange)="getValid()"
                                                    [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                                    [(ngModel)]="workOrderPartNumber.estimatedShipDate"
                                                    [minDate]="workOrderPartNumber.estimatedCompletionDate"
                                                    #estimatedShipDate="ngModel" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body"></p-calendar>
                                            </td>

                                            <td>
                                                <p-dropdown filter="true" [options]="workOrderStagesList"
                                                    name="stage{{i}}" #stage="ngModel" (ngModelChange)="getValid()"
                                                    placeholder="Select" class="p-dropdown-custom-md1 p-dropdown-mh120"
                                                    (onChange)="selectedStage($event.value,workOrderPartNumber,i)"
                                                    [autoWidth]="false" [style]="pDropdownStyle"
                                                    [(ngModel)]="workOrderPartNumber.workOrderStageId" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td style="max-width: 80px !important;">
                                                <p-dropdown filter="true" [options]="workOrderStatusList"
                                                    placeholder="Select" name="status{{i}}" #status="ngModel"
                                                    [autoWidth]="false" [style]="pDropdownStyle"
                                                    class="p-dropdown-custom-md1 custome_pd-totext p-dropdown-mh120 stdrop"
                                                    [(ngModel)]="workOrderPartNumber.workOrderStatusId" disabled
                                                    required appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <p-autoComplete field="name"
                                                    [(ngModel)]="workOrderPartNumber.partTechnicianId"
                                                    name="technician{{i}}" #technician="ngModel"
                                                    (ngModelChange)="getValid()" errorMessage="Records not found"
                                                    [forceSelection]="true" [dropdown]="true"
                                                    [suggestions]="technicianList" required
                                                    (onSelect)="onSelectedTechnician($event, workOrderPartNumber);"
                                                    (completeMethod)="filterTechnician($event)"
                                                    (onClear)="clearautoCompleteTechinician(workOrderPartNumber, 'partTechnicianId' )"
                                                    [size]="30" [minLength]="1"
                                                    class="p-autoComplete-ctsm custome_automo p-autocomplete-mh120"
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">

                                                </p-autoComplete>
                                            </td>
                                            <td>
                                                <p-dropdown filter="true" placeholder="Select" name="techStation{{i}}"
                                                    #techStatsion="ngModel" (ngModelChange)="getValid()"
                                                    [options]="techStationList"
                                                    class="p-dropdown-custom-md1 p-dropdown-mh120" [autoWidth]="false"
                                                    [style]="pDropdownStyle"
                                                    [(ngModel)]="workOrderPartNumber.techStationId"
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <p-dropdown filter="true" placeholder="Select" name="scope{{i}}"
                                                    #scope="ngModel" [options]="workScopesList"
                                                    class="p-dropdown-custom-md1 p-dropdown-mh120"
                                                    (ngModelChange)="getValid()" [autoWidth]="false"
                                                    [style]="pDropdownStyle"
                                                    [(ngModel)]="workOrderPartNumber.workOrderScopeId"
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    (onChange)="getWorkFlowByPNandScope($event.value,workOrderPartNumber,'html',i)"
                                                    required appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <p-dropdown filter="true" [options]="priorityList" placeholder="Select"
                                                    name="priority{{i}}" [autoWidth]="false" [style]="pDropdownStyle"
                                                    #priority="ngModel" class="p-dropdown-custom-md1 p-dropdown-mh120"
                                                    (ngModelChange)="getValid()"
                                                    [(ngModel)]="workOrderPartNumber.workOrderPriorityId" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <p-dropdown filter="true" placeholder="Select" [options]="conditionList"
                                                    (ngModelChange)="getValid()" [autoWidth]="false"
                                                    [style]="pDropdownStyle" name="condition{{i}}" #condition="ngModel"
                                                    (onChange)="selectedCondition($event.value,workOrderPartNumber,i)"
                                                    class="p-dropdown-custom-md1"
                                                    [(ngModel)]="workOrderPartNumber.conditionId" required
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <p-dropdown filter="true" class="min_selct_height" name="cmm{{i}}"
                                                    #cmm="ngModel" (ngModelChange)="getValid()" [autoWidth]="false"
                                                    [style]="pDropdownStyle" (onChange)="onSelectPublication($event,workOrderPartNumber,i)"
                                                    [options]="getDynamicVariableData('cmmPublicationList',i)"
                                                    class="p-dropdown-custom-md1 p-dropdown-mh120"
                                                    [(ngModel)]="workOrderPartNumber.cMMId"
                                                    [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td class="lign_flex">
                                                <span class="inline-block">
                                                    <p-dropdown filter="true"
                                                        [options]="getDynamicVariableData('dynamicWorkflowList',i)"
                                                        name="workFlow{{i}}" [autoWidth]="false"
                                                        [style]="pDropdownStyle" #workFlow="ngModel"
                                                        class="p-dropdown-custom-md1 p-dropdown-mh120"
                                                        (ngModelChange)="getValid()" (onChange)="onSelectWorkflow($event,workOrderPartNumber,i)"
                                                        [(ngModel)]="workOrderPartNumber.workflowId"
                                                        [disabled]="isView || quotestatusofCurrentPart =='Approved'"
                                                        appendTo="body">
                                                    </p-dropdown>
                                                </span>
                                                <span data-toggle="modal" data-target="#workflowView"
                                                    [ngClass]="{pointerEvents : workOrderPartNumber.workflowId==0 || workOrderPartNumber.workflowId==null}">
                                                    <a class="btn nobg btn-view-cstm"
                                                        (click)="viewWorkflow(workOrderPartNumber)"
                                                        matTooltip="View Workflow" matTooltipPosition="above">
                                                        <i class="fa fa-eye"></i>
                                                    </a>
                                                </span>
                                                <!-- [disabled]="workOrderPartNumber.isWorkflowTranfer" -->
                                                <span
                                                    [ngClass]="{pointerEvents : isView || workOrderPartNumber.workflowId==0 || workOrderPartNumber.workflowId==null}">
                                                    <input type="checkbox" name="tranferwflw{{i}}"
                                                        #tranferwflw="ngModel" (ngModelChange)="getValid()"
                                                        class="form-control w60  mr10"
                                                        [(ngModel)]="workOrderPartNumber.isWorkflowTranfer"
                                                        (change)="tranferCheckbox($event,workOrderPartNumber,i)"
                                                        matTooltip="Transfer Workflow To Work Order"
                                                        matTooltipPosition="above"
                                                        [disabled]="!isEdit || workOrderPartNumber.disabledForWorkflow">
                                                </span>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control w100" name="itemGroup{{i}}"
                                                    #description="ngModel" class="width-100"
                                                    [(ngModel)]="workOrderPartNumber.itemGroup" disabled>
                                            </td>


                                            <td>
                                                <p class="managemnt_Wdt" matTooltipPosition="above"
                                                    [matTooltip]="parsedText(workOrderPartNumber.level1)">
                                                    {{workOrderPartNumber.customerReference}}</p>
                                            </td>
                                            <td *ngIf="this.workOrderGeneralInformation.workOrderTypeId==1"
                                                class="text_center">
                                                <input type="checkbox" name="contract {{i}}" #contract="ngModel"
                                                    (ngModelChange)="getValid()" class="form-control w60 width-100"
                                                    [(ngModel)]="workOrderPartNumber.isMPNContract" disabled>
                                            </td>
                                            <td *ngIf="this.workOrderGeneralInformation.workOrderTypeId==1">
                                                <input type="text" name="contract1{{i}}"
                                                    class="form-control w100 width-100"
                                                    [(ngModel)]="workOrderPartNumber.contractNo"
                                                    (ngModelChange)="getValid()"
                                                    [required]="workOrderPartNumber.isMPNContract"
                                                    [disabled]="!workOrderPartNumber.isMPNContract">
                                            </td>
                                            <td>
                                                <input type="text" class="form-control w100 width-100"
                                                    name="stockLineNumber{{i}}" #serialNumber="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.stockLineNumber" disabled>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control w50 width-100"
                                                    [(ngModel)]="workOrderPartNumber.nte" name="nte{{i}}"
                                                    #nte="ngModel">
                                            </td>
                                            <td class="text_center">
                                                <input type="checkbox" class="form-control w60 pointer_event_none"
                                                    name="isPMA{{i}}" #isPMA="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.isPMA">
                                            </td>
                                            <td class="text_center">
                                                <input type="checkbox" class="form-control w60 pointer_event_none"
                                                    name="isDER{{i}}" #isDER="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.isDER">

                                            </td>
                                            <td>
                                                <input type="number" class="form-control width-70"
                                                    name="tatDaysCurrent{{i}}" #tatDaysCurrent="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.tatDaysCurrent" disabled>
                                            </td>
                                            <td>
                                                <input type="number" class="form-control width-70"
                                                    name="tatDaysStandard{{i}}" #tatDaysStandard="ngModel"
                                                    [(ngModel)]="workOrderPartNumber.tatDaysStandard" disabled>
                                            </td>
                                            <td>
                                                <p class="managemnt_Wdt" matTooltipPosition="above"
                                                    [matTooltip]="parsedText(workOrderPartNumber.level1)">
                                                    {{workOrderPartNumber.level1}}</p>
                                            </td>
                                            <td>
                                                <p class="managemnt_Wdt" matTooltipPosition="above"
                                                    [matTooltip]="parsedText(workOrderPartNumber.level2)">
                                                    {{workOrderPartNumber.level2}}</p>
                                            </td>
                                            <td>
                                                <p class="managemnt_Wdt" matTooltipPosition="above"
                                                    [matTooltip]="parsedText(workOrderPartNumber.level3)">
                                                    {{workOrderPartNumber.level3}}</p>
                                            </td>
                                            <td>
                                                <p class="managemnt_Wdt" matTooltipPosition="above"
                                                    [matTooltip]="parsedText(workOrderPartNumber.level4)">
                                                    {{workOrderPartNumber.level4}}</p>
                                            </td>
                                            <td *ngIf="!isView" class="table-column-icon-width width100">
                                                <span>
                                                    <!-- [disabled]="!isEdit || workOrderPartNumber.workOrderId==0 || workOrderPartNumber.workOrderId==null" -->
                                                    <button class="btn nobg btn-plusro-cstm"
                                                        (click)="createNewRoWorkOrder(workOrderPartNumber)" [disabled]="true"
                                                        matTooltip="Create RO" matTooltipPosition="above" ><i
                                                            class="fa fa-plus" style="color: #259e08;"></i></button> </span>
                                                <button matTooltip="Add to an  Existing RO" matTooltipPosition="above"
                                                    data-toggle="modal" data-target="#reserveRo"
                                                    (click)="addToExitRoWorkOrder(workOrderPartNumber)"
                                                    class="btn nobg btn-plusro-cstm" [disabled]="true" > 
                                                    <span><i class="fa fa-plus clr-red"></i></span></button>
                                                    <!-- [disabled]="!isEdit || workOrderPartNumber.workOrderId==0 || workOrderPartNumber.workOrderId==null" -->
                                                <span *ngIf="!workOrderGeneralInformation.isSinglePN "
                                                    class="delete-row-btn">
                                                    <button type="button" class="btn nobg btn-delete-cstm"
                                                        (click)="openDelete(content,i)"
                                                        [disabled]="quotestatusofCurrentPart =='Approved' || workOrderPartNumber==false"
                                                        matTooltip="Remove" matTooltipPosition="above">
                                                        <i class="fa fa-trash"></i>
                                                    </button> </span>
                                                <span *ngIf="workOrderGeneralInformation && workOrderGeneralInformation.isSinglePN ">

                                                    <button type="button" class="btn nobg btn-delete-cstm" disabled>
                                                        <i class="fa fa-trash"></i>
                                                    </button>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="footer_adjust" *ngIf="!hideWOHeader && !isView">
                            <button class="btn btn-primary pull-right"
                                *ngIf="(!showTabsGrid && !isEdit) || isRecCustomer" type="button"
                                [disabled]="!workOrderForm.valid || checkworkscope() || checkTechnician()"
                                (click)="saveWorkOrder()">
                                Save
                            </button>
                            <button class="btn btn-primary pull-right" *ngIf="isEdit && !isRecCustomer" type="button"
                                [disabled]=" disableSaveForPart || !workOrderForm.valid || checkTechnician()"
                                (click)="saveWorkOrder()">
                                Update
                            </button>
                            <button *ngIf="showTabsGrid && !isView" class="btn btn-primary pull-right"
                                (click)="createQuote()">
                                {{(workOrderQuoteId)?'Edit Quote':'Create Quote'}}
                            </button>

                            <button *ngIf="workOrderQuoteId" class="btn btn-primary pull-right"
                            (click)="gridTabChange('quote');">
                          View  Quote
                        </button>

                            <!-- <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'quote'}"
                            (click)="gridTabChange('quote');">Quote</a> -->
                        </div>
                        <div id="workflowView" class="modal fade" role="dialog" data-backdrop="static">
                            <div class="modal-dialog modal-xlg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                            (click)="closeModel()">&times;</button>
                                        <h4 class="modal-title">Workflow OverView</h4>

                                    </div>
                                    <div class="modal-body" *ngIf="currentWorkflowId !=undefined">
                                        <app-workflow-list [isWorkOrder]="isWorkOrder" [workFlowType]="subTabWorkFlow"
                                            [workFlowId]="currentWorkflowId"></app-workflow-list>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal"
                                            (click)="closeModel()">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <span data-toggle="modal" data-target="#workflowView">
                        <a class="btn nobg btn-view-cstm"
                            (click)="viewWorkflow(workOrderPartNumber)"
                            matTooltip="View Workflow" matTooltipPosition="above">
                            <i class="fa fa-eye"></i>
                        </a>
                    </span> -->
                        <div id="reserveRo" class="modal fade" role="dialog" data-backdrop="static">
                            <div class="modal-dialog modal-xlg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                            (click)="closeModel()">&times;</button>
                                        <h4 class="modal-title">Add to an Existing RO</h4>

                                    </div>
                                    <div class="modal-body" *ngIf="woPartId">
                                        <app-work-order-ro-list [mpnId]="woPartId" [isView]="isView"
                                            [isSubWorkOrder]="isSubWorkOrder" [subWOPartNoId]="subWOPartNoId">
                                        </app-work-order-ro-list>
                                    </div>
                                    <div class="modal-footer">
                                        <!-- <button class="btn btn-primary btn-primary" data-dismiss="modal" (click)="saveRIPart()"
                                            [disabled]="!savebutonDisabled "
                                            style="padding: 6px 12px !important;">Save </button> -->
                                        <button type="button" class="btn btn-danger" data-dismiss="modal"
                                            (click)="closeModel()">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="confirmationSave" class="modal fade" role="dialog" data-backdrop="static">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title"> Alert Message !</h4>
                                        <button type="button" class="close" aria-label="Close"
                                            (click)="dismissModelTask()">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <strong>
                                            Credit Limit Value Can't be Zero
                                        </strong>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger"
                                            (click)="dismissModelTask()">Close</button>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <ng-template #content let-c="close" let-d="dismiss" data-backdrop="static">
                    <div class="modal-header">
                        <h4 class="modal-title">Are You Sure Want to Delete?</h4>
                        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" (click)="deleteMPN()">Yes</button>
                        <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
                    </div>
                </ng-template>

            </div>
        </form>
        <div class="modal fade" id="add-description" role="dialog" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Edit {{type==1 ? 'Notes' : 'Memo'}}</h4>
                    </div>
                    <div class="modal-body">
                        <p-editor [(ngModel)]="tempMemo" (ngModelChange)="memoValidate()" [style]="{'height':'320px'}"
                            name="tempMemo" required>
                        </p-editor>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                            [disabled]="disableForMemo" (click)="onSaveDescription()">
                            Save
                        </button>
                        <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                            Close
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="card align_flx" *ngIf="showTabsGrid">
        <div *ngIf="showTabsMPNGrid">
            <div class="card-header mult_pn" *ngIf="!workOrderGeneralInformation.isSinglePN">
                Multiple MPN
            </div>
            <div class="card-body">
                <div class="col-md-12 cls_ad"  [hidden]="workOrderGeneralInformation.isSinglePN && !showTabsGrid">
                    <div class="col-md-2">
                        <label class="control-label col-sm-3 label_adjf">MPN
                        </label>
                        <div class="col-sm-7">
                            <p-dropdown [options]="mpnPartNumbersList" name="partNumber" #partNumber="ngModel"
                                placeholder="Select Part Number" (onChange)="changeofMPN($event.value)"
                                class="p-dropdown-custom-md" [(ngModel)]="selectedMPN">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-md-10 mpn-grid" *ngIf="mpnGridData">
                        <div class="col-md-3">
                            <label class="fs12">Description : </label>
                            <span>{{mpnGridData.description}}</span>
                        </div>
                        <div class="col-md-2">
                            <label class="fs12">Workscope : </label>
                            <span>{{mpnGridData.workscope}}</span>
                        </div>
                        <div class="col-md-2">
                            <label class="fs12">NTE : </label>
                            <span>{{mpnGridData.nte}}</span>
                        </div>

                        <div class="col-md-1">
                            <label class="fs12">Qty :</label>
                            <span class="text_right">{{mpnGridData.qty}}</span>
                        </div>
                        <div class="col-md-2">
                            <label class="fs12 stage-align">Stage : </label>
                            <span>{{mpnGridData.stage}}</span>
                        </div>
                        <div class="col-md-2">
                            <label class="fs12">Priority :</label>
                            <span>{{mpnGridData.priority}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body" *ngIf="showGridMenu" style="padding: 0px;">
            <div class="col-md-2" *ngIf="isSubWorkOrder==true">
                <label class="control-label col-sm-3 label_adjf">MPN
                </label>
                <div class="col-sm-7">
                    <p-dropdown [options]="mpnDropdownList" name="subWOPartNoId" #subWOPartNoId="ngModel"
                        placeholder="Select Part Number" (onChange)="changeofMPNForSubWo($event.value)"
                        class="p-dropdown-custom-md" [(ngModel)]="selectedMPNSubWo">
                    </p-dropdown>
                </div>
            </div>
            <div class="card col-md-12 div_bsck">
                <ul class="nav nav-pills nav-pills-cstm back_filsd wo_td  mrgn_bt4 adjust_marg" id="pills-tab"
                    role="tablist" *ngIf="!hideWOHeader">

                    <li class="nav-item" *ngIf="isSubWorkOrder">
                        <a id="pills-home-tab" role="tab" aria-controls="pills-home" aria-selected="true"
                            [ngClass]="{active : gridActiveTab === 'workOrderMain'}"
                            (click)="gridTabChange('workOrderMain');  ">WorkOrder Main</a>
                    </li>
                    <!-- <li class="nav-item dropdown" *ngIf="workFlowId !==0">
                         <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            aria-expanded="false"
                            [ngClass]="{active : gridActiveTab === 'workFlow' ||  subTabWorkFlow === 'editworkFlow' || subTabWorkFlow === 'createworkFlow' || subTabWorkFlow === 'viewworkFlow'  }">Workflow</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" (click)="subTabWorkFlowChange('viewworkFlow');">View WF</a>
                            <a class="dropdown-item" (click)="subTabWorkFlowChange('editworkFlow')" *ngIf="!isView">
                                Edit
                                Existing WF
                            </a>
                            <div class="dropdown-divider"></div>
                        </div>
                    </li> -->
                    <li class="nav-item">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'materialList'}"
                            (click)="gridTabChange('materialList'); ">
                            Material
                            List
                        </a>
                    </li>
                    <!-- <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'pickticket'}"
                            (click)="gridTabChange('pickticket')">Pick Ticket</a>
                    </li> -->
                    <li class="nav-item">
                        <a id="pills-home-tab" role="tab" aria-controls="pills-home" aria-selected="true"
                            [ngClass]="{active : gridActiveTab === 'labor'}"
                            (click)="gridTabChange('labor');  ">Labor</a>
                    </li>
                    <li class="nav-item">
                        <a id="pills-profile-tab" role="tab" aria-controls="pills-profile"
                            [ngClass]="{active : gridActiveTab === 'equipment'}"
                            (click)="gridTabChange('equipment');">Tools</a>
                    </li>
                    <li class="nav-item">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'tearDown'}"
                            (click)="gridTabChange('tearDown')">Tear Down Entry</a>
                    </li>
                    <li class="nav-item">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'communication'}"
                            (click)="gridTabChange('communication')">Communication</a>
                    </li>
                    <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'pickticket'}"
                            (click)="gridTabChange('pickticket')">Pick MPN</a>
                    </li>
                     <!-- <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'pickticket'}"
                            (click)="gridTabChange('pickticket')">Pick Ticket</a>
                    </li> -->

                    <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'subWO'}"
                            (click)="gridTabChange('subWO')">Sub-WO</a>
                    </li>
                    <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'shipping'}"
                            (click)="gridTabChange('shipping')">Shipping</a>
                    </li>
                    <!-- <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            [ngClass]="{active : gridActiveTab === 'main'}" (click)="gridTabChange('main')">
                            Main
                            Component
                        </a>
                        <div class="dropdown-menu">
                             <a class="dropdown-item" (click)="mainComponentTabSelected('createNewRO')">
                                 RO
                            </a>
                             <a class="dropdown-item" (click)="mainComponentTabSelected('interOrexternal')">
                                Convert Internal to
                                External
                            </a>
                            <a class="dropdown-item" (click)="mainComponentTabSelected('returnMCToCustomer')">
                                Return MC to Customer
                            </a>
                         </div>
                    </li> -->
                    <!-- <li class="nav-item">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'billorInvoice'}"
                            (click)="gridTabChange('main');mainComponentTabSelected('createNewRO')">RO</a>
                     </li> -->
                    <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'billorInvoice'}"
                            (click)="gridTabChange('billorInvoice');">Billing/Invoicing</a>
                    </li>
                    <!-- <li class="nav-item" *ngIf="!isSubWorkOrder">
                        <a id="pills-contact-tab" role="tab" [ngClass]="{active : gridActiveTab === 'quote'}"
                            (click)="gridTabChange('quote');">Quote</a>
                    </li> -->
                 
                
                 
                    <li class="nav-item">
                        <a class="nav-link" id="pills-contact-tab" role="tab"
                            [ngClass]="{active : gridActiveTab === 'documents'}"
                            (click)="gridTabChange('documents');">Documents</a>
                    </li>

                    <!-- <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            aria-expanded="false" [ngClass]="{active : gridActiveTab === 'workComplete'}"
                            (click)="gridTabChange('workComplete')">Work Complete</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">Move to Finished Goods</a>
                            <a class="dropdown-item">No Work Performed -Return to Customer</a>
               </div>
            </li> -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false" [ngClass]="{active : gridActiveTab === 'otherOptions'}">Other
                    Options</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item"
                        (click)="otherOptionTabSelected('freight');gridTabChange('otherOptions')">Freight</a>
                    <a class="dropdown-item"
                        (click)="otherOptionTabSelected('charges');gridTabChange('otherOptions')">Charges</a>
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                        aria-expanded="false" [ngClass]="{active : gridActiveTab === 'workComplete'}"
                        (click)="gridTabChange('workComplete')">Work Complete</a>
               
                    </div>
            </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" id="pills-contact-tab" role="tab"
                            [ngClass]="{active : gridActiveTab === 'woanalysis'}"
                            (click)="gridTabChange('woanalysis')">WO
                            Analysis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-contact-tab" role="tab"
                            [ngClass]="{active : gridActiveTab === 'laboranalysis'}"
                            (click)="gridTabChange('laboranalysis')">
                            Labor Analysis</a>
                    </li> -->
              
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            aria-expanded="false" [ngClass]="{active : gridActiveTab === 'otherOptions'}">Analysis
                            </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item"
                            (click)="gridTabChange('woanalysis')"> Margin Analysis</a>
                            <a class="dropdown-item"
                            (click)="gridTabChange('laboranalysis')">Labor Analysis</a>
                            <!-- <a class="dropdown-item"
                            (click)="gridTabChange('releasefrom')">8130 Form</a>
                            <a class="dropdown-item"
                            (click)="gridTabChange('woreleaseeasafrom')">9130A Form</a> -->
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                                aria-expanded="false"
                                (click)="gridTabChange('ActualVsQuote')">Actual vs. Quote Summary</a>
                       
                            </div>
                    </li>
                    <li class="nav-item" *ngIf="!isSubWorkOrder" >
                        <a class="nav-link" id="pills-contact-tab" role="tab"
                            [ngClass]="{active : gridActiveTab === 'releasefrom'}"
                            (click)="gridTabChange('releasefrom')" >Release Form</a>
                    </li>
                    <li class="nav-item dropdown" *ngIf="!isSubWorkOrder">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            aria-expanded="false" [ngClass]="{active : gridActiveTab === 'workorderprint'}">Work Order Print
                            </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item"
                            (click)="gridTabChange('workorderfrom')"> Work Order Form</a>
                            <a class="dropdown-item"
                            (click)="gridTabChange('workorderpartfrom')">Work Order Part Form</a>
                            </div>
                    </li>
                </ul>
                <div *ngIf="isWorkOrderMainView && mainWorkOrderId !=0"
                    [ngClass]="{hidedata :  gridActiveTab !== 'workOrderMain' }">
                    <app-work-view-component [workOrderId]="mainWorkOrderId"></app-work-view-component>
                </div>
                <div [ngClass]="{hidedata :  subTabWorkFlow !== 'createworkFlow' }">
                </div>
                <!-- <div *ngIf="workFlowId && subTabWorkFlow == 'editworkFlow'"
                [ngClass]="{hidedata: subTabWorkFlow !== 'editworkFlow' }">
                <wf-create [isWorkOrder]="isWorkOrder" [workOrderPartNumberId]="workOrderPartNumberId"
                    [workFlowWorkOrderId]="workFlowWorkOrderId" [savedWorkOrderData]="savedWorkOrderData" [workFlowId]="workFlowId"
                    (savedWorkFlowWorkOrderData)="savedWorkFlowData($event)"> </wf-create>
            </div>
            <div *ngIf="workFlowId && subTabWorkFlow == 'viewworkFlow'" class="wf-label-cstm"
                [ngClass]="{hidedata :  subTabWorkFlow !== 'viewworkFlow' }">
                <app-workflow-list [isWorkOrder]="isWorkOrder" [workFlowType]="subTabWorkFlow"
                    [workFlowId]="workFlowId"></app-workflow-list>
            </div> -->
                <div *ngIf="workOrderId && (gridActiveTab == 'materialList') "
                    [ngClass]="{hidedata : gridActiveTab !== 'materialList' }"> 
                    <app-work-order-complete-material-list (saveMaterialsData)="saveMaterials($event)" [workOrderNumberStatus]="workOrderNumberStatus" (updateMaterialsData)="updateMaterials($event)" (isSubWorkorder)="isSubWorkorderCheck($event)"
                        [materialStatus]="materialStatus" [isWorkOrder]="isWorkOrder" [workFlowObject]="workFlowObject"
                        [savedWorkOrderData]="savedWorkOrderData" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [subWorkOrderDetails]="subWorkOrderDetails"
                        [mpnId]="workOrderPartNumberId" [employeesOriginalData]="employeesOriginalData"
                        [workOrderMaterialList]="workOrderMaterialList" (saveRIParts)="saveReservedPartorIssue($event)"
                        (saveMaterialListForWO)="saveWorkOrderMaterialList($event)" [workOrderId]="workOrderId"
                        (updateMaterialListForWO)="updateWorkOrderMaterialList($event)" [taskList]="taskList"
                        [customerId]="isSubWorkOrder? subWorkOrderDetails.customerId :workOrderGeneralInformation.customerId.customerId"
                        (refreshData)="getMaterialListHandle()" [mpnPartNumbersList]="mpnPartNumbersList"
                        [isView]="isView || isViewForApprovedPart"></app-work-order-complete-material-list>
                </div>
                <div *ngIf="labor && (gridActiveTab == 'labor') " [ngClass]="{hidedata : gridActiveTab !== 'labor'}"
                    id="check">
                    <app-work-order-labor [markupList]="markupList" [labortaskList]="taskList" [laborForm]="labor"
                        [employeesOriginalData]="employeesOriginalData" [workOrderLaborList]="workOrderLaborList"
                        [workOrderWorkFlowOriginalData]="workOrderWorkFlowOriginalData"
                        [isSubWorkOrder]="isSubWorkOrder" [subWOPartNoId]="subWOPartNoId" [islaborCreated]="islaborCreated"
                        [subWorkOrderDetails]="subWorkOrderDetails" [selectedPartNumber]="selectedPartNumber"
                        [savedWorkOrderData]="savedWorkOrderData" (saveworkOrderLabor)="saveworkOrderLabor($event)"
                        (refreshLabor)="refreshLabor($event)" [workFlowId]="workFlowId"
                        [isView]="isView || isViewForApprovedPart">
                    </app-work-order-labor> 
                </div>
                <div *ngIf="(gridActiveTab == 'equipment')" [ngClass]="{hidedata : gridActiveTab !== 'equipment'}">
                    <app-work-order-assets (saveEquipmentListForWO)="saveWorkOrderEquipmentList($event)"
                        [workOrderPartNumberId]="workOrderPartNumberId"
                        (updateEquipmentListForWO)="updateWorkOrderEquipmentList($event)"
                        [woNumber]="isSubWorkOrder? subWorkOrderDetails.workOrderNum : workOrderGeneralInformation.workOrderNum"
                        [customerName]="isSubWorkOrder?subWorkOrderDetails.customerName:  workOrderGeneralInformation.customerDetails.customerName"
                        [woOperDate]="workOrderGeneralInformation.openDate"
                        (refreshData)="getEquipmentByWorkOrderId($event)"
                        [employeesOriginalData]="employeesOriginalData" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [subWorkOrderDetails]="subWorkOrderDetails"
                        [isWorkOrder]="isWorkOrder" [workFlowObject]="workFlowObject" [workOrderId]="workOrderId"
                        [workOrderAssetList]="workOrderAssetList" [workFlowWorkOrderId]="workFlowWorkOrderId"
                        [savedWorkOrderData]="savedWorkOrderData" [isView]="isView">
                    </app-work-order-assets>
                </div>
                <div *ngIf="workOrderId && workOrderPartNumberId && (subTabMainComponent === 'existingRO')"
                    [ngClass]="{hidedataMain :  subTabMainComponent !== 'existingRO'} ">
                    <app-work-order-ro-list [mpnId]="workOrderPartNumberId" [isView]="isView || isViewForApprovedPart">
                    </app-work-order-ro-list>
                </div>
                <div *ngIf="workOrderId && workOrderPartNumberId && (subTabMainComponent === 'createNewRO') "
                    [ngClass]="{hidedataMain :  subTabMainComponent !== 'createNewRO'} ">
                    <app-work-order-ro-create [mpnId]="workOrderPartNumberId" [isView]="isView || isViewForApprovedPart"
                        [isSubWorkOrder]="isSubWorkOrder" [subWOPartNoId]="subWOPartNoId"> </app-work-order-ro-create>
                </div>
                <div *ngIf="workOrderId && workOrderPartNumberId && (subTabMainComponent === 'returnMCToCustomer') "
                    [ngClass]="{hidedataMain :  subTabMainComponent !== 'returnMCToCustomer'} ">
                    <app-wo-return-to-customer [workOrderPartNoId]="workOrderPartNumberId" [workOrderId]="workOrderId">
                    </app-wo-return-to-customer>
                </div>
                <div *ngIf="billing && quoteMaterialList && (gridActiveTab == 'billorInvoice') && !isSubWorkOrder"
                    [ngClass]="{hidedata : gridActiveTab !== 'billorInvoice'}">
                    <app-work-order-billing [billingorInvoiceForm]="billing" [savedWorkOrderData]="savedWorkOrderData"
                        [employeesOriginalData]="employeesOriginalData" [isEditBilling]="isEditBilling"
                        [isbillingNotCreated]="isbillingNotCreated" (saveWOBilling)="saveWorkOrderBilling($event)"
                        (updateWOBilling)="saveWorkOrderBilling($event)" [workOrderQuoteId]="workOrderQuoteId"
                        [quoteExclusionList]="quoteExclusionList" [workFlowWorkOrderId]="workFlowWorkOrderId"
                        [quoteMaterialList]="quoteMaterialList" [quoteFreightsList]="quoteFreightsList"
                        [quotestatusofCurrentPart]="quotestatusofCurrentPart" [workFlowId]="workFlowId"
                        [labordata]="labor" [workOrderLaborList]="workOrderLaborList"
                        [quoteChargesList]="quoteChargesList" [workOrderChargesList]="workOrderChargesList"
                        [quoteLaborList]="quoteLaborList" [taskList]="taskList"
                        [buildMethodDetails]="buildMethodDetails" [isViewMode]="isView || isViewForApprovedPart">
                    </app-work-order-billing>
                </div>
                <div *ngIf="(gridActiveTab == 'quote') && !isSubWorkOrder">
                    <div *ngIf="workOrderQuoteId == undefined" class="no-quote">
                        Quote not yet created
                    </div>
                    <div class="form-row pull-right btn-back-wo" *ngIf="workOrderQuoteId == undefined">
                        <button class="btn btn-primary" (click)="enableBackToWO('wo')">
                            Back To Work Order
                        </button>
                    </div>
                    <div *ngIf="workOrderQuoteId != undefined ">
                        <app-work-order-quote [workorderid]="workOrderId" isView="true"
                            (enableBackToWO)="enableBackToWO($event)" [customerId]="customerId" enableEditBtn="true"
                            isWoTab="true" [isListView]="isListView">
                        </app-work-order-quote>
                    </div>
                </div>
                <div *ngIf="(gridActiveTab == 'pickticket') && !isSubWorkOrder">
                    <app-work-order-part-pickticket [referenceId]="workOrderId"
                        [workFlowWorkOrderId]="workFlowWorkOrderId" [isView]="isView">
                    </app-work-order-part-pickticket>
                </div>
                <div *ngIf="(gridActiveTab == 'shipping') && !isSubWorkOrder">
                    <app-shipping [workOrderGeneralInformation]="workOrderGeneralInformation"
                        [managementStructureId]="managementStructureId"
                        [workOrderPartNumberId]="selectedPartNumber.workOrderPartNumberId"
                        [isView]="isView || isViewForApprovedPart"></app-shipping>
                </div>
                <div *ngIf="workOrderId && (gridActiveTab === 'subWO') "
                    [ngClass]="{hidedata : gridActiveTab !== 'subWO'}">
                    <app-sub-work-orderlist [workOrderId]="workOrderId" [mpnId]="workOrderPartNumberId" [workOrderNumberStatus]="workOrderNumberStatus"    
                        [isView]="isView || isViewForApprovedPart" [forSubWorkOrder]="false">
                    </app-sub-work-orderlist>
                </div>
                <div *ngIf="(gridActiveTab == 'communication')"
                    [ngClass]="{hidedata : gridActiveTab !== 'communication'}">
                    <app-communication [isViewMode]="isView"
                        [idForContact]="isSubWorkOrder? subWorkOrderDetails.customerId :workOrderGeneralInformation.customerId.customerId"
                        [type]="1" [moduleName]="moduleNamee"
                        [referenceId]="isSubWorkOrder ==true ?subWOPartNoId :workFlowWorkOrderId"></app-communication>
                </div>
                <div *ngIf="documents && (gridActiveTab == 'documents')"
                    [ngClass]="{hidedata: gridActiveTab !== 'documents'}">
                    <div> 
                        <app-common-documents [moduleName]="moduleNamee"
                            [referenceId]="isSubWorkOrder ==true ?subWOPartNoId :workFlowWorkOrderId"
                            [isViewMode]="isView" [offLineUpload]="false"></app-common-documents>
                    </div>
                </div>
                <div *ngIf="(gridActiveTab == 'woanalysis')" [ngClass]="{hidedata: gridActiveTab !== 'woanalysis'}">
                    <app-work-order-analysis [savedWorkOrderData]="savedWorkOrderData"
                        [selectedPartNumber]="selectedPartNumber" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [subWorkOrderDetails]="subWorkOrderDetails">
                    </app-work-order-analysis>
                </div>
                <div *ngIf="(gridActiveTab == 'workorderfrom')" [ngClass]="{hidedata: gridActiveTab !== 'workorderfrom'}">
                    <app-wo-print-form [workOrderId]="workOrderId" [workOrderPartNumberId]="workOrderPartNumberId"> </app-wo-print-form>
                </div>
                <div *ngIf="(gridActiveTab == 'workorderpartfrom')" [ngClass]="{hidedata: gridActiveTab !== 'workorderpartfrom'}">

                    <!-- <app-woq-form [workOrderId]="workOrderId" [workOrderPartNumberId]="workOrderPartNumberId"> </app-woq-form> -->
                    <app-wo-part-list-form [workOrderId]="workOrderId" [workOrderPartNumberId]="workOrderPartNumberId"> </app-wo-part-list-form>
                </div>

                <div *ngIf="(gridActiveTab == 'laboranalysis')"
                    [ngClass]="{hidedata: gridActiveTab !== 'laboranalysis'}">
                    <app-work-order-labour-analysis [savedWorkOrderData]="savedWorkOrderData"
                        [selectedPartNumber]="selectedPartNumber" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [subWorkOrderDetails]="subWorkOrderDetails">
                    </app-work-order-labour-analysis>
                </div>

                <div *ngIf="(gridActiveTab == 'releasefrom')"
                [ngClass]="{hidedata: gridActiveTab !== 'releasefrom'}">

                <app-work-order-release-from-list [workOrderId]="workOrderId" [workOrderPartNumberId]="workOrderPartNumberId"> </app-work-order-release-from-list>
                <!-- <app-wo-release-from 
                     [workOrderId]="workOrderId" [isSubWorkOrder]="isSubWorkOrder"
                    [subWOPartNoId]="subWOPartNoId">
                </app-wo-release-from> -->
            </div>

            <!-- <div *ngIf="(gridActiveTab == 'woreleaseeasafrom')"
            [ngClass]="{hidedata: gridActiveTab !== 'woreleaseeasafrom'}">
            <app-wo-release-easa-from 
                 [workOrderId]="workOrderId" [isSubWorkOrder]="isSubWorkOrder"
                [subWOPartNoId]="subWOPartNoId">
            </app-wo-release-easa-from>
        </div> -->
                <div *ngIf="workOrderId && (gridActiveTab == 'tearDown')" class="wf-label-cstm set_pad"
                    [ngClass]="{hidedata : gridActiveTab !== 'tearDown'}">
                    <app-common-teardown *ngIf="!isView" [workOrderId]="workOrderId"
                        [workFlowWorkOrderId]="workFlowWorkOrderId" [savedWorkOrderData]="savedWorkOrderData"
                        [subWorkOrderDetails]="subWorkOrderDetails" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [jobTitles]="jobTitles" [getsaveTearDownData]="saveTearDownData"
                        [isEdit]='isEdit' [isView]="isView || isViewForApprovedPart"
                        [workOrderGeneralInformation]="workOrderGeneralInformation">
                    </app-common-teardown>
                    <app-teardown-overview *ngIf="isView" [isSubWorkOrder]="isSubWorkOrder"
                        [subWOPartNoId]="subWOPartNoId" [workFlowWorkOrderId1]="workFlowWorkOrderId">
                    </app-teardown-overview>
                </div>

                <div *ngIf="workOrderId && (subTabOtherOptions == 'charges')" class="wf-label-cstm"
                    [ngClass]="{hidedataOthers :  subTabOtherOptions !== 'charges'} ">
                    <app-work-order-charges [workFlowObject]="workFlowObject" [isWorkOrder]="isWorkOrder"
                        [isSubWorkOrder]="isSubWorkOrder" [workOrderChargesList]="workOrderChargesList"
                        [subWOPartNoId]="subWOPartNoId" (saveChargesListForWO)="saveWorkOrderChargesList($event)"
                        (saveChargesListDeletedStatus)="getChargesDeletedStatus($event)"
                        (updateChargesListForWO)="updateWorkOrderChargesList($event)"
                        (refreshData)="getChargesListByWorkOrderId()" [isView]="isView || isViewForApprovedPart">
                    </app-work-order-charges>
                </div>


                <div *ngIf="workOrderId && (subTabOtherOptions == 'exclusions')" class="wf-label-cstm"
                    [ngClass]="{hidedataOthers :  subTabOtherOptions !== 'exclusions'} ">
                    <app-work-order-exclusions [workFlowObject]="workFlowObject" [isWorkOrder]="isWorkOrder"
                        [workOrderExclusionsList]="workOrderExclusionsList"
                        (saveExclusionsListForWO)="saveWorkOrderExclusionsList($event)"
                        (updateExclusionsListForWO)="updateWorkOrderExclusionsList($event)" [taskList]="taskList"
                        (refreshData)="getExclusionListByWorkOrderId()" [isView]="isView || isViewForApprovedPart">
                    </app-work-order-exclusions>
                </div>
                <div *ngIf="workOrderId && (subTabOtherOptions == 'freight')" class="wf-label-cstm"
                    [ngClass]="{hidedataOthers :  subTabOtherOptions !== 'freight'} ">
                    <app-work-order-freight (saveFreightsListDeletedStatus)="getFreightssDeletedStatus($event)"
                        [freightForm]="freight" [workOrderFreightList]="workOrderFreightList"
                        [isSubWorkOrder]="isSubWorkOrder" [subWOPartNoId]="subWOPartNoId"
                        [subWorkOrderDetails]="subWorkOrderDetails" [savedWorkOrderData]="savedWorkOrderData"
                        (saveFreightListForWO)="saveWorkOrderFreightsList($event)"
                        (updateFreightListForWo)="updateWorkOrderFreightsList($event)"
                        (refreshData)="getFreightListByWorkOrderId()" [isView]="isView || isViewForApprovedPart">
                    </app-work-order-freight>
                </div>

                <div *ngIf="addresses" [ngClass]="{hidedata : gridActiveTab !== 'address'}">
                    <app-work-order-addresses [addressesForm]="addresses"></app-work-order-addresses>
                </div>


            </div>
        </div>
    </div>
    <div id="warnRestrictMesg" class="modal fade" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xsm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title warning_color" *ngIf="restrictID == 0">Warning</h4>
                    <h4 class="modal-title restrict_color" *ngIf="restrictID != 0">Restriction</h4>
                </div>
                <div class="pad_msf">
                    <p *ngIf="warningID != 0 && restrictID == 0" class="mar_o warning_color">
                        {{warningMessage}}</p>
                    <p *ngIf="restrictID != 0 " class="mar_o restrict_color">
                        {{restrictMessage}}</p>
                </div>
                <div class="modal-footer footer-padding">
                    <button class="btn btn-primary footer-button-padding" data-dismiss="modal"
                        (click)="WarnRescticModel()">Ok </button>
                </div>
            </div>
        </div>
    </div>

    <div id="warningMesg" class="modal fade" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xsm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title warning_color" *ngIf="restrictID == 0">Warning</h4>
                    <h4 class="modal-title restrict_color" *ngIf="restrictID != 0">Restriction</h4>
                </div>
                <div class="pad_msf">
                    <p *ngIf="warningID != 0 && restrictID == 0" class="mar_o warning_color">
                        {{warningMessage}}</p>
                    <p *ngIf="restrictID != 0 " class="mar_o restrict_color">
                        {{restrictMessage}}</p>
                </div>
                <div class="modal-footer footer-padding">
                    <h5>Continue ?</h5>
                    <button type="button" class="btn btn-primary" data-dismiss="modal"
                        (click)="WarnRescticModel()">Yes</button>
                    <button type="button" class="close" data-dismiss="modal" class="btn btn-danger" data-dismiss="modal"
                        >No</button>
                    <!-- <button (click)="movetoworkorderlist()" class="btn btn-primary footer-button-padding" data-dismiss="modal" (click)="WarnRescticModel()"
                  >Ok </button> -->
                </div>
            </div>
        </div>
    </div>

    <div id="warningForCmmWorkflow" class="modal fade" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xsm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title warning_color">Warning</h4>
                </div>
                <div class="pad_msf">
                    <p class="mar_o warning_color"> workflow Number <strong style="color: #007ad9;">{{workflowNumber}}</strong> is expired </p>
                    <!-- <input type="checkbox" name="contract" #contract="ngModel"  (ngModelChange)="getValid()" 
                class="form-control w60 width-100"> -->

                </div>
                <div class="modal-footer footer-padding">
                    <!-- <button type="button" class="btn btn-primary" data-dismiss="modal"
                (click)="WarnRescticModel()">Yes</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal"
                  (click)="movetoworkorderlist()">No</button> -->
                    <button class="btn btn-primary footer-button-padding" data-dismiss="modal"
                        (click)="removeWorkflow()">Ok </button>
                </div>
            </div>
        </div>
    </div>
    <div id="warningForCmmPublication" class="modal fade" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xsm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title warning_color">Warning</h4>
                </div> 
                <div class="pad_msf">
                    <p class="mar_o warning_color"> Publication Number  <strong style="color: #007ad9;">{{publicationNo}}</strong> is expired </p>
                </div>
                <div class="modal-footer footer-padding">
                    <!-- <button type="button" class="btn btn-primary" data-dismiss="modal"
                (click)="WarnRescticModel()">Yes</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal"
                  (click)="movetoworkorderlist()">No</button> -->
                    <button class="btn btn-primary footer-button-padding" data-dismiss="modal"
                        (click)="removePublication()">Ok </button>
                </div>
            </div>
        </div>
    </div>


    <div id="workFlowTransfer" class="modal fade" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xsm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                        (click)="closeTranferFlow()">&times;</button>
                    <h4 class="modal-title warning_color">Transfer Workflow To Work Order</h4>
                </div>
                <div class="pad_msf">
                    <!-- <p  class="mar_o warning_color"> Publication is expired </p> -->
                    <div class="wo_canges">
                        <p-checkbox href="#" class="p-checkbox-label task-completed-by-one" name="task" binary="false"
                            label="Material List" [(ngModel)]="workflowTransfer.Material" value="Material"
                            (onChange)="taskComletedByConfirmation($event)"></p-checkbox>
                    </div>
                    <div class="wo_canges">
                        <p-checkbox href="#" class="p-checkbox-label task-completed-by-one" name="task" binary="false"
                            label="Labor Hours" [(ngModel)]="workflowTransfer.Labor" value="Labor"
                            (onChange)="taskComletedByConfirmation($event)"></p-checkbox>
                    </div>
                    <div class="wo_canges">
                        <p-checkbox href="#" class="p-checkbox-label task-completed-by-one" name="task" binary="false"
                            label="Tools" [(ngModel)]="workflowTransfer.Tools" value="Tools"
                            (onChange)="taskComletedByConfirmation($event)"></p-checkbox>
                    </div>
                    <div class="wo_canges">
                        <p-checkbox href="#" class="p-checkbox-label task-completed-by-one" name="task" binary="false"
                            label="Misc Charges" [(ngModel)]="workflowTransfer.Charges" value="Charges"
                            (onChange)="taskComletedByConfirmation($event)"></p-checkbox>
                    </div>
                </div>
                <div class="modal-footer footer-padding">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="transferWorkflow()"
                        [disabled]="!workflowTransfer.Material && !workflowTransfer.Labor && !workflowTransfer.Tools && !workflowTransfer.Charges">Save</button>
                    <button type="button" class="btn btn-danger" (click)="closeTranferFlow()"
                        data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>


</div>
<div class="preloader" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>