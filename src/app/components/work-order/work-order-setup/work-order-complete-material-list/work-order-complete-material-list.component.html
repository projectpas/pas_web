<div *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">
    <button data-target="#addNewMaterials" data-toggle="modal" class="btn btn-primary mar-left-5"
        (click)="createNew(); ">Add PN</button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary" 
        (click)="partsIssueRI(1)" data-toggle="modal"
        data-target="#reserve">Reserve </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(2)" data-toggle="modal" data-target="#reserve"> Issue
    </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(3)" data-toggle="modal" data-target="#reserve">
        Reserve & Issue </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(4)" data-toggle="modal" data-target="#reserve">
        UnIssue </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(5)" data-toggle="modal" data-target="#reserve">
        UnReserve </button>
</div>
<div id="addNewMaterials" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-xl">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{ isEdit ? 'Edit' : 'Add'  }} PN</h4>
            </div>
            <div class="modal-body">
                <div *ngIf="!isEdit && addNewMaterial">
                    <grd-material [isWorkOrder]="isWorkOrder" [isSubWorkOrder]="isSubWorkOrder" [workFlow]="workFlowObject" [taskList]="taskList"
                        (saveMaterialListForWO)="saveMaterialList($event)"  [mpnPartNumbersList]="mpnPartNumbersList"></grd-material>
                </div>
                <div *ngIf="isEdit && editData && addNewMaterial">
                    <grd-material [isEdit]="isEdit" [editData]="editData" [isWorkOrder]="isWorkOrder" [isSubWorkOrder]="isSubWorkOrder"
                        [workFlow]="workFlowObject" [taskList]="taskList"
                        (updateMaterialListForWO)="updateMaterialList($event)" [mpnPartNumbersList]="mpnPartNumbersList">
                    </grd-material>
                </div>
            </div>
        </div> 
    </div>
</div> 
<div>
    <p-table class="rpo-table-cstm rro-table-cstm pub-ptable-cstm ptable-f10 Materials_wo" id="custome_material" [columns]="cols" #materialTble
        [value]="workOrderMaterialList" [paginator]="true" [rows]="pageSize" [rowsPerPageOptions]="[5, 10, 20,50, 100]"
        (onPage)="pageIndexChange($event)">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th class="table-column-width"></th>
                <!-- [ngClass]="{'adj_width1': col.header=='PN','adj_width2': (col.header=='PN Description' || col.header=='Classification') }" -->
                <th class="table-column-width" *ngFor="let col of columns" >
                    {{col.header}} 
                </th>
                <th class="table-actions-column" *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">Actions </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
            <!-- [ngClass]="{'color_pick': rowData.isRoleUp==false }" -->
            <tr>
                <td class="table-column-width">
                    <span *ngIf="rowData.partStatusId !=0">
                        <i *ngIf="rowData.isRoleUp==false && rowData.isShowPlus ==true" 
                        class="fa fa-plus btn btn-success plus-success"  matTooltip="Show stock line details"
                         matTooltipPosition="above"
                         (click)="getRollupMaterialList(rowData,i)" ></i> 
                    </span>
                     <i *ngIf="rowData.isRoleUp==false && rowData.isShowPlus ==false"
                      class="fa fa-minus btn-danger plus-danger"  matTooltip="Show stock line details" 
                      matTooltipPosition="above"  (click)="removeRollUpList(rowData,i)"></i>   
                </td>
                <td class="table-column-width" *ngFor="let col of columns">
                    <p *ngIf="col.field !='line' && col.field !='memo' && col.field !='defered' && col.field !='stockLineNumber' && col.field !='controlNo' && col.field !='controlId' && col.field !='receiver' && col.field !='altEquiv' " class="m-0 p-0"  [ngClass]="{align_rightset : (col && col.align ==1)}">  {{rowData[col.field]}}</p>
                    <p *ngIf="col.field =='line' && col.field !='memo' && col.field !='defered' && col.field !='stockLineNumber' && col.field !='controlNo' && col.field !='controlId' && col.field !='receiver'" class="m-0 p-0 text-right"> {{ rowData.line == undefined ?( i + 1):rowData.line }}</p>
                    <p *ngIf="col.field =='stockLineNumber' " [matTooltip]="rowData.stockLineNumber"  [matTooltipDisabled]="rowData.isMultipleStockLine == 'Single'" matTooltipPosition="above" class="m-0"> {{ rowData.isMultipleStockLine== 'Single' ? rowData[col.field] : rowData.isMultipleStockLine}}</p>
                    <p *ngIf=" col.field =='controlNo'" [matTooltip]="rowData.controlNo"  [matTooltipDisabled]="rowData.isMultipleControlNo == 'Single'"  matTooltipPosition="above" class="m-0 p-0"> {{rowData.isMultipleControlNo== 'Single' ? rowData[col.field] : rowData.isMultipleControlNo  }}</p>
                    <p *ngIf=" col.field =='controlId'" [matTooltip]="rowData.controlId"  [matTooltipDisabled]="rowData.isMultiplecontrolId == 'Single'"  matTooltipPosition="above" class="m-0 p-0"> {{ rowData.isMultiplecontrolId== 'Single' ? rowData[col.field] : rowData.isMultiplecontrolId }}</p>
                    <p *ngIf=" col.field =='receiver'" [matTooltip]="rowData.receiver"  [matTooltipDisabled]="rowData.isMultiplereceiver == 'Single'"  matTooltipPosition="above" class="m-0 p-0"> {{ rowData.isMultiplereceiver== 'Single' ? rowData[col.field] : rowData.isMultiplereceiver }}</p>
                    <p *ngIf="col.field =='altEquiv'">{{rowData.isAltPart ? 'Alternative' : rowData.isEquPart ? 'Equivalent' : '-'}}</p>
                    <input type="checkbox" name="contract {{i}}" #contract="ngModel" *ngIf="col.field =='defered'"
                    class="form-control w60 defered-check" [(ngModel)]="rowData.defered">
                    <span *ngIf="col.field =='memo'" [innerHTML]="rowData[col.field]" class="p_textEditor"></span>
                </td>
                <td class="action-icons-cstm table-column-width" *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">
                    <span data-target="#addNewMaterials" data-toggle="modal"><button class="btn nobg btn-edit-cstm" (click)="edit(rowData)" matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></button></span>
                    <span><button type="button" class="btn nobg btn-pluspo-cstm" (click)="createNewPoWorkOrder(rowData)" *ngIf="rowData.isRoleUp==false" [disabled]="!(rowData.quantity > rowData.quantityIssued + rowData.quantityReserved + rowData.partQuantityAvailable)"  matTooltip="Create PO" matTooltipPosition="above" [ngClass]="{'btn_disabled': !(rowData.quantity > (rowData.quantityIssued + rowData.quantityReserved + rowData.partQuantityAvailable))}"><i class="fa fa-plus"></i></button></span>
                   
                    <span *ngIf="!isSubWorkOrder && rowData.provision=='Sub Work Order'">
                        <button type="button" class="btn nobg btn-pluspo-cstm" *ngIf="rowData.subWorkOrderId == 0" (click)="subWoClick(rowData)" [matTooltip]="rowData.subWorkOrderId ==0 ? 'Create Sub Work Order' : 'Edit Sub Work Order'" matTooltipPosition="above" [disabled]="!(rowData.partStatusId ==2 || rowData.partStatusId ==3)" >
                        <i class="fa fa-plus grn_clr"   [ngClass]="{'btn_disabled':!(rowData.partStatusId ==2 || rowData.partStatusId ==3)}"></i>
                    </button>
                    <button type="button" class="btn nobg btn-pluspo-cstm" *ngIf="rowData.subWorkOrderId != 0" (click)="editSubWo(rowData)" [matTooltip]="rowData.subWorkOrderId ==0 ? 'Create Sub Work Order' : 'Edit Sub Work Order'" matTooltipPosition="above">
                        <i class="fa fa-pencil grn_clr"  ></i>
                    </button>
                </span>
                <span *ngIf="!isSubWorkOrder && rowData.provision !='Sub Work Order'">
                    <button type="button" class="btn nobg btn-pluspo-cstm"  disabled >
                        <i class="fa fa-plus" style="color: #b7b7b7;" ></i>
                     </button>
                </span>
                <span><button type="button" class="btn nobg btn-delete-cstm" *ngIf="rowData.isRoleUp==false;" (click)="openDelete(content,rowData)"  [ngClass]="{'btn_disabled': rowData.quantityIssued==0}" [disabled]="rowData.quantityIssued==0" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></button> </span>
                </td>
            </tr>
        </ng-template> 
        <ng-template pTemplate="emptymessage" let-columns>
            <tr>
                <td colspan="48" class="no-records-cstm no-records-msg" style="margin-left:-36%">
                    No records found
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" id="footer">
            <label id="footer" class="footer">Total:</label>
            <input class="footer-input-width" [(ngModel)]="materialTble._totalRecords" [disabled]="true" pInputText
                type="text" />
            &nbsp;&nbsp;
            <label id="footer" class="footer1">Pages Count:</label>
            <input class="footer-input-width" [ngModel]="
            getPageCount(materialTble._totalRecords, pageSize)
          " [disabled]="true" pInputText type="text" />
        </ng-template>
    </p-table>
</div>
<div id="reserve" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-xlg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="preloader" *ngIf="isSpinnerVisibleReserve">
                <div class="loading">
                    <div class="lds-roller">
                        <div></div><div></div> <div></div><div></div><div></div> <div></div><div></div><div></div>
                    </div>
                </div>
            </div>
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="closeMaterial()">&times;</button>
                <h4 class="modal-title" *ngIf="statusId === 1">Reserved Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 2">Issued Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 3">Reserve & Issue Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 4">Un Issue Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 5">Un Reserve Parts</h4>
                <p id="clockdiv" class="clockdiv" *ngIf="counter"> Session Expire in {{counter | formatTime}}</p>
            </div>
            <div class="form-row mar-left-15" *ngIf="statusId !== 2 && statusId !== 4 && statusId !== 5">
                <div class="col-md-2">
                    <p-checkbox class="p-checkbox-label-womaterial" name="task" binary="false" 
                        label="Include Alternate PN" (onChange)="resetAlternateParts($event)" [(ngModel)]="isShowAlternatePN">
                    </p-checkbox>
                </div>
                <div class="col-md-4">
                    <p-checkbox class="p-checkbox-label-womaterial" name="task" binary="false" label="Include Eq PN"
                        (onChange)="resetEqParts($event)" [(ngModel)]="isShowEqPN"></p-checkbox>
                </div> 
            </div>
            <form #reserveData="ngForm">
                <div class="modal-body" *ngIf="reservedList">
                    <div class="table-responsive pas-table-cstm  poro-table-cstm parts-list-table-align" id="workflow-attributes-block">
                        <div class="tableFixHead">
                        <table class="table table-bordered">
                            <thead> 
                                <tr>
                                    <th class="text-center" colspan="1"></th>
                                    <th *ngIf="isShowAlternatePN  " class="text-center" colspan="1"> </th>
                                    <th *ngIf=" isShowEqPN" class="text-center" colspan="1"> </th>
                                    <th colspan="11" class="text-center"> Materials</th>
                                    <th colspan="2" class="text-center"> Stock</th>
                                    <th class="text-center" colspan="4" ></th>
                                </tr>
                                <tr>
                                    <th class="text-center select-all">
                                        Select All
                                        <input type="checkbox" name="isSelectAll"
                                        [(ngModel)]="isAllow"  (change)="allowAll($event.target.checked)">
                                    </th>
                                    <th *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3) " class="text-center">
                                        Alternate Parts
                                    </th>
                                    <th *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)" class="text-center">
                                        Equivalent Parts
                                    </th>
                                    
                                    <th *ngIf="(statusId == 2 || statusId == 4 || statusId == 5) && (showAlternateParts ||showEqParts) ">Alt/Equiv</th>
                                    <th class="text-center" style="min-width: 110px;">PN </th>
                                    <th class="text-center" style="min-width: 110px;">Part Description</th>
                                    <th class="text-center" style="min-width: 96px;"> Alternate PN For</th>
                                    <th class="text-center"> Cond Type</th>
                                    <th class="text-center width-50"> Stk Type</th>
                                    <th class="text-center width-50">Qty Req</th> 
                                    <th class="text-center width-50">Qty Res</th>
                                    <th class="text-center" >  Qty To Be Reserved</th>
                                    <th class="text-center" >
                                        <span class="font-size-10" *ngIf="statusId == 1 || statusId == 5 ">
                                        {{ statusId != 5 ? 'Qty Actually Reserving' : 'Qty Actually UnReserving'}} </span>
                                        <span class="font-size-10" *ngIf="statusId == 2 || statusId == 4 ">
                                            {{ statusId != 4  ?  'Qty Actually Issuing' : 'Qty Actually UnIssuing'}}
                                        </span>
                                        <span class="font-size-10" *ngIf="statusId == 3"> Qty Actually Resver & Issue</span>
                                    </th>
                                 <th class="text-center"> Qty  Issued   </th>
                                    <th class="text-center" *ngIf="statusId !==2 && statusId !==4"> Qty To Be Issued
                                    </th>
                                    <th class="text-center" *ngIf="statusId === 2  || statusId === 4"> Qty To Be Issued
                                    </th>
                                   <th class="text-center"> Qty on Hand </th>
                                    <th class="text-center width-50"> Qty Avail </th>
                                    <th class="text-center"> Qty on Order </th>
                                    <th class="text-center" *ngIf="statusId === 1 || statusId === 5 ">
                                        {{statusId == 1 ? 'Reserved' : 'UnReserved'  }} Date</th>
                                        <th class="text-center" *ngIf="statusId === 2 || statusId === 3 || statusId === 4">
                                            {{statusId === 2  ? 'Issued'  : 
                                        statusId === 3 ? 'Reserved & Issued'  
                                        : 'UnIssued' 
                                         }}
                                            Date</th>
                                    <th class="text-center" *ngIf="statusId === 1 || statusId === 5">
                                        {{statusId === 1 ? 'Reserved' : 'UnReserved'}} By</th>
                                    <th class="text-center" *ngIf="statusId === 2 || statusId === 3 || statusId === 4">
                                        {{statusId === 2  ? 'Issued' : statusId === 3 ? 'Reserved & Issued'  :'UnIssued'  }}
                                        By</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let x of reservedList; let i=index;" >
                                <tr>
                                    <td class="text-center">
                                      <input type="checkbox" name="isParentSelected{{i}}" *ngIf="(statusId === 1 || statusId === 5)"
                                            [(ngModel)]="x.isParentSelected" (change)="selectedParts(x,$event)" [disabled]="x.quantityReserved==0">
                                            <input type="checkbox" name="isParentSelected{{i}}" *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)"
                                            [(ngModel)]="x.isParentSelected" (change)="selectedParts(x,$event)" [disabled]="x.quantityIssued==0">
                                        </td>
                                    <td *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)" class="text-center">
                                       <input type="checkbox" name="showAlternateParts{{i}}" 
                                            (ngModelChange)="showAlternateParts($event , x.woReservedIssuedAltParts)"
                                            [(ngModel)]="x.showAlternateParts" >
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)" class="text-center">
                                        <input type="checkbox" name="showEqParts{{i}}"
                                            (ngModelChange)="showEquantParts($event , x.woReservedIssuedEquParts)" 
                                            [(ngModel)]="x.showEqParts">
                                    </td>
                                    <th *ngIf="(statusId == 2 || statusId == 4 || statusId == 5)"></th>
                                    <td>{{x.partNumber}}</td>
                                    <td>{{x.partDescription}}</td>
                                    <td></td>
                                    <td>{{x.condition}}</td>
                                    <td>{{x.stockType}}</td>
                                    <td class="tex_end">
                                        {{x.quantity}}
                                    </td>
                                    <td class="tex_end">
                                        {{x.quantityAlreadyReserved}}
                                    </td>
                                    <td class="tex_end" *ngIf="(statusId === 1 || statusId === 5)">
                                        {{ statusId !=5  ? x.qtyToBeReserved : x.qtyToBeReserved}}
                                    </td>
                                    <td class="tex_end" *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        {{x.qtyToBeReserved}}  
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity{{i}}" [(ngModel)]="x.quantityReserved"  (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,x)" [disabled]="!x.isParentSelected">
                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        <input type="number" name="quantity{{i}}" [(ngModel)]="x.quantityIssued" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,x)" 
                                            [disabled]="!x.isParentSelected">
                                    </td>
                                    <td class="tex_end">
                                        {{x.quantityAlreadyIssued}} 
                                    </td>
                                    <td  class="tex_end">
                                        {{x.qtyToBeIssued}} 
                                    </td>
                                    <td class="tex_end">{{x.quantityOnHand}}</td>
                                    <td class="tex_end">{{x.quantityAvailable}}</td>
                                    <td class="tex_end">{{x.quantityOnOrder}}</td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDate{{i}}"
                                            #reservedDate="ngModel" [required]="x.isParentSelected" [maxDate]="minDateValue"
                                            [(ngModel)]="x.reservedDate" [maxDate]="minDateValue" disabled>
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDate{{i}}"
                                            #issuedDate="ngModel" [(ngModel)]="x.issuedDate" [maxDate]="minDateValue"
                                            [required]="x.isParentSelected" [maxDate]="minDateValue" disabled>
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                       <p-autoComplete field="name"
                                        [(ngModel)]="x.reservedById" 
                                        name="reservedBy{{i}}" #reservedBy="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"  [required]="x.isParentSelected" [disabled]="!x.isParentSelected">
                                    </p-autoComplete>
                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                       <p-autoComplete field="name"
                                        [(ngModel)]="x.issuedById"
                                        name="issuedBy{{i}}" #issuedBy="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"  [required]="x.isParentSelected" [disabled]="!x.isParentSelected">
                                    </p-autoComplete>

                                    </td> 
                                </tr>
                                <ng-container *ngIf="x.showAlternateParts==true" >
                                <tr *ngFor="let b of x.woReservedIssuedAltParts; let y=index;">
                                    <td class="text-center">
                                        <input type="checkbox" [(ngModel)]="b.isChildSelected"
                                            name="isChildSelected{{y}}" (change)="selectedParts(b,$event)">
                                    </td>
                                    <td  *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td  *ngIf="statusId == 2 || statusId == 4 || statusId == 5">
                                        <span>Alternative</span>
                                    </td>
                                    <td>{{b.altPartNumber}}</td>
                                    <td>{{b.altPartDescription}}</td>
                                    <td>{{b.parentPartNo}}</td>


                                    <td>{{b.condition}}</td>
                                    <td>{{b.stockType}}</td>
                                    <td class="tex_end">
                                        {{b.quantity}}
                                    </td>
                                    <td class="tex_end"> {{b.quantityAlreadyReserved}}</td> 
                                   <td class="tex_end">
                                        {{b.qtyToBeReserved}}   
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity1_{{y}}" [(ngModel)]="b.quantityReserved" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,b)" (input)="childPartValidate($event.target.value, b,1)"
                                            [disabled]="!b.isChildSelected">

                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">

                                        <input type="number" name="quantity2_{{y}}" [(ngModel)]="b.quantityIssued" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,b)"
                                            (input)="childPartValidate($event.target.value, b,1)"
                                            [disabled]="!b.isChildSelected">
                                    </td>
                                    <td class="tex_end">{{b.quantityAlreadyIssued}}</td>
                                    <td class="tex_end">{{b.qtyToBeIssued}}</td>
                                    <td class="tex_end">
                                        {{b.quantityOnHand}}
                                   </td>
                                    <td class="tex_end">
                                        {{b.quantityAvailable}}
                                    </td>
                                    <td class="tex_end">
                                        {{b.quantityOnOrder}}
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDateAlt{{y}}"
                                            #reservedDateAlt="ngModel" [required]="b.isChildSelected" disabled
                                            [(ngModel)]="b.reservedDate"></p-calendar>
                                     </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDateAlt{{y}}"
                                            #issuedDateAlt="ngModel" [(ngModel)]="b.issuedDate" disabled
                                            [required]="b.isChildSelected">
                                        </p-calendar>

                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                        <p-autoComplete field="name"
                                       [(ngModel)]="b.reservedById"
                                       name="reservedByAlt{{y}}" #reservedByAlt="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"   [required]="b.isChildSelected"  [disabled]="!b.isChildSelected">
                                    </p-autoComplete>


                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                        <p-autoComplete field="name"
                                        [(ngModel)]="b.issuedById"
                                        name="issuedByAlt{{y}}" #issuedByAlt="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"   [required]="b.isChildSelected"  [disabled]="!b.isChildSelected">
                                     </p-autoComplete>

                                    </td>
                                </tr>
                                </ng-container>
                                <ng-container *ngIf="x.showEqParts==true" >
                                <tr *ngFor="let c of x.woReservedIssuedEquParts; let z=index; ">
                                    <td class="text-center">
                                        <input type="checkbox" [(ngModel)]="c.isChildSelected"
                                            name="isChildSelected{{z}}" (change)="selectedParts(c,$event)">
                                    </td>
                                    <td  *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)">
                                    </td>
 <td  *ngIf="statusId == 2 || statusId == 4 || statusId == 5">
                                        <span>Equivalent</span>
                                     </td>
                                    <td>{{c.equPartNumber}}</td>
                                    <td>{{c.equPartDescription}}</td>
                                    <td>{{c.parentPartNo}}</td>
                                    <td>{{c.condition}}</td>
                                    <td>{{c.stockType}}</td>
                                    <td class="tex_end">
                                        {{c.quantity}}
                                    </td>
                                    <td class="tex_end">{{c.quantityAlreadyReserved}}</td>
                                   <td class="tex_end">
                                        {{c.qtyToBeReserved}}  
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity11_{{z}}" [(ngModel)]="c.quantityReserved" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,c)" (input)="childPartValidate($event.target.value, c,2)"
                                            [disabled]="!c.isChildSelected">
                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        <input type="number" name="quantity22_{{z}}" [(ngModel)]="c.quantityIssued"
                                            (keyup)="validatePartsQuantity($event,c)" (keypress)="restrictMinus($event)"
                                             (input)="childPartValidate($event.target.value, c,2)"
                                            [disabled]="!c.isChildSelected">
                                    </td>
                                    <td class="tex_end">{{c.quantityAlreadyIssued}}</td>
                                  <td class="tex_end">{{c.qtyToBeIssued}}</td>
                                    <td class="tex_end">
                                        {{c.quantityOnHand}}
                                    </td>
                                    <td class="tex_end">
                                        {{c.quantityAvailable}}
                                    </td>
                                    <td class="tex_end">
                                        {{c.quantityOnOrder}}
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDateEq{{i}}"
                                            #reservedDateEq="ngModel" [required]="c.isChildSelected" [maxDate]="minDateValue" disabled
                                            [(ngModel)]="c.reservedDate"></p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                       <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDateEq{{z}}"
                                            #issuedDateEq="ngModel" [(ngModel)]="c.issuedDate" [maxDate]="minDateValue" disabled
                                            [required]="c.isChildSelected"  >
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                        <p-autoComplete field="name"
                                        [(ngModel)]="c.reservedById"
                                        name="reservedByEq{{z}}" #reservedByEq="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"  [required]="c.isChildSelected"  [disabled]="!c.isChildSelected">
                                     </p-autoComplete>
                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                      <p-autoComplete field="name"
                                        [(ngModel)]="c.issuedById"
                                        name="issuedByEq{{z}}" #issuedByEq="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"   [required]="c.isChildSelected"  [disabled]="!c.isChildSelected">
                                     </p-autoComplete> 
                                    </td>
                                </tr>
                            </ng-container>
                        </ng-container>
                            </tbody>
                        </table>
                        </div>
                        <div style="float:right">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal" (click)="saveRIPart()"
                        [disabled]="!savebutonDisabled ">
                    <span *ngIf="statusId === 1">Reserve</span>
                    <span *ngIf="statusId === 2">Issue</span>
                    <span *ngIf="statusId === 3">Reserve & Issue</span>
                    <span *ngIf="statusId === 4"> Un Issue</span>
                    <span *ngIf="statusId === 5">Un Reserve</span>
                    </button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeMaterial()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>
<ng-template #timerAlertNotfi let-c="close" let-d="dismiss">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" (click)="dismissTimerAlert()">&times;</button>
      <h4 class="modal-title">Confirmation</h4>
    </div>
    <div class="modal-body">
      <h6 class="text-center">
        your session getting timeout do you want to reset the time
      </h6>
    </div>
    <div class="modal-footer">
  
      <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="dismissTimerAlert()">No</button>
      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="actionTimerReset()">Yes</button>
    </div>
  </ng-template>
  <ng-template #tabRedirectConfirmationModal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="dismissModel()"
      >
        &times;
      </button>
      <h4 class="modal-title">Confirmation</h4>
    </div>
    <div class="modal-body">
      <h6 class="text-center">
Do you  to  create new Sub Work Order  or Add to existing Work Order ?
      </h6>
    </div>
    <div class="modal-footer">
      <button  type="button"  class="btn btn-danger" data-target="#existingSubWo" data-toggle="modal" data-dismiss="modal"   (click)="addToExistingSubWo()">
        Add to Existing Record
      </button>
      <button
        type="button"
        class="btn btn-primary" data-dismiss="modal" (click)="createNewSubWo()">
        Create New </button>
    </div>
  </ng-template>
  <div id="existingSubWo" class="modal fade" role="dialog" data-backdrop="static" >
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Sub Work Order List</h4>
            </div>
            <div class="modal-body" *ngIf="subWoRecord && subWoRecord.workOrderMaterialsId !=0 && viewSubWolist==true">
                <app-sub-work-orderlist [workOrderId]="workOrderId" [mpnId]="mpnId" [forSubWorkOrder]="true" [workOrderMaterialsId]="subWoRecord.workOrderMaterialsId" >
                </app-sub-work-orderlist>
           </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger btn-height" data-dismiss="modal" (click)="dismissModel2()">Close</button>
            </div>
            </div> 
    </div>
  </div> 
  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        
        <h4 class="modal-title">Are You Sure Want to Delete?</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
   </button>
    </div> 
    <div class="modal-body">
        <strong>
            PN:
            <span class="new-label">{{currentRow.partNumber}}</span>
        </strong>
    </div>  
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="delete()">Yes</button>
        <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
    </div>
  </ng-template>
  <div class="preloader" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>