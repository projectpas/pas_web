<div *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">
    <button data-target="#addNewMaterials" data-toggle="modal" class="btn btn-primary mar-left-5"
        (click)="createNew(); ">Add PN</button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary" 
        (click)="partsIssueRI(1)" data-toggle="modal"
        data-target="#reserve">Reserve </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(2)" data-toggle="modal" data-target="#reserve"> Issue
    </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(3)" data-toggle="modal" data-target="#reserve">
        Reserve & Issue </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(4)" data-toggle="modal" data-target="#reserve">
        Unissue </button>
    <button *ngIf="workOrderMaterialList && workOrderMaterialList.length > 0" class="btn btn-primary"
         (click)="partsIssueRI(5)" data-toggle="modal" data-target="#reserve">
        Unreserve </button>
</div>
<div id="addNewMaterials" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-xlg"> 
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{ isEdit ? 'Edit' : 'Add'  }} PN</h4>
            </div>
            <div class="modal-body">
                <div *ngIf="!isEdit && addNewMaterial">
                    <grd-material [isWorkOrder]="isWorkOrder" [customerId]="customerId" [isSubWorkOrder]="isSubWorkOrder" [workFlow]="workFlowObject" [taskList]="taskList"
                        (saveMaterialListForWO)="saveMaterialList($event)"  [mpnPartNumbersList]="mpnPartNumbersList"></grd-material>
                </div>
                <div *ngIf="isEdit && editData && addNewMaterial">
                    <grd-material [isEdit]="isEdit" [editData]="editData" [isWorkOrder]="isWorkOrder" [isSubWorkOrder]="isSubWorkOrder"
                        [workFlow]="workFlowObject" [taskList]="taskList"
                        (updateMaterialListForWO)="updateMaterialList($event)" [mpnPartNumbersList]="mpnPartNumbersList">
                    </grd-material> 
                </div>
            </div>
        </div> 
    </div>
</div> 
<div>
    <p-table class="rpo-table-cstm rro-table-cstm ptable-f10" id="custome_material" [columns]="cols" #materialTble
        [value]="workOrderMaterialList" [paginator]="true" [rows]="pageSize" [rowsPerPageOptions]="[5, 10, 20,50, 100]"
        (onPage)="pageIndexChange($event)">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th class="table-column-icon-width"></th>
                 <th class="table-column-width" [ngStyle]="{'width': col.width}" [ngClass]="{'adj_width1': col.header=='PN','adj_width2': (col.header=='PN Description' || col.header=='Classification') }" *ngFor="let col of columns" >
                    {{col.header}} 
                </th>
                <th class="table-actions-column" *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">Actions </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
             <tr>
                <td class="table-column-icon-width"> 
                    <span >
                     
                    </span>
                   

                      <button type="button"  (click)="getRollupMaterialList(rowData,i)"  *ngIf="rowData.isRoleUp==false && rowData.isShowPlus ==true" class="btn btn-primary roleUpd" [disabled]="rowData.partStatusId==0"   matTooltip="Show stock line details"
                      matTooltipPosition="above">
                        <i    class="fa fa-plus mr-0"  
                        ></i>
                      </button>
                      <button type="button" class="btn btn-danger roleUpd" *ngIf="rowData.isRoleUp==false && rowData.isShowPlus ==false"  matTooltip="Show stock line details" 
                      matTooltipPosition="above"  (click)="removeRollUpList(rowData,i)">
                      <i 
                      class="fa fa-minus mr-0" ></i>  
                    </button>

                </td> 
                <td class="table-column-width" *ngFor="let col of columns">
                    <input type="checkbox" name="contract {{i}}" #contract="ngModel" *ngIf="col.field =='isFromWorkFlow'"
                    class="form-control w60 defered-check" [(ngModel)]="rowData.isFromWorkFlow" disabled>
                    <p *ngIf="col.field !='line' && col.field !='memo' && col.field !='defered'&& col.field !='isFromWorkFlow' && col.field !='stockLineNumber' && col.field !='controlNo' && col.field !='controlId' && col.field !='receiver' && col.field !='altEquiv' " style="margin:0px !important"  [ngClass]="{align_rightset : (col && col.align ==1)}">  {{rowData[col.field]}}</p>
                    <p *ngIf="col.field =='line' && col.field !='memo' && col.field !='defered'&& col.field !='isFromWorkFlow' && col.field !='stockLineNumber' && col.field !='controlNo' && col.field !='controlId' && col.field !='receiver'" style="margin:0px !important" class=" p-0 text-right" [ngClass]="{align_rightset : (col && col.align ==1)}"> {{ rowData.line == undefined ?( i + 1):rowData.line }}</p>
                    <p *ngIf="col.field =='stockLineNumber' " [matTooltip]="rowData.stockLineNumber"  [matTooltipDisabled]="rowData.isMultipleStockLine == 'Single'" matTooltipPosition="above" style="margin:0px !important" [ngClass]="{align_rightset : (col && col.align ==1)}"> {{ rowData.isMultipleStockLine== 'Single' ? rowData[col.field] : rowData.isMultipleStockLine}}</p>
                    <p *ngIf=" col.field =='controlNo'" [matTooltip]="rowData.controlNo"  [matTooltipDisabled]="rowData.isMultipleControlNo == 'Single'"  matTooltipPosition="above" style="margin:0px !important" [ngClass]="{align_rightset : (col && col.align ==1)}"> {{rowData.isMultipleControlNo== 'Single' ? rowData[col.field] : rowData.isMultipleControlNo  }}</p>
                    <p *ngIf=" col.field =='controlId'" [matTooltip]="rowData.controlId"  [matTooltipDisabled]="rowData.isMultiplecontrolId == 'Single'"  matTooltipPosition="above" style="margin:0px !important" [ngClass]="{align_rightset : (col && col.align ==1)}"> {{ rowData.isMultiplecontrolId== 'Single' ? rowData[col.field] : rowData.isMultiplecontrolId }}</p>
                    <p *ngIf=" col.field =='receiver'" [matTooltip]="rowData.receiver"  [matTooltipDisabled]="rowData.isMultiplereceiver == 'Single'"  matTooltipPosition="above" style="margin:0px !important" [ngClass]="{align_rightset : (col && col.align ==1)}"> {{ rowData.isMultiplereceiver== 'Single' ? rowData[col.field] : rowData.isMultiplereceiver }}</p>
                    <p *ngIf="col.field =='altEquiv'" style="margin:0px !important">{{rowData.isAltPart ? 'Alternative' : rowData.isEquPart ? 'Equivalent' : '-'}}</p>
                    <input type="checkbox" name="contract {{i}}" #contract="ngModel" *ngIf="col.field =='defered'"
                    class="form-control w60 defered-check" [(ngModel)]="rowData.defered">
                    <span *ngIf="col.field =='memo'" [innerHTML]="rowData[col.field]" class="p_textEditor"></span>
                </td>
                <td class="action-icons-cstm table-column-width" *ngIf="(fromWoList ==false || fromWoList ==undefined) && !isView">
                    <span data-target="#addNewMaterials" data-toggle="modal"><button class="btn nobg btn-edit-cstm" (click)="edit(rowData)" matTooltip="Edit" matTooltipPosition="above" [disabled]="rowData.quantityIssued!=0 || rowData.quantityReserved !=0"><i class="fa fa-pencil"></i></button></span>
                    <!-- [disabled]="!(rowData.quantity > rowData.quantityIssued + rowData.quantityReserved + rowData.partQuantityAvailable)" -->
                    <span><button type="button" class="btn nobg btn-pluspo-cstm" (click)="createNewPoWorkOrder(rowData)" *ngIf="rowData.isRoleUp==false"   matTooltip="Create PO" matTooltipPosition="above" [ngClass]="{'btn_disabled': !(rowData.quantity > (rowData.quantityIssued + rowData.quantityReserved + rowData.partQuantityAvailable))}"><i class="fa fa-plus"></i></button></span>
                   
                    <span *ngIf="!isSubWorkOrder && rowData.provision=='Sub Work Order'">
                        <button type="button" class="btn nobg btn-pluspo-cstm" *ngIf="rowData.subWorkOrderId == 0" (click)="subWoClick(rowData)" [matTooltip]="rowData.subWorkOrderId ==0 ? 'Create Sub Work Order' : 'Edit Sub Work Order'" matTooltipPosition="above" [disabled]="!(rowData.partStatusId ==2 || rowData.partStatusId ==3)" >
                        <i class="fa fa-plus grn_clr"   [ngClass]="{'btn_disabled':!(rowData.partStatusId ==2 || rowData.partStatusId ==3)}"></i>
                    </button>
                    <button type="button" class="btn nobg btn-pluspo-cstm" *ngIf="rowData.subWorkOrderId != 0" (click)="editSubWo(rowData)" [matTooltip]="rowData.subWorkOrderId ==0 ? 'Create Sub Work Order' : 'Edit Sub Work Order'" matTooltipPosition="above">
                        <i class="fa fa-pencil grn_clr"  ></i>
                    </button>
                </span> 
                <span *ngIf="!isSubWorkOrder && rowData.provision !='Sub Work Order'">
                    <button type="button" class="btn nobg btn-pluspo-cstm"  disabled >
                        <i class="fa fa-plus" style="color: #b7b7b7;" ></i>
                     </button>
                </span>
                <span><button type="button" class="btn nobg btn-delete-cstm" *ngIf="rowData.isRoleUp==false;" (click)="openDelete(content,rowData)"  [ngClass]="{'btn_disabled': (rowData.quantityIssued!=0 || rowData.quantityReserved!=0)}" [disabled]="rowData.quantityIssued!=0 || rowData.quantityReserved !=0" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></button> </span>
                <span data-toggle="modal" data-target="#stockAudit"><a class="btn nobg btn-hist-cstm" (click)="openStocklineAudit(rowData)" matTooltip="StockLine History" matTooltipPosition="above"><i class="fa fa-history"></i></a></span>
                <span data-toggle="modal" data-target="#stockAudit"><a class="btn nobg btn-hist-cstm" (click)="openMaterialAudit(rowData)" matTooltip="Material List History" matTooltipPosition="above"><i class="fa fa-history"></i></a></span>
            
            </td>
            </tr>
        </ng-template> 
        <ng-template pTemplate="emptymessage" let-columns>
            <tr>
                <td colspan="48" class="no-records-cstm no-records-msg" style="margin-left:-36%">
                    No records found
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" id="footer">
            <label id="footer" class="footer" style="background: #fff !important;">Total:</label>
            <input class="footer-input-width" [(ngModel)]="materialTble._totalRecords" [disabled]="true" pInputText
                type="text" />
            &nbsp;&nbsp;
            <label id="footer" class="footer1">Pages Count:</label>
            <input class="footer-input-width" [ngModel]="
            getPageCount(materialTble._totalRecords, pageSize)
          " [disabled]="true" pInputText type="text" />
        </ng-template>
    </p-table>
</div>
<div id="reserve" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-xlg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="preloader" *ngIf="isSpinnerVisibleReserve">
                <div class="loading">
                    <div class="lds-roller">
                        <div></div><div></div> <div></div><div></div><div></div> <div></div><div></div><div></div>
                    </div>
                </div>
            </div>
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="closeMaterial()">&times;</button>
                <h4 class="modal-title" *ngIf="statusId === 1">Reserved Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 2">Issued Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 3">Reserve & Issue Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 4">Unissue Parts</h4>
                <h4 class="modal-title" *ngIf="statusId === 5">Unreserve Parts</h4>
                <p id="clockdiv" class="clockdiv" *ngIf="counter"> Session Expire in {{counter | formatTime}}</p>
            </div>
            <div class="form-row mar-left-15" *ngIf="statusId !== 2 && statusId !== 4 && statusId !== 5">
                <div class="col-md-2">
                    <p-checkbox class="p-checkbox-label-womaterial" name="task" binary="false" 
                        label="Include Alternate PN" (onChange)="resetAlternateParts($event)" [(ngModel)]="isShowAlternatePN">
                    </p-checkbox> 
                </div>
                <div class="col-md-4" style="margin-left:-50px !important">
                    <p-checkbox class="p-checkbox-label-womaterial" name="task" binary="false" label="Include Eq PN"
                        (onChange)="resetEqParts($event)" [(ngModel)]="isShowEqPN"></p-checkbox>
                </div> 
            </div>
            <form #reserveData="ngForm">
                <div class="modal-body" *ngIf="reservedList">
                    <div class="table-responsive pas-table-cstm  poro-table-cstm parts-list-table-align" id="workflow-attributes-block">
                        <div class="tableFixHead">
                        <table class="table table-bordered">
                            <thead> 
                                <tr>
                                    <th class="text-center" colspan="1"></th>
                                    <th *ngIf="isShowAlternatePN  " class="text-center" colspan="1"> </th>
                                    <th *ngIf=" isShowEqPN" class="text-center" colspan="1"> </th>
                                    <th colspan="11" class="text-center"> Materials</th>
                                    <th colspan="2" class="text-center"> Stock</th>
                                    <th class="text-center" colspan="4" ></th>
                                </tr>
                                <tr>
                                    <th class="text-center select-all" style="min-width: 65px;">
                                        Select All
                                        <input type="checkbox" name="isSelectAll" 
                                        [(ngModel)]="isAllow"  (change)="allowAll($event.target.checked)">
                                    </th>
                                    <th *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3) " class="text-center">
                                        Alternate Parts
                                    </th>
                                    <th *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)" class="text-center">
                                        Equivalent Parts
                                    </th>
                                    
                                    
                                    <th class="text-center" style="min-width: 110px;">PN </th>
                                    <th class="text-center" style="min-width: 130px;">Part Description</th>
                                    <th class="text-center" style="min-width: 110px;" *ngIf="(statusId == 2 || statusId == 4 || statusId == 5) && (showAlternateParts ||showEqParts) ">Alt/Equiv</th>
                                    <th class="text-center" style="min-width: 96px;"> Alternate PN For</th>
                                    <th class="text-center"> Cond Type</th>
                                    <th class="text-center width-50"> Stk Type</th>
                                    <th class="text-center width-50" style="width:60px !important">Qty Req</th> 
                                    <th class="text-center width-50" style="width:60px !important">Qty Res</th>
                                    <th class="text-center" style="width:60px !important" >  Qty To Be Reserved</th>
                                    <th class="text-center"style="width:60px !important" >
                                        <span class="font-size-10" *ngIf="statusId == 1 || statusId == 5 ">
                                        {{ statusId != 5 ? 'Qty Actually Reserving' : 'Qty Actually UnReserving'}} </span>
                                        <span class="font-size-10" *ngIf="statusId == 2 || statusId == 4 ">
                                            {{ statusId != 4  ?  'Qty Actually Issuing' : 'Qty Actually UnIssuing'}}
                                        </span>
                                        <span class="font-size-10" *ngIf="statusId == 3"> Qty Actually Resver & Issue</span>
                                    </th>
                                 <th class="text-center" style="width:60px !important"> Qty  Issued   </th>
                                    <th class="text-center" style="width:60px !important" *ngIf="statusId !==2 && statusId !==4"> Qty To Be Issued
                                    </th>
                                    <th class="text-center" style="width:60px !important" *ngIf="statusId === 2  || statusId === 4"> Qty To Be Issued
                                    </th>
                                   <th class="text-center" style="width:60px !important"> Qty on Hand </th>
                                    <th class="text-center width-50" style="width:60px !important"> Qty Avail </th>
                                    <th class="text-center" style="width:60px !important"> Qty on Order </th>
                                    <th class="text-center" style="width: 110px !important;"  *ngIf="statusId === 1 || statusId === 5 ">
                                        {{statusId == 1 ? 'Reserved' : 'UnReserved'  }} Date <span class="clr-red">*</span></th>
                                    <th class="text-center" style="width: 110px !important;"  *ngIf="statusId === 2 || statusId === 3 || statusId === 4">
                                            {{statusId === 2  ? 'Issued'  : 
                                        statusId === 3 ? 'Reserved & Issued'  
                                        : 'UnIssued' 
                                         }}
                                            Date <span class="clr-red">*</span></th>
                                    <th class="text-center" style="width: 110px !important;" *ngIf="statusId === 1 || statusId === 5">
                                        {{statusId === 1 ? 'Reserved' : 'UnReserved'}} By <span class="clr-red">*</span></th>
                                    <th class="text-center" style="width: 110px !important;" *ngIf="statusId === 2 || statusId === 3 || statusId === 4">
                                        {{statusId === 2  ? 'Issued' : statusId === 3 ? 'Reserved & Issued'  :'UnIssued'  }}
                                        By <span class="clr-red">*</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let x of reservedList; let i=index;" >
                                <tr>
                                    <td class="text-center">
                                      <input type="checkbox" name="isParentSelected{{i}}" *ngIf="(statusId === 1 || statusId === 5)"
                                            [(ngModel)]="x.isParentSelected" (change)="selectedParts(x,$event)" [disabled]="x.quantityReserved==0">


                                            <input type="checkbox" name="isParentSelected{{i}}" *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)"
                                            [(ngModel)]="x.isParentSelected" (change)="selectedParts(x,$event)" [disabled]="x.quantityIssued==0">
                                        </td>
                                    <td *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)" class="text-center">
                                       <input type="checkbox" name="showAlternateParts{{i}}" 
                                            (ngModelChange)="showAlternateParts($event , x.woReservedIssuedAltParts)"
                                            [(ngModel)]="x.showAlternateParts" >
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)" class="text-center">
                                        <input type="checkbox" name="showEqParts{{i}}"
                                            (ngModelChange)="showEquantParts($event , x.woReservedIssuedEquParts)" 
                                            [(ngModel)]="x.showEqParts">
                                    </td>
                                    <td>{{x.partNumber}}</td>
                                    <td>{{x.partDescription}}</td>
                                    <th *ngIf="(statusId == 2 || statusId == 4 || statusId == 5)"></th>
                                    <td></td>
                                    <td>{{x.condition}}</td>
                                    <td>{{x.stockType}}</td>
                                    <td class="tex_end">
                                        {{x.quantity}}
                                    </td>
                                    <td class="tex_end">
                                        {{x.quantityAlreadyReserved}}
                                    </td>
                                    <td class="tex_end" *ngIf="(statusId === 1 || statusId === 5)">
                                        {{ statusId !=5  ? x.qtyToBeReserved : x.qtyToBeReserved}}
                                    </td>
                                    <td class="tex_end" *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        {{x.qtyToBeReserved}}  
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity{{i}}" [(ngModel)]="x.quantityReserved"  (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,x)" [disabled]="!x.isParentSelected">
                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        <input type="number" name="quantity{{i}}" [(ngModel)]="x.quantityIssued" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,x)" 
                                            [disabled]="!x.isParentSelected">
                                    </td>
                                    <td class="tex_end">
                                        {{x.quantityAlreadyIssued}} 
                                    </td>
                                    <td  class="tex_end">
                                        {{x.qtyToBeIssued}} 
                                    </td>
                                    <td class="tex_end">{{x.quantityOnHand}}</td>
                                    <td class="tex_end">{{x.quantityAvailable}}</td>
                                    <td class="tex_end">{{x.quantityOnOrder}}</td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDate{{i}}"
                                            #reservedDate="ngModel" [required]="x.isParentSelected" [maxDate]="minDateValue"
                                            [(ngModel)]="x.reservedDate" [maxDate]="minDateValue" disabled>
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDate{{i}}"
                                            #issuedDate="ngModel" [(ngModel)]="x.issuedDate" [maxDate]="minDateValue"
                                            [required]="x.isParentSelected" [maxDate]="minDateValue" disabled>
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                       <p-autoComplete field="name"
                                        [(ngModel)]="x.reservedById" 
                                        name="reservedBy{{i}}" #reservedBy="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )" appendTo='body' [baseZIndex]="9999"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"  [required]="x.isParentSelected" [disabled]="!x.isParentSelected">
                                    </p-autoComplete>
                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                       <p-autoComplete field="name" appendTo='body' [baseZIndex]="9999"
                                        [(ngModel)]="x.issuedById"
                                        name="issuedBy{{i}}" #issuedBy="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"  [required]="x.isParentSelected" [disabled]="!x.isParentSelected">
                                    </p-autoComplete>

                                    </td> 
                                </tr>
                                <ng-container *ngIf="x.showAlternateParts==true" >
                                <tr *ngFor="let b of x.woReservedIssuedAltParts; let y=index;">
                                    <td class="text-center">
                                        <input type="checkbox" [(ngModel)]="b.isChildSelected"
                                            name="isChildSelected{{y}}" (change)="selectedParts(b,$event)">
                                    </td>
                                    <td  *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td>{{b.altPartNumber}}</td>
                                    <td>{{b.altPartDescription}}</td>
                                    <td  *ngIf="statusId == 2 || statusId == 4 || statusId == 5">
                                        <span>Alternative</span>
                                    </td>
                                    <td>{{b.parentPartNo}}</td>


                                    <td>{{b.condition}}</td>
                                    <td>{{b.stockType}}</td>
                                    <td class="tex_end">
                                        {{b.quantity}}
                                    </td>
                                    <td class="tex_end"> {{b.quantityAlreadyReserved}}</td> 
                                   <td class="tex_end">
                                        {{b.qtyToBeReserved}}   
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity1_{{y}}" [(ngModel)]="b.quantityReserved" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,b)" (input)="childPartValidate($event.target.value, b,1)"
                                            [disabled]="!b.isChildSelected">

                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">

                                        <input type="number" name="quantity2_{{y}}" [(ngModel)]="b.quantityIssued" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,b)"
                                            (input)="childPartValidate($event.target.value, b,1)"
                                            [disabled]="!b.isChildSelected">
                                    </td>
                                    <td class="tex_end">{{b.quantityAlreadyIssued}}</td>
                                    <td class="tex_end">{{b.qtyToBeIssued}}</td>
                                    <td class="tex_end">
                                        {{b.quantityOnHand}}
                                   </td>
                                    <td class="tex_end">
                                        {{b.quantityAvailable}}
                                    </td>
                                    <td class="tex_end">
                                        {{b.quantityOnOrder}}
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDateAlt{{y}}"
                                            #reservedDateAlt="ngModel" [required]="b.isChildSelected" disabled
                                            [(ngModel)]="b.reservedDate"></p-calendar>
                                     </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDateAlt{{y}}"
                                            #issuedDateAlt="ngModel" [(ngModel)]="b.issuedDate" disabled
                                            [required]="b.isChildSelected">
                                        </p-calendar>

                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                        <p-autoComplete field="name"
                                       [(ngModel)]="b.reservedById"
                                       name="reservedByAlt{{y}}" #reservedByAlt="ngModel"
                                        errorMessage="Records not found" [forceSelection]="true"
                                        [dropdown]="true" [suggestions]="employeeList"
                                        (completeMethod)="filterEmployee($event)"
                                        (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )" appendTo='body' [baseZIndex]="9999"
                                        [size]="30" [minLength]="1" [dropdown]="true"
                                        class="p-autoComplete-ctsm"   [required]="b.isChildSelected"  [disabled]="!b.isChildSelected">
                                    </p-autoComplete>


                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                        <p-autoComplete field="name"
                                        [(ngModel)]="b.issuedById"
                                        name="issuedByAlt{{y}}" #issuedByAlt="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"  appendTo='body' [baseZIndex]="9999"  [required]="b.isChildSelected"  [disabled]="!b.isChildSelected">
                                     </p-autoComplete>

                                    </td>
                                </tr>
                                </ng-container>
                                <ng-container *ngIf="x.showEqParts==true" >
                                <tr *ngFor="let c of x.woReservedIssuedEquParts; let z=index; ">
                                    <td class="text-center">
                                        <input type="checkbox" [(ngModel)]="c.isChildSelected"
                                            name="isChildSelected{{z}}" (change)="selectedParts(c,$event)">
                                    </td>
                                    <td  *ngIf="isShowAlternatePN && (statusId == 1 || statusId == 3)">
                                    </td>
                                    <td *ngIf="isShowEqPN && (statusId == 1 || statusId == 3)">
                                    </td>
 <td  *ngIf="statusId == 2 || statusId == 4 || statusId == 5">
                                        <span>Equivalent</span>
                                     </td>
                                    <td>{{c.equPartNumber}}</td>
                                    <td>{{c.equPartDescription}}</td>
                                    <td>{{c.parentPartNo}}</td>
                                    <td>{{c.condition}}</td>
                                    <td>{{c.stockType}}</td>
                                    <td class="tex_end">
                                        {{c.quantity}}
                                    </td>
                                    <td class="tex_end">{{c.quantityAlreadyReserved}}</td>
                                   <td class="tex_end">
                                        {{c.qtyToBeReserved}}  
                                    </td>
                                    <td *ngIf="(statusId === 1 || statusId === 5)">
                                        <input type="number" name="quantity11_{{z}}" [(ngModel)]="c.quantityReserved" (keypress)="restrictMinus($event)"
                                            (keyup)="validatePartsQuantity($event,c)" (input)="childPartValidate($event.target.value, c,2)"
                                            [disabled]="!c.isChildSelected">
                                    </td>
                                    <td *ngIf="(statusId === 2 || statusId === 3 || statusId === 4)">
                                        <input type="number" name="quantity22_{{z}}" [(ngModel)]="c.quantityIssued"
                                            (keyup)="validatePartsQuantity($event,c)" (keypress)="restrictMinus($event)"
                                             (input)="childPartValidate($event.target.value, c,2)"
                                            [disabled]="!c.isChildSelected">
                                    </td>
                                    <td class="tex_end">{{c.quantityAlreadyIssued}}</td>
                                  <td class="tex_end">{{c.qtyToBeIssued}}</td>
                                    <td class="tex_end">
                                        {{c.quantityOnHand}}
                                    </td>
                                    <td class="tex_end">
                                        {{c.quantityAvailable}}
                                    </td>
                                    <td class="tex_end">
                                        {{c.quantityOnOrder}}
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId != 3 && statusId != 4">
                                        <p-calendar [showIcon]="true" class="calender-cstm" name="reservedDateEq{{i}}"
                                            #reservedDateEq="ngModel" [required]="c.isChildSelected" [maxDate]="minDateValue" disabled appendTo='body' [baseZIndex]="9999"
                                            [(ngModel)]="c.reservedDate"></p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 1 &&  statusId != 5 ">
                                       <p-calendar [showIcon]="true" class="calender-cstm" name="issuedDateEq{{z}}" appendTo="body"
                                            #issuedDateEq="ngModel" [(ngModel)]="c.issuedDate" [maxDate]="minDateValue" disabled appendTo='body' [baseZIndex]="9999"
                                            [required]="c.isChildSelected"  >
                                        </p-calendar>
                                    </td>
                                    <td *ngIf="statusId != 2 && statusId  != 3 && statusId != 4">
                                        <p-autoComplete field="name"
                                        [(ngModel)]="c.reservedById"
                                        name="reservedByEq{{z}}" #reservedByEq="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"appendTo='body' [baseZIndex]="9999"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"  [required]="c.isChildSelected"  [disabled]="!c.isChildSelected">
                                     </p-autoComplete>
                                    </td>
                                    <td *ngIf="statusId != 1 && statusId != 5 ">
                                      <p-autoComplete field="name" appendTo='body' [baseZIndex]="9999"
                                        [(ngModel)]="c.issuedById"
                                        name="issuedByEq{{z}}" #issuedByEq="ngModel"
                                         errorMessage="Records not found" [forceSelection]="true"
                                         [dropdown]="true" [suggestions]="employeeList"
                                         (completeMethod)="filterEmployee($event)"
                                         (onClear)="clearautoCompleteInput(workOrderGeneralInformation, 'employeeId' )"
                                         [size]="30" [minLength]="1" [dropdown]="true"
                                         class="p-autoComplete-ctsm"   [required]="c.isChildSelected"  [disabled]="!c.isChildSelected">
                                     </p-autoComplete> 
                                    </td>
                                </tr>
                            </ng-container>
                        </ng-container> 
                            <tr *ngIf="reservedList && reservedList.length ==0">
                                <td colspan="18" class="no-records-msg no-records-cstm">
                                    No records found
                                </td>
                            </tr> 
                            </tbody>
                        </table>
                        </div>
                        <div style="float:right">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <!-- || checkActiveStatus -->
                    <button class="btn btn-primary" data-dismiss="modal" (click)="saveRIPart()"
                        [disabled]="!savebutonDisabled">
                    <span *ngIf="statusId === 1">Reserve</span>
                    <span *ngIf="statusId === 2">Issue</span>
                    <span *ngIf="statusId === 3">Reserve & Issue</span>
                    <span *ngIf="statusId === 4"> Unissue</span>
                    <span *ngIf="statusId === 5">Unreserve</span>
                    </button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeMaterial()">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>
<ng-template #timerAlertNotfi let-c="close" let-d="dismiss">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" (click)="dismissTimerAlert()">&times;</button>
      <h4 class="modal-title">Confirmation</h4>
    </div>
    <div class="modal-body">
      <h6 class="text-center">
        your session getting timeout do you want to reset the time
      </h6>
    </div>
    <div class="modal-footer">
  
      <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="dismissTimerAlert()">No</button>
      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="actionTimerReset()">Yes</button>
    </div>
  </ng-template>
  <ng-template #tabRedirectConfirmationModal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="dismissModel()"
      >
        &times;
      </button>
      <h4 class="modal-title">Confirmation</h4>
    </div>
    <div class="modal-body">
      <h6 class="text-center">
Do you  to  create new Sub Work Order  or Add to existing Work Order ?
      </h6>
    </div>
    <div class="modal-footer">
      <button  type="button"  class="btn btn-danger" data-target="#existingSubWo" data-toggle="modal" data-dismiss="modal"   (click)="addToExistingSubWo()">
        Add to Existing Record
      </button>
      <button
        type="button"
        class="btn btn-primary" data-dismiss="modal" (click)="createNewSubWo()">
        Create New </button>
    </div>
  </ng-template>
  <div id="existingSubWo" class="modal fade" role="dialog" data-backdrop="static" >
    <div class="modal-dialog modal-xlg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Sub Work Order List</h4>
            </div>
            <div class="modal-body" *ngIf="subWoRecord && subWoRecord.workOrderMaterialsId !=0 && viewSubWolist==true">
                <app-sub-work-orderlist [workOrderId]="workOrderId" [mpnId]="mpnId" [forSubWorkOrder]="true" [workOrderMaterialsId]="subWoRecord.workOrderMaterialsId" >
                </app-sub-work-orderlist>
           </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger btn-height" data-dismiss="modal" (click)="dismissModel2()">Close</button>
            </div>
            </div> 
    </div>
  </div> 
  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        
        <h4 class="modal-title">Are You Sure Want to Delete?</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
   </button>
    </div> 
    <div class="modal-body">
        <strong>
            PN:
            <span class="new-label">{{currentRow.partNumber}}</span>
        </strong>
    </div>  
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="delete()">Yes</button>
        <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
    </div>
  </ng-template>

  <div id="stockAudit" class="modal fade" role="dialog" data-backdrop="static"
  data-keyboard="false">
  <div class="modal-dialog modal-xlg">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">History of Stockline Adjustment</h4>
      </div>
      <div class="modal-body">
        <div class="table-responsive stockline-audit">
          <div class="tableFixHead">
          <table class="table table-bordered" *ngIf="auditHistory.length > 0; else noDatavailable">
            <thead>
                <tr>
                    <th colspan="16">General</th>
                    <th colspan="6">Expiration</th>
                    <th colspan="3">Application</th>
                    <th colspan="4">Application</th>
                    <th colspan="12">Acquisition</th>
                    <th colspan="6">Traceability</th>
                    <th colspan="2">Export/International</th>
                    <th colspan="9">Inventory</th>
                    <th colspan="5">Location</th>
                    <th colspan="3">Lot & Consignment</th>
                    <th colspan="6">Warnings</th>
                    <th colspan="4">Management Structure</th>
                    <th colspan="9">Certification, Tag and Inspection</th>
                    <th colspan="1">Other</th>
                    <th colspan="1">Memo</th>
                    <th colspan="13">Time Life</th>
                    <th colspan="5"></th>
                </tr>
              <tr>
                <th>Is Customer Stock</th>
                <th>PN <span class="clr-red">*</span></th>
                <th>PN Description</th>
                <th>Revised PN</th>
                <th>OEM</th>
                <th>PMA</th>
                <th>DER</th>
                <th>Item Group</th>
                <th>Cond <span class="clr-red">*</span></th>
                <th>Is Serialized</th>
                <th>Serial Num</th>
                <th>Stockline Num</th>
                <th>NSN</th>
                <th>ESN</th>
                <th>Control Num</th>
                <th>Control ID Num</th>
                <th>Days Since Received</th>
                <th>Days Since Mfg</th>
                <th>Days Since Tagged</th>
                <th>Days Opened</th>
                <th>Shelf Life</th>
                <th>Shelf Life Exp Date</th>
                <th>NHA</th>
                <th>TLA</th>
                <th>Aircraft Tail Num</th>
                <th>Manufacturer <span class="clr-red">*</span></th>
                <th>Mfg. Lot Num</th>
                <th>Mfg. Batch Num</th>
                <th>Mfg. Date</th>
                <th>Acquisition Type</th>
                <th>Order Date</th>
                <th>Entry Date</th>
                <th>Expiration Date</th>
                <th>Vendor</th>
                <th>PO Num</th>
                <th>RO Num</th>
                <th>Requestor</th>
                <th>Received Date <span class="clr-red">*</span></th>
                <th>Receiver Num <span class="clr-red">*</span></th>
                <th>Reconciliation Num</th>
                <th>WO Num</th>
                <th>Obtain From Type</th>
                <th>Obtain From</th>
                <th>Owner Type</th>
                <th>Owner</th>
                <th>Traceable To Type</th>
                <th>Traceable To</th>
                <th>ECCN</th>
                <th>ITAR</th>
                <th>Qty On Hand <span class="clr-red">*</span></th>
                <th>Qty Reserved</th>
                <th>Qty Issued</th>
                <th>Qty Avail</th>
                <th>PO Unit Cost</th>
                <th>RO Unit Cost</th>
                <th>Unit Sale Price</th>
                <th>Core Cost/Unit</th>
                <th>GL Account</th>
                <th>Site <span class="clr-red">*</span></th>
                <th>Warehouse</th>
                <th>Location</th>
                <th>Shelf</th>
                <th>Bin</th>
                <th>Lot Num</th>
                <th>Lot Description</th>
                <th>Lot Cost</th>
                <th>Black List</th>
                <th>Black List Reason</th>
                <th>Accident</th>
                <th>Accident Reason</th>
                <th>Incident</th>
                <th>Incident Reason</th>
                <th colspan="4"></th>
                <th>Part Cert Num</th>
                <th>Certify By</th>
                <th>Certified Date</th>
                <th>Certify Due Date</th>
                <th>Tag Type</th>
                <th>Tag Num</th>
                <th>Tag Date</th>
                <th>Inspection By</th>
                <th>Inspection Date</th>
                <th>Integration With</th>
                <th>Memo</th>
                <th>Cycles Remaining</th>
                <th>Cycles Since New</th>
                <th>Cycles Since Ovh</th>
                <th>Cycles Since Insp</th>
                <th>Cycles Since Repair</th>
                <th>Time Remaining</th>
                <th>Time Since New</th>
                <th>Time Since Ovh</th>
                <th>Time Since Insp</th>
                <th>Time Since Repair</th>
                <th>Last Since New</th>
                <th>Last Since Ovh</th>
                <th>Last Since Insp</th>
                <th>Is Active</th>
                <th>Created Date</th>
                <th>Created By</th>
                <th>Updated Date</th>
                <th>Updated By</th>                
              </tr>
            </thead>
            <tbody *ngIf="auditHistory.length > 0">
              <tr *ngFor="let audit of auditHistory; let i = index">
                <td style="text-align: center;"><p> <input type="checkbox" name="isCustomerStock" [(ngModel)]="audit.isCustomerStock" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'partNumber', audit.partNumber) ? 'black' : 'red'}">{{ audit.partNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'partDescription', audit.partDescription) ? 'black' : 'red'}">{{ audit.partDescription }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'revisedPart', audit.revisedPart) ? 'black' : 'red'}">{{ audit.revisedPart }}</td>
                <td style="text-align: center;"><p> <input type="checkbox" name="oem" [(ngModel)]="audit.oem" disabled></p></td>
                <td style="text-align: center;"><p> <input type="checkbox" name="isPMA" [(ngModel)]="audit.isPMA" disabled></p></td>
                <td style="text-align: center;"><p> <input type="checkbox" name="isDER" [(ngModel)]="audit.isDER" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'itemGroup', audit.itemGroup) ? 'black' : 'red'}">{{ audit.itemGroup }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'condition', audit.condition) ? 'black' : 'red'}">{{ audit.condition }}</td>
                <td style="text-align: center;"><p> <input type="checkbox" name="isSerialized" [(ngModel)]="audit.isSerialized" disabled></p></td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'serialNumber', audit.serialNumber) ? 'black' : 'red'}">{{ audit.serialNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'stockLineNumber', audit.stockLineNumber) ? 'black' : 'red'}">{{ audit.stockLineNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'nationalStockNumber', audit.nationalStockNumber) ? 'black' : 'red'}">{{ audit.nationalStockNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'engineSerialNumber', audit.engineSerialNumber) ? 'black' : 'red'}">{{ audit.engineSerialNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'controlNumber', audit.controlNumber) ? 'black' : 'red'}">{{ audit.controlNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'idNumber', audit.idNumber) ? 'black' : 'red'}">{{ audit.idNumber }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'daysReceived', audit.daysReceived) ? 'black' : 'red'}">{{ audit.daysReceived }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'manufacturingDays', audit.manufacturingDays) ? 'black' : 'red'}">{{ audit.manufacturingDays }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'tagDays', audit.tagDays) ? 'black' : 'red'}">{{ audit.tagDays }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'openDays', audit.openDays) ? 'black' : 'red'}">{{ audit.openDays }}</td>
                <td style="text-align: center;"><p> <input type="checkbox" name="shelfLife" [(ngModel)]="audit.shelfLife" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'shelfLifeExpirationDate', audit.shelfLifeExpirationDate) ? 'black' : 'red'}">{{ audit.shelfLifeExpirationDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'nha', audit.nha) ? 'black' : 'red'}">{{ audit.nha }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'tla', audit.tla) ? 'black' : 'red'}">{{ audit.tla }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'aircraftTailNumber', audit.aircraftTailNumber) ? 'black' : 'red'}">{{ audit.aircraftTailNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'manufacturer', audit.manufacturer) ? 'black' : 'red'}">{{ audit.manufacturer }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'manufacturerLotNumber', audit.manufacturerLotNumber) ? 'black' : 'red'}">{{ audit.manufacturerLotNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'manufacturingBatchNumber', audit.manufacturingBatchNumber) ? 'black' : 'red'}">{{ audit.manufacturingBatchNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'manufacturingDate', audit.manufacturingDate) ? 'black' : 'red'}">{{ audit.manufacturingDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'acquistionTypeName', audit.acquistionTypeName) ? 'black' : 'red'}">{{ audit.acquistionTypeName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'orderDate', audit.orderDate) ? 'black' : 'red'}">{{ audit.orderDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'entryDate', audit.entryDate) ? 'black' : 'red'}">{{ audit.entryDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'expirationDate', audit.expirationDate) ? 'black' : 'red'}">{{ audit.expirationDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'vendorName', audit.vendorName) ? 'black' : 'red'}">{{ audit.vendorName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'purchaseOrderNumber', audit.purchaseOrderNumber) ? 'black' : 'red'}">{{ audit.purchaseOrderNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'repairOrderNumber', audit.repairOrderNumber) ? 'black' : 'red'}">{{ audit.repairOrderNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'requestedByName', audit.requestedByName) ? 'black' : 'red'}">{{ audit.requestedByName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'receivedDate', audit.receivedDate) ? 'black' : 'red'}">{{ audit.receivedDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'receiver', audit.receiver) ? 'black' : 'red'}">{{ audit.receiver }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'reconciliationNumber', audit.reconciliationNumber) ? 'black' : 'red'}">{{ audit.reconciliationNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'workOrderNumber', audit.workOrderNumber) ? 'black' : 'red'}">{{ audit.workOrderNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'obtainFromTypeName', audit.obtainFromTypeName) ? 'black' : 'red'}">{{ audit.obtainFromTypeName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'obtainFromName', audit.obtainFromName) ? 'black' : 'red'}">{{ audit.obtainFromName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'ownerTypeName', audit.ownerTypeName) ? 'black' : 'red'}">{{ audit.ownerTypeName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'ownerName', audit.ownerName) ? 'black' : 'red'}">{{ audit.ownerName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'traceableToTypeName', audit.traceableToTypeName) ? 'black' : 'red'}">{{ audit.traceableToTypeName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'tracableToName', audit.tracableToName) ? 'black' : 'red'}">{{ audit.tracableToName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'exportECCN', audit.exportECCN) ? 'black' : 'red'}">{{ audit.exportECCN }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'itarNumber', audit.itarNumber) ? 'black' : 'red'}">{{ audit.itarNumber }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'quantityOnHand', audit.quantityOnHand) ? 'black' : 'red'}">{{ audit.quantityOnHand }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'quantityReserved', audit.quantityReserved) ? 'black' : 'red'}">{{ audit.quantityReserved }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'quantityIssued', audit.quantityIssued) ? 'black' : 'red'}">{{ audit.quantityIssued }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'quantityAvailable', audit.quantityAvailable) ? 'black' : 'red'}">{{ audit.quantityAvailable }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'purchaseOrderUnitCost', audit.purchaseOrderUnitCost) ? 'black' : 'red'}">{{ audit.purchaseOrderUnitCost }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'repairOrderUnitCost', audit.repairOrderUnitCost) ? 'black' : 'red'}">{{ audit.repairOrderUnitCost }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'unitSalesPrice', audit.unitSalesPrice) ? 'black' : 'red'}">{{ audit.unitSalesPrice }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'coreUnitCost', audit.coreUnitCost) ? 'black' : 'red'}">{{ audit.coreUnitCost }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'glAccountName', audit.glAccountName) ? 'black' : 'red'}">{{ audit.glAccountName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'siteName', audit.siteName) ? 'black' : 'red'}">{{ audit.siteName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'warehouse', audit.warehouse) ? 'black' : 'red'}">{{ audit.warehouse }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'location', audit.location) ? 'black' : 'red'}">{{ audit.location }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'shelfName', audit.shelfName) ? 'black' : 'red'}">{{ audit.shelfName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'binName', audit.binName) ? 'black' : 'red'}">{{ audit.binName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'lotNum', audit.lotNum) ? 'black' : 'red'}">{{ audit.lotNum }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'lotDescription', audit.lotDescription) ? 'black' : 'red'}">{{ audit.lotDescription }}</td>
                <td class="text-right" [ngStyle]="{color: getColorCodeForHistory(i, 'lotCost', audit.lotCost) ? 'black' : 'red'}">{{ audit.lotCost }}</td>
                <td style="text-align: center;"><p> <input type="checkbox" name="blackListed" [(ngModel)]="audit.blackListed" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'blackListedReason', audit.blackListedReason) ? 'black' : 'red'}">
                    <p class="p_editor" [innerHTML]="audit.blackListedReason"></p>    
                </td>
                <td style="text-align: center;"><p> <input type="checkbox" name="accident" [(ngModel)]="audit.accident" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'accidentReason', audit.accidentReason) ? 'black' : 'red'}">
                    <p class="p_editor" [innerHTML]="audit.accidentReason"></p>    
                </td>
                <td style="text-align: center;"><p> <input type="checkbox" name="incident" [(ngModel)]="audit.incident" disabled></p></td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'incidentReason', audit.incidentReason) ? 'black' : 'red'}">
                    <p class="p_editor" [innerHTML]="audit.incidentReason"></p>    
                </td>
                <td class="min-w-100" [ngStyle]="{color: getColorCodeForHistory(i, 'companyName', audit.companyName) ? 'black' : 'red'}">{{ audit.companyName }}</td>
                <td class="min-w-100" [ngStyle]="{color: getColorCodeForHistory(i, 'buName', audit.buName) ? 'black' : 'red'}">{{ audit.buName }}</td>
                <td class="min-w-100" [ngStyle]="{color: getColorCodeForHistory(i, 'divName', audit.divName) ? 'black' : 'red'}">{{ audit.divName }}</td>
                <td class="min-w-100" [ngStyle]="{color: getColorCodeForHistory(i, 'deptName', audit.deptName) ? 'black' : 'red'}">{{ audit.deptName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'partCertificationNumber', audit.partCertificationNumber) ? 'black' : 'red'}">{{ audit.partCertificationNumber }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'certifiedByName', audit.certifiedByName) ? 'black' : 'red'}">{{ audit.certifiedByName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'certifiedDate', audit.certifiedDate) ? 'black' : 'red'}">{{ audit.certifiedDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'certifiedDueDate', audit.certifiedDueDate) ? 'black' : 'red'}">{{ audit.certifiedDueDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'tagTypeName', audit.tagTypeName) ? 'black' : 'red'}">{{ audit.tagTypeName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'tagNum', audit.tagNum) ? 'black' : 'red'}">{{ audit.tagNum }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'tagDate', audit.tagDate) ? 'black' : 'red'}">{{ audit.tagDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'inspectionByName', audit.inspectionByName) ? 'black' : 'red'}">{{ audit.inspectionByName }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'inspectionDate', audit.inspectionDate) ? 'black' : 'red'}">{{ audit.inspectionDate | date: 'MM/dd/yyyy' }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'integrationPortal', audit.integrationPortal) ? 'black' : 'red'}">{{ audit.integrationPortal }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'memo', audit.memo) ? 'black' : 'red'}">
                    <p class="p_editor" [innerHTML]="audit.memo"></p>
                </td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'cyclesRemaining', audit.cyclesRemaining) ? 'black' : 'red'}">{{ audit.cyclesRemaining }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'cyclesSinceNew', audit.cyclesSinceNew) ? 'black' : 'red'}">{{ audit.cyclesSinceNew }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'cyclesSinceOVH', audit.cyclesSinceOVH) ? 'black' : 'red'}">{{ audit.cyclesSinceOVH }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'cyclesSinceInspection', audit.cyclesSinceInspection) ? 'black' : 'red'}">{{ audit.cyclesSinceInspection }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'cyclesSinceRepair', audit.cyclesSinceRepair) ? 'black' : 'red'}">{{ audit.cyclesSinceRepair }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'timeRemaining', audit.timeRemaining) ? 'black' : 'red'}">{{ audit.timeRemaining }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'timeSinceNew', audit.timeSinceNew) ? 'black' : 'red'}">{{ audit.timeSinceNew }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'timeSinceOVH', audit.timeSinceOVH) ? 'black' : 'red'}">{{ audit.timeSinceOVH }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'timeSinceInspection', audit.timeSinceInspection) ? 'black' : 'red'}">{{ audit.timeSinceInspection }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'timeSinceRepair', audit.timeSinceRepair) ? 'black' : 'red'}">{{ audit.timeSinceRepair }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'lastSinceNew', audit.lastSinceNew) ? 'black' : 'red'}">{{ audit.lastSinceNew }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'lastSinceOVH', audit.lastSinceOVH) ? 'black' : 'red'}">{{ audit.lastSinceOVH }}</td>
                <td [ngStyle]="{color: getColorCodeForHistory(i, 'lastSinceInspection', audit.lastSinceInspection) ? 'black' : 'red'}">{{ audit.lastSinceInspection }}</td>
                <td style="background-color: #fff !important; text-align: center;"><p > <input type="checkbox" name="isActive" [(ngModel)]="audit.isActive" disabled></p></td>
                
                <td>{{ audit.createdDate | date: 'MM/dd/yyyy h:mm a' }}</td>
                <td>{{ audit.createdBy }}</td>                
                <td>{{ audit.updatedDate | date: 'MM/dd/yyyy h:mm a' }}</td>
                <td>{{ audit.updatedBy }}</td>
              </tr>
            </tbody>
          </table>
          </div>
          <ng-template #noDatavailable>
            <div class="text-center">
              <h4 style="color: #ff5663;">No History Found</h4>
            </div>
          </ng-template>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
  <div class="preloader" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>