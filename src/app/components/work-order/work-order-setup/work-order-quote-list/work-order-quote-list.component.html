<div class="card new-card">
    <div class="card-header bg-primary new-card-header">
		<div class="row">
		  <div class="col">
			<h4 class="new-card-heading">Work Order Quote List</h4>
		  </div>
		  <div>
			<button
			  type="button"
			  class="btn-sm new-btn-primary"
              [routerLink]="['/workordersmodule/workorderspages/app-work-order-quote']"
              >
			  Add Work Order Quote
			</button>
		  </div>
		</div>
      </div>
      <div class="card-body new-card-body">
    <p-table #dt
    class="p-table-cstm"
    [value]="woQuoteList"
    [first]="0"
    [rows]="pageSize"
    [paginator]="true"
    [pageLinks]="3"
    [rowsPerPageOptions]="[10, 20, 50, 100]"
    [columns]="selectedColumns"
    selectionMode="multiple"
    expandableRows="true"
    rowExpandMode="single"
    [lazy]="true"
    (onLazyLoad)="loadData($event)"
    [resizableColumns]="true"
    [reorderableColumns]="true"
    [totalRecords]="totalRecords"
    [scrollable]="true"
    [metaKeySelection]="true"
    scrollHeight="450px">
    <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
            <col *ngFor="let col of columns" style="width:120px">
        </colgroup>
      </ng-template>
    <ng-template pTemplate="header" let-columns>
        <tr>

            <th *ngFor="let col of columns" pResizableColumn pReorderableColumn
            [pSortableColumn]="col.field" style="text-align:center;">
                {{ col.header }}
                <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
            <th style="width:80px;position:sticky" *ngIf="selectedColumns.length > 0">
                Actions
            </th>
        </tr>
        <tr>
            <th style="width:120px" *ngFor="let col of columns" [ngSwitch]="col.field">
                <input *ngIf="col.field !== 'openDate' 
                && col.field !== 'customerRequestDateType'
                && col.field !== 'promisedDateType'
                && col.field !== 'estimatedShipDateType'
                && col.field !== 'estimatedCompletionDateType'" 
                style="width:100%;" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains'); ">
                <input type="date" *ngIf="col.field == 'openDate'" name="openDate" style="width:100%;" (change)="dt.filter($event.target.value, col.field, 'contains')">
                <input type="date"  *ngIf="col.field == 'customerRequestDateType'" name="customerRequestDate" style="width:100%;" (change)="dt.filter($event.target.value, col.field, 'contains')">
                <input type="date"  *ngIf="col.field == 'promisedDateType'" name="promisedDate" style="width:100%;" (change)="dt.filter($event.target.value, col.field, 'contains')">
                <input type="date" *ngIf="col.field == 'estimatedShipDateType'" name="estimatedShipDate" style="width:100%;" (change)="dt.filter($event.target.value, col.field, 'contains')">
                <input type="date"  *ngIf="col.field == 'estimatedCompletionDateType'" name="estimatedCompletionDate" style="width:100%;" (change)="dt.filter($event.target.value, col.field, 'contains')">
            </th>
            <th style="width:80px;position:sticky"></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body"
                     let-rowData
                     let-rowIndex="rowIndex"
                     let-expanded="expanded"
                     let-columns="columns">

          
            <tr class="ui-widget-header">
                <!--  <td>
                   <a [pRowToggler]="rowData">
                     <i
                       (click)="getWorkOrderPartListByWorkOrderId(rowData)"
                       [ngClass]="
                         expanded
                           ? 'fa fa-fw fa-chevron-circle-down'
                           : 'fa fa-fw fa-chevron-circle-right'
                       "
                     ></i>
                     <span> {{ rowData.workOrderNum }}</span>
                   </a>

                 </td> -->
                 <!-- [ngStyle]="{'color': convertDate(col.field , rowData)   == 'Multiple' ? 'green' : 'red'  }" -->
                <td *ngFor="let col of columns" style="text-overflow: ellipsis; overflow: hidden; " [matTooltip]="mouseOverData(col.field,  rowData)" matTooltipPosition="above" 
                [ngStyle]="{'color': getColorCodeForMultiple(rowData)}"
                
                > 
                {{convertDate(col.field , rowData)}}
                    
                </td>

                <td style="width:80px" *ngIf="selectedColumns.length > 0">
                    <span data-toggle="modal" data-target="#viewWorkOrder"><a class="btn nobg btn-view-cstm" (click)="view(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>
                    <span><a class="btn nobg btn-edit-cstm" (click)="edit(rowData)" matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>
                </td>
            </tr>
            
        </ng-template>
  </p-table>
</div>
</div>
<div id="viewWorkOrder" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="closeView.emit(false)">
                    &times;
                </button>
                <h4 class="modal-title">Work Order Quote View</h4>
            </div>
            <div *ngIf="woQuoteViewData">
                    <app-work-order-quote [workorderid]="woQuoteViewData.workOrderId" isView="true"></app-work-order-quote>
                <!-- <app-work-order-quote isView="true" isQuoteListView="true" [quoteListViewData]="woQuoteViewData"></app-work-order-quote> -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeView.emit(false)">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>