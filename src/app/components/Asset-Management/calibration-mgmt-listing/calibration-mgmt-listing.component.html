<div class="x_content">
  <p-breadcrumb [model]="breadcrumbs" [home]="home"></p-breadcrumb>
            <div class="card new-card">
                          <div class="header ">
                            <div class="row">
                              <div class="col">
                                <h4 class="header-name">Calibration Mgmt List</h4>
                              </div>
                              <div>
                                <button
                                  type="button"
                                  class="btn-sm header-button"
                                  (click)="navigateTogeneralInfo()"                                
                                >
                                Add Calibration 
                                </button>
                              </div>
                            </div>
                          </div>
                          <div class="card-body new-card-body">
                     
                      <p-table #dt class="rpo-table-cstm rro-table-cstm" [value]="allcalibrationinfo"
                               [metaKeySelection]="true"
                               [(first)]="pageNumber"
                               [rows]="pageSize"
                               [paginator]="true"
                               [pageLinks]="3"
                               [rowsPerPageOptions]="[10,20,50,100]"
                               [columns]="selectedColumns"
                               selectionMode="multiple"
                               [(selection)]="selectedRows"
                               [metaKeySelection]="true"
                               [resizableColumns]="true"
                               [reorderableColumns]="true"
                               [scrollable]="true"
                               [totalRecords]="totalRecords"
                               scrollHeight="450px"
                               (onLazyLoad)="onDataLoad($event)" [lazy]="true">
                          <ng-template pTemplate="caption">
                       
                              <div class="row">
                                  <div class="col">
                                      <p-multiSelect [maxSelectedLabels]="2"
                                                 [options]="cols"
                                                 optionLabel="header"
                                                 [(ngModel)]="selectedColumns"
                                                class="multiselect-field"
                                                 selectedItemsLabel="{0} columns selected"
                                                 defaultLabel="Choose Columns">
                                  </p-multiSelect>
                              </div>
                              <div class="col">
                                  <div class="global-search-field inner-addon right-addon inline-block">
                                  <i class="fa fa-search"></i>
                                  <input type="text" pInputText size="50"
                                   class="form-control"
                                  (input)="dt.filterGlobal($event.target.value, 'contains')"
                                  placeholder="Filter"  />
                               </div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col">
                              <button type="button" class="btn btn-primary exports-button" matTooltip="Download Data" matTooltipPosition="above"
                              pButton icon="fa-download" iconPos="left" label="Export All Data"
                                data-toggle="modal"
                              (click)="selectedOnly = false; targetData = dt;" 
                              data-target="#downloadConfirmation"></button>
                               <button type="button" class="btn btn-primary exports-button" matTooltip="Download Selected Data" matTooltipPosition="above" matTooltip="Download Selected Data" matTooltipPosition="above"
                              pButton icon="fa-download" iconPos="left"
                               label="Export Selected Data" (click)="dt.exportCSV({selectionOnly:true})"
                              ></button>
                              <!-- data-toggle="modal"
                              data-target="#downloadConfirmation"
                              (click)="selectedOnly = true; targetData = dt;" -->
                             
                             </div>
                              <div class="col">
                                  <div class="">
                                    <div
                                      class="col"
                                      style="width: 370px; float: right; padding-top: 3px;"
                                    >
                                      <div class="form-group">
                                        <!-- <label class="radiobtn-label new-radio-btn-label">Status:</label> -->
                                      <div
                                          class="pull-left radio-buttons-align"
                                        >
                                            <label class="radio-cstm wauto">
                                            <input type="radio" name="EmpStatus" class="form-control" value="Active" (click)="geListByStatus('Active')" [(ngModel)]="currentstatus">
                                            <span class="checkmark"></span>Active
                                            </label>
                                      </div>
                                  <div class="pull-left radio-buttons-align">
                                      <label class="radio-cstm wauto">
                                          <input type="radio" name="EmpStatus" class="form-control" value="InActive" (click)="geListByStatus('InActive')" [(ngModel)]="currentstatus">
                                          <span class="checkmark"></span>In-active
                                      </label>
                                  </div>
                                  <div class="pull-left radio-buttons-align">
                                      <label class="radio-cstm wauto">
                                          <input type="radio" name="EmpStatus" class="form-control" value="ALL" (click)="geListByStatus('ALL')" [(ngModel)]="currentstatus">
                                          <span class="checkmark"></span>All
                                      </label>
                                  </div>
                                  <div class="checkbox-cstm pull-left checkbox-align">
                                      <label class="checkbox-label-align">
                                       
                                        <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent" id="cparent"  (click)="getDeleteListByStatus($event.target.checked)"
                                          />
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                      Show  Deleted List 
                                      </label>
                                  </div> 
                              </div> 
                          </div>
                      </div>
                    </div>
                    </div>
                          </ng-template>
                          <ng-template pTemplate="colgroup" let-columns>
                              <colgroup>
                                  <col *ngFor="let col of columns" class="table-column-width">
                              </colgroup>
                          </ng-template>
                          <ng-template pTemplate="header" let-columns >
                              <tr>
                                  <ng-container *ngFor="let col of columns">
                                      <th class="text-center table-column-width" *ngIf="col.field!='companyName' && col.field!='buName' && col.field!='deptName' && col.field!='divName'" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                                          {{col.header}}
                                          <p-sortIcon [field]="col.field"></p-sortIcon>
                                      </th>
                                      <th class="text-center table-column-width" *ngIf="col.field=='companyName'" colspan="4" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                                          Management Structure
                                      </th>
                                  </ng-container>
                                  <th style="width:150px;position: sticky;" *ngIf="selectedColumns.length> 0">Actions</th>
                              </tr>
                              <tr>
                                  <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">
                                      <!--  -->
                                      <input  *ngIf="col.field != 'createdDate' && col.field != 'updatedDate'" class="table-header-input-width" pInputText type="text" (input)="dt.filter($event.target.value, col.field,'contains')">
                                      <input type="date"   class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'createdDate'"
                                      name="createdDate"  (change)="dateFilterForTable($event.target.value, col.field)" />
<input type="date"  class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'updatedDate'"   name="updatedDate"
                   (change)="dateFilterForTable($event.target.value,col.field)" />
                                  </th>
                                  <th style="width:150px;position: sticky;"></th>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-rowData let-columns="columns" let-asset let-rowIndex="rowIndex">
                              <tr [pSelectableRow]="rowData" pReorderableRowHandle (dblclick)="viewSelectedRowdbl(rowData)" >

                                  <td  *ngFor="let col of columns" class="ui-resizable-column table-column-width"
                                      pReorderableRowHandle>

                                        <ng-container *ngIf="col.field !='calibrationRequiredNew'">
                                          {{
                                              col.field == 'createdDate'
                                                ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a')
                                                : rowData[col.field] && col.field == 'updatedDate'
                                                ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a')
                                                : rowData[col.field] 
                                            }}
                                      </ng-container> 
                                      <ng-container *ngIf="col.field =='calibrationRequiredNew'">
                                          <input type="checkbox" disabled [checked]="rowData[col.field] == 'Yes'"
                                                 style="margin: 0px auto; display: block;" />
                                      </ng-container>
                                  </td>
                                  <td class="action-icons-cstm" style="width:150px;position:sticky" *ngIf="selectedColumns.length> 0">
                                      <div *ngIf="currentDeletedstatus==false">
                                      <p-inputSwitch [(ngModel)]="rowData['isActive']" name="isActive{{ rowIndex }}"   matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}"
                                                         matTooltipPosition="above" (onChange)="toggleIsActive(rowData,$event)"></p-inputSwitch> 
                                                         <span ><a class="btn nobg btn-view-cstm" data-toggle="modal" data-target="#invView" (click)="openView(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>
                                          <span><a class="btn nobg btn-edit-cstm" (click)="openAssetToEdit(rowData)" disabled matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>
                                          <span><a class="btn nobg btn-adjst-cstm" (click)="openAssetToAdjustment(rowData)" matTooltip="Asset Adjustment" matTooltipPosition="above"><i class="fa fa-adjust"></i></a> </span>
                                          <span><a class="btn nobg btn-adjhist-cstm" matTooltip="Asset Adjustment History" matTooltipPosition="above"><i class="fa fa-history"></i></a></span>
                                          <span data-toggle="modal" data-target="#assetInvAudit"><a class="btn nobg btn-delete-cstm" (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a> </span>
                                          <!-- <span><a class="btn nobg btn-delete-cstm" (click)="openDelete(content,rowData)" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></a> </span> -->

                                      </div>
                                      <div *ngIf="currentDeletedstatus==true">
                                          <p-inputSwitch [(ngModel)]="rowData['isActive']" [disabled]="true" name="isActive{{ rowIndex }}"   matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}"
                                          matTooltipPosition="above" (onChange)="toggleIsActive(rowData,$event)"></p-inputSwitch> 
                                          <span><a class="btn nobg btn-view-cstm" data-toggle="modal" data-target="#invView"  (click)="openView(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>
                                          <!-- <span ><a class="btn nobg btn-restore-cstm" (click)="restore(restoreId,rowData);"  matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span> -->
                                          <span data-toggle="modal" data-target="#assetInvAudit"><a class="btn nobg btn-delete-cstm" (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a> </span>
                                      </div>
                               </td> 

                              </tr>
                          </ng-template>
                          <ng-template pTemplate="emptymessage" let-columns>
                              <tr>
                                  <td colspan="21" class="no-records-cstm no-records-msg">
                                      No records found
                                  </td>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="summary" id="footer">
                              <div style="text-align: right;">
                                  <label id="footer" class="footer">Total:</label>
                                  <input class="footer-input-width" [(ngModel)]="totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                  <label id="footer" class="footer1">Pages Count:</label>
                                  <input class="footer-input-width" [(ngModel)]="totalPages" [disabled]="true" pInputText type="text" />
                              </div>
                          </ng-template>
                      </p-table>
      </div>
  </div>
  </div>