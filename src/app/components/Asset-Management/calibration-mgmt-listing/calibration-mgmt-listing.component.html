<div class="x_content">
  <p-breadcrumb [model]="breadcrumbs" [home]="home"></p-breadcrumb>
            <div class="card new-card">
                          <div class="header ">
                            <div class="row">
                              <div class="col">
                                <h4 class="header-name">Calibration Mgmt List</h4>
                              </div>
                   
                              <div>
                                <!-- <button
                                  type="button"
                                  class="btn-sm header-button"
                                  (click)="navigateTogeneralInfo()"                                
                                >
                                Add Calibration 
                                </button> -->
                              </div>
                            </div>
                          </div>
                          <div class="col">
                            <div class="">
                              <div
                                class="col"
                                style="float: left; padding-top: 3px;"
                              >
                                <div class="form-group">
                                <div
                                    class="pull-left radio-buttons-align"
                                  >
                                      <label class="radio-cstm wauto">
                                      <input type="radio" name="Calibrationtype" class="form-control" value="Calibration" (click)="geListBycertifytype('Calibration')" [(ngModel)]="Calibrationtype">
                                      <span class="checkmark"></span>Calibration
                                      </label>
                                </div>
                            <div class="pull-left radio-buttons-align">
                                <label class="radio-cstm wauto">
                                    <input type="radio" name="Calibrationtype" class="form-control" value="Certification" (click)="geListBycertifytype('Certification')" [(ngModel)]="Calibrationtype">
                                    <span class="checkmark"></span>Certification
                                </label>
                            </div>
                            <div class="pull-left radio-buttons-align">
                                <label class="radio-cstm wauto">
                                    <input type="radio" name="Calibrationtype" class="form-control" value="Inspection" (click)="geListBycertifytype('Inspection')" [(ngModel)]="Calibrationtype">
                                    <span class="checkmark"></span> Inspection
                                </label>
                            </div>
                            <div class="pull-left radio-buttons-align">
                                <label class="radio-cstm wauto">
                                    <input type="radio" name="Calibrationtype" class="form-control" value="Verification" (click)="geListBycertifytype('Verification')" [(ngModel)]="Calibrationtype">
                                    <span class="checkmark"></span>Verification
                                </label>
                            </div>
                        </div> 
                    </div>
                </div>
              </div>
                          <div class="card-body new-card-body">
                     
                      <p-table #dt class="rpo-table-cstm rro-table-cstm" [value]="allcalibrationinfo"
                               [metaKeySelection]="true"
                               [(first)]="pageNumber"
                               [rows]="pageSize"
                               [paginator]="true"
                               [pageLinks]="3"
                               [rowsPerPageOptions]="[10,20,50,100]"
                               [columns]="selectedColumns"
                               selectionMode="multiple"
                               [(selection)]="selectedRows"
                               [metaKeySelection]="true"
                               [resizableColumns]="true"
                               [reorderableColumns]="true"
                               [scrollable]="true"
                               [totalRecords]="totalRecords"
                               scrollHeight="450px"
                               (onLazyLoad)="onDataLoad($event)" [lazy]="true">
                          <ng-template pTemplate="caption">
                       
                              <div class="row">
                                  <div class="col">
                                      <p-multiSelect [maxSelectedLabels]="2"
                                                 [options]="cols"
                                                 optionLabel="header"
                                                 [(ngModel)]="selectedColumns"
                                                class="multiselect-field"
                                                 selectedItemsLabel="{0} columns selected"
                                                 defaultLabel="Choose Columns">
                                  </p-multiSelect>
                              </div>
                              <div class="col">
                                  <div class="global-search-field inner-addon right-addon inline-block">
                                  <i class="fa fa-search"></i>
                                  <input type="text" pInputText size="50"
                                   class="form-control"
                                  (input)="dt.filterGlobal($event.target.value, 'contains')"
                                  placeholder="Filter"  />
                               </div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col">
                              <button type="button" class="btn btn-primary exports-button" matTooltip="Download Data" matTooltipPosition="above"
                              pButton icon="fa-download" iconPos="left" label="Export All Data"
                                data-toggle="modal"
                              (click)="selectedOnly = false; targetData = dt;" 
                              data-target="#downloadConfirmation"></button>
                               <button type="button" class="btn btn-primary exports-button" matTooltip="Download Selected Data" matTooltipPosition="above" matTooltip="Download Selected Data" matTooltipPosition="above"
                              pButton icon="fa-download" iconPos="left"
                               label="Export Selected Data" (click)="dt.exportCSV({selectionOnly:true})"
                              ></button>
                              <!-- data-toggle="modal"
                              data-target="#downloadConfirmation"
                              (click)="selectedOnly = true; targetData = dt;" -->
                             
                             </div>
                     
                                  <!-- <div class="">
                                    <div
                                      class="col"
                                      style="width: 370px; float: right; padding-top: 3px;"
                                    >
                                      <div class="form-group">
                                      <div
                                          class="pull-left radio-buttons-align"
                                        >
                                            <label class="radio-cstm wauto">
                                            <input type="radio" name="EmpStatus" class="form-control" value="Active" (click)="geListByStatus('Active')" [(ngModel)]="currentstatus">
                                            <span class="checkmark"></span>Active
                                            </label>
                                      </div>
                                  <div class="pull-left radio-buttons-align">
                                      <label class="radio-cstm wauto">
                                          <input type="radio" name="EmpStatus" class="form-control" value="InActive" (click)="geListByStatus('InActive')" [(ngModel)]="currentstatus">
                                          <span class="checkmark"></span>In-active
                                      </label>
                                  </div>
                                  <div class="pull-left radio-buttons-align">
                                      <label class="radio-cstm wauto">
                                          <input type="radio" name="EmpStatus" class="form-control" value="ALL" (click)="geListByStatus('ALL')" [(ngModel)]="currentstatus">
                                          <span class="checkmark"></span>All
                                      </label>
                                  </div>
                                  <div class="checkbox-cstm pull-left checkbox-align">
                                      <label class="checkbox-label-align">
                                       
                                        <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent" id="cparent"  (click)="getDeleteListByStatus($event.target.checked)"
                                          />
                                        <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                      Show  Deleted List 
                                      </label>
                                  </div> 
                              </div> 
                          </div>
                      </div> -->
                    </div> 
                          </ng-template>
                          <ng-template pTemplate="colgroup" let-columns>
                              <colgroup>
                                  <col *ngFor="let col of columns" class="table-column-width">
                              </colgroup>
                          </ng-template>
                          <ng-template pTemplate="header" let-columns >
                              <tr>
                                  <ng-container *ngFor="let col of columns">
                                      <th class="text-center table-column-width" *ngIf="col.field!='companyName' && col.field!='buName' && col.field!='deptName' && col.field!='divName'" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                                          {{col.header}}
                                          <p-sortIcon [field]="col.field"></p-sortIcon>
                                      </th>
                                      <th class="text-center table-column-width" *ngIf="col.field=='companyName'" colspan="4" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
                                          Management Structure
                                      </th>
                                  </ng-container>
                                  <th style="width:150px;position: sticky;" *ngIf="selectedColumns.length> 0">Actions</th>
                              </tr>
                              <tr>
                                  <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">
                                      <!--  -->
                                      <input  *ngIf="col.field != 'lastCalibrationDate' && col.field != 'nextCalibrationDate' && col.field != 'calibrationDate' && col.field != 'lastcheckedindate' && col.field != 'lastcheckedoutdate'" class="table-header-input-width" pInputText type="text" (input)="dt.filter($event.target.value, col.field,'contains')">
                                      <input type="date"   class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'nextCalibrationDate'"
                                      name="nextCalibrationDate"  (change)="dateFilterForTable($event.target.value, col.field)" />
                                     <input type="date"  class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'lastCalibrationDate'"   name="lastCalibrationDate"
                                              (change)="dateFilterForTable($event.target.value,col.field)" />
                                              <input type="date"   class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'calibrationDate'"
                                              name="calibrationDate"  (change)="dateFilterForTable($event.target.value, col.field)" />
                                             <input type="date"  class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'lastcheckedindate'"   name="lastcheckedindate"
                                                      (change)="dateFilterForTable($event.target.value,col.field)" />

                                                      <input type="date"   class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'lastcheckedoutdate'"
                                              name="lastcheckedoutdate"  (change)="dateFilterForTable($event.target.value, col.field)" />
                                  </th>
                                  <th style="width:150px;position: sticky;"></th>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-rowData let-columns="columns" let-asset let-rowIndex="rowIndex">
                              <tr [pSelectableRow]="rowData" pReorderableRowHandle (dblclick)="viewSelectedRowdbl(rowData)" >

                                  <td  *ngFor="let col of columns" class="ui-resizable-column table-column-width"
                                      pReorderableRowHandle>

                                        <ng-container *ngIf="col.field !='calibrationRequiredNew'">
                                          {{
                                              col.field == 'createdDate'
                                                ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a')
                                                : rowData[col.field] && col.field == 'updatedDate'
                                                ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a')
                                                : rowData[col.field] 
                                            }}
                                      </ng-container> 
                                      <ng-container *ngIf="col.field =='calibrationRequiredNew'">
                                          <input type="checkbox" disabled [checked]="rowData[col.field] == 'Yes'"
                                                 style="margin: 0px auto; display: block;" />
                                      </ng-container>
                                  </td>
                                  <td class="action-icons-cstm" style="width:150px;position:sticky" *ngIf="selectedColumns.length> 0">
                                      <div *ngIf="rowData['calibrationId'] !=0">
                                      <p-inputSwitch [(ngModel)]="rowData['isActive']" name="isActive{{ rowIndex }}"   matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}"
                                                         matTooltipPosition="above" (onChange)="toggleIsActive(rowData,$event)"></p-inputSwitch> 
                                                         <span ><a class="btn nobg btn-view-cstm" data-toggle="modal" data-target="#viewcalibration" (click)="openView(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>
                                          <span><a class="btn nobg btn-edit-cstm" (click)="openAssetToEdit(rowData)" disabled matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>
                                          <span data-toggle="modal" data-target="#assetInvAudit"><a class="btn nobg btn-delete-cstm" (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a> </span>
                                          <!-- <span><a class="btn nobg btn-delete-cstm" (click)="openDelete(content,rowData)" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></a> </span> -->

                                      </div>
                                      <div  *ngIf="rowData['calibrationId'] ==0">
                                          <p-inputSwitch [(ngModel)]="rowData['isActive']" [disabled]="true" name="isActive{{ rowIndex }}"   matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}"
                                          matTooltipPosition="above" (onChange)="toggleIsActive(rowData,$event)"></p-inputSwitch> 
                                          <span><a class="btn nobg btn-view-cstm" data-toggle="modal" data-target="#viewcalibration"  (click)="openView(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a> </span>
                                          <span><a class="btn nobg btn-edit-cstm" (click)="openAssetToEdit(rowData)" disabled matTooltip="Edit" matTooltipPosition="above"><i class="fa fa-pencil"></i></a> </span>
                                          <span data-toggle="modal" data-target="#assetInvAudit"><a class="btn nobg btn-delete-cstm" (click)="openHistory(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a> </span>
                                      </div>
                               </td> 

                              </tr>
                          </ng-template>
                          <ng-template pTemplate="emptymessage" let-columns>
                              <tr>
                                  <td colspan="21" class="no-records-cstm no-records-msg">
                                      No records found
                                  </td>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="summary" id="footer">
                              <div style="text-align: right;">
                                  <label id="footer" class="footer">Total:</label>
                                  <input class="footer-input-width" [(ngModel)]="totalRecords" [disabled]="true" pInputText type="text" /> &nbsp;&nbsp;
                                  <label id="footer" class="footer1">Pages Count:</label>
                                  <input class="footer-input-width" [(ngModel)]="totalPages" [disabled]="true" pInputText type="text" />
                              </div>
                          </ng-template>
                      </p-table>
      </div>
  </div>
</div>

<div id="assetInvAudit" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-xlg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">History of Calibration Managment</h4>
      </div>

      <div class="modal-body">

        <div class="preloader" *ngIf="isSpinnerVisibleHistory" style="    z-index: 1060;">
          <div class="loading">
              <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
          </div>
       </div>
        <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
            <div class="tableFixHead">
            <table class="table table-bordered header-table-width">
                <thead>
                    <tr>
                        <th>AssetId.</th>
                        <th>Asset Name</th>
                        <th>AltAssetId</th>
                        <th>SerialNum</th>
                        <th>Itemtype</th>
                        <th>AssetType</th>
                        <th>AssetClass</th>
                        <th>AcquisitionType</th>
                        <th>Locations</th>
                        <th>ControlName</th>
                        <th>UOM</th>
                        <th>LastCalibrationDate</th>
                        <th>NextCalibrationDate</th>
                        <th>LastCalibrationBy</th>
                        <th>CalibrationDate</th>
                        <th>CurrencyName</th>
                        <th>AssetStatus</th>
                        <th>UnitCost</th>
                        <th>Memo</th>
                        <th>Qty</th>
                        <th>Inservicesdate</th>
                        <th>Created Date</th>
                        <th>Created By</th>
                        <th>Updated date</th>
                        <th>Updated By</th>
                    </tr>
                </thead>
                <tr *ngFor="let audit of auditHistory; let i = index;">
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'assetId', audit.assetId)  ? 'black' : 'red'  }">
                        {{audit.assetId}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'assetName', audit.assetName)  ? 'black' : 'red'  }">
                        {{audit.assetName}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'altAssetId', audit.altAssetId)  ? 'black' : 'red'  }">
                        {{audit.altAssetId}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'serialNum', audit.serialNum)  ? 'black' : 'red'  }">
                        {{audit.serialNum}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'itemtype', audit.itemtype)  ? 'black' : 'red'  }">
                        {{audit.itemtype}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'assetType', audit.assetType)  ? 'black' : 'red'  }">
                        {{audit.assetType}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'assetClass', audit.assetClass)  ? 'black' : 'red'  }">
                        {{audit.assetClass}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'acquisitionType', audit.acquisitionType)  ? 'black' : 'red'  }">
                        {{audit.acquisitionType}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'locations', audit.locations)  ? 'black' : 'red'  }">
                        {{audit.locations}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'controlName', audit.controlName)  ? 'black' : 'red'  }">
                        {{audit.controlName}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'uOM', audit.uOM)  ? 'black' : 'red'  }">
                        {{audit.uOM}}
                    </td>
                    <td>
                        {{audit.lastCalibrationDate | date: 'MM/dd/yyyy h:mm a '}}
                    </td>
                    <td>
                        {{audit.nextCalibrationDate}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'lastCalibrationBy', audit.lastCalibrationBy)  ? 'black' : 'red'  }">
                        {{audit.lastCalibrationBy}}
                    </td>
                    <td>
                        {{audit.calibrationDate | date: 'MM/dd/yyyy h:mm a '}}
                    </td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'currencyName', audit.currencyName)  ? 'black' : 'red'  }">
                        {{audit.currencyName}}
                    </td>  
                    
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'assetStatus', audit.assetStatus)  ? 'black' : 'red'  }">
                      {{audit.assetStatus}}
                  </td>
                  <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'unitCost', audit.unitCost)  ? 'black' : 'red'  }">
                      {{audit.unitCost}}
                  </td>
                  <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'memo', audit.memo)  ? 'black' : 'red'  }">
                      <p class="p_editor" [innerHTML]="audit.memo"></p>
                  </td>
                  <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'qty', audit.qty)  ? 'black' : 'red'  }">
                      {{audit.qty}}
                  </td>
                  <td>
                      {{audit.inservicesdate | date: 'MM/dd/yyyy h:mm a '}}
                  </td> 
                    <td>{{audit.createdDate | date: 'MM/dd/yyyy h:mm a '}}</td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'createdBy', audit.createdBy)  ? 'black' : 'red'  }">
                        {{audit.createdBy}}
                    </td>    
                    <td>{{audit.updatedDate | date: 'MM/dd/yyyy h:mm a '}}</td>
                    <td [ngStyle]="{'color':  getColorCodeForHistory(i, 'updatedBy', audit.updatedBy)  ? 'black' : 'red'  }">
                        {{audit.updatedBy}}
                    </td>    
                </tr>
            </table>

            <ng-template *ngIf="!showhistorylist">
              <div class="text-center">
                  <div class="text-center">
                      <img src="../../../assets/images/binoculars.png" class="no-history-found-image">
                      <h4 class="no-history-found-msg">No History Found </h4>
                  </div>
              </div>
            </ng-template>
            </div>
        </div>
    </div>
    
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editcalibration" role="dialog" data-backdrop="static">
	<div class="modal-dialog modal-sm">
		<div class="modal-content" style="width: 1000px;margin-left: -210px;">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeDeleteModal()">&times;</button>
				<h4 class="modal-title">{{Certifytype}}</h4>
			</div>
			<div class="modal-body">
                <div id="adminsearchlocationajax" class="table-responsive default-bg clear"> 
                    <p class="w250"><span class="label"><b>Asset ID: </b></span><span class="value" name ="AssetId">{{calibrationForm.AssetId}}</span></p>
                    <p class="w250"><span class="label"><b>Alt Asset ID: </b></span><span class="value">{{calibrationForm.AltAssetId}}</span></p>
                    <p class="w250"><span class="label"><b>Asset Name: </b></span><span class="value">{{calibrationForm.AssetName}}</span></p>                    
                    <p class="w250"><span class="label"><b>Location: </b></span><span class="value">{{calibrationForm.Location}}</span></p>
                    <p class="w250"><span class="label"><b>Serial Num: </b></span><span class="value">{{calibrationForm.SerialNum}}</span></p>                    
                    <p class="w250"><span class="label"><b>Control ID: </b></span><span class="value">{{calibrationForm.ControlName}}</span></p>
                    <p class="w250"><span class="label"><b>Acquisition Type: </b></span><span class="value">{{calibrationForm.AcquisitionType}}</span></p>
                    <div class="clear"></div>
                    <hr>
                    <p class="w400"><span class="label"><b>Last {{Certifytype}} Date: </b></span><span class="value">{{calibrationForm.LastCalibrationDate}}</span></p>
                    <p class="w400"><span class="label"><b>Last {{Certifytype}} By: </b></span><span class="value">{{calibrationForm.LastCalibrationBy}}</span></p>
                    <p class="w400"><span class="label"><b>Vendor or Employee: </b></span>
                        <span class="value">
                            <label class="w60 text-left"><input type="radio" disabled="" checked=""> Vendor</label>
                            <label class="w80 text-left"><input type="radio" disabled=""> Employee</label>
                        </span>
                    </p>
                    <p class="w400"><span class="label"><b>Next {{Certifytype}} Date: </b></span><span class="value">{{calibrationForm.NextCalibrationDate}}</span></p>
                    <div class="clear"></div>
                    <hr>
                    <div *ngIf="isscheduleprocess== false"><a (click)="showscheduleprocess()" class="btn btn-primary add-verification-btn">Schedule a {{Certifytype}}</a></div>
                    
                    <div class="add-verification" *ngIf="isscheduleprocess">
                        <div class="col-sm-12"><h4>Schedule a {{Certifytype}}</h4></div>
                  <div class="col-sm-6">
                      <div class="form-group col-sm-12">
                          <label class="control-label col-sm-4">Vendor or Employee</label>
                          <div class="col-sm-7">
                            <label class="w70 text-left"><input type="radio" name="verification-vendor-employee" value="vendor" (click)="checkedvendor(calibrationForm.ScheduleIsVendor)" [(ngModel)]="calibrationForm.ScheduleIsVendor"> Vendor</label>
                            <label class="w80 text-left"><input type="radio" name="verification-vendor-employee" value="employee" (click)="checkedemployee(calibrationForm.ScheduleIsEmployee)" [(ngModel)]="calibrationForm.ScheduleIsEmployee"> Employee</label>  
                          </div>
                        </div>
                      <div class="form-group col-sm-12 verification-vendor-employee verification-vendor" *ngIf="isvendor">
                          <label class="control-label col-sm-4">Select Vendor</label>
                          <div class="col-sm-7">
                            <div class="inner-addon right-addon inline-block"> <i class="fa fa-pencil"></i>
                              <p-autoComplete  class="p-autoComplete-ctsm" field="name" name="vendorName" [dropdown]="true"
                              errorMessage="Records not found"  [suggestions]="allVendorInfoFilter" emptyMessage="No Records Found"
                              (completeMethod)="filterWarentyVendor($event)"  [size]="30" [minLength]="1"
                              [(ngModel)]="calibrationForm.VendorId"  #prellRevInsp="ngModel" >
                          </p-autoComplete>
                              </div>
                             
                          </div>
                        </div>
                      <div class="form-group col-sm-12 verification-vendor-employee verification-employee" *ngIf="isemployee">
                          <label class="control-label col-sm-4">Select Employee</label>
                          <div class="col-sm-7">
                            <div class="inner-addon right-addon inline-block"> <i class="fa fa-pencil"></i>
                              <p-autoComplete class="p-autoComplete-ctsm employee-autocomplete"  field="label" name="employee" [dropdown]="true"
                              errorMessage="Records not found" [forceSelection]="true" [suggestions]="employeeList"
                              (completeMethod)="filterEmployee($event); " [size]="30" [minLength]="1" [(ngModel)]="calibrationForm.EmployeeId"
                              emptyMessage="No Match Found">
                            </p-autoComplete>      
                              </div>                          
                          </div>
                        </div>
                      <div class="form-group col-sm-12">
                          <label class="control-label col-sm-4">Cost</label>
                          <div class="col-sm-7">
                            <input  [(ngModel)]="calibrationForm.UnitCost" type="number" class="form-control" id="" name="">                           
                          </div>
                        </div>
                  </div> 
                     <div class="col-sm-6">
                      <div class="form-group col-sm-12">
                          <label class="control-label col-sm-4">{{Certifytype}} Date</label>
                          <div class="col-sm-7">
                            <p-calendar [showIcon]="true" name ="CalibrationDate" [ngModelOptions]="{standalone: true}"
                            [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                [maxDate]="currentDate" (ngModelChange)="editorgetmemo($event)"
                                [(ngModel)]="calibrationForm.CalibrationDate"></p-calendar> 
                            <a   data-toggle="modal" data-target="#CalibartionmgmtList" (click)="OpemCalibartionMgmtList(calibrationForm.AssetRecordId)" class="btn btn-link pull-right" style="padding: 0;">View {{Certifytype}} Schedule</a>
                          </div>
                        </div>
                      <div class="form-group col-sm-12">
                          <label class="control-label col-sm-4">Currency</label>
                          <div class="col-sm-7">
                            <p-dropdown placeholder="Select Currency"  appendTo="body" [baseZIndex]="9999" (ngModelChange)="getActive()" [showClear]="true" (input)="onFilterAction($event.target.value)" filter="true" name="currencyId" [options]="currencyList"
                            class="p-dropdown-custom-md" [(ngModel)]="calibrationForm.currencyId">
                           </p-dropdown>
                          </div>
                        </div>
                      <div class="form-group col-sm-12">
                          <label class="control-label col-sm-4">{{Certifytype}} Memo</label>
                          <div class="col-sm-7">

                            <textarea  [(ngModel)]="calibrationForm.memo" class="h50 text" style="margin: 0px; height: 53px; width: 135px;">Sample Memo</textarea>
                            <!-- <div class="align_adh">
                              <div [innerHTML]="calibrationForm.memo" class="text_editor_box"  [matTooltip]="parsedText(calibrationForm.memo)"
                                  style="width: 100% !important;"></div>
                              <i class="fa  fa fa-pencil contoel_v" data-toggle="modal"   matTooltipPosition="above"
                                  data-target="#textarea-popup" matTooltip="Memo"
                                  matTooltipPosition="above"
                                  (click)="onAddTextAreaInfo(currentAsset)"></i> 
                          </div> -->
                          </div>
                        </div>
                    <button type="button" class="btn btn-info pull-right verification-process-btn" (click)="savecalibrationprocess()" id="" name="" data-toggle="tooltip" title="This will generate a PO if a vendor is selected to perfrom Calibration OR Send a notification to employee if employee is selected">Process</button>
                  </div> 
                        </div>
                </div>
			</div>
			<div class="modal-footer">

        <button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="viewcalibration" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-sm">
		<div class="modal-content" style="width: 1000px;margin-left: -210px;">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeviewModal()">&times;</button>
				<h4 class="modal-title"> Details of Asset "{{viewcalibrationForm.AssetId}}"</h4>
			</div>
			<div class="modal-body editform">
        <div id="adminsearchlocationajax" class="table-responsive default-bg clear"> 
            <div class="col-sm-4 w350">
                <p><span class="label"><b>Asset ID: </b></span><span class="value">{{viewcalibrationForm.AssetId}}</span></p>
                <p><span class="label"><b>Asset Name: </b></span><span class="value">{{viewcalibrationForm.AssetName}}</span></p>
                <p><span class="label"><b>Alt Asset ID: </b></span><span class="value">{{viewcalibrationForm.AltAssetId}}</span></p>
                <p><span class="label"><b>Serial Num: </b></span><span class="value">{{viewcalibrationForm.SerialNum}}</span></p>
                <p><span class="label"><b>Control Num: </b></span><span class="value">{{viewcalibrationForm.ControlName}}</span></p>
                <p><span class="label"><b>Item Type: </b></span><span class="value">{{viewcalibrationForm.Itemtype}}</span></p>
                <p><span class="label"><b>CO: </b></span><span class="value">{{viewcalibrationForm.CompanyName}}</span></p>
                <p><span class="label"><b>BU: </b></span><span class="value">{{viewcalibrationForm.BuName}}</span></p>
                <p><span class="label"><b>Division: </b></span><span class="value">{{viewcalibrationForm.DeptName}}</span></p>
                <p><span class="label"><b>Dept: </b></span><span class="value">{{viewcalibrationForm.DivName}}</span></p>
            </div>
            <div class="col-sm-4 w350">
                <p><span class="label"><b>Asset Type: </b></span><span class="value">{{viewcalibrationForm.AssetType}}</span></p>
                <p><span class="label"><b>Certify Type: </b></span><span class="value">{{viewcalibrationForm.CertifyType}}</span></p>
                <p><span class="label"><b>UOM: </b></span><span class="value">{{viewcalibrationForm.UOM}}</span></p>
                <p><span class="label"><b>Qty: </b></span><span class="value">{{viewcalibrationForm.Qty}}</span></p>
                <p><span class="label"><b>Currency: </b></span><span class="value">{{viewcalibrationForm.CurrencyName}}</span></p>
                <p><span class="label"><b>Updated Cost: </b></span><span class="value">{{viewcalibrationForm.UpdatedCost}}</span></p>
                <p><span class="label"><b>In Service Date: </b></span><span class="value">{{viewcalibrationForm.Inservicedate}}</span></p>
                <p><span class="label"><b>Asset Status: </b></span><span class="value">{{viewcalibrationForm.AssetStatus}}</span></p>
                <p><span class="label"><b>Last Calibration Date: </b></span><span class="value"> {{viewcalibrationForm.LastCalibrationDate}}</span></p>
            </div>
            <div class="col-sm-4 w400">
                <p><span class="w180"><b>Last Calibrated by: </b></span><span class="w180">{{viewcalibrationForm.LastCalibrationBy}}</span></p>
                <p><span class="w180"><b>Last Calibration Notes: </b></span><span class="w180">{{viewcalibrationForm.Memo}}</span></p>
                <p><span class="w180"><b>Next Calibration Date: </b></span><span class="w180">{{viewcalibrationForm.NextCalibrationDate}}</span></p>
                <p><span class="w180"><b>Last Checked IN By: </b></span><span class="w180">{{viewcalibrationForm.lastcheckedinby}}</span></p>
                <p><span class="w180"><b>Last Checked IN Date: </b></span><span class="w180">{{viewcalibrationForm.lastcheckedindate}}</span></p>
                <p><span class="w180"><b>Last Checked IN Memo: </b></span><span class="w180">{{viewcalibrationForm.lastcalibrationmemo}}</span></p>
                <p><span class="w180"><b>Last Checked OUT Date: </b></span><span class="w180">{{viewcalibrationForm.lastcheckedoutdate}}</span></p>
                <p><span class="w180"><b>Last Checked OUT By: </b></span><span class="w180">{{viewcalibrationForm.lastcheckedoutby}}</span></p>
                <p><span class="w180"><b>Last Checked OUT Memo: </b></span><span class="w180">{{viewcalibrationForm.lastcheckedinmemo}}</span></p>
                <p><span class="w180"><b>Locaton: </b></span><span class="w180">{{viewcalibrationForm.Location}}</span></p>
            </div>                
            <div class="clear"></div>                
        </div>
      </div>
			<div class="modal-footer">

        <button type="button" class="btn btn-danger" (click)="closeviewModal()">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="CalibartionmgmtList" role="dialog" data-backdrop="static">
	<div class="modal-dialog modal-sm">
        <div class="modal-content" style="width: 1000px;margin-left: -210px;">
            <div class="modal-header">
                <button type="button" class="close" (click)="closecalibartionviewModal()">&times;</button>
				<h4 class="modal-title"> Details of Asset "{{calibrationForm.AssetId}}"</h4>
            </div>
            <div class="modal-body">
                <div class="col-sm-3">
                      <p><span class="label"><b>Asset ID: </b></span><span class="value">{{calibrationForm.AssetId}}</span></p>                    
                  </div>
                  <div class="col-sm-3">
                      <p><span class="label"><b>Asset Name: </b></span><span class="value">{{calibrationForm.AssetName}}</span></p>
                  </div>
                  <div class="col-sm-3">
                      <p><span class="label"><b>Control Num: </b></span><span class="value">{{calibrationForm.ControlName}}</span></p>
                  </div>
                  <div class="col-sm-3">
                      <p><span class="label"><b>In service Date: </b></span><span class="value">{{calibrationForm.Inservicedate}}</span></p>
                  </div> 
                <div class="clear"></div>
              <div class="table-responsive">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Asset Existing Cost</th>
                      <th>Calibration Schedule</th>
                      <th>Calibrated Date</th>
                      <th>Calibrated By</th>
                      <th>Last Calibrated Memo</th>
                      <th>Calibrated Cost</th>
                      <th>PO Num</th>
                      <th>&nbsp;</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="hrow" *ngFor="let caldata of allcalibrationbyidInfo; let i=index; ">
                      <td>{{caldata.assetUnitCost}}</td>
                      <td *ngIf="caldata.isedit==false">{{caldata.createdDate1}}</td>
                      <td *ngIf="caldata.isedit">
                        <p-calendar  class="calender-cstm woAdd" [showIcon]="true"  name="CreatedDate{{i}}"  [ngModelOptions]="{standalone: true}"
                        [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                             (ngModelChange)="editorgetmemo($event)"
                            [(ngModel)]="caldata.createdDate" appendTo="body"></p-calendar> 
                       </td>
                       <td *ngIf="caldata.isedit==false">{{caldata.calibrationDate1}}</td>
                       <td  *ngIf="caldata.isedit">
                        <p-calendar  class="calender-cstm woAdd" [showIcon]="true" name="calibrationDate{{i}}" [ngModelOptions]="{standalone: true}"
                        [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                             (ngModelChange)="editorgetmemo($event)"
                             #calibrationDate="ngModel" 
                            [(ngModel)]="caldata.calibrationDate" appendTo="body"></p-calendar> 
                       </td>
                       <td>{{caldata.lastCalibrationBy}}</td>
                      <!-- <td *ngIf="caldata.isedit" class="dis-btns">
                          <div class="inner-addon right-addon inline-block"> <i class="fa fa-pencil"></i>
                              <input type="text" class="form-control names text ui-autocomplete-input" id="" name="" [(ngModel)]="caldata.lastCalibrationBy" autocomplete="off">
                          </div>
                        </td> -->
                      <td *ngIf="caldata.isedit==false">
                          <p [innerHTML]="caldata.memo"  class="h50 text"></p>
                     </td>
                     <td *ngIf="caldata.isedit">
                         <textarea  [(ngModel)]="caldata.memo" class="h50 text" style="margin: 0px; height: 53px; width: 135px;">{{caldata.memo}}</textarea>
                   </td>
                   <td *ngIf="caldata.isedit==false">{{caldata.unitCost}}
                   </td>
                    <td *ngIf="caldata.isedit"><input [(ngModel)]="caldata.unitCost" type="text" class="text"></td>
                      <td>NA</td>
                      <td><span class="edt-btn"> <a  (click)="updaterowcalibartion(caldata)" class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" title="Edit"><i class="fa fa-edit"></i></a> </span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-info" (click)="Updatetcalibartion()">Update</button>
                <button type="button" class="btn btn-danger"(click)="closecalibartionviewModal()">Close</button>
            </div>
          </div>
	</div>
</div>

<div class="modal fade" id="textarea-popup" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-sm" style="max-width: 500px !important;">
     
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" (click)="onCloseTextAreaInfo()">&times;</button>
              <h4 class="modal-title">Edit Memo</h4>
          </div>
          <div class="modal-body">
              <p-editor [(ngModel)]="textAreaInfo" (ngModelChange)="editorgetmemo($event)"
                               [style]="{'height':'320px'}" name="textAreaInfo" required></p-editor>
              <div class="editor-buttons">
                  <button type="button" class="btn btn-primary editor-buttons-margin" (ngModelChange)="getmemo($event)" (click)="onSaveTextAreaInfo(textAreaInfo)">Save</button>
                  <button type="button" class="btn btn-danger editor-buttons-margin" (click)="onCloseTextAreaInfo()">Close</button>
             </div> 
          </div>
      </div>        
  </div>
</div>

<div class="modal fade" id="downloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-sm">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" (click)="closedownloadConfirmationModal()">&times;</button>
              <h4 class="modal-title">Are You Sure Want to Download?</h4>
          </div>
          <div class="modal-body" *ngIf="targetData">
              <strong>
                  <span>
                      You are attempting to export {{targetData.totalRecords}} of records. 
                  </span> 
              </strong>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-primary" (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closedownloadConfirmationModal();">Confirm</button>
              <button type="button" class="btn btn-danger" (click)="closedownloadConfirmationModal()">Cancel</button>
          </div>
      </div>
  </div>
</div>