<form #createPOForm="ngForm">
    <div class="x_content">
        <p-breadcrumb [model]="breadcrumbs" [home]="home"></p-breadcrumb>
        <div class="card new-card">
            <div class="card-header header">
                <div class="row">
                    <div class="col">
                        <h4 class="header-name">{{isEditMode ? 'Edit' : 'Create'}} Purchase Order for
                            {{headerInfo.vendorName}}

                            <button *ngIf="isEditMode" class="btn-sm header-button header-button-alignment"
                                (click)="toggle_po_header=!toggle_po_header">
                                {{toggle_po_header ? 'Collapse' : 'Expand'}}
                            </button>
                        </h4>

                    </div>

                    <div>
                        <button type="button" class="btn-sm header-button pull-right"
                            [routerLink]="['/vendorsmodule/vendorpages/app-polist']">
                            PO List
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <!-- <h4 class="po-head">{{isEditMode ? 'Edit' : 'Create'}} Purchase Order for {{headerInfo.vendorName}}</h4> -->
                <div class="form-row body-alignment">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>PO Num</label>
                            <input class="form-control" type="text" name="purchaseOrderNumber" value="Creating" disabled
                                [(ngModel)]="headerInfo.purchaseOrderNumber">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Vendor Name <span class="clr-red">*</span>
                            </label>
                            <div>
                                <p-autoComplete field="vendorName" [disabled]="disableHeaderInfo" title="Vendor Name"
                                    [ngClass]="inputValidCheckHeader ? 'autocomplete-validate' : ''"
                                    class="autocomplete" (onKeyUp)=eventHandler($event)
                                    [(ngModel)]="headerInfo.vendorId" name="vendorName" id="vendorName"
                                    [suggestions]="vendorNames" (completeMethod)="filterVendorNames($event)" [size]="30"
                                    [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                    [forceSelection]="true" #vendorName=ngModel (onSelect)="selectedVendorName($event);"
                                    (ngModelChange)="enableHeaderSave()" required>
                                </p-autoComplete>
                                <div *ngIf="vendorName.invalid && (vendorName.dirty || vendorName.touched)"
                                    class="alert alert-danger alert-danger-cstm">
                                    <div *ngIf="vendorName.errors.required">
                                        <small> Vendor Name is required </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Requisitioner <span class="clr-red">*</span></label>
                            <div>
                                <div>
                                    <p-autoComplete field="label" [disabled]="disableHeaderInfo"
                                        [ngClass]="inputValidCheckHeader ? 'autocomplete-validate' : ''"
                                        class="autocomplete" (onKeyUp)=eventHandler($event)
                                        [(ngModel)]="headerInfo.requisitionerId" title="Requisitioner"
                                        name="requisitionerId" [suggestions]="requisitionerList"
                                        (completeMethod)="filterRequisitioner($event)" [size]="30" [minLength]="1"
                                        [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"
                                        #requisitionerId="ngModel" (ngModelChange)="enableHeaderSave()" required>
                                    </p-autoComplete>
                                    <div *ngIf="requisitionerId.invalid && (requisitionerId.dirty || requisitionerId.touched)"
                                        class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="requisitionerId.errors.required">
                                            <small> Requisitioner is required </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <hr *ngIf="toggle_po_header" />
                <div class="form-row toggle-header-alignment" *ngIf="toggle_po_header">
                    <div class="col-md-9">
                        <div class="form-row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Open Date <span class="clr-red">*</span></label>
                                    <p-calendar [ngClass]="inputValidCheckHeader ? 'calendar-validate' : ''"
                                        class="calendar" [showIcon]="true" appendTo="body" name="openDate"
                                        [yearNavigator]="true" [minDate]="currentDate" [monthNavigator]="true"
                                        yearRange="1900:2100" [(ngModel)]="headerInfo.openDate"
                                        (ngModelChange)="enableHeaderSave()" #openDate="ngModel" required></p-calendar>
                                    <div *ngIf="openDate.invalid && (openDate.dirty || openDate.touched)"
                                        class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="openDate.errors.required">
                                            <small> Open Date is required </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Closed/Cancelled Date</label>
                                    <p-calendar class="calendar" [disabled]="!isEditMode" appendTo="body"
                                        [showIcon]="true" [minDate]="headerInfo.openDate" name="closedDate"
                                        [(ngModel)]="headerInfo.closedDate" [yearNavigator]="true"
                                        [monthNavigator]="true" yearRange="1900:2100"
                                        (ngModelChange)="enableHeaderSave()"></p-calendar>
                                </div>
                                <div class="form-group">
                                    <label>Need By <span class="clr-red">*</span></label>
                                    <p-calendar [ngClass]="inputValidCheckHeader ? 'calendar-validate' : ''"
                                        class="calendar" [showIcon]="true" [minDate]="headerInfo.openDate"
                                        name="needByDate" id="needByDate" [yearNavigator]="true" [monthNavigator]="true"
                                        yearRange="1900:2100" [(ngModel)]="headerInfo.needByDate"
                                        (onSelect)="onSelectNeedByDate();" #needByDate="ngModel" appendTo="body"
                                        (ngModelChange)="enableHeaderSave()" required title="Need By Date"></p-calendar>
                                    <div *ngIf="needByDate.invalid && (needByDate.dirty || needByDate.touched)"
                                        class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="needByDate.errors.required">
                                            <small> Need By Date is required </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Priority <span class="clr-red">*</span></label>
                                    <div>
                                        <p-autoComplete field="label"
                                            [ngClass]="inputValidCheckHeader ? 'autocomplete-validate' : ''"
                                            class="autocomplete" [(ngModel)]="headerInfo.priorityId" name="priorityName"
                                            [suggestions]="allPriorityDetails"
                                            (completeMethod)="filterPriorityNames($event)" [size]="30" [minLength]="1"
                                            [dropdown]="true" #priorityId="ngModel" (onSelect)="onSelectPriority();"
                                            errorMessage="Records not found" [forceSelection]="true"
                                            (ngModelChange)="enableHeaderSave()" required></p-autoComplete>
                                        <div *ngIf="priorityId.invalid && (priorityId.dirty || priorityId.touched)"
                                            class="alert alert-danger alert-danger-cstm">
                                            <div *ngIf="priorityId.errors.required">
                                                <small> Priority is required </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Vendor Code <span class="clr-red">*</span>
                                    </label>
                                    <div>
                                        <p-autoComplete field="vendorCode" disabled
                                            [ngClass]="inputValidCheckHeader ? 'autocomplete-validate' : ''"
                                            class="autocomplete" [(ngModel)]="headerInfo.vendorCode" title="Vendor Code"
                                            name="vendorCode" [suggestions]="vendorCodes"
                                            (completeMethod)="filterVendorCodes($event)" [size]="30" [minLength]="1"
                                            [dropdown]="true" #vendorCode="ngModel" errorMessage="Records not found"
                                            [forceSelection]="true" (onSelect)="selectedVendorName($event);"
                                            (ngModelChange)="enableHeaderSave()" required></p-autoComplete>
                                        <div *ngIf="vendorCode.invalid && (vendorCode.dirty || vendorCode.touched)"
                                            class="alert alert-danger alert-danger-cstm">
                                            <div *ngIf="vendorCode.errors.required">
                                                <small> Vendor Code is required </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Vendor Contact <span class="clr-red">*</span>
                                        <span *ngIf="headerInfo.vendorId" class="vendor-contact-icon"><a
                                                class="fa fa-plus-circle fa-lg" matTooltip="Add Vendor Contact"
                                                matTooltipPosition="above" data-target="#addContactInfo"
                                                data-toggle="modal" (click)="resetVenContactInfo()"></a></span>
                                    </label>
                                    <div>
                                        <p-autoComplete field="vendorContact"
                                            [ngClass]="inputValidCheckHeader ? 'autocomplete-validate' : ''"
                                            class="autocomplete" [(ngModel)]="headerInfo.vendorContactId"
                                            name="vendorContact" [suggestions]="vendorContactsHeader"
                                            (completeMethod)="filterVendorContacts($event)" [size]="30" [minLength]="1"
                                            [dropdown]="true" errorMessage="Records not found" [forceSelection]="true"
                                            [disabled]="vendorName.invalid" #vendorContact="ngModel"
                                            (ngModelChange)="enableHeaderSave()"
                                            (onSelect)="onChangeVendorContact(headerInfo.vendorContactId)" required>
                                        </p-autoComplete>
                                        <div *ngIf="vendorContact.invalid && (vendorContact.dirty || vendorContact.touched)"
                                            class="alert alert-danger alert-danger-cstm">
                                            <div *ngIf="vendorContact.errors.required">
                                                <small> Vendor Contact is required </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Contact Phone</label>
                                    <div>
                                        <p-autoComplete field="fullContactNo" class="autocomplete"
                                            [(ngModel)]="headerInfo.vendorContactPhone" name="vendorContactPhone"
                                            [suggestions]="vendorPhoneNum" (completeMethod)="filterVendorPhone($event)"
                                            [size]="30" [minLength]="1" [dropdown]="true"
                                            errorMessage="Records not found" [forceSelection]="true"
                                            [disabled]="vendorName.invalid" (ngModelChange)="enableHeaderSave()"
                                            (onSelect)="onChangeVendorContact(headerInfo.vendorContactPhone)">
                                        </p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Credit Limit &amp; Terms</label>
                                    <div>
                                        <div class="col-sm-5">
                                            <input class="form-control text-right" type="text" name="creditLimit"
                                                [(ngModel)]="headerInfo.creditLimit" disabled>
                                        </div>
                                        <div class="col-sm-7">
                                            <input class="form-control" type="text" name="creditTerms"
                                                [(ngModel)]="headerInfo.creditTerms" disabled>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Status <span class="clr-red">*</span></label>

                                    <select class="form-control" name="status" [(ngModel)]="headerInfo.statusId"
                                        #statusId="ngModel" (ngModelChange)="enableHeaderSave(); onSelectStatus()"
                                        [disabled]="disablePOStatus" required>
                                        <option *ngFor="let item of poStatusList" [ngValue]="item.value">{{item.label}}
                                        </option>
                                    </select>
                                    <div *ngIf="statusId.invalid && (statusId.dirty || statusId.touched)"
                                        class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="statusId.errors.required">
                                            <small> Status is required </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-cstm resale-alignment">
                                        <label>
                                            <input type="checkbox" name="resale" [(ngModel)]="headerInfo.resale"
                                                class="form-control" (ngModelChange)="enableHeaderSave()">
                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                            Resale
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-cstm receiver-alignment">
                                        <label>
                                            <input type="checkbox" class="receiver-input-back" name="deferredReceiver"
                                                [(ngModel)]="headerInfo.deferredReceiver"
                                                (ngModelChange)="enableHeaderSave()">
                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                            Deferred Receiver
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label *ngIf="restrictID == 0">Warning </label>
                                    <textarea name="warningId" class="form-control po-warning" disabled
                                        value="{{warningMessage}}">{{warningMessage}}</textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <!-- <div class="form-group">
                                        <label>Notes</label>
                                        <textarea name="ponotes" class="form-control head-notes"
                                         rows="2" (ngModelChange)="enableHeaderSave()"
                                          [(ngModel)]="headerInfo.notes"></textarea>
                                    </div> -->
                                <div class="form-group memo-popup-cstm">
                                    <label>
                                        Notes
                                        <!-- <i class=" fa fa-info-circle fa-lg" data-toggle="modal"
                                                data-target="#add-notes" matTooltipPosition="above" matTooltip="Notes"
                                                (click)="onAddNotes()"></i> -->

                                        <span class="editor-span"><a class="btn nobg" data-toggle="modal"
                                                data-target="#add-notes" (click)="onAddNotes()"
                                                matTooltipPosition="above" matTooltip="Notes"><i
                                                    class="fa fa-pencil"></i></a>
                                        </span>
                                    </label>
                                    <span>
                                        <div class="form-group memo-popup-cstm mat_emo">
                                            <div [innerHTML]="headerInfo.notes"
                                                [matTooltip]="parsedText(headerInfo.notes)" matTooltipPosition="above"
                                                class="form-control text-editor-field"
                                                class="text_editor_box text-editor-width">
                                            </div>
                                        </div>
                                    </span>
                                </div>

                            </div>
                            <div class="col-md-4">
                                <div class="form-group memo-popup-cstm">
                                    <label>Memo
                                        <!-- <i class="fa fa-info-circle fa-lg" data-toggle="modal"
                                            data-target="#cpo-memo" matTooltipPosition="above" 
                                            matTooltip="Add Memo"   (click)="onAddMemo()"></i> -->
                                        <span class="editor-span"><a class="btn nobg" data-toggle="modal"
                                                data-target="#cpo-memo" matTooltipPosition="above" matTooltip="Add Memo"
                                                (click)="onAddMemo()"><i class="fa fa-pencil"></i></a>
                                        </span>
                                    </label>
                                    <span>
                                        <div [innerHTML]="headerInfo.poMemo"
                                            [matTooltip]="parsedText(headerInfo.poMemo)" matTooltipPosition="above"
                                            class="form-control " class="text_editor_box text-editor-field"></div>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                            </div>

                            <div *ngIf="restrictID != 0" class="col-md-4">
                                <div class="form-group">
                                    <h4 class="modal-title restrict_color" *ngIf="restrictID != 0">Restriction</h4>
                                    <textarea *ngIf="restrictID != 0" name="restrictID"
                                        class="form-control restriction-message" disabled
                                        value="{{restrictMessage}}">{{restrictMessage}}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card management-structure-card">
                            <div class="card-header management-structure-card-header">
                                <h5 class="management-structure-header">Management Structure <span
                                        class="clr-red">*</span></h5>

                            </div>
                            <div class="card-body structure-card-body">
                                <div class="form-group">
                                    <select [ngClass]="managementValidCheck ? 'select-validate' : ''"
                                        class="form-control" name="primaryCompany" [(ngModel)]="headerInfo.companyId"
                                        (change)="getBUList(headerInfo.companyId); checkValidOnChange(headerInfo.companyId, 'companyId');"
                                        #mCompanyName (ngModelChange)="enableHeaderSave()" required>
                                        <option value="0">Select</option>
                                        <option *ngFor="let name of maincompanylist" [ngValue]="name.value">
                                            {{name.label}}</option>
                                    </select>
                                    <div *ngIf="mCompanyName.invalid && (mCompanyName.dirty || mCompanyName.touched)"
                                        class="alert alert-danger alert-danger-cstm">
                                        <div *ngIf="mCompanyName.errors.required">
                                            <small> Company Name is required </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select [(ngModel)]="headerInfo.buId" name="primaryBU"
                                        (change)="getDivisionlist(headerInfo.buId)" class="form-control"
                                        (ngModelChange)="enableHeaderSave()">
                                        <option value="0">Select</option>
                                        <option *ngFor="let name of bulist" [ngValue]="name.value">{{name.label}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <select class="form-control" [(ngModel)]="headerInfo.divisionId"
                                        name="primaryDivision" (change)="getDepartmentlist(headerInfo.divisionId)"
                                        (ngModelChange)="enableHeaderSave()">
                                        <option value="0">Select</option>
                                        <option *ngFor="let name of divisionlist" [ngValue]="name.value">{{name.label}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <select class="form-control" [(ngModel)]="headerInfo.departmentId"
                                        name="primaryDept" (change)="getDepartmentId(headerInfo.departmentId)"
                                        (ngModelChange)="enableHeaderSave()">
                                        <option value="0">Select</option>
                                        <option *ngFor="let name of departmentList" [ngValue]="name.value">
                                            {{name.label}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="toggle_po_header">

                    <button class="btn btn-primary pull-right toggle-btn-align" (click)="savePurchaseOrderHeader()"
                        [disabled]="!createPOForm.valid" [disabled]="!enableHeaderSaveBtn">{{isEditModeHeader ? 'Update'
                        : 'Save'}}</button>
                </div>
            </div>
        </div>
    </div>

</form>

<ng-container *ngIf="isEditModeHeader">
    <p-tabView class="pas-tabview" (onChange)="onChangeTabView($event)">
        <p-tabPanel header="Parts List">
            <form #createPOPartsForm="ngForm">
                <button (click)="addPartNumber()" class="btn btn-primary" [disabled]="disableAddPart">Add PN</button>                
                <button data-toggle="modal" data-target="#add-multiple-partnum" class="btn btn-primary"
                    (click)="onAddMultParts()" [disabled]="disableAddPart">Add Multiple PN</button>
                <button (click)="initiatePOPrintProcess()" class="btn btn-primary">Print</button>
                <div class="table-responsive pas-table-cstm rro-part-table-cstm poro-table-cstm parts-list-table-align parts-zindex"
                    style="min-height: 130px !important;">
                    <div class="tableFixHead">
                        <table class="table table-bordered " id="po-table">
                            <thead>
                                <tr class="header-table-width font-size-10">
                                    <!-- <th class="th-width"></th> -->
                                    <!-- <th style="padding-bottom: 2px !important;min-width: 50px;">
                                    <span class="checkbox-cstm">
                                        <label style="width: 20px;">
                                            <input type="checkbox" name="checkAllPartsList" [(ngModel)]="checkAllPartsList" #checkAllPartsList1>
                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                        </label>
                                    </span>
                                </th> -->
                                    <!-- <th class="th-width">SplitShipment</th> -->
                                    <th class="min-width-30">Line#</th>
                                    <th class="th-width">SplitShipment</th>
                                    <th>PN <span class="clr-red">*</span></th>
                                    <th>ALT/Equiv PN</th>
                                    <th>PN Description</th>
                                    <th>Stock Type</th>
                                    <th>Mfr</th>
                                    <th>Priority <span class="clr-red">*</span></th>
                                    <th>Need By <span class="clr-red">*</span></th>
                                    <th>Cond <span class="clr-red">*</span></th>
                                    <th class="th-width-90">Order Qty <span class="clr-red">*</span></th>
                                    <th style="min-width:98px">Vend List Price <span class="clr-red">*</span></th>
                                    <th>Disc Percent</th>
                                    <th class="th-width-90">Disc./unit</th>
                                    <th class="th-width-90">Disc. Amount</th>
                                    <!--Disc. Cost/unit-->
                                    <th class="th-width-90">Unit Cost</th>
                                    <th class="th-width-90">Ext Cost</th>
                                    <th>Functional CUR <span class="clr-red">*</span></th>
                                    <th class="th-width-90">FX Rate <span class="clr-red">*</span></th>
                                    <th>Report CUR <span class="clr-red">*</span></th>
                                    <th class="th-width-90">WO Num</th>
                                    <th class="th-width-90">Sub-WO Num</th>
                                    <th class="th-width-90">RO Num</th>
                                    <th class="th-width-90">SO Num</th>
                                    <th>Item Type</th>
                                    <th>GL Account</th>
                                    <th>UOM</th>
                                    <th class="msHeader" colspan="4">Management Structure <span class="clr-red">*</span>
                                    </th>
                                    <th>Notes</th>
                                    <th style="position: sticky !important; min-width: 100px !important;">Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let partList of partListData;let row_index=index;">
                                    <!--createPOPartsList-->
                                    <tr class="table-parent-data purchase-td-back" *ngIf="!partList.isDeleted">
                                        <!-- <td class="center"><i class="fa fa-trash parts-list-delete-msg"
                                                matTooltip="Delete Part Number" matTooltipPosition="after"
                                                (click)="onDelPNRow(partList, row_index)"
                                                *ngIf="!partList.isApproved"></i></td>-->

                                        <td>{{row_index + 1}}</td>
                                        <td class="center">
                                            <span class="checkbox-cstm" *ngIf="!partList.isApproved">
                                                <label class="checkbox-label-width">
                                                    <input type="checkbox" class="splitship"
                                                        name="ifSplitShip{{row_index}}"
                                                        [(ngModel)]="partList.ifSplitShip"
                                                        (change)="ifSplitShipment(partList, $event)">
                                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                                </label>
                                            </span>
                                        </td>
                                        <td>

                                            <p-autoComplete field="label" appendTo="body"
                                                [ngClass]="inputValidCheck ? 'autocomplete-validate' : ''"
                                                [(ngModel)]="partList.partNumberId" name="partNumber{{row_index}}"
                                                id="partNumber{{row_index}}" [suggestions]="partCollection"
                                                (completeMethod)="filterpartItems($event)" [size]="30" [minLength]="1"
                                                [dropdown]="true" class="autocomplete" #partNum="ngModel"
                                                errorMessage="Records not found" (onSelect)="getPNDetailsById(partList)"
                                                [forceSelection]="true" title="PN" [disabled]="partList.isApproved"
                                                (ngModelChange)="enablePartSave()" required>
                                            </p-autoComplete>
                                            <!-- <div *ngIf="partNum.invalid && (partNum.dirty || partNum.touched)" class="alert alert-danger alert-danger-cstm">
                                                    <div *ngIf="partNum.errors.required">
                                                        <small> PartNumber is required </small>
                                                    </div>
                                            </div> -->

                                        </td>
                                        <td>
                                            <p-autoComplete field="label" appendTo="body" class="autocomplete"
                                                [(ngModel)]="partList.altEquiPartNumberId"
                                                name="altPartNumber{{row_index}}" id="altPartNumber{{row_index}}"
                                                [suggestions]="partList.altPartCollection"
                                                (completeMethod)="filterAltPartItems($event,partList.partNumberId,partList)"
                                                [size]="30" [minLength]="1" [dropdown]="true"
                                                errorMessage="Records not found"
                                                [disabled]="!partList.itemMasterId || partList.isApproved"
                                                (ngModelChange)="enablePartSave()" [forceSelection]="true">
                                            </p-autoComplete>
                                            <!-- <div class="inner-addon right-addon autosuggesions-add inline-block w80">
                                            <i class="fa fa-search"></i>
                                            <input type="text" class="form-control numberids ui-autocomplete-input" name="altPartNumberId{{row_index}}" autocomplete="off" [(ngModel)]="partList.altPartNumberId">
                                        </div> -->
                                        </td>
                                        <td class="parts-des-td">{{partList.partDescription}}</td>
                                        <td>{{partList.stockType}}</td>
                                        <td>{{partList.manufacturerName}}</td>
                                        <td>
                                            <!-- (change)="onChangePriorityPartsList(partList)"  -->
                                            <select [(ngModel)]="partList.priorityId" name="priorityId{{row_index}}"
                                                appendTo="body" (ngModelChange)="enablePartSave()"
                                                [disabled]="partList.isApproved" required>
                                                <option *ngFor="let item of allPriorityInfo" [ngValue]="item.value">
                                                    {{item.label}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <p-calendar class="calendar-grid" [yearNavigator]="true"
                                                [monthNavigator]="true" yearRange="1900:2100" [showIcon]="true"
                                                appendTo="body" [minDate]="headerInfo.openDate"
                                                name="needByDate{{row_index}}" id="needByDate{{row_index}}"
                                                title="Need By Date" [(ngModel)]="partList.needByDate"
                                                #pNeedByDate="ngModel" (ngModelChange)="enablePartSave()" required
                                                [disabled]="partList.isApproved"></p-calendar>
                                            <div *ngIf="pNeedByDate.invalid && (pNeedByDate.dirty || pNeedByDate.touched)"
                                                class="alert alert-danger alert-danger-cstm">
                                                <div *ngIf="pNeedByDate.errors.required">
                                                    <small> NeedBy Date is required </small>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <select [(ngModel)]="partList.conditionId" name="conditionCode{{row_index}}"
                                                (change)="getPriceDetailsByCondId(partList)"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved"
                                                required>
                                                <option *ngFor="let item of allconditioninfo" [ngValue]="item.value">
                                                    {{item.label}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" [ngClass]="inputValidCheck ? 'input-validate' : ''"
                                                title="Order Qty" class="form-control text-right"
                                                [(ngModel)]="partList.quantityOrdered"
                                                name="parentQtyOrdered{{row_index}}" pKeyFilter="pint"
                                                #parentQtyOrdered="ngModel"
                                                (change)="onChangeParentQtyOrdered($event, partList); onGetDiscPerUnit(partList); onGetDiscAmount(partList); onGetExtCost(partList);"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved"
                                                required>
                                            <div *ngIf="parentQtyOrdered.invalid && (parentQtyOrdered.dirty || parentQtyOrdered.touched)"
                                                class="alert alert-danger alert-danger-cstm">
                                                <div *ngIf="parentQtyOrdered.errors.required">
                                                    <small> Order Qty is required </small>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" [ngClass]="inputValidCheck ? 'input-validate' : ''"
                                                class="form-control text-right" [(ngModel)]="partList.vendorListPrice"
                                                name="vendorListPrice{{row_index}}" pKeyFilter="money"
                                                (change)="onGetDiscPerUnit(partList); onGetDiscAmount(partList); onGetExtCost(partList);"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved"
                                                required>
                                        </td>
                                        <td>
                                            <select [(ngModel)]="partList.discountPercent" class="select-right"
                                                name="discountPercent{{row_index}}"
                                                (change)="onGetDiscPerUnit(partList); onGetDiscAmount(partList); onGetExtCost(partList);"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                                <option *ngFor="let item of allPercentData" [ngValue]="item.percentId">
                                                    {{item.percentValue}}</option>
                                            </select>
                                            <!-- <p-autoComplete field="percentValue" [ngClass]="inputValidCheck ? 'p-acomp-validate' : ''" class="pautocomp-cstm pautocomp-right" [(ngModel)]="partList.discountPercent" name="discountPercent{{row_index}}" [suggestions]="discountPercentList" (completeMethod)="filterDiscountPercent($event)" (onSelect)="onGetDiscPerUnit(partList); onGetDiscAmount(partList); onGetExtCost(partList);" [size]="30" [minLength]="1" [dropdown]="true" [forceSelection]="true" (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                        </p-autoComplete> -->
                                        </td>
                                        <td><input type="text" class="form-control text-right"
                                                [(ngModel)]="partList.discountPerUnit"
                                                name="discountPerUnit{{row_index}}" pKeyFilter="money"
                                                (change)="onGetDiscPercent(partList); onGetDiscAmount(partList);"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                        </td>
                                        <!--onGetvendorListPrice(partList);-->
                                        <td><input type="text" class="form-control text-right"
                                                [(ngModel)]="partList.discountAmount" name="discountAmount{{row_index}}"
                                                pKeyFilter="money" disabled></td>
                                        <td>
                                            <input type="text" title="Unit Cost" class="form-control text-right"
                                                [(ngModel)]="partList.unitCost" name="unitCost{{row_index}}"
                                                pKeyFilter="money" (ngModelChange)="enablePartSave()"
                                                (change)="onGetDiscPerUnitByUnitCost(partList);"
                                                [disabled]="partList.isApproved">
                                        </td>
                                        <td><input type="text" [ngClass]="inputValidCheck ? 'input-validate' : ''"
                                                class="form-control text-right" [(ngModel)]="partList.extendedCost"
                                                name="extendedCost{{row_index}}" pKeyFilter="money" disabled></td>
                                        <td>
                                            <p-autoComplete appendTo="body" field="label"
                                                [ngClass]="inputValidCheck ? 'autocomplete-validate' : ''"
                                                class="autocomplete" [(ngModel)]="partList.functionalCurrencyId"
                                                title="Functional Currency" name="functionalCurrencyId{{row_index}}"
                                                [suggestions]="functionalCurrList"
                                                (completeMethod)="filterFunctionalCurrency($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                                [forceSelection]="true" [disabled]="true">
                                            </p-autoComplete>
                                        </td>
                                        <td><input type="number" [ngClass]="inputValidCheck ? 'input-validate' : ''"
                                                class="form-control" [(ngModel)]="partList.foreignExchangeRate"
                                                title="Foreign Exchange Rate" name="foreignExchangeRate{{row_index}}"
                                                pKeyFilter="money" (change)="getFXRate(partList, 'onChange')"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved"
                                                required></td>
                                        <td>
                                            <p-autoComplete field="label" appendTo="body"
                                                [ngClass]="inputValidCheck ? 'autocomplete-validate' : ''"
                                                class="autocomplete" [(ngModel)]="partList.reportCurrencyId"
                                                title="Report Currency" name="reportCurrencyId{{row_index}}"
                                                [suggestions]="functionalTransList"
                                                (completeMethod)="filterTransCurrency($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                                [forceSelection]="true" [disabled]="true">
                                                <!--[disabled]=true-->
                                            </p-autoComplete>
                                        </td>
                                        <td>
                                            <p-autoComplete field="label" class="autocomplete" appendTo="body"
                                                [(ngModel)]="partList.workOrderId" name="workOrderId{{row_index}}"
                                                id="workOrderId{{row_index}}" [suggestions]="allWorkOrderDetails"
                                                (onSelect)="onWOSelect($event.value,partList,row_index)"
                                                (completeMethod)="filterWorkOrderList($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                                [forceSelection]="true" (ngModelChange)="enablePartSave()"
                                                [disabled]="partList.isApproved">
                                            </p-autoComplete>
                                            <!-- <input type="number" class="form-control" [(ngModel)]="partList.workOrderId" name="workOrderId{{row_index}}"> -->

                                        </td>
                                        <td>
                                            <p-autoComplete field="label" class="autocomplete" appendTo="body"
                                                [(ngModel)]="partList.subWorkOrderId" name="subworkOrderId{{row_index}}"
                                                id="subworkOrderId{{row_index}}"
                                                [suggestions]="partList.subWorkOrderlist"
                                                (onSelect)="onSubWOSelect($event.value)"
                                                (completeMethod)="filtersubWorkOrderList($event,partList.workOrderId,partList,row_index)"
                                                [size]="30" [minLength]="1" [dropdown]="true"
                                                errorMessage="Records not found" [forceSelection]="true"
                                                (ngModelChange)="enablePartSave()" [disabled]="!partList.workOrderId">
                                            </p-autoComplete>
                                            <!--   -->
                                            <!-- <input type="number" class="form-control" [(ngModel)]="partList.workOrderId" name="workOrderId{{row_index}}"> -->

                                        </td>
                                        <td>
                                            <p-autoComplete field="label" class="pautocomp-cstm" appendTo="body"
                                                [(ngModel)]="partList.repairOrderId" name="repairOrderId{{row_index}}"
                                                [suggestions]="allRepairOrderDetails"
                                                (onSelect)="onROSelect($event.value)"
                                                (completeMethod)="filterRepairOrderList($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                                [forceSelection]="true" (ngModelChange)="enablePartSave()"
                                                [disabled]="partList.isApproved">
                                            </p-autoComplete>
                                            <!-- <input type="number" class="form-control" [(ngModel)]="partList.repairOrderId" name="repairOrderId{{row_index}}"> -->

                                        </td>
                                        <td>
                                            <p-autoComplete field="label" class="autocomplete" appendTo="body"
                                                [(ngModel)]="partList.salesOrderId" name="salesOrderId{{row_index}}"
                                                [suggestions]="allSalesOrderDetails"
                                                (onSelect)="onSOSelect($event.value)"
                                                (completeMethod)="filterSalesOrderList($event)" [size]="30"
                                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                                [forceSelection]="true" (ngModelChange)="enablePartSave()"
                                                [disabled]="partList.isApproved">
                                            </p-autoComplete>
                                            <!-- <input type="number" class="form-control" [(ngModel)]="partList.salesOrderId" name="salesOrderId{{row_index}}"> -->

                                        </td>
                                        <td *ngIf="partList.itemTypeId==1">Stock</td>
                                        <td *ngIf="partList.itemTypeId==2">Non Stock</td>
                                        <td *ngIf="partList.itemTypeId==3">Equipment</td>
                                        <td *ngIf="partList.itemTypeId==0 || !partList.itemTypeId"></td>
                                        <td>
                                            {{partList.glAccountName}}
                                            <!--{{partList?.glAccountId}}-->
                                            <!-- <p-autoComplete field="accountName" class="pautocomp-cstm" [(ngModel)]="partList.glAccount"
                                        name="glAccount{{row_index}}" [size]="30" [minLength]="1" [dropdown]="true" [disabled]=true>
                                        </p-autoComplete>   -->
                                        </td>
                                        <td>
                                            {{partList.UOMShortName}}
                                        </td>

                                        <td class="mgmt-td-align">

                                            <!-- <label style="width:90px;">Company:</label> -->
                                            <select class="form-control" [(ngModel)]="partList.parentCompanyId"
                                                name="parentCompanyName{{row_index}}"
                                                (change)="getParentBUList(partList)" #pcompanyName
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved"
                                                required>
                                                <option value="0">Select</option>
                                                <option *ngFor="let company of partList.maincompanylist"
                                                    value="{{company.value}}">{{company.label}}</option>
                                            </select>
                                            <div *ngIf="pcompanyName.invalid && (pcompanyName.dirty || pcompanyName.touched)"
                                                class="alert alert-danger alert-danger-cstm">
                                                <div *ngIf="pcompanyName.errors.required">
                                                    <small> Company Name is required </small>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="mgmt-td-align">
                                            <!-- <label style="width:90px;">BU:</label> -->
                                            <select class="form-control" [(ngModel)]="partList.parentbuId"
                                                name="parentBU{{row_index}}" (change)="getParentDivisionlist(partList)"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                                <option value="0">Select</option>
                                                <option *ngFor="let businessUnit of partList.parentBulist"
                                                    value="{{businessUnit.value}}">{{businessUnit.label}}</option>
                                            </select>
                                        </td>
                                        <td class="mgmt-td-align">
                                            <!-- <label style="width:90px;">Division:</label> -->
                                            <select class="form-control" [(ngModel)]="partList.parentDivisionId"
                                                name="parentDivision{{row_index}}"
                                                (change)="getParentDeptlist(partList)"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                                <option value="0">Select</option>
                                                <option *ngFor="let division of partList.parentDivisionlist"
                                                    value="{{division.value}}">{{division.label}}</option>
                                            </select>
                                        </td>
                                        <td class="mgmt-td-align">
                                            <!-- <label style="width:90px;">Dept:</label> -->
                                            <select class="form-control" [(ngModel)]="partList.parentDeptId"
                                                name="parentDept{{row_index}}" (change)="getParentDeptId(partList)"
                                                (ngModelChange)="enablePartSave()" [disabled]="partList.isApproved">
                                                <option value="0">Select</option>
                                                <option *ngFor="let department of partList.parentDepartmentlist "
                                                    value="{{department.value}}">{{department.label}}</option>
                                            </select>
                                        </td>
                                        <td>

                                            <div [innerHTML]="partList.memo" [matTooltip]="parsedText(partList.memo)"
                                                matTooltipPosition="above" class="form-control"
                                                class="text_editor_box parts-memo"></div>
                                            <!-- <i class="fa fa-info-circle fa-lg pull-right" style="margin-top:-16px"
                                           data-toggle="modal"
                                           data-target="#parts-memo-popup" matTooltip="Notes"
                                           matTooltipPosition="above"
                                           (click)="onClickPartsMemo(partList)" *ngIf="!partList.isApproved"></i> -->

                                            <i class="fa fa-pencil fa-lg pull-right nobg parts-memo-icon"
                                                data-toggle="modal" data-target="#parts-memo-popup" matTooltip="Notes"
                                                matTooltipPosition="above" (click)="onClickPartsMemo(partList)"
                                                *ngIf="!partList.isApproved"></i>



                                            <!-- <input type="text" class="form-control" [(ngModel)]="partList.memo"
                                        name="memo{{row_index}}"> -->


                                        </td>
                                        <td style="position:sticky; width:80px">

                                            <!-- <td class="center"><i class="fa fa-trash parts-list-delete-msg"
                                                matTooltip="Delete Part Number" matTooltipPosition="after"
                                                (click)="onDelPNRow(partList, row_index)"
                                                *ngIf="!partList.isApproved"></i></td> -->
                                            <i class="fa fa-trash parts-list-delete-msg"
                                                style="vertical-align: top;padding-right:5px"
                                                matTooltip="Delete Part Number" matTooltipPosition="after"
                                                (click)="onDelPNRow(partList, row_index)"
                                                *ngIf="!partList.isApproved"></i>

                                            <!-- <span class="checkbox-cstm" *ngIf="!partList.isApproved">
                                                <label class="checkbox-label-width">
                                                    <input type="checkbox" class="splitship"
                                                        name="ifSplitShip{{row_index}}"
                                                        [(ngModel)]="partList.ifSplitShip"
                                                        (change)="ifSplitShipment(partList, $event)">
                                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                                </label>
                                            </span> -->



                                        </td>
                                    </tr>
                                    <ng-container *ngIf="!partList.isDeleted">
                                        <tr class="child-header splitship-head child-header-back"
                                            *ngIf="partList.ifSplitShip">

                                            <!-- <th></th> -->
                                            <!-- <th><i class="fa fa-plus btn btn-success btn-cstm poro-plus-cstm btn-xs"
                                                    matTooltip="Add Split Shipment" matTooltipPosition="above"
                                                    style="padding: 4px 8px !important;" (click)="addRow(partList)"
                                                    *ngIf="!partList.isApproved"></i></th> -->
                                            <th></th>
                                            <th></th>
                                            <th>PN</th>
                                            <th>PN Description</th>
                                            <th>User Type <span class="clr-red">*</span></th>
                                            <th>Name <span class="clr-red">*</span></th>
                                            <th colspan="3">Select Shipping Address <span class="clr-red">*</span></th>
                                            <th>UOM</th>
                                            <th>Priority</th>
                                            <th>Order Qty <span class="clr-red">*</span></th>
                                            <th>Need By <span class="clr-red">*</span></th>
                                            <th colspan="4">Management Structure <span class="clr-red">*</span></th>
                                            <th colspan="15"></th>
                                            <th style="min-width: 120px; position: sticky !important">
                                                <i class="fa fa-plus btn btn-success btn-cstm poro-plus-cstm btn-xs"
                                                    matTooltip="Add Split Shipment" matTooltipPosition="above"
                                                    style="padding: 0px 4px !important;" (click)="addRow(partList)"
                                                    *ngIf="!partList.isApproved"></i>
                                            </th>
                                        </tr>
                                        <ng-container *ngIf="partList.ifSplitShip">
                                            <tr class="child-data splitship-child child-data-back"
                                                *ngFor="let partChildList of partList.childList; let row_no = index"
                                                [hidden]="partChildList.isDeleted">

                                                <td></td>
                                                <td></td>
                                                <!-- <td class="center"><i class="fa fa-trash parts-list-delete-msg"
                                                        matTooltip="Delete Split Shipment" matTooltipPosition="above"
                                                        (click)="deleteSplitShipment(partChildList,row_no,row_index)"
                                                        *ngIf="!partChildList.isApproved"></i></td> -->
                                                <td>{{partList.partNumber}}</td>
                                                <td>{{partList.partDescription}}</td>
                                                <td>
                                                    <select name="partListUserType{{row_index}}{{row_no}}"
                                                        [(ngModel)]="partChildList.partListUserTypeId"
                                                        #pUserType="ngModel"
                                                        (change)="onSelectSplitUserType(partChildList, row_index, row_no)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required>
                                                        <ng-container *ngFor="let item of userTypes">
                                                            <option [value]="item.moduleId"
                                                                *ngIf="item.moduleName != 'Others'">{{item.moduleName}}
                                                            </option>
                                                        </ng-container>
                                                        <!-- <option value="1">Customer</option>
                                                <option value="2">Vendor</option>
                                                <option value="3">Company</option> -->
                                                    </select>
                                                    <div *ngIf="pUserType.invalid && (pUserType.dirty || pUserType.touched)"
                                                        class="alert alert-danger alert-danger-cstm">
                                                        <div *ngIf="pUserType.errors.required">
                                                            <small> User Type is required </small>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <!-- <div *ngIf="partChildList.partListUserTypeId==customerModuleId"> -->

                                                    <p-autoComplete
                                                        *ngIf="partChildList.partListUserTypeId==customerModuleId"
                                                        field="label" class="autocomplete"
                                                        [(ngModel)]="partChildList.partListUserId"
                                                        name="cCustomerName{{row_index}}{{row_no}}" appendTo='body'
                                                        [baseZIndex]="9999" [suggestions]="splitcustomersList"
                                                        (completeMethod)="filterCustomersSplit($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true"
                                                        (onSelect)="onUserNameChange(customerModuleId,$event.value, null, row_index, row_no)"
                                                        #cCustomerName="ngModel" errorMessage="Records not found"
                                                        [forceSelection]="true" (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required></p-autoComplete>

                                                    <!-- <div class="col-sm-1">
                                                    <div class="child-add-icon"><a target="_blank" matTooltip="Add Customer" matTooltipPosition="above" [routerLink]="['/customersmodule/customerpages/app-customer-create']"><i class="fa fa-plus-circle fa-lg"></i></a></div>
                                                </div> -->
                                                    <!-- </div> -->
                                                    <!-- <div  *ngIf="partChildList.partListUserTypeId==vendorModuleId"> -->

                                                    <p-autoComplete
                                                        *ngIf="partChildList.partListUserTypeId==vendorModuleId"
                                                        field="vendorName" class="autocomplete"
                                                        [(ngModel)]="partChildList.partListUserId"
                                                        name="splitVendorNames{{row_index}}{{row_no}}"
                                                        [suggestions]="splitVendorNames"
                                                        (completeMethod)="filterSplitVendorNames($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true"
                                                        errorMessage="Records not found" [forceSelection]="true"
                                                        (onSelect)="onUserNameChange(vendorModuleId,$event.vendorId, null, row_index, row_no)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required>
                                                        <!--required #cVendorName="ngModel"-->
                                                    </p-autoComplete>

                                                    <!-- <div class="col-sm-1">
                                                    <div class="child-add-icon"><a target="_blank" matTooltip="Add Vendor" matTooltipPosition="above" [routerLink]="['/vendorsmodule/vendorpages/app-vendor-general-information']"><i class="fa fa-plus-circle fa-lg"></i></a></div>
                                                </div> -->
                                                    <!-- </div> -->
                                                    <!-- <div  *ngIf="partChildList.partListUserTypeId==companyModuleId"> -->
                                                    <p-autoComplete
                                                        *ngIf="partChildList.partListUserTypeId==companyModuleId"
                                                        field="label" class="autocomplete"
                                                        (onSelect)="onUserNameChange(companyModuleId,$event.value, null, row_index, row_no)"
                                                        [(ngModel)]="partChildList.partListUserId"
                                                        name="splitCompanyName{{row_index}}{{row_no}}"
                                                        [suggestions]="legalEntityList_Forgrid"
                                                        (completeMethod)="filterCompanyNameforgrid($event)" [size]="30"
                                                        [minLength]="1" [dropdown]="true"
                                                        errorMessage="Records not found" [forceSelection]="true"
                                                        title="Ship Company Name" #shipCompanyName="ngModel"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required>
                                                    </p-autoComplete>
                                                    <!-- </div> -->
                                                </td>

                                                <td colspan="3">
                                                    <div class="form-row">
                                                        <div class="col-sm-10">
                                                            <select
                                                                class="inner-addon right-addon autosuggesions-add inline-block mw400 form-control"
                                                                [(ngModel)]="partChildList.poPartSplitSiteId"
                                                                name="partListAddressId{{row_index}}{{row_no}}"
                                                                (ngModelChange)="enablePartSave()"
                                                                [disabled]="partChildList.isApproved" required>
                                                                <option value="0">Select</option>
                                                                <option
                                                                    *ngFor="let object of getAddressDetails('splitAddressData', row_index, row_no)"
                                                                    value="{{object.siteID}}">{{object.siteName}},
                                                                    {{object.address1}}, {{object.city}},
                                                                    {{object.stateOrProvince}}, {{object.country}} -
                                                                    {{object.postalCode}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-1 parts-plus"
                                                            *ngIf="(partChildList.partListUserId | json) != '{}' && partChildList.partListUserId != null">
                                                            <div><a class="fa fa-plus-circle fa-lg"
                                                                    matTooltip="Add Split Address"
                                                                    matTooltipPosition="above" data-toggle="modal"
                                                                    data-target="#createPOAddress"
                                                                    (click)="onClickPartsListAddress('Add', partChildList, row_index, row_no)"
                                                                    *ngIf="!partChildList.isApproved"></a></div>
                                                        </div>
                                                        <div class="col-sm-1 parts-list-memo-div ship-address-memo"
                                                            *ngIf="partChildList.poPartSplitSiteId && partChildList.poPartSplitSiteId != null && partChildList.poPartSplitSiteId != 0">
                                                            <!-- <div style="cursor:pointer; font-size:12px;"><a class="fa fa-edit fa-lg"
                                                         matTooltip="Edit Split Address" matTooltipPosition="above"
                                                         data-toggle="modal" data-target="#createPOAddress" 
                                                         (click)="onClickPartsListAddress('Edit', partChildList, row_index, row_no)"
                                                          *ngIf="!partChildList.isApproved"></a></div> -->

                                                            <span class="parts-list-memo-div"><a class="btn nobg"
                                                                    matTooltip="Edit Split Address"
                                                                    matTooltipPosition="above" data-toggle="modal"
                                                                    data-target="#createPOAddress"
                                                                    (click)="onClickPartsListAddress('Edit', partChildList, row_index, row_no)"
                                                                    *ngIf="!partChildList.isApproved"><i
                                                                        class="fa fa-pencil"></i></a>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>{{partList.UOMShortName}}</td>
                                                <td>{{partChildList.priorityId}}</td>
                                                <td><input class="form-control text-right" type="text" pKeyFilter="pint"
                                                        [(ngModel)]="partChildList.quantityOrdered"
                                                        name="childQtyOrdered{{row_index}}{{row_no}}"
                                                        (change)="onChangeChildQtyOrdered(partList, partChildList)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required /></td>
                                                <!--[disabled]="!partList.quantityOrdered"-->
                                                <td>
                                                    <p-calendar class="calendar-grid" [showIcon]="true"
                                                        [yearNavigator]="true" [monthNavigator]="true"
                                                        yearRange="1900:2100" appendTo="body"
                                                        [minDate]="sourcePoApproval.openDate"
                                                        [(ngModel)]="partChildList.needByDate"
                                                        name="childNeedByDate{{row_index}}{{row_no}}"
                                                        id="childNeedByDate{{row_index}}{{row_no}}" title="Need By Date"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required></p-calendar>
                                                </td>
                                                <td class="mgmt-td-align">
                                                    <!-- <label style="width:90px;">Company:</label> -->
                                                    <select
                                                        class="inner-addon right-addon autosuggesions-add inline-block mw400"
                                                        name="childCompanyName{{row_index}}{{row_no}}"
                                                        [(ngModel)]="partChildList.childCompanyId"
                                                        (change)="getChildBUList(partChildList)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved" required>
                                                        <option value="0">select</option>
                                                        <option *ngFor="let company of partChildList.maincompanylist"
                                                            value="{{company.value}}">{{company.label}}</option>
                                                    </select>

                                                </td>
                                                <td class="mgmt-td-align">
                                                    <!-- <label style="width:90px;">BU:</label> -->
                                                    <select
                                                        class="inner-addon right-addon autosuggesions-add inline-block mw400"
                                                        name="childBU{{row_index}}{{row_no}}"
                                                        [(ngModel)]="partChildList.childbuId"
                                                        (change)="getChildDivisionlist(partChildList)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved">
                                                        <option value="0">select</option>
                                                        <option *ngFor="let businessUnit of partChildList.childBulist"
                                                            value="{{businessUnit.value}}">{{businessUnit.label}}
                                                        </option>
                                                    </select>
                                                </td>
                                                <td class="mgmt-td-align">
                                                    <!-- <label style="width:90px;">Division:</label> -->
                                                    <select
                                                        class="inner-addon right-addon autosuggesions-add inline-block mw400"
                                                        name="childDivision{{row_index}}{{row_no}}"
                                                        [(ngModel)]="partChildList.childDivisionId"
                                                        (change)="getChildDeptlist(partChildList)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved">
                                                        <option value="0">select</option>
                                                        <option *ngFor="let division of partChildList.childDivisionlist"
                                                            value="{{division.value}}">
                                                            {{division.label}}
                                                        </option>
                                                    </select>
                                                </td>
                                                <td class="mgmt-td-align">
                                                    <!-- <label style="width:90px;">Dept:</label> -->
                                                    <select
                                                        class="inner-addon right-addon autosuggesions-add inline-block mw400"
                                                        name="childDept{{row_index}}{{row_no}}"
                                                        [(ngModel)]="partChildList.childDeptId"
                                                        (change)="getChildDeptId(partChildList)"
                                                        (ngModelChange)="enablePartSave()"
                                                        [disabled]="partChildList.isApproved">
                                                        <option value="0">select</option>
                                                        <option
                                                            *ngFor="let department of partChildList.childDepartmentlist"
                                                            value="{{department.value}}">{{department.label}}</option>
                                                    </select>
                                                </td>
                                                <td colspan="15"></td>
                                                <td class="zui-sticky-col width-107">
                                                    <span> <i class="fa fa-trash parts-list-delete-msg"
                                                            matTooltip="Delete Split Shipment"
                                                            matTooltipPosition="above"
                                                            (click)="deleteSplitShipment(partChildList,row_no,row_index)"
                                                            *ngIf="!partChildList.isApproved"></i></span>

                                                </td>
                                            </tr>
                                        </ng-container>
                                        <tr class="child-header splitship-head child-header-back"
                                            *ngIf="partList.ifSplitShip">
                                            <td class="child-td-align"></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>

                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class="child-td-align"><b>Qty. Rem. : {{ partList.remQty}} </b></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td colspan="17"></td>
                                            <td style="position: sticky !important;"></td>
                                        </tr>
                                    </ng-container>
                                </ng-container>

                                <tr *ngIf="partListData.length > 0" class="child-header-back">
                                    <td class="child-td-align"><b>Total: </b></td>
                                    <td></td>
                                    <td></td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td class="text-right"><b>{{totalDiscAmount}}</b></td>
                                    <td>&nbsp;</td>
                                    <td class="text-right"><b>{{totalExtCost}}</b></td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td style="position: sticky !important"></td>
                                </tr>
                                <tr *ngIf="partListData.length == 0">
                                    <td [attr.colspan]="40" class="no-records-cstm no-records-msg">
                                        No records found
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <button class="btn btn-primary pull-right" (click)="savePurchaseOrderPartsList(poQty)"
                        [disabled]="!enablePartSaveBtn">{{isEditModePart ? 'Update' : 'Save'}}</button>
                </div>
            </form>
        </p-tabPanel>
        <p-tabPanel header="Address">
            <app-address-component *ngIf="showAddresstab" [addressType]="addressType" [id]="id">
            </app-address-component>
        </p-tabPanel>
        <p-tabPanel *ngIf="posettingModel.IsEnforceApproval" header="Internal Approvers">
            <div class="approver-tab-cstm">
                <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
                    <div class="tableFixHead">
                        <table class="table table-bordered header-table-width" id="mpn-list-table">
                            <thead>
                                <tr class="pad_workflo">
                                    <th>Approver Name</th>
                                    <th>Approver Code</th>
                                    <th>Approver Email</th>
                                    <th class="width-60">Total PO Cost</th>
                                    <th>Approver Rule</th>
                                    <th>Memo</th>
                                    <th>Message</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="mpn-row" *ngFor="let approver of internalApproversList; let i=index;">
                                    <td>{{approver.approverName}}</td>
                                    <td>{{approver.approverCode}}</td>
                                    <td>{{approver.approverEmail}}</td>
                                    <td class="text-right">
                                        <label class="text-right">{{approver.totalCost |
                                            twoDecimalGlobalNumberFormatPipe}}</label>
                                    </td>
                                    <td>
                                        {{approver.rule}}
                                    </td>
                                    <td>
                                        <p class="m-0 p-0 p_textEditor memo-left" [innerHTML]="approver['memo']"></p>
                                    </td>
                                    <td [ngClass]="{red : approver.isExceeded == true}">{{approver.message}}</td>
                                </tr>
                                <tr *ngIf="internalApproversList.length == 0">
                                    <td [attr.colspan]="29" class="no-records-cstm no-records-msg">
                                        No records found
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel *ngIf="posettingModel.IsEnforceApproval" class="pas-tabpanel-po" header="Approver Process">
            <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
                <div class="tableFixHead">
                    <table class="table table-bordered">
                        <thead>
                            <tr class="pad_workflo">
                                <th class="approver-th-align th-width" style="text-align: center !important;">
                                    <input type="checkbox" (click)="selectAllApproval(selectallApprovers)"
                                        [(ngModel)]="selectallApprovers" [disabled]="disableApproverSelectAll" />
                                </th>
                                <th class="approver-th-align approver-display" style="display: none;">
                                    Split Shipment
                                </th>
                                <th *ngFor="let header of approvalProcessHeader">
                                    {{header.header}}
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let approver of approvalProcessList; let i=index;"
                                [ngStyle]="{'background-color':approver.isParent === false ? '#fafafa' : 'white' }">
                                <td style="text-align: center;">
                                    <input *ngIf="approver.isParent" type="checkbox" [(ngModel)]="approver.isSelected"
                                        (change)="selectApproval(approver)"
                                        [disabled]="!getPartToDisableOrNot(approver)" />
                                </td>
                                <td class="approver-process-td approver-display">
                                    <input *ngIf="!approver.isParent" type="checkbox" [(ngModel)]="approver.isSelected"
                                        (change)="selectApproval(approver)"
                                        [disabled]="!getPartToDisableOrNot(approver)" />
                                </td>
                                <ng-container *ngFor="let field of approvalProcessHeader">
                                    <td class="qty-width" *ngIf="field.field == 'qty'
                                      || field.field == 'unitCost'
                                      || field.field == 'extCost'">
                                        <p [ngClass]="fields.includes(field.field)?'text-right':''" class="minwidth-80">
                                            {{approver[field.field]}}</p>
                                    </td>
                                    <td *ngIf="field.field != 'sentDate'
                                      && field.field != 'approvedDate'
                                      && field.field != 'statusId'
                                      && field.field != 'approvedBy'
                                      && field.field != 'rejectedBy'
                                      && field.field != 'rejectedDate'                                      
                                      && field.field != 'memo'
                                      && field.field != 'unitCost'
                                      && field.field != 'qty'
                                      && field.field != 'extCost'">
                                        <p [ngClass]="fields.includes(field.field)?'text-right':''"
                                            class="minwidth-120">{{approver[field.field]}}</p>
                                    </td>
                                    <td class="date-td-width" style="min-width:80px"
                                        *ngIf="field.field == 'sentDate' && approver.isSelected == true && approver['actionId'] == 1">
                                        <p-calendar [showIcon]="true" class="calender-cstm" [yearNavigator]="true"
                                            [monthNavigator]="true" yearRange="1900:2100" name="openDate"
                                            #openDate="ngModel" required [(ngModel)]="approver[field.field]"
                                            [minDate]="currentDate" appendTo="body">
                                        </p-calendar>
                                    </td>
                                    <td class="date-td-width" style="min-width:80px"
                                        *ngIf="field.field == 'sentDate' && (approver.isSelected == null || approver.isSelected == false) && approver['actionId'] == 1">
                                        &nbsp;
                                    </td>
                                    <td class="date-td-width" style="min-width:80px"
                                        *ngIf="field.field == 'sentDate' && approver['actionId']  > 1">
                                        {{ approver[field.field] | date: 'MM/dd/yyyy hh:mm a' }}
                                    </td>
                                    <td *ngIf="field.field == 'statusId'">
                                        <label *ngIf="field.field != 'statusId'"
                                            [ngClass]="fields.includes(field.field)?'text-right':''">{{approver[field.field]}}</label>
                                        <select *ngIf="field.field == 'statusId'" (change)="onStatusChange(approver)"
                                            [(ngModel)]="approver['statusId']" class="status-td"
                                            [disabled]="!approver.isSelected || approver['actionId'] != 2">
                                            <!-- <option *ngFor="let item of poApproverStatusList" [ngValue]="item.value">{{item.label}}  </option> -->
                                            <option *ngFor="let item of poApproverStatusList" [ngValue]="item.value"
                                                [hidden]="getStatusvalue(approver['actionStatus'],item.value)">
                                                {{item.label}} </option>
                                            <!-- <option value="">Select</option>
                                        <option value="1">Pending</option>
                                        <option value="2">Approved</option>
                                        <option value="3">Rejected</option>
                                        <option value="4">Sent For Approval</option> -->
                                        </select>
                                    </td>
                                    <td *ngIf="field.field == 'memo'" class="memo-td-width">
                                        <!-- <div class="col-sm-11"> -->
                                        <!-- <input type="text" [(ngModel)]="approver['internalMemo']" class="calender-cstm" style="width:200px;"
                                           [disabled]="!approver.isSelected || approver['actionId'] != 2"
                                           [readonly]="!approver.isSelected || approver['actionId'] != 2"/> -->
                                        <p class="m-0 p-0 p_textEditor" class="memo-left"
                                            [innerHTML]="approver['memo']"></p>
                                        <!-- </div> -->
                                        <div class="approver-memo-div"
                                            *ngIf="approver['actionId'] == 2 || approver['actionId'] == 3">
                                            <!-- <i class="fa fa-info-circle fa-lg" data-toggle="modal"
                                           data-target="#approvers-memo-popup"
                                           matTooltipPosition="above" matTooltip="Add Memo"
                                           (click)="onClickApproversMemo(approver)" *ngIf="approver.isSelected"></i> -->

                                            <i class="fa fa-pencil btn nobg" data-toggle="modal"
                                                data-target="#approvers-memo-popup" matTooltipPosition="above"
                                                matTooltip="Add Memo" (click)="onClickApproversMemo(approver)"
                                                *ngIf="approver.isSelected"></i>
                                        </div>

                                    </td>
                                    <td style="min-width:80px"
                                        *ngIf="field.field == 'approvedDate' && approver['actionId'] != 5">
                                        <!-- <p-calendar [showIcon]="true" class="calender-cstm"
                                                (change)="onStatusChange(approver)"
                                                name="openDate" #openDate="ngModel" required
                                                [(ngModel)]="approver[field.field]"
                                                [disabled]="!approver.isSelected || approver['actionId'] != 2"
                                                [minDate]="approver.sentDate" [maxDate]="currentDate" appendTo="body">
                                                
                                    </p-calendar> -->

                                    </td>
                                    <td style="min-width:80px"
                                        *ngIf="field.field == 'approvedDate' && approver['actionId'] == 5 ">
                                        <!-- <p-calendar [showIcon]="true" class="calender-cstm"
                                                (change)="onStatusChange(approver)"
                                                name="openDate" #openDate="ngModel" required
                                                [(ngModel)]="approver[field.field]"
                                                [disabled]="!approver.isSelected || approver['actionId'] != 2"
                                                [minDate]="approver.sentDate" [maxDate]="currentDate" appendTo="body">
                                                
                                    </p-calendar> -->
                                        {{ approver[field.field] | date: 'MM/dd/yyyy h:mm a' }}
                                    </td>
                                    <td style="min-width:80px"
                                        *ngIf="field.field == 'rejectedDate' && approver['actionId'] != 1 ">

                                    </td>
                                    <td style="min-width:80px"
                                        *ngIf="field.field == 'rejectedDate' && approver['actionId'] == 1  && approver['statusId'] != 3 ">

                                    </td>
                                    <td style="min-width:80px"
                                        *ngIf="field.field == 'rejectedDate' && approver['actionId'] == 1 && approver['statusId'] == 3">

                                        {{ approver[field.field] | date: 'MM/dd/yyyy h:mm a' }}
                                    </td>

                                    <td *ngIf="field.field == 'approvedBy'" class="mgmt-td-align">
                                        <p *ngIf="approver['actionId'] == 2"></p>
                                        <p *ngIf="approver['actionId'] == 5">{{approver.approvedBy ? approver.approvedBy
                                            : ''}}</p>
                                    </td>
                                    <td *ngIf="field.field == 'rejectedBy'" class="mgmt-td-align">
                                        <p *ngIf="approver['actionId'] != 1"></p>
                                        <p *ngIf="approver['actionId'] == 1">{{approver.rejectedBy ? approver.rejectedBy
                                            : ''}}</p>
                                    </td>
                                </ng-container>
                            </tr>
                            <tr *ngIf="approvalProcessList.length == 0">
                                <td [attr.colspan]="29" class="no-records-cstm no-records-msg">
                                    No records found
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <button class="btn btn-primary pull-right" (click)="saveApprovalProcess()"
                [disabled]="!enableApproverSaveBtn">Submit</button>
        </p-tabPanel>
        <p-tabPanel header="Vendor Capes">
            <!-- <app-vendor-capabilities-list 
            *ngIf="capvendorId > 0 && showVendorCaptab"          
            [vendorId]="capvendorId"
            [isViewMode]="isViewMode"
          ></app-vendor-capabilities-list> -->
            <app-vendor-capes *ngIf="capvendorId > 0 && showVendorCaptab" [vendorId]="capvendorId"
                [isViewMode]="isViewMode">
            </app-vendor-capes>
        </p-tabPanel>
        <p-tabPanel header="Documents">
            <app-common-documents *ngIf="showDocumenttab" [isViewMode]="false" [moduleName]="moduleName"
                [offLineUpload]="true" [referenceId]="id">
            </app-common-documents>
        </p-tabPanel>
        <p-tabPanel header="Communication">
            <app-communication [isViewMode]="false" *ngIf="showComunicationtab"
                [idForContact]="vendorIdByParams ? vendorIdByParams :vendorId" [type]="2" [moduleName]="moduleName"
                [referenceId]="id"></app-communication>
        </p-tabPanel>

    </p-tabView>
    <div *ngIf="isEditMode" class="w-100 pull-right">
        <button class="btn btn-primary pull-right m-t-10 approver-btn" (click)="goToCreatePOList()">Create New
            PO</button>
    </div>
</ng-container>


<div class="modal fade" id="parts-memo-popup" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"> {{addressMemoLabel}}</h4>
                <!--Memo-->
            </div>
            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Memo</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="partsMemo" [style]="{'height':'320px'}"
                                          name="partsmemo" required></p-editor>
                             
                            </td>
                        </tr>
                    </tbody>
                </table> -->

                <p-editor [(ngModel)]="partsMemo" [style]="{'height':'320px'}" name="partsmemo" required></p-editor>


                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                        (click)="onSavePartsMemo()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>

            </div>


            <!-- <div class="modal-body">
                <div class="form-group">
                    <label>{{textAreaLabel}}</label>
                    <textarea class="form-control" name="textAreaInfo" [(ngModel)]="textAreaInfo" value={{textAreaInfo}}></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onSaveTextAreaInfo()">Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>

<div class="modal fade" id="approvers-memo-popup" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Memo</h4>
            </div>
            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Memo</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="tempApproverMemo"
                                [style]="{'height':'320px'}" name="tempApproverMemo" required></p-editor>
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor [(ngModel)]="tempApproverMemo" [style]="{'height':'320px'}" name="tempApproverMemo" required>
                </p-editor>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                        (click)="onSaveApproversMemo()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="add-notes" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Notes</h4>
            </div>

            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Notes</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="headerNotes" [style]="{'height':'320px'}"
                                           name="headerNotes" required></p-editor>
                               
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor [(ngModel)]="headerNotes" [style]="{'height':'320px'}" name="headerNotes" required></p-editor>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                        (click)="onSaveNotes()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>


        </div>
    </div>
</div>

<div class="modal fade" id="cpo-memo" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Memo</h4>
            </div>

            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Memo</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="headerMemo" [style]="{'height':'320px'}" name="headerMemo" required></p-editor>
                               
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor [(ngModel)]="headerMemo" [style]="{'height':'320px'}" name="headerMemo" required></p-editor>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                        (click)="onSaveMemo()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>



            <!-- <div class="modal-body">
                <div class="form-group">
                    <label>Memo</label>
                    <textarea class="form-control" name="tempMemo" [(ngModel)]="tempMemo" value={{tempMemo}}></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onSaveMemo()">Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>

<div class="modal fade" id="add-multiple-partnum" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add Multiple PN's</h4>
            </div>
            <div class="modal-body">
                <p>
                    <span class="col-sm-3"><b>List of PN's (Separated by Comma): </b></span>
                    <span class="col-sm-7 "><textarea class="form-control" name="partNumbers"
                            [(ngModel)]="partNumbers"></textarea></span>
                    <span class="col-sm-2"><button type="button"
                            class="btn btn-primary height40 black-search-button multiple-pns-search-btn btn-cstm"
                            (click)="getAllparts()" [disabled]="!partNumbers"><i style="color:#fff !important;"
                                class="fa fa-search"></i></button></span>
                </p>
                <form #addMultiPNTable="ngForm">
                    <div class="table-responsive pas-table-cstm">
                        <div class="tableFixHead-multiple-pn">
                            <table class="table table-bordered ">
                                <thead>
                                    <tr class="header-table-width">
                                        <th class="multiple-pn th-width">
                                            <span class="checkbox-cstm">
                                                <label style="width:40px" class="multiple-pn-label">
                                                    <input type="checkbox" name="addAllMultiPN"
                                                        [(ngModel)]="addAllMultiPN"
                                                        (change)="onChangeAddAllMultiPN($event)">
                                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                                </label>
                                            </span>
                                        </th>
                                        <th>PN</th>
                                        <th>Description</th>
                                        <th>Item Type</th>
                                        <th>Stock Type</th>
                                        <th>Hazardous Material</th>
                                        <th>Manufacturer</th>
                                        <th>NSN</th>
                                        <!-- <th>Priority</th> -->
                                        <th>Remarks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let obj of newData; let row_no=index;">
                                        <td class="obj-td">
                                            <span class="checkbox-cstm">
                                                <!--*ngIf="!multiplePNDetails"-->
                                                <label class="obj-label">
                                                    <input type="checkbox" name="addAllMultiPNRows{{row_no}}"
                                                        [(ngModel)]="obj.addAllMultiPNRows"
                                                        (change)="onChangeAddEachMultiPN()">
                                                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                                </label>
                                            </span>
                                        </td>
                                        <td>{{obj.partNumber === null ? '-':obj.partNumber}}</td>
                                        <td>{{obj.partDescription === null ? '-':obj.partDescription}}</td>
                                        <td *ngIf="obj.itemTypeId==1">Stock</td>
                                        <td *ngIf="obj.itemTypeId==2">Non Stock</td>
                                        <td *ngIf="obj.itemTypeId==3">Equipment</td>
                                        <td *ngIf="obj.itemTypeId==0"></td>
                                        <td>{{obj.stockType === null ? '-':obj.stockType}}</td>
                                        <td>{{obj.isHazardousMaterial === null ? '-':obj.isHazardousMaterial}}</td>
                                        <td>{{obj.manufacturer === null ? '-':obj.manufacturer}}</td>
                                        <td>{{obj.nsn === null ? '-':obj.nsn}}</td>
                                        <!-- <td>{{obj.priority === null ? '-':obj.priority}}</td> -->
                                        <td></td>
                                    </tr>
                                    <tr *ngFor="let obj of newPNList">
                                        <td></td>
                                        <td class="part-number-td">{{obj.partNumber}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <!-- <td></td> -->
                                        <td><span class="clr-red">Part do not exist</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="addAvailableParts()"
                    [disabled]="!enableMultiPartAddBtn">Add </button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="createPOAddress" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog partsList-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="resetAddressForm();">&times;</button>
                <h4 class="modal-title">{{addressHeader}}</h4>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <form #addSplitSiteNameForm="ngForm" class="form-horizontal">
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Is Primary </label>
                            <input type="checkbox" name="isPrimary" class="form-control col-md-6"
                                [(ngModel)]="addNewAddress.isPrimary" (ngModelChange)="splitAddChange()">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Site Name <span class="clr-red">*</span> :</label>
                            <p-autoComplete class="autocomp-customer-cstm" name="siteName"
                                [(ngModel)]="addNewAddress.siteName" [suggestions]="lstfilterSplitSite"
                                emptyMessage="No Match Found" field="siteName"
                                (onKeyUp)="checkSplitSiteNameExist($event.target.value)"
                                (onChange)="checkSplitSiteNameExist($event.target.value)"
                                (onSelect)="checkSplitSiteNameSelect()" (completeMethod)="filterSplitSite($event);"
                                (ngModelChange)="splitAddChange()" [size]="30" [minLength]="1" [dropdown]="true"
                                required>
                            </p-autoComplete>
                            <div *ngIf="issplitSiteNameAlreadyExists" class="clr-red">
                                Site Name Already Exists
                            </div>
                            <!-- <input type="text" class="form-control col-md-6" name="siteName" (change)="splitAddChange()" [(ngModel)]="addressFormForShipping.siteName" required>-->
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 1 <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="address1" (change)="splitAddChange()"
                                [(ngModel)]="addNewAddress.address1" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Address 2:</label>
                            <input type="text" class="form-control col-md-6" name="address2" (change)="splitAddChange()"
                                [(ngModel)]="addNewAddress.address2">
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">City <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="city" (change)="splitAddChange()"
                                [(ngModel)]="addNewAddress.city" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">State <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="stateOrProvince"
                                (change)="splitAddChange()" [(ngModel)]="addNewAddress.stateOrProvince" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Postal <span class="clr-red">*</span></label>
                            <input type="text" class="form-control col-md-6" name="postalCode"
                                (change)="splitAddChange()" [(ngModel)]="addNewAddress.postalCode" required>
                        </div>
                        <div class="form-group col-md-12">
                            <label class="col-md-6">Country <span class="clr-red">*</span></label>
                            <p-autoComplete field="label" class="autocomplete" (onSelect)="splitAddChange()"
                                (change)="splitAddChange()" [(ngModel)]="addNewAddress.countryId" name="country"
                                [suggestions]="countriesList" (completeMethod)="filterCountries($event)" [size]="30"
                                [minLength]="1" [dropdown]="true" errorMessage="Records not found"
                                [forceSelection]="true" required></p-autoComplete>
                        </div>

                        <div class="form-group col-md-12" style="margin-top: 8px;">
                            <button type="button" class="btn btn-primary"
                                *ngIf="(!isEditModeSplitPoOnly && !isEditModeSplitAddress) || isEditModeSplitAddress"
                                (click)="saveShippingAddress();"
                                [disabled]="!(addSplitSiteNameForm.valid && splitAddbutton && !issplitSiteNameAlreadyExists)"
                                data-dismiss="modal">{{isEditModeSplitAddress ? 'Update' : 'Save' }}</button>
                            <!--resetAddressShippingForm();-->
                            <button type="button" class="btn btn-primary"
                                *ngIf="(!isEditModeSplitPoOnly && !isEditModeSplitAddress) || isEditModeSplitPoOnly"
                                [disabled]="!(addSplitSiteNameForm.valid && splitAddbutton && !issplitSiteNameAlreadyExists) || addNewAddress.isPrimary"
                                (click)="saveShippingAddressToPO();" data-dismiss="modal">{{isEditModeSplitPoOnly ?
                                'Update to this PO' : 'Save to this PO' }}</button>
                        </div>

                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal"
                    (click)="resetAddressForm();">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="address-memo" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    &times;
                </button>
                <h4 class="modal-title">
                    {{addressMemoLabel == 'Edit Ship' || addressMemoLabel == 'Edit Bill' ? 'Edit': addressMemoLabel }}
                    Memo
                </h4>
            </div>
            <div class="modal-body">
                <!-- <table class="table table-bordered
                        table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Memo</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="tempMemo" [style]="{'height':'320px'}" name="tempMemo" required></p-editor>
                               
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor [(ngModel)]="tempMemo" [style]="{'height':'320px'}" name="tempMemo" required></p-editor>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary btn-primary address-memo-editor-buttons"
                        data-dismiss="modal" (click)="onSaveAddressMemo()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger address-memo-editor-buttons"
                        data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- <div class="modal-body">
                <div class="form-group">
                    <label>Memo</label>
                    <textarea class="form-control" [(ngModel)]="tempMemo" value="{{tempMemo}}"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onSaveAddressMemo()">Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>

<div class="modal fade" id="addContactInfo" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"> Contact Details</h4>
            </div>
            <form #addContactForm="ngForm" class="form-horizontal">
                <div class="modal-body" *ngIf="headerInfo.vendorId">
                    <div class="form-group">
                        <div class="col-sm-12">
                            <!--<div class="label-cstm" style="margin-right: 10px;">Primary Contact</div>-->
                            <!-- <span class="checkbox-cstm"> -->
                            <div class="col-sm-4">
                                <label> Primary Contact </label>
                            </div>
                            <div class="col-sm-5">
                                <input type="checkbox" name="isDefaultContact"
                                    [disabled]="vendorContactInfo.tempIsDefaultContact == true"
                                    [(ngModel)]="vendorContactInfo.isDefaultContact" />
                                <!-- <span class="cr">
                                  <i class="cr-icon pi pi-check"></i>
                                </span> -->
                                <!-- </span> -->
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Prefix</label>
                            </div>
                            <div class="col-sm-5">
                                <select name="preifx" [(ngModel)]="vendorContactInfo.prefix">
                                    <option value="Dr.">Dr.</option>
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Ms.">Ms.</option>
                                    <option value="None selected">None selected</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>First Name <span class="clr-red">*</span></label>
                            </div>
                            <div class="col-sm-5">
                                <div class="inner-addon right-addon inline-block fields-width">
                                    <p-autoComplete class="autocomplete" [(ngModel)]="vendorContactInfo.firstName"
                                        name="firstName" [suggestions]="venContactFirstNames"
                                        (completeMethod)="filterVenContactFirstNames($event)" [size]="30"
                                        [minLength]="1" [dropdown]="true" required>
                                        <ng-template let-firstName pTemplate="item">
                                            <div class="ui-helper-clearfix">{{ firstName }}</div>
                                        </ng-template>
                                    </p-autoComplete>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Middle Name</label>
                            </div>
                            <div class="col-sm-5">
                                <div class="inner-addon right-addon inline-block fields-width">
                                    <p-autoComplete class="autocomplete" [(ngModel)]="vendorContactInfo.middleName"
                                        name="middleName" [suggestions]="venContactMiddleNames"
                                        (completeMethod)="filterVenContactMiddleNames($event)" [size]="30"
                                        [minLength]="1" [dropdown]="true">
                                        <ng-template let-middleName pTemplate="item">
                                            <div class="ui-helper-clearfix">{{ middleName }}</div>
                                        </ng-template>
                                    </p-autoComplete>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Last Name <span class="clr-red">*</span></label>
                            </div>
                            <div class="col-sm-5">
                                <div class="inner-addon right-addon inline-block" class="fields-width">
                                    <p-autoComplete class="autocomplete" [(ngModel)]="vendorContactInfo.lastName"
                                        name="lastName" [suggestions]="venContactLastNames"
                                        (completeMethod)="filterVenContactLastNames($event)" [size]="30" [minLength]="1"
                                        [dropdown]="true" required>
                                        <ng-template let-lastName pTemplate="item">
                                            <div class="ui-helper-clearfix">{{ lastName }}</div>
                                        </ng-template>
                                    </p-autoComplete>
                                </div>
                            </div>
                            <!-- <div *ngIf="disablesaveForlastname" class="clr-red">Entry Already Exists</div> -->
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Suffix</label>
                            </div>
                            <div class="col-sm-5">
                                <select name="suffix" [(ngModel)]="vendorContactInfo.suffix">
                                    <option value="II">II</option>
                                    <option value="III">III</option>
                                    <option value="Jr.">Jr.</option>
                                    <option value="Sr.">Sr.</option>
                                    <option value="None selected">None selected</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Title</label>
                            </div>
                            <div class="col-sm-5">
                                <input class="form-control" type="text" name="contactTitle"
                                    [(ngModel)]="vendorContactInfo.contactTitle" />
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Work Phone <span class="clr-red">*</span></label>
                            </div>
                            <div class="col-sm-5">
                                <div>
                                    <input class="form-control" type="text" maxlength="20"
                                        (keypress)="patternMobilevalidationWithSpl($event)" name="workPhone"
                                        [(ngModel)]="vendorContactInfo.workPhone"
                                        style="width: calc(100% - 63px) !important;" required />
                                    -
                                    <input class="form-control w50" type="text" name="workPhoneExtn"
                                        [(ngModel)]="vendorContactInfo.workPhoneExtn" maxlength="15" />
                                </div>
                            </div>
                        </div>




                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Email <span class="clr-red">*</span></label>
                            </div>
                            <div class="col-sm-5">
                                <input class="form-control" email type="text" name="email"
                                    [(ngModel)]="vendorContactInfo.email" required />
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Mobile Phone</label>
                            </div>
                            <div class="col-sm-5">
                                <input class="form-control" type="text" maxlength="20"
                                    (keypress)="patternMobilevalidationWithSpl($event)" name="mobilePhone"
                                    [(ngModel)]="vendorContactInfo.mobilePhone" />
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Alternate Phone</label>
                            </div>
                            <div class="col-sm-5">
                                <input class="form-control" type="text" maxlength="20"
                                    (keypress)="patternMobilevalidationWithSpl($event)" name="alternatePhone"
                                    [(ngModel)]="vendorContactInfo.alternatePhone" />
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4">
                                <label>Fax</label>
                            </div>
                            <div class="col-sm-5">
                                <input class="form-control" type="text" maxlength="20"
                                    (keypress)="patternMobilevalidationWithSpl($event)" name="fax"
                                    [(ngModel)]="vendorContactInfo.fax" />
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4 form-group memo-popup-cstm">
                                <label>Memo

                                </label>
                            </div>
                            <div class="col-sm-5">
                                <!-- <textarea class="form-control" name="notes"
                                 [(ngModel)]="vendorContactInfo.notes">
                                </textarea> -->
                                <span>
                                    <div class="form-group memo-popup-cstm mat_emo">
                                        <div [innerHTML]="vendorContactInfo.notes"
                                            [matTooltip]="parsedText(vendorContactInfo.notes)"
                                            matTooltipPosition="above" class="form-control text-editor-field"
                                            class="text_editor_box text-editor-width">
                                        </div>
                                    </div>
                                </span>
                            </div>
                            <span class="editor-span"><a class="btn nobg" data-toggle="modal"
                                    data-target="#contact-memo" (click)="onAddContactMemo()" matTooltipPosition="above"
                                    matTooltip="Memo"><i class="fa fa-pencil" style="color:#337ab7"></i></a>
                            </span>
                        </div>

                    </div>
                    <!-- <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Prefix</label>
                                <select name="preifx" [(ngModel)]="vendorContactInfo.prefix">
                                    <option value="Dr.">Dr.</option>
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Ms.">Ms.</option>
                                    <option value="None selected">None selected</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>First Name <span class="clr-red">*</span></label>
                                <div class="inner-addon right-addon inline-block" style="width: 100%">
                                    <p-autoComplete field="firstName" class="pautocomp-cstm" [(ngModel)]="vendorContactInfo.firstName" name="venConFirstName" [suggestions]="venContactFirstNames" (completeMethod)="filterVenContactFirstNames($event)" [size]="30" [minLength]="1" [dropdown]="true" required></p-autoComplete>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Middle Name</label>
                                <div class="inner-addon right-addon inline-block" style="width: 100%">
                                    <p-autoComplete field="middleName" class="pautocomp-cstm" [(ngModel)]="vendorContactInfo.middleName" name="venConMiddleName" [suggestions]="venContactMiddleNames" (completeMethod)="filterVenContactMiddleNames($event)" [size]="30" [minLength]="1" [dropdown]="true"></p-autoComplete>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Last Name <span class="clr-red">*</span></label>
                                <div class="inner-addon right-addon inline-block" style="width: 100%">
                                    <p-autoComplete field="lastName" class="pautocomp-cstm" [(ngModel)]="vendorContactInfo.lastName" name="venConLastName" [suggestions]="venContactLastNames" (completeMethod)="filterVenContactLastNames($event)" [size]="30" [minLength]="1" [dropdown]="true" required></p-autoComplete>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Suffix</label>
                                <select name="suffix" [(ngModel)]="vendorContactInfo.suffix">
                                    <option value="II">II</option>
                                    <option value="III">III</option>
                                    <option value="Jr.">Jr.</option>
                                    <option value="Sr.">Sr.</option>
                                    <option value="None selected">None selected</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Title</label>
                                <input class="form-control" type="text" name="contactTitle" [(ngModel)]="vendorContactInfo.contactTitle">
                            </div>
                            <div class="form-group">
                                <label>Work Phone <span class="clr-red">*</span></label>
                                <div>
                                    <input class="form-control" type="text" maxlength="20" (keypress)="patternMobilevalidationWithSpl($event)" name="workPhone" [(ngModel)]="vendorContactInfo.workPhone" style="width: calc(100% - 63px) !important;" required>
                                    -
                                    <input class="form-control w50" type="text" name="workPhoneExtn" [(ngModel)]="vendorContactInfo.workPhoneExtn" maxlength="15">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <div class="form-group" style="margin-top: 15px; margin-bottom: 20px;">
                                    <span class="checkbox-cstm">
                                        <label>
                                            <input type="checkbox" name="isDefaultContact" [(ngModel)]="vendorContactInfo.isDefaultContact">
                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span> Primary Contact
                                        </label>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Email <span class="clr-red">*</span></label>
                                <input class="form-control" email type="text" name="email" [(ngModel)]="vendorContactInfo.email" required>
                            </div>
                            <div class="form-group">
                                <label>Mobile Phone</label>
                                <input class="form-control" type="text" maxlength="20" (keypress)="patternMobilevalidationWithSpl($event)" name="mobilePhone" [(ngModel)]="vendorContactInfo.mobilePhone">
                            </div>
                            <div class="form-group">
                                <label>Alternate Phone</label>
                                <input class="form-control" type="text" maxlength="20" (keypress)="patternMobilevalidationWithSpl($event)" name="alternatePhone" [(ngModel)]="vendorContactInfo.alternatePhone">
                            </div>
                            <div class="form-group">
                                <label>Fax</label>
                                <input class="form-control" type="text" maxlength="20" (keypress)="patternMobilevalidationWithSpl($event)" name="fax" [(ngModel)]="vendorContactInfo.fax">
                            </div>
                            <div class="form-group">
                                <label>Memo</label>
                                <textarea class="form-control" name="notes" [(ngModel)]="vendorContactInfo.notes"></textarea>
                            </div>

                        </div>
                    </div> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary editor-buttons-margin" (click)="addContactForVendor()"
                        data-dismiss="modal" [disabled]="!addContactForm.valid">Save</button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="contact-memo" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Contact Memo</h4>
            </div>

            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                    <th style="color: #fff;">Notes</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p-editor [(ngModel)]="headerNotes" [style]="{'height':'320px'}"
                                           name="headerNotes" required></p-editor>
                               
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor [(ngModel)]="contactMemo" [style]="{'height':'320px'}" name="contactMemo" required></p-editor>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary editor-buttons-margin" data-dismiss="modal"
                        (click)="onSaveContactMemo()">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger editor-buttons-margin" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>


        </div>
    </div>
</div>

<!-- <div class="modal fade" id="vendorCapesHistory" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header" *ngIf="capabilityauditHistory.length > 0">
                <h4 class="modal-title">
                    History of Vendor Capability
                </h4>
                <button type="button"
                        class="close"
                        aria-label="Close"
                        data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive rro-table-cstm" style="overflow-y: scroll;">
                    <table class="table table-bordered"
                           *ngIf="capabilityauditHistory.length > 0; else noDatavailable">
                        <thead>
                            <tr>
                                <th>Ranking</th>
                                <th>PN</th>
                                <th>PN Description</th>
                                <th>Caps Type</th>
                                <th>Cost</th>
                                <th>TAT</th>
                                <th>PN Mfg</th>
                                <th>Is Active</th>
                                <th>Created By</th>
                                <th>Created Date</th>
                                <th>Updated By</th>
								<th>Updated Date</th>	
                            </tr>
                        </thead>
                        <tbody *ngIf="capabilityauditHistory.length > 0">
                            <tr *ngFor="let audit of capabilityauditHistory; let i = index">
                                <td [ngStyle]="{
                                  color: getColorCodeForHistory(
                                    i,
                                    'vendorRanking',
                                    audit.vendorRanking
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.vendorRanking }}
                                </td>
                                <td [ngStyle]="{
                                    color: getColorCodeForHistory(i, 'partNumber', audit.partNumber)
                                      ? 'black'
                                      : 'red'
                                  }">
                                    {{ audit.partNumber }}
                                </td>
                                <td [ngStyle]="{
                                    color: getColorCodeForHistory(
                                      i,
                                      'partDescription',
                                      audit.partDescription
                                    )
                                      ? 'black'
                                      : 'red'
                                  }">
                                    {{ audit.partDescription }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForHistory(
                                    i,
                                    'capabilityType',
                                    audit.capabilityType
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.capabilityType }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForHistory(
                                    i,
                                    'cost',
                                    audit.cost
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    <p class="text-right m-0 p-0">{{ audit.cost }}</p>
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForHistory(i, 'tat', audit.tat)
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.tat }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForHistory(i, 'manufacturerName', audit.manufacturerName)
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.manufacturerName }}
                                </td>
                                <td><p style="background-color: #fff !important;"> <input type="checkbox" name="isActive" [(ngModel)]=" audit.isActive" disabled></p></td>
                                <td>{{ audit.createdBy }}</td>
								<td style="width: 120px;">{{ audit.createdDate | date: 'MM-dd-yyyy, h:mm a' }}</td>
								<td>{{ audit.updatedBy }}</td>
                                <td style="width: 120px !important; background-color: #fff !important;">{{ audit.updatedDate | date: 'MM-dd-yyyy, h:mm a' }}</td>
                            </tr>
                        </tbody>
                    </table>
                    <ng-template #noDatavailable>
                        <div class="text-center">
                            <img src="../../../../assets/images/binoculars.png"
                                 style="height: 100px; width: 100px;" />
                            <h4 style="color: #ff5663;">No History Found</h4>
                        </div>
                    </ng-template>
                </div>
            </div>
            <div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">
                <div class="loading">
                    <div class="lds-roller"><div>			
                    </div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                </div>
            </div>
            <app-spinner  *ngIf="isSpinnerVisible"></app-spinner>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div> -->

<div class="preloader" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>

<div id="warnRestrictMesg" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-xsm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title warning_color" *ngIf="restrictID == 0">Warning</h4>
                <h4 class="modal-title restrict_color" *ngIf="restrictID != 0">Restriction</h4>
                <!-- <p id="clockdiv" class="clockdiv"></p> -->
            </div>
            <div class="pad_msf">
                <p *ngIf="warningID != 0 && restrictID == 0" class="mar_o warning_color">
                    {{warningMessage}}
                </p>
                <!-- <p *ngIf="warningMessage != undefined">Not able to create customer work because cuatomer having restrcitions</p> -->
                <p *ngIf="restrictID != 0" class="mar_o restrict_color">
                    {{restrictMessage}}
                </p>
                <!-- <p *ngIf=" restrictID != 0" class="mar_o ">Not able to create customer work because this customer
                    having restrictions</p> -->
            </div>
            <div class="modal-footer warn-footer">
                <button class="btn btn-primary btn-primary warn-msg" data-dismiss="modal" (click)="WarnRescticModel()">
                    Ok
                </button>
            </div>
        </div>
    </div>
</div>

<!-- <p-dialog header="Alert" [(visible)]="displayWarningModal" [modal]="true" [dismissableMask]="true" maximizedLeft="140px" maximizedTop="140px"
          [width]="350" [minWidth]="200" [responsive]="true"
          [minY]="1050" [baseZIndex]="1100000">

    <h5 [ngStyle]="{'color':'red'}">
        Vendor Price is not populated  - Continue Y/N
    </h5>
    <button type="button" pButton icon="pi pi-check" (click)="displayWarningModal=false;dismissModel()" label="Yes"></button>
    &nbsp;&nbsp;
    <button type="button" pButton icon="pi pi-times" (click)="displayWarningModal=false" label="No"></button>
</p-dialog> -->

<ng-template class="modal fade" #poQty let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Alert</h4>
            <button type="button" class="close" aria-label="Close" (click)="dismissModel(false)">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <strong>
                <span [ngStyle]="{'color':'red'}">
                <div [innerHTML]="alertText"></div>
                </span>
            </strong>
            
        </div>
        <div class="modal-footer">
            <button type="button" *ngIf="!displayWarningModal" class="btn btn-danger"
                (click)="dismissModel(false);">close</button>
            <button type="button" *ngIf="displayWarningModal" class="btn btn-primary"
                (click)="dismissModel(true);">Yes</button>
            <button type="button" *ngIf="displayWarningModal" class="btn btn-danger"
                (click)="dismissModel(false)">No</button>
        </div>
    </div>
</ng-template>

<ng-template #purchaseOrderPrintPopup let-c="close" let-d="dismiss">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="closeModal()">&times;</button>
        <h4 class="modal-title">Print Purchase Order</h4>
    </div>
    <div class="modal-content" id="sales_order_print_content">
        <div class="modal-body" >
            <!-- <app-sales-order-print-template [salesOrderView]="salesOrderView"></app-sales-order-print-template> -->
            <app-purchase-order-print-template [referenceId]="id"></app-purchase-order-print-template>            
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="print()">Print</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeModal()">Close</button>
    </div>
</ng-template>



<!-- <div class="modal fade" id="ship-via-memo" style="z-index: 10000;" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Edit Memo</h4>
        </div>
        <div class="modal-body">
          <table class="table table-bordered table-fixed workflow-table-material">
            <thead>
              <th style="color: #fff;">Memo</th>
            </thead>
            <tbody>
              <tr>
                <td>
                  <p-editor [(ngModel)]="tempAddshipViaMemo" 
                  [style]="{'height':'320px'}" name="tempAddshipViaMemo" 
                  required></p-editor>							
                </td>
              </tr>
            </tbody>
          </table>
          <div style="float:right">
            <button type="button" class="btn btn-primary"						 
              style="padding: 6px 12px !important;margin-top: 10px;" (click)="onSaveTextAreaInfo()">Save</button>
            <button type="button" class="btn btn-danger" style="padding: 6px 12px !important;margin-top: 10px;" (click)="closeMemoModel()"
              >Close</button>
          </div>
        </div>
      </div>
    </div>
  </div> -->