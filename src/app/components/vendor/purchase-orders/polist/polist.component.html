<p-breadcrumb [model]="breadcrumbs" [home]="home" *ngIf="!isEnablePOList && !isApproverlist"></p-breadcrumb>

<div class="card new-card">
	<div class="card-header bg-primary new-card-header" *ngIf="!isEnablePOList && !isApproverlist">
		<div class="row">
		  <div class="col">
			<h4 class="new-card-heading">Purchase Order List</h4>
		  </div>
		  <div>
			<button
			type="button"
			class="btn-sm new-btn-primary"
			[routerLink]="['/vendorsmodule/vendorpages/app-purchase-setup']">
			Add New Purchase Order
			</button>
		  </div>
		</div>
	</div>
	<div class="card-header bg-primary new-card-header" *ngIf="!isEnablePOList && isApproverlist">
		<div class="row">
		  <div class="col">
			<h4 class="new-card-heading">Purchase Order Approval List</h4>
		  </div>
		  <div>
			<button
			type="button"
			class="btn-sm new-btn-primary"
			[routerLink]="['/vendorsmodule/vendorpages/app-purchase-setup']">
			Add New Purchase Order
			</button>
		  </div>
		</div>
	</div>
	<div class="card-body new-card-body">
		<p-table #dt
				 class="rpo-table-cstm rro-table-cstm"
				 [value]="data"
				 [first]="0"
				 [rows]="pageSize"
				 [paginator]="true"
				 [pageLinks]="3"				
				 [rowsPerPageOptions]="[10, 20, 50, 100]"
				 [columns]="selectedColumns"
				 selectionMode="multiple"
				 [metaKeySelection]="true"
				 [lazy]="true"
				 (onLazyLoad)="loadData($event)"
				 [resizableColumns]="true"
				 [reorderableColumns]="true"
				 [scrollable]="true"
				 [totalRecords]="totalRecords"
				 scrollHeight="450px">			
			<ng-template pTemplate="caption">
				<div class="row">
					<div class="col">
					  <p-multiSelect
						[maxSelectedLabels]="2"
						[options]="headers"
						optionLabel="header"
						[(ngModel)]="selectedColumns"
						[style]="{ minWidth: '200px' }"
						style="float: left;"
						(onChange)="columnsChanges()"
					  ></p-multiSelect>
					</div>
					<div class="col">
					  <div
						style="width: auto !important; float: right;"
						class="inner-addon right-addon w50 inline-block g-filter-search-cstm"
					  >
						<i class="fa fa-search"></i>
						<input
						  type="text"
						  pInputText
						  size="50"
						  class="form-control"
						  (input)="globalSearch($event.target.value)"
						  placeholder="Filter"
						/>
					  </div>
					</div>
				  </div>

				  <div class="row">
					<div class="col">
					  <button
						type="button"
						class="btn btn-primary new-table-button"
						matTooltip="Download Data"
						matTooltipPosition="above"
						pButton
						icon="fa-download"
						style="padding: 5px 12px !important;"
						iconPos="left"
						label="Export Data"
						data-toggle="modal"
						(click)="selectedOnly = false; targetData = dt;" 
						data-target="#downloadConfirmation"
					  ></button>
					  <button
						type="button"
						class="btn btn-primary new-table-button"
						matTooltip="Download Selected Data"
						matTooltipPosition="above"
						pButton
						icon="fa-download"
						style="padding: 5px 12px !important;"
						iconPos="left"
						label="Export Selected Data"
						data-toggle="modal"
						data-target="#downloadConfirmation"
						(click)="selectedOnly = true; targetData = dt;" 
					  ></button>
					</div>
					<div class="pull-right" style="padding-left:0px;">
					  <div class="col">
						<div class="col" style="float: right; padding-top: 3px;">
						  <div class="form-group" [hidden]="isApproverlist">
							<div class="pull-left" style="margin-top: 4px; margin-right: 15px;" *ngFor="let item of poStatusList">
								<label class="radio-cstm wauto">
									<input type="radio" name="postatus" class="form-control" [value]="item.label" (click)="getPOListByStatus(item.label)" [(ngModel)]="currentStatusPO">
									<span class="checkmark"></span>{{item.label}}
								</label>
							</div>
							<div class="pull-left" style="margin-top: 4px; margin-right: 15px;">
								<label class="radio-cstm wauto">
									<input type="radio" name="postatus" class="form-control" value="All" (click)="getPOListByStatus('All')" [(ngModel)]="currentStatusPO">
									<span class="checkmark"></span>All
								</label>
							</div>
							<div class="checkbox-cstm pull-left" style="margin-left: 0;">
								<label style="width: auto !important;margin-top: 3px;">
									<!--  -->
									<input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent" id="cparent" (click)="getDeleteListByStatus($event.target.checked)" />
									<span class="cr"><i class="cr-icon pi pi-check"></i></span>
									Show  Deleted List
								</label>
							</div>
						  </div>
						</div>
					  </div>
					</div>
				  </div>

			</ng-template>

			<ng-template pTemplate="colgroup" let-columns>
				<colgroup>
					<col *ngFor="let col of columns" style="width: 130px;" />
				</colgroup>
			</ng-template>

			<ng-template pTemplate="header" 
			 let-columns>
				<tr>
					<ng-container *ngFor="let col of columns">
						<th style="width:130px;" pResizableColumn pReorderableColumn
						[pSortableColumn]="col.field">
						{{col.header}}
						<p-sortIcon [field]="col.field"></p-sortIcon>
						</th>
					</ng-container>
					<th style="width:130px;position:sticky;text-align:center;"
						*ngIf="selectedColumns.length > 0">
						Actions
					</th>
				</tr>
				<tr>
					<th style="width:130px" *ngFor="let col of columns" [ngSwitch]="col.field">						
						<input type="text" *ngIf="col.field !== 'openDate' && col.field !== 'closedDate' && col.field !== 'createdDate' && col.field !== 'updatedDate'" [disabled]="col.field == 'status' &&  currentStatusPO !='All'" style="width:100%;" pInputText (keyup)="onChangeInputField($event.target.value, col.field ,$event.target)">
						<input type="date" class="hidePlaceHolder" *ngIf="col.field == 'openDate'" name="openDate" style="width:100%;" (change)="onChangeInputField($event.target.value, col.field ,$event.target)"> <!--[ngModel]="currentdate | date:'yyyy-MM-dd'"-->
						<input type="date" class="hidePlaceHolder" *ngIf="col.field == 'closedDate'" name="closedDate" style="width:100%;" (change)="onChangeInputField($event.target.value, col.field ,$event.target)">
						<input type="date" class="hidePlaceHolder" *ngIf="col.field == 'createdDate'" name="createdDate" style="width:100%;" (change)="onChangeInputField($event.target.value, col.field ,$event.target)">
						<input type="date" class="hidePlaceHolder" *ngIf="col.field == 'updatedDate'" name="updatedDate" style="width:100%;" (change)="onChangeInputField($event.target.value, col.field ,$event.target)">
					</th>
					<th style="width:130px;position:sticky"></th>
				</tr>
			</ng-template>
			<ng-template pTemplate="body" let-rowData let-columns="columns">
				<tr [pSelectableRow]="rowData" [pSelectableRowDblClick]="rowData" pReorderableRowHandle (dblclick)="viewSelectedRowdbl(rowData)">
					<td style="width:130px;"
						*ngFor="let col of columns"
						class="ui-resizable-column"
						pReorderableRowHandle>
						{{
						col.field == 'openDate' || col.field == 'closedDate' ?
					      (rowData[col.field] | date: 'MM/dd/yyyy') : (col.field == 'createdDate' || col.field == 'updatedDate' ?
						  (rowData[col.field] | date: 'MM/dd/yyyy hh:mm a') : rowData[col.field])
						}}
					</td>

					<td class="action-icons-cstm" style="width:130px" *ngIf="selectedColumns.length > 0">					
						<div *ngIf="currentDeletedstatus==false">
							<span data-toggle="modal" data-target="#poView">
								<a class="btn nobg btn-view-cstm"
								   (click)="viewSelectedRow(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a>
							</span>
							<span >
								<a *ngIf="rowData['statusId'] == 1 || rowData['statusId'] == 2" class="btn nobg btn-edit-cstm" (click)="edit(rowData)" matTooltip="Edit" matTooltipPosition="above"
								   data-dismiss="modal"><i class="fa fa-pencil"></i></a>
								<a  *ngIf="rowData['statusId'] > 2" class="btn nobg btn-edit-cstm"  
								   data-dismiss="modal"><i class="fa fa-pencil" style="color:gray !important;"></i></a>
								   
							</span>
							<span data-toggle="modal" data-target="#poDelete">
								<a class="btn nobg btn-delete-cstm"
								   (click)="delete(rowData)" matTooltip="Delete" matTooltipPosition="above"><i class="fa fa-trash"></i></a>
							</span>
							<span data-toggle="modal" data-target="#poHistory">
								<a class="btn nobg btn-hist-cstm"
								   (click)="getAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a>
							</span>	

							<!--<span *ngIf="rowData.statusId == 3" (click)="getSelectedRow(rowData)">
								<a  matTooltip="Receive PO" matTooltipPosition="above"   class="btn  nobg">
									<i class=" fa fa-chevron-down"></i>
								</a>
							</span>-->
						</div>
						<div *ngIf="currentDeletedstatus==true">
							<span data-toggle="modal" data-target="#poView">
								<a class="btn nobg btn-view-cstm"
								   (click)="viewSelectedRow(rowData)" matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a>
							</span>
							<span data-toggle="modal" data-target="#poHistory">
								<a class="btn nobg btn-hist-cstm"
								   (click)="getAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a>
							</span>	
							<span><a class="btn nobg" (click)="restore(restoreIdPo,rowData);" matTooltip="Restore Record" matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>						
						</div>

					</td>
				</tr>
			</ng-template>
			<ng-template pTemplate="emptymessage" let-columns>
				<tr>
					<td [attr.colspan]="13"   class="no-records-cstm" style="color: red; font-weight: bold; text-align: center">
						No records found
					</td>	
				</tr>
			</ng-template>

			<ng-template pTemplate="summary" id="footer">
				<label id="footer" class="footer">Total:</label>
				<input style="width: 5%;"
					   [(ngModel)]="totalRecords"
					   [disabled]="true"
					   pInputText
					   type="text" />
				&nbsp;&nbsp;
				<label id="footer" class="footer1">Pages Count:</label>
				<input style="width: 5%;"
					   [(ngModel)]="totalPages"
					   [disabled]="true"
					   pInputText
					   type="text" />
			</ng-template>
		</p-table>
	</div>
</div>
<ng-template #restoreIdPo let-c="close" let-d="dismiss" data-backdrop="static">

	<div class="modal-header">
		<h4 class="modal-title">Are You Sure Want to Restore?</h4>

		<button type="button" class="close" aria-label="Close" (click)="dismissModel()">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<h6 class="modal-body">PO Number :  {{restorerecord.purchaseOrderNumber}}</h6>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-success" (click)="restoreRecord()">Yes</button>
		<button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
	</div>
</ng-template>

<div id="poHistory" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-xl">

		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeHistoryModal()">&times;</button>
				<h4 class="modal-title">History of Purchase Order</h4>
			</div>
			<div class="modal-body" *ngIf="auditHistory">
				<div class="table-responsive">
					<table class="table table-bordered" *ngIf="auditHistory.length> 0 else noDatavailable">
						<thead>
							<tr>
								<th>Purchase Order ID</th>
								<th>Purchase Order Number</th>
								<th>Open Date</th>
								<th>Closed Date</th>
								<th>Vendor Name</th>
								<th>Vendor Code</th>
								<th>Status</th>
								<th>Requested By</th>
								<th>Approved By</th>
								<th>IsActive</th>
								<th>Created Date</th>
								<th>Created By</th>
								<th>Updated Date</th>								
								<th>Updated By</th>
								<th>Is Deleted</th>
							</tr>
						</thead>
						<tbody class="audithistory-cstm">
							<!--*ngIf="auditHistory.length> 0"-->
							<tr *ngFor="let audit of auditHistory; let i = index;">
								<!-- auditHistory[i>0 ? i-1 : i] -->
								<td [ngStyle]="{'color':  getColorCodeForHistory(i, 'purchaseOrderId', audit.purchaseOrderId)  ? 'black' : 'red'  }">{{audit.purchaseOrderId}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'purchaseOrderNumber', audit.purchaseOrderNumber)  ? 'black' : 'red'  }">{{audit.purchaseOrderNumber}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'openDate', audit.openDate)  ? 'black' : 'red'  }">{{audit.openDate | date: 'MM/dd/yyyy'}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'closedDate', audit.closedDate)  ? 'black' : 'red'  }">{{audit.closedDate | date: 'MM/dd/yyyy'}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'vendorName', audit.vendorName)  ? 'black' : 'red'  }">{{audit.vendorName}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'vendorCode', audit.vendorCode)  ? 'black' : 'red'  }">{{audit.vendorCode}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'status', audit.status)  ? 'black' : 'red'  }">{{audit.status}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'requestedBy', audit.requestedBy)  ? 'black' : 'red'  }">{{audit.requestedBy}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'approvedBy', audit.approvedBy)  ? 'black' : 'red'  }">{{audit.approvedBy}}</td>
								<td><p style="background-color: #fff !important;"> <input type="checkbox" name="isActive" [(ngModel)]=" audit.isActive" disabled></p></td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'createdDate', audit.createdDate)  ? 'black' : 'red'  }">{{audit.createdDate | date: 'MM/dd/yyyy h:mm a '}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'createdBy', audit.createdBy)  ? 'black' : 'red'  }">{{audit.createdBy}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'updatedDate', audit.updatedDate)  ? 'black' : 'red'  }">{{audit.updatedDate | date: 'MM/dd/yyyy h:mm a '}}</td>
								<td [ngStyle]="{'color': getColorCodeForHistory(i, 'updatedBy', audit.updatedBy)  ? 'black' : 'red'  }">{{audit.updatedBy}}</td>
								<td><p style="background-color: #fff !important;"> <input type="checkbox" name="isDeleted" [(ngModel)]="audit.isDeleted" disabled></p></td>
							</tr>
						</tbody>
					</table>
					<ng-template #noDatavailable>
						<div class="text-center">
							<img src="../../../../assets/images/binoculars.png" style="height: 100px; width: 100px;">
							<h4 style="color: #ff5663;">No History Found </h4>
						</div>
					</ng-template>
				</div>
			</div>
			<div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">
				<div class="loading">
					<div class="lds-roller"><div>			
					</div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
				</div>
			</div>
			<app-spinner  *ngIf="isSpinnerVisible"></app-spinner>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" (click)="closeHistoryModal()">Close</button>
			</div>
		</div>

	</div>
</div>

<div class="modal fade" id="poDelete" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeDeleteModal()">&times;</button>
				<h4 class="modal-title">Are You Sure Want to Delete?</h4>
			</div>
			<div class="modal-body">
				<h6 class="modal-body">PO Number :  {{rowDataToDelete.purchaseOrderNumber}}</h6>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" (click)="deletePO(); closeDeleteModal();">Yes</button>
				<button type="button" class="btn btn-danger" (click)="closeDeleteModal()">No</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="downloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeModal()">&times;</button>
				<h4 class="modal-title">Are You Sure Want to Download?</h4>
			</div>
			<div class="modal-body" *ngIf="targetData">
				<strong>
					<span>
						You are attempting to export {{targetData.totalRecords}} of records. 
					</span> 
				</strong>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeModal();">Confirm</button>
				<button type="button" class="btn btn-danger" (click)="closeModal()">Cancel</button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="poView" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeViewModal()">&times;</button> <!--data-dismiss="modal"-->			
				<div class="col-sm-3">
					<h4 class="modal-title">Details of Purchase Order</h4>
				</div>
				<div style="margin-top: 5px;" class="col-sm-3">
					Vendor Name <span _ngcontent-c22="" class="clr-red">*</span><span class="text-danger"> : {{poHeaderAdd.vendorName}}</span>
				</div>
				<div style="margin-top: 5px;" class="col-sm-3">
					Vendor Code <span _ngcontent-c22="" class="clr-red">*</span><span class="text-danger"> : {{poHeaderAdd.vendorCode}}</span>
				</div>
			</div>
			<div class="modal-body">
				<div>
					<div class="card">
						<div class="card-body">
							<div>
								<div class="form-row">
									<div class="col-md-4">
										<p><span class="label"><b>PO Num: </b></span><span class="value">{{poHeaderAdd.purchaseOrderNumber ? poHeaderAdd.purchaseOrderNumber : '-'}}</span></p>
										<p><span class="label"><b>Open Date <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.openDate | date: 'MM/dd/yyyy'}}</span></p>
										<p><span class="label"><b>Closed / Cancelled Date: </b></span><span class="value">{{poHeaderAdd.closedDate ? poHeaderAdd.closedDate : '-'}}</span></p>
										<p><span class="label"><b>Need By <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.needByDate | date: 'MM/dd/yyyy'}}</span></p>
										<p><span class="label"><b>Priority <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.priority ? poHeaderAdd.priority : '-'}}</span></p>
										<p><span class="label"><b>Vendor Name <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.vendorName ? poHeaderAdd.vendorName : '-'}}</span></p>
										<p><span class="label"><b>Vendor Code<span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.vendorCode ? poHeaderAdd.vendorCode : '-'}}</span></p>
										<p><span class="label"><b>Vendor Contact <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.vendorContact ? poHeaderAdd.vendorContact : '-'}}</span></p>
										<p><span class="label"><b>Contact Phone: </b></span><span class="value">{{poHeaderAdd.workPhone ? poHeaderAdd.workPhone : '-'}}</span></p>
										<p>
											<span class="label"><b>Credit Limit & Terms: </b></span><span class="value">
												{{poHeaderAdd.creditLimit ? formatePrice(poHeaderAdd.creditLimit) : '-'}}
												{{poHeaderAdd.creditTerm ? poHeaderAdd.creditTerm : ''}}
											</span>
										</p>
									
										<!-- <p><span class="label"><b>Deferred Receiver: </b></span><span class="value">{{poHeaderAdd.deferredReceiver ? poHeaderAdd.deferredReceiver : '-'}}</span></p> -->
									</div>
									<div class="col-md-4">
										<p><span class="label"><b>Requisitioner <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.requisitioner ? poHeaderAdd.requisitioner : '-'}}</span></p>
										<!-- <p><span class="label"><b>Approver: </b></span><span class="value">{{poHeaderAdd.approver ? poHeaderAdd.approver : '-'}}</span></p>
	<p><span class="label"><b>Approved Date: </b></span><span class="value">{{poHeaderAdd.dateApproved | date: 'MM/dd/yyyy'}}</span></p> -->
										<p><span class="label"><b>Status <span _ngcontent-c22="" class="clr-red">*</span>: </b></span><span class="value">{{poHeaderAdd.status ? poHeaderAdd.status : '-'}}</span></p>
										<!-- <p><span class="label"><b>Resale: </b></span><span class="value">{{poHeaderAdd.resale ? poHeaderAdd.resale : '-'}}</span></p> -->
										<p style="vertical-align: top;">
											<span class="label" style="vertical-align:top;"><b>Notes: </b></span>
											<span class="value">
										<p class="p-0 m-0 p_textEditor" [innerHTML]="poHeaderAdd.notes">
										</p></span></p>
										<p style="vertical-align: top;">
											<span class="label" style="vertical-align:top;"><b>Memo: </b></span>
											<span class="value">
										<p class="p-0 m-0 p_textEditor" [innerHTML]="poHeaderAdd.poMemo">
										</p></span></p>

										<p style="vertical-align: top;">
											<span class="label" style="vertical-align:top;"><b>Warning: </b></span>
											<span class="value">
												<textarea name="warningId" class="form-control"
														  style="height: 60px !important; width:100% !important" disabled
														  value="{{warningMessage}}">{{warningID > 0 ? warningMessage : '-'}}</textarea>
											</span>
										</p>
										<div class="form-group p-t-10">
											<div class="checkbox-cstm">
												<label>
													<input type="checkbox" name="resale"
														   [(ngModel)]="poHeaderAdd.resale" disabled>
													<span class="cr"><i class="cr-icon pi pi-check"></i></span>
													Resale
												</label>
											</div>
										</div>
										<div class="form-group p-t-10">
											<div class="checkbox-cstm">
												<label>
													<input type="checkbox" name="deferredReceiver"
														   [(ngModel)]="poHeaderAdd.deferredReceiver" disabled>
													<span class="cr"><i class="cr-icon pi pi-check"></i></span>
													Deferred Receiver
												</label>
											</div>
										</div>

										<!-- <p><span class="label"><b>Deferred Receiver: </b></span><span class="value">{{poHeaderAdd.deferredReceiver ? poHeaderAdd.deferredReceiver : '-'}}</span></p> -->
									</div>
									<div class="col-md-4">
										<div class="form-row">
											<div class="col-md-6">
												<div class="card" style="margin-top: 6px;">
													<div class="card-header" style="padding: 0 10px;">
														<h5 style="margin-bottom: 0; font-size: 12px;">Management Structure <span class="text-danger">*</span></h5>
													</div>
													<div class="card-body" style="padding: 8px 12px 6px;">
														<div class="form-group" style="margin-bottom: 4px;">
															<input class="form-control" type="text" name="companyName" 
																   [(ngModel)]="headerManagementStructureWithName.level1" disabled>
														</div>
														<div class="form-group" style="margin-bottom: 4px;">
															<input class="form-control" type="text" name="BUName"
																   [(ngModel)]="headerManagementStructureWithName.level2" disabled>
														</div>
														<div class="form-group" style="margin-bottom: 4px;">
															<input class="form-control" type="text" name="divisionName"
																   [(ngModel)]="headerManagementStructureWithName.level3" disabled>
														</div>
														<div class="form-group" style="margin-bottom: 4px;">
															<input class="form-control" type="text" name="deptName"
																   [(ngModel)]="headerManagementStructureWithName.level4" disabled>
														</div>
													</div>
												</div>
											</div>
										</div>
									
									</div>
								</div>
							</div>
						</div>
						<p-tabView class="pas-tabview"  >
							<p-tabPanel header="Parts List" [selected]="tabindex==0">
								<div class="table-responsive pas-table-cstm roview-table-cstm" style="margin-top: 5px;  max-height: 600px !important; overflow-y: scroll !important;">
									<table class="table table-bordered" id="po-table">
										<thead style="position: sticky; top: 0;">
											<tr class="partsList-table-tr">
												<th>PN <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>ALT/Equiv PN</th>
												<th>PN Description</th>
												<th>Item Type</th>
												<th>Stock Type</th>
												<th>Mfr</th>
												<th>GL Account</th>
												<th>UOM</th>
												<th>Priority<span _ngcontent-c22="" class="clr-red">*</span></th>												
												<th>Need By <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>Cond <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>Order Qty <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>Vend List Price<span _ngcontent-c22="" class="clr-red">*</span></th>												
												<th>Disc Percent</th>
												<th>Disc./unit</th>
												<th>Disc. Amount</th>
												<th>Unit Cost</th>												
												<th>Ext Cost</th>
												<th>Functional CUR <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>FX Rate <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>Report CUR <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>WO</th>
												<th>RO</th>
												<th>SO</th>
												<th colspan="4" style="min-width: 300px !important;">Management Structure <span _ngcontent-c22="" class="clr-red">*</span></th>
												<th>Memo</th>
											</tr>
										</thead>
										<tbody>
											<ng-container *ngFor="let partList of poPartsList">
												<tr class="parent-data">
													<td>{{partList?.partNumber}}</td>
													<td>{{partList?.altEquiPartNumber}}</td>
													<td>{{partList?.partDescription}}</td>
													<td>{{partList?.itemType}}</td>
													<td>{{partList?.stockType}}</td>
													<td>{{partList?.manufacturer}}</td>
													<td>{{partList?.glAccount}}</td>
													<td>{{partList?.unitOfMeasure}}</td>
													<td>{{partList?.priority}}</td>
													<td>{{partList?.needByDate | date: 'MM/dd/yyyy' }}</td>
													<td>{{partList?.condition}}</td>
													<td class="text-right">{{partList?.quantityOrdered}}</td>
													<td class="text-right">{{partList?.vendorListPrice}}</td>
													<td class="text-right">{{partList?.discountPercent}}</td>
													<td class="text-right">{{partList?.discountPerUnit}}</td>
													<td class="text-right">{{partList?.discountAmount}}</td>
													<td class="text-right">{{partList?.unitCost}}</td>
													<td class="text-right">{{partList?.extendedCost}}</td>
													<td>{{partList?.functionalCurrency}}</td>
													<td class="text-right">{{partList?.foreignExchangeRate}}</td>
													<td>{{partList?.reportCurrency}}</td>
													<td>{{partList?.workOrderNo}}</td>
													<td>{{partList?.reapairOrderNo}}</td>
													<td>{{partList?.salesOrderNo}}</td>
													<td colspan="4">{{partList?.level1}}, {{partList?.level2}}, {{partList?.level3}}, {{partList?.level4}}</td>
													<td>
														<div [innerHTML]="partList?.memo" ></div>
													</td>
												</tr>
												<tr class="child-header splitship-head" style="background: #eaf2fd !important;"  *ngIf="partList.purchaseOrderSplitParts.length > 0">
													<th></th>													
													<th>PN</th>
													<th>PN Description</th>
													<th>User Type<span _ngcontent-c22="" class="clr-red">*</span></th>
													<th>Name<span _ngcontent-c22="" class="clr-red">*</span></th>
													<th colspan="5">Select Address<span _ngcontent-c22="" class="clr-red">*</span></th>
													<th>UOM</th>
													<th>Priority</th>
													<th>Order Qty<span _ngcontent-c22="" class="clr-red">*</span></th>
													<th>Need By<span _ngcontent-c22="" class="clr-red">*</span></th>
													<th colspan="4" style="min-width: 300px !important;">Management Structure</th>
													<th colspan="11"></th>
												</tr>
												<tr class="child-data"  style="background: #fafafa !important;" *ngFor="let partChild of partList.purchaseOrderSplitParts">
													<td></td>													
													<td>{{partList?.partNumber}}</td>
													<td>{{partList?.partDescription}}</td>
													<td>{{partChild?.userType}}</td>
													<td>{{partChild?.user}}</td>
													<td colspan="5">
														{{partChild.poPartSplitSiteName ? partChild.poPartSplitSiteName : ''}}, 
														{{partChild.poPartSplitAddress1 ? partChild.poPartSplitAddress1 : ''}},
														{{partChild.poPartSplitCity ? partChild.poPartSplitCity : ''}},
														{{partChild.poPartSplitState ? partChild.poPartSplitState : ''}} ,
														{{partChild.poPartSplitCountryName ? partChild.poPartSplitCountryName : ''}}
														{{partChild.poPartSplitPostalCode ? partChild.poPartSplitPostalCode : ''}},														
													</td>
													<td>{{partList?.unitOfMeasure}}</td>
													<td>{{partList?.priority}}</td>
													<td class="text-right">{{partChild?.quantityOrdered}}</td>
													<td>{{partChild?.needByDate | date: 'MM/dd/yyyy' }}</td>
													<td colspan="4">{{partChild?.level1}}, {{partChild?.level2}}, {{partChild?.level3}}, {{partChild?.level4}}</td>
													<td colspan="11"></td>
												</tr>
											</ng-container>

											<tr *ngIf="poPartsList.length > 0" style="background-color: #eaf2fd;">
												<td style="padding: 4px;"><b>Total: </b></td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td class="text-right"><b>{{getTotalDiscAmount(poPartsList)}}</b></td>
												<td>&nbsp;</td>
												<td class="text-right"><b>{{getTotalExtCost(poPartsList)}}</b></td>											
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td colspan="4" style="min-width: 300px !important;">&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr  *ngIf="poPartsList.length == 0" >
												<td [attr.colspan]="29"   class="no-records-cstm" style="color: red; font-weight: bold; text-align: center">
													No records found
												</td>	
											</tr>
										</tbody>
									</table>
								</div>
							</p-tabPanel>

							<p-tabPanel header="Internal Approvers">
								<div class="table-responsive pas-table-cstm roview-table-cstm" style="margin-top: 5px;  max-height: 600px !important; overflow-y: scroll !important;">
									<table class="table table-bordered" id="po-table">
										<thead>
											<tr class="partsList-table-tr"></tr>											
												<tr class="pad_workflo">
													<th>Approver Name</th>
													<th>Approver Code</th>
													<th>Approver Email</th>
													<th>Total PO Cost</th>
													<th>Approver Rule</th>
													<th>Memo</th>                                
													<th>Message</th>
												</tr>												
											</thead>
											<tbody>
												<tr *ngFor="let approver of internalApproversList; let i=index;">
													<td>{{approver.approverName}}</td>
													<td>{{approver.approverCode}}</td>
													<td>{{approver.approverEmail}}</td>
													<td style="text-align: right;">
														<label style="text-align: right !important;">{{approver.totalCost | twoDecimalGlobalNumberFormatPipe}}</label>
													</td>
													<td>
														{{approver.rule}}
													</td>
													<td>
														<p class="m-0 p-0 p_textEditor" style="float: left" [innerHTML]="approver['memo']"></p>
													</td>
													<td [ngClass]="{red : approver.isExceeded == true}" >{{approver.message}}</td>
												</tr>
												<tr  *ngIf="internalApproversList.length == 0" >
													<td [attr.colspan]="29"   class="no-records-cstm" style="color: red; font-weight: bold; text-align: center">
														No records found
													</td>	
												</tr>
											</tbody>
										</table>
								</div>
							</p-tabPanel>
							<p-tabPanel header="Approver Process">
								<div class="table-responsive pas-table-cstm roview-table-cstm" style="margin-top: 5px;  max-height: 600px !important; overflow-y: scroll !important;">
									<table class="table table-bordered" id="po-table">
										<thead>
											<tr class="partsList-table-tr">
												<th style=" padding-left: 0px !important;">
													Split Shipment
												</th>
												<th *ngFor="let header of approvalProcessHeader">{{header.header}}</th>
												</tr>
											</thead>
											<tbody>
												<tr *ngFor="let approver of approvalProcessList; let i=index;" [ngStyle]="{'background-color':approver.isParent === false ? '#fafafa' : 'white' }">
													<td style="min-width: 90px; align-items: center;">
														<input *ngIf="!approver.isParent" type="checkbox" disabled   />
													</td> 
													<ng-container *ngFor="let field of approvalProcessHeader">
													<td *ngIf="field.field != 'sentDate' && field.field != 'approvedDate' && field.field != 'memo' ">
														{{approver[field.field]}}
													</td>
													<td  style="width:200px" *ngIf="field.field == 'sentDate'  && approver['actionId'] == 1">
														&nbsp;
													 </td>                               
													 <td  style="width:200px" *ngIf="field.field == 'sentDate' && approver['actionId']  > 1">
														 {{ approver[field.field] | date: 'MM/dd/yyyy hh:mm a' }}
													 </td>
													<td *ngIf="field.field == 'memo'  ">
														<div [innerHTML]="approver[field.field] " ></div>
													</td>
													<td *ngIf="field.field == 'approvedDate' && approver['actionId'] != 5" >													 
													</td>
													<td *ngIf="field.field == 'approvedDate' && approver['actionId'] == 5 " >														
														{{ approver[field.field] | date: 'MM/dd/yyyy h:mm a' }}
													</td>
												    </ng-container>
												</tr>
												<tr  *ngIf="approvalProcessList.length == 0" >
													<td [attr.colspan]="29"   class="no-records-cstm" style="color: red; font-weight: bold; text-align: center">
														No records found
													</td>	
												</tr>
											</tbody>
										</table>
								</div>
							</p-tabPanel>
							<!--<p-tabPanel header="Vendor Capes">	
								 <p-table class="rpo-table-cstm" #dtVendorCap [value]="vendorCapesInfo" [metaKeySelection]="true"
								 [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]"
								 [columns]="vendorCapesCols" selectionMode="multiple"
								 [resizableColumns]="true" [reorderableColumns]="true" [responsive]="true">
			
								<ng-template pTemplate="header" let-columns>
										<tr>
											<th *ngFor="let col of columns" pResizableColumn pReorderableColumn [pSortableColumn]="col.field">
												{{col.header}}
												<p-sortIcon [field]="col.field"></p-sortIcon>
											</th>
											<th>
												Action
											</th>
										</tr>										
								</ng-template>
					
								<ng-template pTemplate="body" let-rowData let-columns="columns">
										<tr  [pSelectableRow]="rowData">
											<td *ngFor="let col of columns" class="ui-resizable-column" style="padding-left: 5px; padding-right: 5px;" pReorderableRowHandle>
												<ng-container *ngIf="col.field != 'cost' && col.field != 'tat' && col.field != 'vendorRanking'">
													{{rowData[col.field]}}
												</ng-container>
												<ng-container *ngIf="col.field == 'vendorRanking' || col.field == 'tat'">
													<p class="text-right m-0 p-0">{{rowData[col.field]}}</p>
												</ng-container>

												<ng-container *ngIf="col.field == 'cost'">
													<p class="text-right m-0 p-0">{{rowData[col.field] | twoDecimalGlobalNumberFormatPipe}}</p>
												</ng-container>

												
											</td>
											<td class="text-center">
												<span>
													<a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip"
													(click)="viewSelectedCapsRow(rowData)" data-target="#vendorCapesView"
													data-toggle="modal" matTooltip="View" matTooltipPosition="above">
														<i class="fa fa-eye"></i>
													</a>
												</span>
												<span data-target="#vendorCapesHistory" data-toggle="modal">
													<a class="btn nobg" (click)="openVendorCapesHistory(rowData)" matTooltip="History" matTooltipPosition="above"><i class="fa fa-history"></i></a>
												</span>
											</td>
										</tr>
										
								</ng-template>
								</p-table>

								
							
							</p-tabPanel>-->

							<p-tabPanel header="Vendor Capes">

								<app-vendor-capabilities-list
								*ngIf="vendorId"
								[vendorId]="capvendorId"
								[isViewMode]="isViewMode"
							  ></app-vendor-capabilities-list>
							</p-tabPanel>

							<p-tabPanel header="Address">
								<div class="table-responsive default-bg clear">
									<div class="col-sm-5">
										<h5 class="po-head">Ship To</h5>
										<p><span class="label"><b>User Type <span _ngcontent-c22="" class="clr-red">*</span>:</b> </span>
											<span class="value">{{poHeaderAdd.shipToUserType ? poHeaderAdd.shipToUserType : '-'}}</span></p>


										<p><span class="label"><b> {{poHeaderAdd.shipToUserType}} Name <span _ngcontent-c22="" class="clr-red">*</span>:</b></span> <span class="value">{{poHeaderAdd.shipToUser ? poHeaderAdd.shipToUser : '-'}}</span></p>	
										<!-- <p *ngIf="poHeaderAdd.shipToUserType"><span class="label"><b> User <span _ngcontent-c22="" class="clr-red">*</span>:</b></span> <span class="value">{{poHeaderAdd.shipToUser ? poHeaderAdd.shipToUser : '-'}}</span></p> -->
										<p><span class="label"><b>Site Name <span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.shipToSiteName ? poHeaderAdd.shipToSiteName : '-'}}</span></p>
										<p><span class="label"><b>Address: </b></span><span class="value">{{poHeaderAdd.shipToAddress1 ? poHeaderAdd.shipToAddress1 : '-'}}</span></p>
										<!-- <p><span class="label"><b>Address2: </b></span><span class="value">{{poHeaderAdd.shipToAddress2 ? poHeaderAdd.shipToAddress2 : '-'}}</span></p>
										<p><span class="label"><b>Address3: </b></span><span class="value">{{poHeaderAdd.shipToAddress3 ? poHeaderAdd.shipToAddress3 : '-'}}</span></p> -->
										<p><span class="label"><b>City: </b></span><span class="value">{{poHeaderAdd.shipToCity ? poHeaderAdd.shipToCity : '-'}}</span></p>
										<p><span class="label"><b>Primary State/Province: </b></span><span class="value">{{poHeaderAdd.shipToState ? poHeaderAdd.shipToState : '-'}}</span></p>
										<p><span class="label"><b>Postal: </b></span><span class="value">{{poHeaderAdd.shipToPostalCode ? poHeaderAdd.shipToPostalCode : '-'}}</span></p>
										<p><span class="label"><b>Country: </b></span><span class="value">{{poHeaderAdd.shipToCountry ? poHeaderAdd.shipToCountry : '-'}}</span></p>
										<p><span class="label"><b>Contact Name<span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.shipToContact ? poHeaderAdd.shipToContact : '-'}}</span></p>
										<p style="vertical-align: top;" ><span class="label"><b>Memo: </b></span>
											<span class="value">											
												<p class="p-0 m-0 p_textEditor" [innerHTML]="poHeaderAdd.shipToMemo ? poHeaderAdd.shipToMemo : '-'">												
												</p></span></p>
											
										<p><span class="label"><b>Ship Via<span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.shipVia ? poHeaderAdd.shipVia : '-'}}</span></p>
										<p><span class="label"><b>Shipping Cost: </b></span><span class="value">{{poHeaderAdd.shippingCost ? poHeaderAdd.shippingCost : '-'}}</span></p>
										<p><span class="label"><b>Handling Cost: </b></span><span class="value">{{poHeaderAdd.handlingCost ? poHeaderAdd.handlingCost : '-'}}</span></p>
										<p><span class="label"><b>Shipping Acct Num: </b></span><span class="value">{{poHeaderAdd.shippingAccountNo ? poHeaderAdd.shippingAccountNo : '-'}}</span></p>
										<!-- <p><span class="label"><b>Shipping Id (AWB): </b></span><span class="value">{{poHeaderAdd.shippingId ? poHeaderAdd.shippingId : '-'}}</span></p>
										<p><span class="label"><b>URL: </b></span><span class="value">{{poHeaderAdd.shippingURL ? poHeaderAdd.shippingURL : '-'}}</span></p> -->
									</div>
									<div class="col-sm-5">
										<h5 class="po-head">Bill To</h5>
										<p><span class="label"><b>User Type <span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.billToUserType ? poHeaderAdd.billToUserType : '-'}}</span></p>
										<p><span class="label"><b> {{poHeaderAdd.billToUserType}} Name <span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.billToContactName ? poHeaderAdd.billToContactName : '-'}}</span></p>
										<p><span class="label"><b>Site Name<span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.billToSiteName ? poHeaderAdd.billToSiteName : '-'}}</span></p>
										<p><span class="label"><b>Address: </b></span><span class="value">{{poHeaderAdd.billToAddress1 ? poHeaderAdd.billToAddress1 : '-'}}</span></p>
										<!-- <p><span class="label"><b>Address2: </b></span><span class="value">{{poHeaderAdd.billToAddress2 ? poHeaderAdd.billToAddress2 : '-'}}</span></p>
										<p><span class="label"><b>Address3: </b></span><span class="value">{{poHeaderAdd.billToAddress3 ? poHeaderAdd.billToAddress3 : '-'}}</span></p> -->
										<p><span class="label"><b>City: </b></span><span class="value">{{poHeaderAdd.billToCity ? poHeaderAdd.billToCity : '-'}}</span></p>
										<p><span class="label"><b>Primary State/Province: </b></span><span class="value">{{poHeaderAdd.billToState ? poHeaderAdd.billToState : '-'}}</span></p>
										<p><span class="label"><b>Postal: </b></span><span class="value">{{poHeaderAdd.billToPostalCode ? poHeaderAdd.billToPostalCode : '-'}}</span></p>
										<p><span class="label"><b>Country: </b></span><span class="value">{{poHeaderAdd.billToCountry ? poHeaderAdd.billToCountry : '-'}}</span></p>
										<p><span class="label"><b>Contact Name<span _ngcontent-c22="" class="clr-red">*</span>:</b></span><span class="value">{{poHeaderAdd.billToContactName ? poHeaderAdd.billToContactName : '-'}}</span></p>
										<p style="vertical-align: top;"><span class="label"><b>Memo: </b></span>
											<span class="value">											
												<p class="p-0 m-0 p_textEditor" [innerHTML]="poHeaderAdd.billToMemo ? poHeaderAdd.billToMemo : '-'">												
												</p></span></p>
									</div>
								</div>
							</p-tabPanel>
						</p-tabView>
					</div>
				</div>
			</div>			
			<div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">
				<div class="loading">
					<div class="lds-roller"><div>			
					</div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
				</div>
			</div>
			<app-spinner *ngIf="isSpinnerVisible"></app-spinner>
			<div class="modal-footer">
				<!-- <button type="button" class="btn btn-success" *ngIf="poHeaderAdd.status == 'Open'" (click)="closeViewModal()" [routerLink]="[
					'/vendorsmodule/vendorpages/app-purchase-setup/edit/'+selectedPurchaseOrderId]">
					Edit
				</button> -->
				<button type="button" class="btn btn-danger" (click)="closeViewModal()">Close</button>

			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="vendorCapesHistory" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header" *ngIf="capabilityauditHistory.length > 0">
                <h4 class="modal-title">
                    History of Vendor Capability
                </h4>
                <button type="button"
                        class="close"
                        aria-label="Close"
                        data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive rro-table-cstm" style="overflow-y: scroll;" >
                    <table class="table table-bordered"
                           *ngIf="capabilityauditHistory.length > 0; else noDatavailable">
                        <thead>
                            <tr>
                                <th>Ranking</th>
                                <th>PN</th>
                                <th>PN Description</th>
                                <th>Caps Type</th>
                                <th>Cost</th>
                                <th>TAT</th>
                                <th>PN Mfg</th>
								<th>Is Active</th>
								<th>Created By</th>
                                <th>Created Date</th>
                                <th>Updated By</th>
								<th>Updated Date</th>								
                            </tr>
                        </thead>
                        <tbody *ngIf="capabilityauditHistory.length > 0">
                            <tr *ngFor="let audit of capabilityauditHistory; let i = index">
                                <td [ngStyle]="{
                                  color: getColorCodeForCapHistory(
                                    i,
                                    'vendorRanking',
                                    audit.vendorRanking
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.vendorRanking }}
                                </td>
                                <td [ngStyle]="{
                                    color: getColorCodeForCapHistory(i, 'partNumber', audit.partNumber)
                                      ? 'black'
                                      : 'red'
                                  }">
                                    {{ audit.partNumber }}
                                </td>
                                <td [ngStyle]="{
                                    color: getColorCodeForCapHistory(
                                      i,
                                      'partDescription',
                                      audit.partDescription
                                    )
                                      ? 'black'
                                      : 'red'
                                  }">
                                    {{ audit.partDescription }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForCapHistory(
                                    i,
                                    'capabilityType',
                                    audit.capabilityType
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.capabilityType }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForCapHistory(
                                    i,
                                    'cost',
                                    audit.cost
                                  )
                                    ? 'black'
                                    : 'red'
                                }">
                                    <p class="text-right m-0 p-0">{{ audit.cost }}</p>
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForCapHistory(i, 'tat', audit.tat)
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.tat }}
                                </td>
                                <td [ngStyle]="{
                                  color: getColorCodeForCapHistory(i, 'manufacturerName', audit.manufacturerName)
                                    ? 'black'
                                    : 'red'
                                }">
                                    {{ audit.manufacturerName }}
                                </td>                               
								<td><p style="background-color: #fff !important;"> <input type="checkbox" name="isActive" [(ngModel)]=" audit.isActive" disabled></p></td>
                                <td>{{ audit.createdBy }}</td>
								<td style="width: 120px !important;">{{ audit.createdDate | date: 'MM-dd-yyyy, h:mm a' }}</td>
								<td>{{ audit.updatedBy }}</td>
                                <td style="width: 120px !important; background-color: #fff !important;">{{ audit.updatedDate | date: 'MM-dd-yyyy, h:mm a' }}</td>
                            </tr>
                        </tbody>
                    </table>
                    <ng-template #noDatavailable>
                        <div class="text-center">
                            <img src="../../../../assets/images/binoculars.png"
                                 style="height: 100px; width: 100px;" />
                            <h4 style="color: #ff5663;">No History Found</h4>
                        </div>
                    </ng-template>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
	</div>
	<div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">
		<div class="loading">
			<div class="lds-roller"><div>			
			</div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
		</div>
	</div>
	<app-spinner  *ngIf="isSpinnerVisible"></app-spinner>
	<div class="modal-footer">
		<!-- <button type="button" class="btn btn-success" *ngIf="poHeaderAdd.status == 'Open'" (click)="closeViewModal()" [routerLink]="[
			'/vendorsmodule/vendorpages/app-purchase-setup/edit/'+selectedPurchaseOrderId]">
			Edit
		</button> -->
		<button type="button" class="btn btn-danger" (click)="closeViewModal()">Close</button>

	</div>
</div>

<!-- <div class="modal fade" id="vendorCapesView" role="dialog" data-backdrop="static" data-keyboard="false" style="z-index: 10000;">
	<div class="modal-dialog modal-xl">
	  <div class="modal-content">
		<div class="modal-header" *ngIf="vendorCapesGeneralInfo">
		  <button type="button" class="close" data-dismiss="modal">&times;</button>
		  <h4 class="modal-title">Capability Details of Vendor: <span>"{{vendorCapesGeneralInfo.vendorName}}"</span></h4>
		</div>
		<div class="modal-body">
		  <div>
			<div class="card">
				<div class="card-body" *ngIf="vendorCapesGeneralInfo">
					<h4 class="po-head">General Information:</h4>
					<div class="table-responsive default-bg clear vendorCapes-generalInfo">
						<div class="col-sm-3">
							<p><span class="label" style="width: 35%"><b>Vendor Name: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.vendorName ? vendorCapesGeneralInfo.vendorName : '-'}}</span></p>
							<p><span class="label" style="width: 35%"><b>Vendor Code: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.vendorCode ? vendorCapesGeneralInfo.vendorCode : '-'}}</span></p>
							<p><span class="label" style="width: 35%"><b>PN: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.partNumber ? vendorCapesGeneralInfo.partNumber : '-'}}</span></p>
							<p><span class="label" style="width: 35%"><b>PN Description: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.partDescription ? vendorCapesGeneralInfo.partDescription : '-'}}</span></p>
						</div>
						<div class="col-sm-3">
							<p><span class="label" style="width: 35%"><b>PN Mfg: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.manufacturerName ? vendorCapesGeneralInfo.manufacturerName : '-'}}</span></p>
							<p><span class="label" style="width: 35%"><b>Cap Type: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.capabilityType ? vendorCapesGeneralInfo.capabilityType : '-'}}</span></p>
							<p><span class="label" style="width: 35%"><b>Vendor Ranking: </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.vendorRanking ? vendorCapesGeneralInfo.vendorRanking : '-'}}</span></p>
						</div>
						<div class="col-sm-2">
							<p>
								<span class="label"><b>PMA: </b></span><span class="value">
									<input type="checkbox" name="isPMA" [(ngModel)]="vendorCapesGeneralInfo.isPMA" disabled>
								</span>
							</p>
							<p>
								<span class="label"><b>DER: </b></span><span class="value">
									<input type="checkbox" name="isDER" [(ngModel)]="vendorCapesGeneralInfo.isDER" disabled>
								</span>
							</p>
							<p><span class="label"><b>Cost: </b></span>
								<span>{{vendorCapesGeneralInfo.cost ? vendorCapesGeneralInfo.cost : '-'}}</span></p>		</div>
						<div class="col-sm-4">
							<p><span class="label" ><b>TAT (Days): </b></span><span class="value" style="width: unset !important;">{{vendorCapesGeneralInfo.tat ? vendorCapesGeneralInfo.tat : '-'}}</span></p>
							<p><span class="label"><b>Cap Description: </b></span><span class="value"><p class="p-0 m-0 p_textEditor" [innerHTML]="vendorCapesGeneralInfo.capabilityDescription ? vendorCapesGeneralInfo.capabilityDescription : '-'">												
							</p> </span></p>
							<p style="vertical-align: top;"><span class="label"><b>Memo: </b></span><span class="value"><p class="p-0 m-0 p_textEditor" [innerHTML]="vendorCapesGeneralInfo.memo ? vendorCapesGeneralInfo.memo : '-'">												
							</p></span></p>
						</div>
					</div>
					<h4 class="po-head">Aircraft Information:</h4>
					<p-table class="ptable-custom" [value]="aircraftListDataValues" [rows]="6" [columns]="colsaircraftLD" [scrollable]="true" [style]="{width:'100%'}" [paginator]="true">
						<ng-template pTemplate="header" let-columns>
							<tr>
							
								<th *ngFor="let col of columns">
									{{col.header}}
								</th>
							</tr>
						</ng-template>
						<ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
							<tr>
							
								<td *ngFor="let col of columns">
									{{rowData[col.field]}}
								</td>
							</tr>
						</ng-template>
					</p-table>
				</div>
			</div>
		  </div>
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
		</div>
	  </div>
	</div>
  </div> -->

<div class="preloader" style="z-index: 10000;" *ngIf="isSpinnerVisible">
	<div class="loading">
		<div class="lds-roller"><div>			
		</div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
	</div>
</div> 
<!-- 
<app-spinner *ngIf="isSpinnerVisible"></app-spinner> -->