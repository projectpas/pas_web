<div class="form-group" #calendarWrap>
  <div [ngClass]="(isViewMode == false) ? 'row' : 'row ui-tabview-panels'">
      <button *ngIf="isViewMode == false" type="button" class="btn btn-primary ml-1" (click)="addPartNumber()"
          [disabled]="IsRestrictOnePN">
          Add PN
      </button>
      <div [ngClass]="(isViewMode == false) ? 'table-responsive pas-table-cstm rro-part-table-cstm poro-table-cstm parts-list-table-align parts-zindex' : 'table-responsive pas-table-cstm poro-table-cstm parts-list-table-align parts-zindex'">
            <div class="tableFixHead">
                <table class="table table-bordered" id="soq-table">
                    <tr class="child-header splitship-head child-header-back">
                      <th class="background-white"></th>
                      <th>PN</th>
                      <th>PN Description</th>
                      <th>Ser Num</th>
                      <th>Cond</th>
                      <th colspan="2">Stk Line Num</th>
                      <th *ngIf="isViewMode == false"
                            style="min-width: 120px; position: sticky !important">Actions</th>
                    </tr>
                    <ng-container *ngIf="summaryParts.length > 0">
                        <ng-container *ngFor="let summaryPart of summaryParts;let rowIndex=index;">
                            <tbody>
                                <tr class="child-data splitship-child child-data-back"
                                    *ngFor="let part of summaryPart.childParts; let stockIndex = index">
                                    <td></td>
                                    <td>
                                        {{ part.partNumber }}
                                    </td>
                                    <td>
                                        {{ part.description }}
                                    </td>
                                    <td>
                                      {{ part.serialNumber }}
                                    </td>
                                    <td>
                                      {{ part.conditionDescription }}
                                    </td>
                                    <td colspan="2">
                                      {{ part.stockLineNumber }}
                                    </td>
                                    <td class="width-120"
                                        *ngIf="isViewMode == false">
                                    </td>
                                </tr>
                            </tbody>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="summaryParts.length == 0">
                        <tbody>
                            <tr>
                                <td colspan="37" class="sales-no-records-found" style="margin-left:-15%" >
                                    No records found
                                </td>
                            </tr>
                        </tbody>
                    </ng-container>
                </table>
            </div>
        </div>
  </div>
  <div #calendarWrapper>
  </div>
</div>
<div *ngIf="isViewMode == false" class="view-mode-div">
  <button *ngIf="saveButton" type="button" [disabled]="canSaveParts" class="btn btn-primary view-mode-button"
      (click)="approve()">
      <span>Update</span>
  </button>
  <button type="button" *ngIf="!saveButton" [disabled]="canSaveParts" class="btn btn-primary view-mode-button"
      (click)="approve()">
      <span>Save</span>
  </button>
</div>
<div class="preloader" *ngIf="isSpinnerVisible">
  <div class="loading">
      <div class="lds-roller">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
      </div>
  </div>
</div>
<ng-template #addPart let-c="close" let-d="dismiss">
  <app-add-exchange-part-number [selectedParts]="selectedParts" [exchangeQuote]="exchangeQuote"
  (select)="openSalesMargin($event)" [isStockLineViewMode]="isStockLineViewMode" 
  [selectedSummaryRow]="selectedSummaryRow" (close)="onClose($event)" [type]="'EQ'">

  </app-add-exchange-part-number>
</ng-template>
<ng-template #salesMargin let-c="close" let-d="dismiss" tabindex="-1">
  <app-exchange-mergin tabindex="-1" [part]="part" [isEdit]="isEdit" (save)="openSalesMarginSave($event)"
      (close)="onCloseMargin($event)"></app-exchange-mergin>
</ng-template>