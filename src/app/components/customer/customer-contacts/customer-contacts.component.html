<div class="right_col" role="main">
  <div>
    <div class="x_content">
      <div class="col-md-12 shadow-box-cstm" *ngIf="isViewMode == false">
        <div class="col-md-4">
          <p class="fs12">
            <label class="control-label labels-font-header wauto">Customer Name:
            </label>
            <span class="span-header-red text-capital">
              {{ customerName }}
            </span>
          </p>
        </div>
        <div class="col-md-4">
          <p class="fs12">
            <label class="control-label labels-font-header wauto">Customer Code:
            </label>
            <span class="span-header-red text-capital">
              {{ customerCode }}
            </span>
          </p>
        </div>
      </div>
      <div class="card new-card">
        <div>
          <div class="card-header header" >
            <div class="row">
              <div class="col">
                <h4 class="header-name"> Contacts</h4>
              </div>
              <div>
                <a *ngIf="isViewMode == false" data-toggle="modal" data-target="#addContactDetails">
                  <button type="button" class="btn-sm header-button" 
                   matTooltip="Add Contact" matTooltipPosition="above" (click)="onAddContactInfo();">
                    Add Contact
                  </button>
                </a>              
              </div>
            </div>
          </div>
          <!-- <div class="clear"></div>
          <hr /> -->
        </div>   
        <!-- class="rpo-table-cstm rro-table-cstm" -->
        <div class="card-body header-body">
        <p-table #contact 
        class="rpo-table-cstm lastcol-fix" 
        [value]="customerContacts" 
        [loading]="loaderForContacts" 
        [rows]="pageSize" 
        [paginator]="true" 
        [pageLinks]="3" 
        [first]="0" 
        [rowsPerPageOptions]="[10, 20, 50, 100]" 
        [columns]="selectedColumns" 
        selectionMode="multiple" 
        [metaKeySelection]="true"
        [resizableColumns]="true" 
        [reorderableColumns]="true"
          [scrollable]="true" (onPage)="pageIndexChange($event)" scrollHeight="450px">
          <ng-template pTemplate="caption" *ngIf="isViewMode == false">
            <div class="row">
              <div class="col">
              <p-multiSelect [options]="customerContactsColumns" 
              [(ngModel)]="selectedColumns" name="customerContactsm1"
                optionLabel="header" selectedItemsLabel="{0} columns selected"
                class="multiselect-field"
                defaultLabel="Choose Columns"></p-multiSelect>
              </div>
              <div class="col">
                <div					
						class="global-search-field inner-addon right-addon inline-block"
					  >
                <i class="fa fa-search"></i>
                <input type="text" pInputText size="50" [(ngModel)]="resetinputmodel" (onClear)="clearValue()"
                  class="form-control"
                  (input)="contact.filterGlobal($event.target.value, 'contains')" placeholder="Filter"
                   />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
              <button type="button"
               class="btn btn-primary exports-button" pButton icon="fa-download" iconPos="left"
                label="Export  Data" matTooltip="Download  Data" matTooltipPosition="above"               
                data-toggle="modal" 
                (click)="selectedOnly = false; targetData = contact;"
                 data-target="#downloadConfirmation"></button>
              <button type="button" class="btn btn-primary exports-button" pButton icon="fa-download" iconPos="left"
                label="Export Selected Data" matTooltip="Download Selected Data" matTooltipPosition="above"
                (click)="contact.exportCSV({ selectionOnly: true })"></button>
              <!-- <div class="excel-upload  excel-upload-cstm">
                <button name="download" id="download" type="button" class="btn btn-primary exports-button"
                  matTooltip="Download Sample File" matTooltipPosition="above" (click)="sampleExcelDownloadForContact()"
                  >
                  Sample File Download
                </button>
                <input type="file" name="upload3[]" id="upload3" (change)="customContactExcelUpload($event)"
                  class="uploaddoc upload-file" accept=".xlsx, .xls, .csv" />
                <label for="upload3">
                  <span matTooltip="Upload Data (Excel)" matTooltipPosition="above">
                    <i class="fa fa-upload"></i>
                  </span>
                </label>
                &nbsp; &nbsp;
              </div> -->
              </div>
              <div class="pull-right buttons-div-align">
                <div class="col">
                <div class="col buttons-top-padding">
                    <div class="form-group">
                     
                      <div class="pull-left radio-buttons-align">
                        <p-radioButton class="custom_set" name="contactstatus" value="Active"  label="Active" [(ngModel)]="currentstatus" (click)="geListByStatus('Active')"></p-radioButton>
                        </div>
                        <div class="pull-left radio-buttons-align">
                          <p-radioButton class="custom_set" name="contactstatus" value="InActive" label="In-Active" [(ngModel)]="currentstatus"  (click)="geListByStatus('InActive')"></p-radioButton>
                        </div>
                        <div class="pull-left radio-buttons-align">
                          <p-radioButton class="custom_set" name="contactstatus" value="ALL" label="All" [(ngModel)]="currentstatus"  (click)="geListByStatus('ALL')"></p-radioButton>
                        </div> 
                        <div class="checkbox-cstm pull-left checkbox-align">
                          <label class="checkbox-label-align">
                                <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent" id="cparent"  (click)="getDeleteListByStatus($event.target.checked)"
                                  />
                                <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                Show  Deleted List 
                              </label>
                            </div>
                          </div>
                      </div>                           
                </div>
            </div>
            </div>
          </ng-template>
          <ng-template pTemplate="caption" *ngIf="isViewMode == true">
            <div class="row">
              <div class="col-sm-8"></div>
              <div class="col-sm-4">
                <div class="checkbox-cstm pull-right checkbox-align">
                  <label class="checkbox-label-align contact-show-deleted-width">
                    <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent" id="cparent"  (click)="getDeleteListByStatus($event.target.checked)"/>
                    <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                      Show Deleted List 
                  </label>
                </div>
              </div>
            </div>
          </ng-template>

          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col *ngFor="let col of columns" class="table-column-width" [ngStyle]="{'width': col.width}"
                [ngClass]="{ update_withFlag: col.field == 'isDefaultContact' }" />
            </colgroup>
          </ng-template>

          <ng-template pTemplate="header" let-columns>
            <tr>
              <th class="table-column-width">Flag</th>
              <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn [pSortableColumn]="col.field"
                [hidden]="col.field == 'isDefaultContact'">
                {{ col.header }}
                <p-sortIcon [field]="col.field"></p-sortIcon>
              </th>
              <th class="table-actions-column">Actions</th>
            </tr>
            <tr>
              <th class="table-column-width"></th>
              <th class="table-column-width" *ngFor="let col of columns" [hidden]="col.field == 'isDefaultContact'"
                [ngSwitch]="col.field">
                  <input type="text" class="incorn_border ui-widget table-header-input-width"
                  *ngIf="col.field != 'createdDate' && col.field != 'updatedDate'"
                 (input)="contact.filter($event.target.value,col.field,'contains')" pInputText>
               <input type="date" class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'createdDate'"
                 name="createdDate" (change)="dateFilterForTable($event.target.value, col.field)" />
               <input type="date" class="hidePlaceHolder table-header-input-width" *ngIf="col.field == 'updatedDate'"
                 name="updatedDate" (change)="dateFilterForTable($event.target.value,col.field)" />
              </th>
              <th class="table-actions-column"></th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-rowData let-columns="columns" let-i="rowIndex">
            <tr [pSelectableRow]="rowData" [pContextMenuRow]="rowData"
              (dblclick)="viewSelectedRowdbl(viewdbl, rowData)">
              <td class="table-column-width">
                <span class="flag">
                  <i *ngIf="rowData.isDefaultContact == true" [ngStyle]="{
                      color: rowData.isDefaultContact == true ? 'green' : 'none'
                    }" class="fa fa-flag" matTooltip="Primary" matTooltipPosition="above" aria-hidden="true"></i>
                </span>
              </td>

              <td class="table-column-width" *ngFor="let col of columns" class="ui-resizable-column" [hidden]="col.field == 'isDefaultContact'"
                pReorderableRowHandle>
                <ng-container *ngIf="col.field != 'workPhone' && col.field != 'tag' && col.field != 'notes' && col.field != 'lastName' && col.field != 'contactTitle'">
                  {{
                    col.field == 'createdDate'
                      ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a ')
                      : rowData[col.field] && col.field == 'updatedDate'
                      ? (rowData[col.field] | date: 'MM/dd/yyyy h:mm a ')
                      : rowData[col.field]
                  }}
                </ng-container>
                <ng-container *ngIf="col.field == 'notes'">                  
                  <span class="value"><p class="m-0 p-0 p_textEditor truncate-text" matTooltipPosition="above" 
                    [matTooltip]="parsedText(rowData.notes)" [innerHTML]="rowData.notes"></p></span>
                </ng-container>
                <ng-container *ngIf="col.field == 'workPhone'">
                    {{ rowData.workPhone }} {{rowData.workPhoneExtn && rowData.workPhoneExtn.trim() != '' ? 'Ext ' : ''}} {{ rowData.workPhoneExtn }}
                </ng-container>
                <ng-container *ngIf="col.field == 'tag'">
                  {{rowData.tag == 'NA' ? ' ' : rowData.tag}} 
                </ng-container>
                <ng-container *ngIf="col.field == 'lastName'">
                  {{rowData.lastName == 'NA' ? ' ' : rowData.lastName}} 
                </ng-container>
                <ng-container *ngIf="col.field == 'contactTitle'">
                  {{rowData.contactTitle == 'NA' ? ' ' : rowData.contactTitle}} 
                </ng-container>
              </td>
              <td class="action-icons-cstm table-column-width" *ngIf="selectedColumns.length > 0 && isViewMode == false">
                  <div *ngIf="currentDeletedstatus==false">
                      <p-inputSwitch matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}" matTooltipPosition="above"
                                     onLabel="on" [disabled]="rowData.isDefaultContact == true" offLabel="off" (onChange)="handleChange(rowData)" [(ngModel)]="rowData['isActive']">
                      </p-inputSwitch>
                      <span data-toggle="modal" data-target="#view">
                          <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" (click)="viewSelectedRow(rowData)"
                             matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a>
                      </span>

                      <span data-toggle="modal" data-target="#addContactDetails">
                          <a class="btn nobg"
                             (click)="editCustomerContact(rowData)" matTooltip="Edit" matTooltipPosition="above">
                              <i class="fa fa-pencil"></i>
                          </a>
                      </span>
                      <span data-target="#ATAADD" data-toggle="modal">
                          <a class="btn nobg btn-users-cstm"
                             matTooltip="ATA Chapters"
                             matTooltipPosition="above"
                             (click)="addATAChapter(rowData)">
                              <i class="fa fa-plane"
                                 aria-hidden="true"></i>
                          </a>
                      </span>
                      <span data-toggle="modal">
                          <a class="btn nobg"
                             (click)="openDelete(deleteContent, rowData);contact.reset()" matTooltip="Delete"
                             matTooltipPosition="above"><i class="fa fa-trash"></i></a>
                      </span>
                      <span data-toggle="modal" data-target="#contentHist">
                          <a class="btn nobg"
                             (click)="getAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above">
                              <i class="fa fa-history"></i>
                          </a>
                      </span>
                  </div>
                      <div *ngIf="currentDeletedstatus==true">
                        <p-inputSwitch   matTooltip="{{rowData['isActive'] ? 'Active': 'In Active'}}" matTooltipPosition="above"
                        onLabel="on"  [disabled]="true" offLabel="off" (onChange)="handleChange(rowData)" [(ngModel)]="rowData['isActive']">
                      </p-inputSwitch>
                        <span data-toggle="modal" data-target="#view">
                          <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" (click)="viewSelectedRow(rowData)"
                            matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a>
                        </span>
                        <span data-toggle="modal" data-target="#contentHist">
                          <a class="btn nobg"
                             (click)="getAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above">
                              <i class="fa fa-history"></i>
                          </a>
                        </span>
                        <span ><a class="btn nobg" (click)="restore(restoreId,rowData);" matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>
                        </div>
              </td>
              <td class="action-icons-cstm table-column-width" *ngIf="selectedColumns.length > 0 && isViewMode == true">
                <span data-toggle="modal" data-target="#view">
                  <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip" (click)="viewSelectedRow(rowData)"
                    matTooltip="View" matTooltipPosition="above"><i class="fa fa-eye"></i></a>
                </span>
                <span data-target="#ATAADD" data-toggle="modal"><a class="btn nobg" 
                  matTooltip="ATA Chapters"
                  matTooltipPosition="above"
                  (click)="addATAChapter(rowData)"><i class="fa fa-plane"
                   aria-hidden="true"></i></a>
              </span>
                <span data-toggle="modal" data-target="#contentHist"><a class="btn nobg"
                    (click)="getAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above"><i
                      class="fa fa-history"></i></a></span>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns *ngIf="customerContacts.length == 0">
            <tr>
              <td colspan="16" class="no-records-cstm no-records-msg">
                No records found
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary" id="footer">
            <label id="footer" class="footer">Total:</label>
            <input class="footer-input-width" [(ngModel)]="contact._totalRecords" [disabled]="true" pInputText type="text" />
            &nbsp;&nbsp;
            <label id="footer" class="footer1">Pages Count:</label>

            <input class="footer-input-width" [ngModel]="getPageCount(contact._totalRecords, pageSize)" [disabled]="true"
              pInputText type="text" />
          </ng-template>
        </p-table>
        <div class="m-t-10" *ngIf="isViewMode == false">
          <button type="button" class="btn btn-primary pull-right submit-btn" (click)="nextClick()"
            [disabled]="stopmulticlicks">
            Next
          </button>
          <button type="button" class="btn btn-primary pull-right submit-btn" (click)="backClick()">
            Previous
          </button>
        </div>
    </div>
  </div>
</div>

<div *ngIf="auditHistory" id="contentHist" #contentHist class="modal fade" role="dialog" data-backdrop="static"
  data-keyboard="false">
  <div class="modal-dialog modal-xl">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
        </div>
        <h4 class="modal-title">History of Customer Contact</h4>
      </div>
      <div class="modal-body">
        <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
					<div class="tableFixHead">  
					<table class="table table-bordered" *ngIf="auditHistory.length > 0; else noDatavailable">
            <thead>
              <tr>
                <th>Tag</th>
                <th class="width-130" >Attention</th>
                <th class="width-130">Prefix</th>
                <th style="min-width:100px">First Name</th>
                <th style="min-width:100px">Middle Name</th>
                <th style="min-width:100px">Last Name</th>
                <th class="width-130">Suffix</th>
                <th style="min-width:100px">Contact Title</th>
                <th class="width-130">Email</th>
                <th style="min-width:100px">Work Phone</th>
                <th style="min-width:100px">Mobile Phone</th>
                <th style="min-width:100px">Alternate Phone</th>
                <th style="min-width:100px">Fax</th>

                <th style="min-width:100px">Website URL</th>
                <th style="min-width:100px">Primary Contact</th>
                <th class="min-width-250">Memo</th>
                <th style="min-width:100px">Is Active</th>                
                <th style="min-width:120px">Created Date</th>
                <th style="min-width:100px">Created By</th>
                <th style="min-width:120px">Updated Date</th>
                <th style="min-width:100px">Updated By</th>                
                <th style="min-width:100px">Is Deleted</th>
              </tr>
            </thead>
            <tbody style="overflow-x: scroll !important;" *ngIf="auditHistory.length > 0">
              <tr class="width-130" *ngFor="let audit of auditHistory; let i = index">
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'tagName', audit.tagName)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.tagName }}
                </td>                
                <td [ngStyle]="{
                  color: getColorCodeForHistory(i, 'attention', audit.attention)
                    ? 'black'
                    : 'red'
                }">
                {{ audit.attention }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'prefix', audit.prefix)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.prefix }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'firstName',
                      audit.firstName
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.firstName }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'middleName',
                      audit.middleName
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.middleName }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'lastName', audit.lastName)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.lastName }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'suffix', audit.suffix)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.suffix }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'contactTitle',
                      audit.contactTitle
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.contactTitle }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'email', audit.email)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.email }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'fullContact',
                      audit.fullContact
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.fullContact }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'mobilePhone',
                      audit.mobilePhone
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.mobilePhone }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'alternatePhone',
                      audit.alternatePhone
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.alternatePhone }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'fax', audit.fax)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.fax }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(
                      i,
                      'websiteURL',
                      audit.websiteURL
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.websiteURL }}
                </td>

                <td class="text-center width-60">
                  <span class="value">
                    <label class="wauto">
                  <input type="checkbox" name="isDefaultContact" 
                  [(ngModel)]="audit.isDefaultContact" disabled>  </label>
                </span></td>

                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'notes', audit.notes)
                      ? 'black'
                      : 'red'
                  }">
                  <p class="m-0 p-0 p_textEditor truncate-text" matTooltipPosition="above" 
                  [matTooltip]="parsedText(audit.notes)" [innerHTML]="audit.notes"></p>
                </td>
                <td class="text-center width-60">
                  <span class="value">
                    <label class="wauto">
                       <input type="checkbox" name="isActive" [(ngModel)]="audit.isActive" disabled>
                      </label></span></td>
                <td>{{ audit.createdDate | date: 'MM/dd/yyyy h:mm a ' }}</td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'createdBy', audit.createdBy)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.createdBy }}
                </td>
                <td>{{ audit.updatedDate | date: 'MM/dd/yyyy h:mm a ' }}</td>
                <td [ngStyle]="{
                    color: getColorCodeForHistory(i, 'updatedBy', audit.updatedBy)
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.updatedBy }}
                </td>
                <td class="text-center width-60">
                  <span class="value">
                    <label class="wauto">
                     <input type="checkbox" name="isDeleted" 
                     [(ngModel)]="audit.isDeleted" disabled>
                    </label>
                  </span>
                  </td>
              </tr>
            </tbody>
          </table>
          </div>
          <ng-template #noDatavailable>
            <div class="text-center">
              <h4 class="no-history-found-msg">No History Found</h4>
            </div>
          </ng-template>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="downloadConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" (click)="closeDeleteModal()">&times;</button>
				<h4 class="modal-title">Are You Sure Want to Download?</h4>
			</div>
			<div class="modal-body" *ngIf="targetData">
				<strong>
					<span>
						You are attempting to export {{targetData.totalRecords}} of records. 
					</span> 
				</strong>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" (click)="(selectedOnly)?targetData.exportCSV({ selectionOnly: true }):exportCSV(targetData); closeDeleteModal();">Confirm</button>
				<button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="addContactDetails" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="closeMyModel()">
          &times;
        </button>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
        </div>
        <h4 class="modal-title">
          {{ isEditButton ? 'Edit' : 'Add' }} Contact Details
        </h4>
      </div>
      <form  #addContactForm="ngForm" class="form-horizontal" id="">
        <div class="modal-body">
          <div class="form-row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="tag">Tag <span class="clr-red"></span></label>                
                  <div class="inner-addon right-addon inline-block input-width-100-percent">
                    <p-autoComplete class="autocomp-customer-cstm" [(ngModel)]="contactInformation.tag"
                      (ngModelChange)="enableSave()" name="tag" field="tagName" [suggestions]="tagNamesList"
                      (completeMethod)="filterTagNames($event)" [size]="30" [minLength]="1" [dropdown]="true"
                      [inputStyle]="{ width: '100%' }" [forceSelection]="true" autocomplete="off">
                    </p-autoComplete>
                  </div>
              </div>
              <div class="form-group">
                  <label>Attention </label>               
                  <div class="inner-addon right-addon inline-block" style="width: 100%">
                      <input class="form-control" type="text" name="attention" (ngModelChange)="enableSave()"
                      [(ngModel)]="contactInformation.attention" value="" autocomplete="new-password"/>
                  </div>
              </div>
              <div class="form-group">
                <label>Prefix</label>
                <select name="preifx" [(ngModel)]="contactInformation.prefix" (ngModelChange)="enableSave()">
                  <option value="" selected>None selected</option>
                  <option value="Dr.">Dr.</option>
                  <option value="Mr.">Mr.</option>
                  <option value="Mrs.">Mrs.</option>
                  <option value="Ms.">Ms.</option>
                </select>
              </div>
              <div class="form-group">
                <label>First Name <span class="clr-red">*</span></label>
                <div class="inner-addon right-addon inline-block input-width-100-percent">
                  <p-autoComplete class="autocomp-customer-cstm" 
                    [(ngModel)]="contactInformation.firstName"
                    (ngModelChange)="enableSave()"
                    name="firstName" 
                    field="firstName"                                                
                    [suggestions]="firstNamesList"
                    (completeMethod)="filterFirstNames($event)"                     
                    [size]="30" [minLength]="1" 
                    [dropdown]="true"
                    [inputStyle]="{ width: '100%' }" required value="" autocomplete="new-password">
                  </p-autoComplete>
                  <!-- 
                    (onKeyUp)=" checkfirstNameExist($event.target.value)"
                    (onChange)=" checkfirstNameExist($event.target.value)"  
                    (onSelect)="selectedFirstnameName()"  
                    <div *ngIf="isfirstNameAlreadyExists" class="clr-red">
                  Entry Already Exists
                 </div> -->
                </div>
              </div>
              <div class="form-group">
                <label>Middle Name</label>
                <div class="inner-addon right-addon inline-block input-width-100-percent">
                  <p-autoComplete class="autocomp-customer-cstm" 
                    [(ngModel)]="contactInformation.middleName"
                    (ngModelChange)="enableSave()" 
                    name="middleName" 
                    [suggestions]="middleNamesList" field="middleName"
                    (completeMethod)="filterMiddleNames($event)" 
                    [size]="30" [minLength]="1" [dropdown]="true"
                    [inputStyle]="{ width: '100%' }" value="" autocomplete="new-password">
                  </p-autoComplete>
                  <!-- (onKeyUp)="checkmiddleNameExist($event.target.value)"
                  (onChange)="checkmiddleNameExist($event.target.value)"  
                  (onSelect)="selectedmiddleNameName()"  
                  <div *ngIf="ismiddleNameAlreadyExists" class="clr-red">
                    Entry Already Exists
                   </div> -->
                </div>

              </div>
              <div class="form-group">
                <label>Last Name <span class="clr-red">*</span></label>
                <div class="inner-addon right-addon inline-block input-width-100-percent">
                  <p-autoComplete class="autocomp-customer-cstm" 
                    [(ngModel)]="contactInformation.lastName"
                    (ngModelChange)="enableSave()" 
                    name="lastName"
                    field="lastName"
                    [suggestions]="lastNamesList"                     
                    (completeMethod)="filterLastNames($event)" 
                    [size]="30" [minLength]="1" [dropdown]="true"
                    [inputStyle]="{ width: '100%' }" required value="" autocomplete="new-password">
                  </p-autoComplete> 
                  <!-- (onKeyUp)="checklastNameExist($event.target.value)"
                  (onChange)="checklastNameExist($event.target.value)"  
                  (onSelect)="selectedlastNameName()" 
                  <div *ngIf="islastNameAlreadyExists" class="clr-red">
                    Entry Already Exists
                   </div> -->
                </div>
              </div>
              <div class="form-group">
                <label>Suffix</label>
                <select name="suffix" [(ngModel)]="contactInformation.suffix" (ngModelChange)="enableSave()">
                  <option value="">None selected</option>
                  <option value="II">II</option>
                  <option value="III">III</option>
                  <option value="Jr.">Jr.</option>
                  <option value="Sr.">Sr.</option>
                </select>
              </div>
              <div class="form-group">
                <label>Title</label> 
                <input class="form-control" type="text" name="contactTitle"  #contactTitle="ngModel"
                   [(ngModel)]="contactInformation.contactTitle" (ngModelChange)="enableSave()" value="" autocomplete="new-password"/>
                <div *ngIf="contactTitle.errors" [ngClass]="'error'">
                    <div *ngIf="contactTitle.errors.pattern">
                      <span class="clr-red">At least One Alphabet is Required.</span>
                    </div>
                </div>
              </div>              
              <!-- [pattern]="titlePattern" -->
              <div class="form-group workphone-div">
                <label>Work Phone
                  <span class="clr-red workphone-span">*</span></label>
                <div class="col-md-12">
                  <input class="form-control" type="text" required name="workPhone" #workPhone="ngModel" [pattern]="phonePattern"
                    [(ngModel)]="contactInformation.workPhone" (ngModelChange)="enableSave()"
                    style="width: calc(62% - 63px) !important;" (keypress)="patternMobilevalidationWithSpl($event)"
                    minlength="6" maxlength="14" value="" autocomplete="new-password"/>
                  ext
                  <input class="form-control" type="text" name="workPhoneExtn"
                    [disabled]="contactInformation.workPhone == ''" [(ngModel)]="contactInformation.workPhoneExtn"
                    (ngModelChange)="enableSave()" style="width: calc(43% - 63px) !important;" 
                    value="" autocomplete="new-password"/>
                </div>
              </div>
              <div class="form-group">
                <div *ngIf="workPhone.errors" [ngClass]="'error'">
                  <div *ngIf="workPhone.errors.pattern">
                    <span class="clr-red">Please enter atleast 6 digits</span>
                  </div>
                </div>
              </div>              
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <div class="form-group primary-contact-div">
                  <span class="checkbox-cstm">
                    <input type="checkbox" name="isDefaultContact" [(ngModel)]="contactInformation.isDefaultContact"
                    (ngModelChange)="enableSave()" [disabled]="contactInformation.isDefaultContact && isPrimatyContactData  &&  ediData" />
                    <label>
                      Primary Contact
                    </label>
                  </span>
                </div>
              </div>
              <div class="form-group">
                <label>Website</label>
                <input class="form-control" type="text" name="websiteURL" #url="ngModel"
                  [(ngModel)]="contactInformation.websiteURL" (ngModelChange)="enableSave()" 
                  [pattern]="urlPattern" value="" autocomplete="new-password"/>
                <div *ngIf="url.errors" [ngClass]="'error'">
                  <div *ngIf="url.errors.pattern">
                    <span class="clr-red">URL not valid</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Mobile Phone</label>
                <input class="form-control" type="text" name="mobilePhone" [(ngModel)]="contactInformation.mobilePhone" [pattern]="mobilePattern" 
                  (ngModelChange)="enableSave()" (keypress)="patternMobilevalidationWithSpl($event)"
                   minlength="10" #mobilePhone="ngModel"
                  maxlength="14" value="" autocomplete="new-password"/>
              </div>
              <div *ngIf="mobilePhone.errors" [ngClass]="'error'">
                <div *ngIf="mobilePhone.errors.pattern">
                  <span class="clr-red">Please enter atleast 10 digits</span>
                </div>
              </div>
              <div class="form-group">
                <label>Alternate Phone</label>
                <input class="form-control" type="text" autocomplete="off" name="alternatePhone" #alternatePhone="ngModel" [pattern]="phonePattern"
                  [(ngModel)]="contactInformation.alternatePhone" (ngModelChange)="enableSave()"
                  (keypress)="patternMobilevalidationWithSpl($event)" minlength="6" maxlength="14" 
                  value="" autocomplete="new-password"/>
              </div>
              <div *ngIf="alternatePhone.errors" [ngClass]="'error'">
                <div *ngIf="alternatePhone.errors.pattern">
                  <span class="clr-red">Please enter atleast 6 digits</span>
                </div>
              </div>
              <div class="form-group">
                <label>Fax</label>
                <input class="form-control" pKeyFilter="pint" type="text" name="fax" #fax="ngModel" [pattern]="phonePattern"
                  [(ngModel)]="contactInformation.fax" (ngModelChange)="enableSave()" minlength="6" maxlength="14" 
                  value="" autocomplete="new-password"/>
              </div>
              <div *ngIf="fax.errors" [ngClass]="'error'">
                <div *ngIf="fax.errors.pattern">
                  <span class="clr-red">Please enter atleast 6 digits</span>
                </div>
              </div>
             
              <div class="form-group">
               
                <label>Memo</label>
                <div class="col-sm-12">
                <div class="col-sm-11">
                <!-- <textarea name="notes" 
                [(ngModel)]="contactInformation.notes"
                 (ngModelChange)="enableSave()"></textarea> -->
                 <span>                    
                  <div class="form-group memo-popup-cstm mat_emo" style="margin-left:-4px">
                    <div
                    (ngModelChange)="enableSave()"
                      [innerHTML]="contactInformation.notes"
                      [matTooltip]="parsedText(contactInformation.notes)"
                      matTooltipPosition="above"
                      class="form-control"
                      style="width: 111%;"
                      class="text_editor_box"
                    ></div>
                  </div>
                  </span>
                </div>
                <div class="col-sm-1">
                  <span style="margin-left:11px">
                  <a
                  class="btn nobg"
                  data-toggle="modal"
                  (ngModelChange)="enableSave()"
                  data-target="#memo-popup-Doc"
                  (click)="onClickMemo()"
                  matTooltip="Add Memo"
                  matTooltipPosition="above">
                  <i style="color: #337ab7" class="fa fa-pencil"></i>
                  </a>
                </span>
              </div>              
              </div>
              </div>

              <div class="form-group">
                <label>Email <span class="clr-red">*</span></label>
                <input class="form-control" email type="text" name="email" [pattern]="emailPattern" 
                  #contactEmail="ngModel" [(ngModel)]="contactInformation.email" (ngModelChange)="enableSave()"
                  required/>
                <div *ngIf="contactEmail.errors" [ngClass]="'error'">
                  <div *ngIf="contactEmail.errors.pattern">
                    <span class="clr-red">Contact Email not valid</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" *ngIf="!isEditButton" class="btn btn-primary pull-right submit-btn text-center"
            [disabled]="
              !addContactForm.valid ||
              contactEmail.errors ||
              disablesaveForFirstname ||
              disableSaveMiddleName ||
              disableSaveLastName ||
              disableSave
            " (click)="saveContactInformation()" data-dismiss="modal">
            Save
          </button>
          <button type="button" *ngIf="isEditButton" class="btn btn-primary pull-right submit-btn text-center"
            [disabled]="
              !addContactForm.valid ||
              contactEmail.errors ||
              disablesaveForFirstname ||
              disableSaveMiddleName ||
              disableSaveLastName ||
              disableSave
            " (click)="updateCustomerContact()">
            Update
          </button>
          <!-- [disabled]="(!addContactForm.valid ||contactEmail.errors|| disablesaveForFirstname ||disableSaveMiddleName ||disableSaveLastName)&& disableSave" -->
          <button type="button" class="btn btn-danger" (click)="closeMyModel()" data-dismiss="modal">
            Close
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="view" #view class="modal fade" role="dialog" *ngIf="sourceViewforContact" data-backdrop="static"
  data-keyboard="false">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Details of Customer Contact</h4>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <div class="col-sm-12">
          <p>
            <span class="label"><b>Tag<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.tag }}</span>
          </p>
          <p>
            <span class="label"><b>Attention: </b></span><span class="value">{{ sourceViewforContact.attention }}</span>
          </p>
          <p>
            <span class="label"><b>Prefix: </b></span><span class="value">{{ sourceViewforContact.prefix }}</span>
          </p>
          <p>
            <span class="label"><b>First Name<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.firstName }}</span>
          </p>
          <p>
            <span class="label"><b>Middle Name: </b></span><span
              class="value">{{ sourceViewforContact.middleName }}</span>
          </p>
          <p>
            <span class="label"><b>Last Name<span class="clr-red">*</span>:</b></span><span
              class="value">{{ sourceViewforContact.lastName }}</span>
          </p>
          <p>
            <span class="label"><b>Suffix: </b></span><span class="value">{{ sourceViewforContact.suffix }}</span>
          </p>
          <p>
            <span class="label"><b>Title: </b></span><span class="value">{{ sourceViewforContact.contactTitle }}</span>
          </p>
          <p>
            <span class="label"><b>Work Phone<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.workPhone }}  <span *ngIf="sourceViewforContact.workPhoneExtn"> -  {{ sourceViewforContact.workPhoneExtn }}</span>
            </span> 
          </p>
          <p>
            <span class="label"><b>Primary Contact </b></span><span class="value">
              <label class="wauto">
                <input type="checkbox" name="isPrimaryContact" [(ngModel)]="sourceViewforContact.isDefaultContact" disabled>
              </label>              
          </span>
          </p>
          <p>
            <span class="label"><b>Website: </b></span><span class="value">{{ sourceViewforContact.websiteURL }}</span>
          </p>
          <p>
            <span class="label"><b>Mobile Phone: </b></span><span
              class="value">{{ sourceViewforContact.mobilePhone }}</span>
          </p>
          <p>
            <span class="label"><b>Alternate Phone:</b></span><span class="value">{{
              sourceViewforContact.alternatePhone
            }}</span>
          </p>

          <p>
            <span class="label"><b>Fax: </b></span><span class="value">{{ sourceViewforContact.fax }}</span>
          </p>
          <!-- <p>
            <span class="label"><b>Memo: </b></span><span class="value">{{ sourceViewforContact.notes }}</span>
          </p> -->
          <p class="vertical-top">
            <span class="label vertical-top"><b>Memo: </b></span>
            <span class="value"><p class="m-0 p-0 p_textEditor truncate-text" matTooltipPosition="above" 
              [matTooltip]="parsedText(sourceViewforContact.notes)" [innerHTML]="sourceViewforContact.notes"></p></span>
          </p>
          <p>
            <span class="label"><b>Email<span class="clr-red">*</span>:</b></span><span
              class="value">{{ sourceViewforContact.email }}</span>
          </p>
          <p>
            <span class="label"><b>Active: </b></span><span class="value">
              <label class="wauto">
                <input type="checkbox" name="isActive" [(ngModel)]="sourceViewforContact.isActive" disabled>
              </label>         
            </span>     
          </p>
          <div class="clear"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="memo-popup-Doc" style="z-index: 15000 !important;"  role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Edit Memo</h4>
      </div>
      <div class="modal-body">
        <!-- <table class="table table-bordered table-fixed workflow-table-material">
          <thead>
            <th style="color: #fff;">Memo</th>
          </thead>
          <tbody>
            <tr>
              <td style="white-space: inherit">
                <p-editor
                 spellcheck="true"
                 (ngModelChange)="enableSaveMemo()"
                  [(ngModel)]="memoPopupContent"
                  [style]="{ height: '320px' }"
                  name="memoPopupContent"
                ></p-editor>
              </td>
            </tr>
          </tbody>
        </table> -->
        <p-editor
        spellcheck="true"
        (ngModelChange)="enableSaveMemo()"
         [(ngModel)]="memoPopupContent"
         [style]="{ height: '320px' }"
         name="memoPopupContent"
       ></p-editor>
        <div class="editor-buttons">
          <button
            type="button"
            class="btn btn-primary editor-buttons-margin"
            (click)="onClickPopupSave()" [disabled]="disableSaveMemo">
            Save
          </button>
          <button
            type="button"
            class="btn btn-danger editor-buttons-margin"
            (click)="closeMemoModel()" >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<ng-template #viewdbl class="modal fade " id="viewdbl" role="dialog">
  <div role="dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="dismissModel()">
          &times;
        </button>
        <h4 class="modal-title">Details of Customer Contact</h4>
      </div>
      <div class="modal-body">
        <div class="col-sm-12">
          <p>
            <span class="label"><b>Tag<span class="clr-red">*</span> : </b></span><span
              class="value">{{ sourceViewforContact.tag }}</span>
          </p>
          <p>
            <span class="label"><b>Prefix: </b></span><span class="value">{{ sourceViewforContact.prefix }}</span>
          </p>
          <p>
            <span class="label"><b>First Name<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.firstName }}</span>
          </p>
          <p>
            <span class="label"><b>Middle Name: </b></span><span
              class="value">{{ sourceViewforContact.middleName }}</span>
          </p>
          <p>
            <span class="label"><b>Last Name<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.lastName }}</span>
          </p>
          <p>
            <span class="label"><b>Suffix: </b></span><span class="value">{{ sourceViewforContact.suffix }}</span>
          </p>
          <p>
            <span class="label"><b>Title: </b></span><span class="value">{{ sourceViewforContact.contactTitle }}</span>
          </p>
          <p>
            <span class="label"><b>Work Phone<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.workPhone }} </span>
              <span *ngIf="sourceViewforContact.workPhoneExtn"> -  {{ sourceViewforContact.workPhoneExtn }}</span>
          </p>
          <p>
            <span class="label"><b>Primary Contact: </b></span><span class="value">{{
              sourceViewforContact.isDefaultContact
            }}</span>
          </p>
          <p>
            <span class="label"><b>WebSite: </b></span><span class="value">{{ sourceViewforContact.websiteURL }}</span>
          </p>
          <p>
            <span class="label"><b>Mobile Phone: </b></span><span
              class="value">{{ sourceViewforContact.mobilePhone }}</span>
          </p>
          <p>
            <span class="label"><b>Alternate Phone:</b></span><span class="value">{{
              sourceViewforContact.alternatePhone
            }}</span>
          </p>

          <p>
            <span class="label"><b>Fax: </b></span><span class="value">{{ sourceViewforContact.fax }}</span>
          </p>
          <p>
            <span class="label"><b>Memo: </b></span><span class="value">{{ sourceViewforContact.notes }}</span>
          </p>
          <p>
            <span class="label"><b>Email<span class="clr-red">*</span>: </b></span><span
              class="value">{{ sourceViewforContact.email }}</span>
          </p>
          <p>
            <span class="label"><b>Active: </b></span><span class="value">
              <label class="wauto">
                <input type="checkbox" name="isActive" [(ngModel)]="sourceViewforContact.isActive" disabled>
              </label>         
            </span>     
          </p>
          <div class="clear"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="dismissModel()">
          Close
        </button>
      </div>
    </div>
  </div>
</ng-template>

<div id="ATAADD" class="modal fade custom-popup" role="dialog" #ATAADD data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h4 *ngIf="isViewMode == false" class="modal-title">Add ATA Information</h4>
        <h4 *ngIf="isViewMode == true" class="modal-title">ATA Information</h4>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Contact Name:
              </label>
              <span class="span-header-red text-capital">
                {{ contactName }}
              </span>
            </p>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-row">
            <div class="modal-body">
              <form *ngIf="isViewMode == false">
                <div class="form-row">
                  <div class="col-md-5">
                    <div class="form-group">
                      <div class="col-md-12">
                        <label class="popup-plusicon-cstm">
                          ATA Chapter
                        </label>
                      </div>
                      <div class="col-md-12">
                        <p-dropdown name="ataPopUp" placeholder="Select ATA Chapter"
                          class="p-dropdown-custom-md p-dropdown-cus-fullwidth"
                           [(ngModel)]="add_SelectedId"
                          (onChange)="getATASubChapterByATAChapter()" 
                          [options]="add_ataChapterList"></p-dropdown>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-5">
                    <div class="form-group">
                      <label class="popup-plusicon-cstm ata-subchapters-label">
                        ATA SubChapters
                      </label>
                      <p-multiSelect
                       [options]="add_ataSubChapterList"
                        [(ngModel)]="add_SelectedModels"
                         [disabled]="!add_SelectedId"
                          name="popUpATASubchapter" 
                          [style]="{ minWidth: '220px' }">
                      </p-multiSelect>
                    </div>
                  </div>

                  <div class="col-md-2">
                    <button type="button"  [disabled]="!add_SelectedId" class="btn btn-primary m-t-20" (click)="addATAMapping()">
                      Save
                    </button>
                  </div>
                </div>
              </form>

              <div class="checkbox-cstm contact-check">
                <label class="contact-show-deleted">
                  <input type="checkbox" [(ngModel)]="currentATADeletedstatus" name="ataDelete" id="ataDelete"  (click)="getATADeleteListByStatus($event.target.checked)"
                    />
                  <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                  Show  Deleted List 
                </label>
              </div>

              <p-table #ata [value]="ataListDataValues" [scrollable]="true" [style]="{ width: '100%' }"
                [paginator]="true" [pageLinks]="3" [columns]="ataHeaders" [rowsPerPageOptions]="[10, 20, 50, 100]"
                [rows]="pageSizeForATA" [resizableColumns]="true" [reorderableColumns]="true"
                (onPage)="pageIndexChangeForInt($event)">
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th *ngFor="let col of ataHeaders">
                      {{ col.header }}
                    </th>
                    <th class="action-width">Action</th>
                  </tr>
                  <tr>
                    <th class="wauto" *ngFor="let col of columns" [ngSwitch]="col.field">
                      <input class="table-header-input-width" pInputText type="text" (input)="
                        ata.filter(
                          $event.target.value,
                          col.field,
                          'contains'
                        )" />
                    </th>
                    <th></th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
                  <tr>
                    <td class="uiTable_td_ovrflw_control" *ngFor="let col of ataHeaders">
                     <p style="text-transform: capitalize;margin: 0px;"> {{ rowData[col.field] }}</p>
                    </td>
                    <td class="action-width">
                      <div *ngIf="currentATADeletedstatus == false">
                            <span *ngIf="isViewMode == false"   data-toggle="modal" data-target="#editATAChapter"><a class="btn nobg"
                              (click)="editContactATAChapters(rowData)" matTooltip="Edit" matTooltipPosition="above"><i
                                class="fa fa-pencil"></i></a>
                          </span>

                          <button *ngIf="isViewMode == false" class="btn btn-danger nobg" (click)="deleteATAMapped(deleteContent1, rowData)"
                            matTooltip="Delete" matTooltipPosition="above">
                            <i class="fa fa-trash"></i>
                          </button>
                          <span data-toggle="modal" data-target="#contentATAChapterHist"><a class="btn nobg"
                              (click)="getATAAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above"><i
                                class="fa fa-history"></i></a></span>
                      </div>
                      <div *ngIf="currentATADeletedstatus == true">
                          <span data-toggle="modal" data-target="#contentATAChapterHist"><a class="btn nobg"
                              (click)="getATAAuditHistoryById(rowData)" matTooltip="History" matTooltipPosition="above"><i
                                class="fa fa-history"></i></a></span>
                          <span *ngIf="isViewMode == false" ><a class="btn nobg btn-users-cstm" (click)="restoreATA(restoreATAId,rowData);" matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>
                    </div>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns *ngIf="ataListDataValues?.length == 0">
                  <tr>
                    <td [attr.colspan]="8" class="no-records-msg no-records-cstm">
                      No records found
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="summary" id="footer">
                  <label id="footer" class="footer">Total:</label>
                  <input class="footer-input-width" [(ngModel)]="ata._totalRecords" pInputText name="noofrecordsata" type="text"
                    disabled />
                  &nbsp;&nbsp;
                  <label id="footer" class="footer1">Pages Count:</label>

                  <input class="footer-input-width" name="pagecountata"
                    [ngModel]="getPageCount(ata._totalRecords, pageSizeForATA)" pInputText type="text" disabled />
                </ng-template>
              </p-table>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="resetfileds()">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<ng-template #deleteContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title">Are You Sure Want to Delete?</h4>
    <div class="col-md-12 shadow-box-cstm">
      <div class="col-md-6">
        <p class="fs12">
          <label class="control-label labels-font-header wauto">Customer Name:
          </label>
          <span class="span-header-red text-capital">
            {{ customerName }}
          </span>
        </p>
      </div>
      <div class="col-md-6">
        <p class="fs12">
          <label class="control-label labels-font-header wauto">Customer Code:
          </label>
          <span class="span-header-red text-capital">
            {{ customerCode }}
          </span>
        </p>
      </div>
    </div>    
  </div>
  <div class="modal-body">
    <strong>
      Contact Name:
      <span class="new-label text-capital">{{ selectedRowforDelete.firstName }} - {{ selectedRowforDelete.lastName }}</span>
    </strong>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-success" (click)="deleteItemAndCloseModel()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>
<ng-template #deleteContent1 let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are You Sure Want to Delete?</h4>
    <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>
      AtaChapter Name:
      <span class="new-label">{{ selectedAtappedRowforDelete.ataChapterCode }} -
        {{ selectedAtappedRowforDelete.ataChapterName }}</span>
    </strong>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-success" (click)="deleteItemAndCloseModel1()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>
<div id="editATAChapter" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Edit Contact ATA Chapters</h4>
      </div>
      <div class="modal-body" *ngIf="ataChapterEditData">
        <div class="card">
          <div class="form-row">
            <div class="col-md-4">
              <div class="form-group">
                <label class="fs12">
                  ATA Chapter
                </label>
                <select name="taxRates" [(ngModel)]="ataChapterEditData.ataChapterId" (change)="
                    getATASubChapterByATAChapterID(
                      ataChapterEditData.ataChapterId
                    )
                  ">
                  <option value="">select</option>
                  <option *ngFor="let atalist of search_ataChapterList" [ngValue]="atalist.value">{{ atalist.label }}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label label class="popup-plusicon-cstm ata-subchapters-label">
                  ATA Sub Chapters
                </label>
                <select name="taxRatess" [(ngModel)]="ataChapterEditData.ataSubChapterId">
                  <option value="">select</option>
                  <option *ngFor="let atasublist of search_ataSubChapterList" [ngValue]="atasublist.value">
                    {{ atasublist.label }}</option>
                </select>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <button class="btn btn-primary m-t-20" (click)="updateATAChapters()" data-dismiss="modal">
                  Update
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<div id="contentATAChapterHist" #contentATAChapterHist class="modal fade" role="dialog" data-backdrop="static"
  data-keyboard="false">
  <div class="modal-dialog modal-xl">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-4">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
        </div>
        <h4 class="modal-title">History of ATA Chapter</h4>
      </div>
      <div class="modal-body" *ngIf="auditHistory1">
        <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
					<div class="tableFixHead">  
					<table class="table table-bordered header-table-width" *ngIf="auditHistory1.length > 0; else noDatavailable">
            <thead>
              <tr>
                <th>Contact</th>
                <th>ATA Chapter Code</th>
                <th>ATA Chapter Name</th>
                <th>ATA Sub Chapter</th>
                <th>ATA Sub Code</th>  
                <th>Created Date</th> 
                <th>Created By</th>
                <th>Updated Date</th>                 
                <th>Updated By</th>                            
                <th>Is Deleted</th>
              </tr>
            </thead>
            <tbody *ngIf="auditHistory1.length > 0">
              <tr *ngFor="let audit of auditHistory1; let i = index">
                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'firstName',
                      audit.firstName
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.firstName }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'ataChapterCode',
                      audit.ataChapterCode
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.ataChapterCode }}
                </td>

                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'ataChapterName',
                      audit.ataChapterName
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.ataChapterName }}
                </td>
                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'ataSubChapterDescription',
                      audit.ataSubChapterDescription
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.ataSubChapterDescription }}
                </td>
                <td>{{audit.ataSubChapterCode}}</td>      
                <td>{{ audit.createdDate | date: 'MM/dd/yyyy h:mm a ' }}</td>
                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'createdBy',
                      audit.createdBy
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.createdBy }}
                </td>
                <td>{{ audit.updatedDate | date: 'MM/dd/yyyy h:mm a ' }}</td>         
                <td [ngStyle]="{
                    color: getColorCodeForHistoryATA(
                      i,
                      'updatedBy',
                      audit.updatedBy
                    )
                      ? 'black'
                      : 'red'
                  }">
                  {{ audit.updatedBy }}
                </td>
                <td class="text-center">
                  <span class="value">
                    <label class="wauto">
                        <input type="checkbox" name="isDeleted" [(ngModel)]="audit.isDeleted" disabled>
                    </label>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          </div>
          <ng-template #noDatavailable>
            <div class="text-center">
              <h4 class="no-history-found-msg">No History Found</h4>
            </div>
          </ng-template>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<div id="deleteoops" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Alert !</h4>
        <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Name:
              </label>
              <span class="span-header-red text-capital">
                {{ customerName }}
              </span>
            </p>
          </div>
          <div class="col-md-6">
            <p class="fs12">
              <label class="control-label labels-font-header wauto">Customer Code:
              </label>
              <span class="span-header-red text-capital">
                {{ customerCode }}
              </span>
            </p>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <p>
          Primary Record Cannot be Deleted
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">
    
    <div class="modal-header">
        <h4 class="modal-title">Are You Sure Want to Restore ?</h4>

        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="col-md-12 shadow-box-cstm">
            <div class="col-md-6">
                <p class="fs12">
                    <label class="control-label labels-font-header wauto">
                        Customer Name:
                    </label>
                    <span class="span-header-red text-capital">
                        {{ customerName }}
                    </span>
                </p>
            </div>
            <div class="col-md-6">
                <p class="fs12">
                    <label class="control-label labels-font-header wauto">
                        Customer Code:
                    </label>
                    <span class="span-header-red text-capital">
                        {{ customerCode }}
                    </span>
                </p>
            </div>
        </div>
    </div>
  <div class="modal-body">
      <strong>
          Contact Name:
          <span class="new-label text-capital">{{restorerecord.firstName}} - {{restorerecord.lastName}}</span>
      </strong>
  </div>
  <div class="modal-footer">
      <button type="button" class="btn btn-success" (click)="restoreRecord()">Yes</button>
      <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
  </div>
</ng-template>  
<ng-template #restoreATAId let-c="close" let-d="dismiss" data-backdrop="static">
    
  <div class="modal-header">
      <h4 class="modal-title">Are You Sure Want to Restore ?</h4>

      <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
          <span aria-hidden="true">&times;</span>
      </button>
      <div class="col-md-12 shadow-box-cstm">
          <div class="col-md-6">
              <p class="fs12">
                  <label class="control-label labels-font-header wauto">
                      Customer Name:
                  </label>
                  <span class="span-header-red text-capital">
                      {{ customerName }}
                  </span>
              </p>
          </div>
          <div class="col-md-6">
              <p class="fs12">
                  <label class="control-label labels-font-header wauto">
                      Customer Code:
                  </label>
                  <span class="span-header-red text-capital">
                      {{ customerCode }}
                  </span>
              </p>
          </div>
      </div>
  </div>
<div class="modal-body">
    <strong>
      AtaChapter Name:
      <span class="new-label">{{ restoreATArecord.ataChapterCode }} -
        {{ restoreATArecord.ataChapterName }}</span>
    </strong>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-success" (click)="restoreATARecord()">Yes</button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">No</button>
</div>
</ng-template> 
<div class="preloader" *ngIf="isSpinnerVisible">
  <div class="loading">
    <div class="lds-roller">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</div>