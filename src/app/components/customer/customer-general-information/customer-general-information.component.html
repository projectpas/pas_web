
<div class="right_col" role="main" *ngIf="editMode == true" >
  <div class="x_content">
    <div class="col-md-12 shadow-box-cstm" >
      <div class="col-md-4">
        <p class="fs12">
          <label class="control-label labels-font-header wauto">Customer Name:
          </label>
          <span class="span-header-red text-capital">
            {{ customerName }}
          </span>
        </p>
      </div>
      <div class="col-md-4">
        <p class="fs12">
          <label class="control-label labels-font-header wauto">Customer Code:
          </label>
          <span class="span-header-red text-capital">
            {{ customerCode }}
          </span>
        </p>
      </div>
    </div>
  </div>
</div>

<div *ngIf="editMode == true"></div>
<div class="right_col" role="main" >
    <div class="x_content">      
      <div class="card-header header" >
        <div class="row">
          <div class="col">
            <h4 class="header-name"> Customer General Info</h4>
          </div>
        </div>
      </div>
      <div>
        <div class="right_col" role="main">
          <div >
            <div class="x_content">
              <div class="clear"></div>
              <form #generalInfoForm="ngForm" class="form-horizontal" autocomplete="off">
                <div class="col-md-12 col-sm-12 col-12">
                  <div class="tab-content">
                    <div class="tab-pane active" id="home">
                      <div
                        class="form-row"
                        style="margin-left: 13px; margin-top: 10px;"
                      >
                        <div class="col-md-8">
                          <div class="form-group">
                            <div>
                              <div
                                class="pull-left radio-buttons-align"
                              >
                                <label class="radio-cstm wauto">
                                  <input
                                    type="radio"
                                    value="2"
                                    checked="checked"
                                    [disabled]="editMode"
                                    (ngModelChange)="enableSave()"
                                    name="optradio"
                                    [(ngModel)]="
                                      generalInformation.customerAffiliationId
                                    "
                                    (change)="
                                      selectedCustomerType($event.target.value)
                                    "
                                  />
                                  <span class="checkmark"></span> External
                                </label>
                                <label class="radio-cstm wauto">
                                  <input
                                    type="radio"
                                    value="1"
                                    name="optradio2" 
                                    [disabled]="editMode"                                  
                                    (ngModelChange)="enableSave()"
                                    [(ngModel)]="
                                      generalInformation.customerAffiliationId
                                    "
                                    (change)="
                                      selectedCustomerType($event.target.value)
                                    "
                                  />
                                  <span class="checkmark"></span> Internal
                                </label>
    
                                <label class="radio-cstm wauto">
                                  <input
                                    type="radio"
                                    value="3"   
                                    [disabled]="editMode"                                
                                    name="optradio3"
                                    (ngModelChange)="enableSave()"
                                    [(ngModel)]="
                                      generalInformation.customerAffiliationId
                                    "
                                    (change)="
                                      selectedCustomerType($event.target.value)
                                    "
                                  />
                                  <span class="checkmark"></span> Affiliate
                                </label>
                              </div>
                              <div
                                class="pull-left"
                                style="
                                  margin-right: 0px;
                                  margin-left: 27px;
                                  display: flex;
                                "
                              >
                                <div style="padding-top: 4px;">
                                  <label
                                    >Account Type
                                    <span class="clr-red">*</span></label
                                  >
                                </div>
                                <div class="new-create-top-input">
                                  <select
                                    [(ngModel)]="generalInformation.customerTypeId"
                                    (ngModelChange)="enableSave()"
                                    name="customerTypeId"
                                    required
                                    [disabled]="disableAccountType">
                                   <option value="0">-- Select --</option>
                                    <option
                                      *ngFor="let CustomerType of customertypes"
                                      [ngValue]="CustomerType.customerTypeId"
                                      >{{ CustomerType.description }}</option
                                    >
                                  </select>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <hr />
                      <div class="form-row" style="margin-left: 13px;">
                        <div class="col-md-3">
                          <div class="form-group">
                            <!-- (keypress)="patternCustomerNamevalidation($event)" -->
                            <label
                              >Customer Name <span class="clr-red">*</span></label
                            >
                            <div class="inner-addon right-addon inline-block">
                              <p-autoComplete
                                class="autocomp-customer-cstm"
                                name="customerName"
                                [(ngModel)]="generalInformation.name"
                                (onKeyUp)=" checkCustomerNameExist($event.target.value)"
                                (onChange)=" checkCustomerNameExist($event.target.value)"
                                (onSelect)="selectedCustomerName()"
                                [suggestions]="customerNames"
                                [forceSelection]="false"
                                field="name"
                                (completeMethod)="filterCustomerNames($event)"
                                (ngModelChange)="enableSave()"
                                [size]="30"
                                [minLength]="1"
                                [dropdown]="true"                                
                                required value="" autocomplete="new-password"
                              >
                              </p-autoComplete>
                              <div
                                *ngIf="isCustomerNameAlreadyExists"
                                class="clr-red"
                              >
                                Entry Already Exists
                              </div>
                            </div>
                          </div>
                          <div class="form-group">
                            <label >Customer Code </label>
                            <input
                              class="form-control"
                              type="text"
                              name="customerCode"
                              [(ngModel)]="generalInformation.customerCode"
                              (ngModelChange)="enableSave()"
                              [disabled]="true"
                            />
                          </div>
                          <div class="form-group">
                            <label>D/B/A</label>
                            <input
                              class="form-control"
                              type="text"
                              name="doingBuinessAsName"
                              [(ngModel)]="generalInformation.doingBuinessAsName"
                              (ngModelChange)="enableSave()" value="" autocomplete="new-password"
                            />
                          </div>
                          <div class="form-group m-t-15">
                            <!-- <div class="label-cstm">Parent</div> -->
                            <div class="checkbox-cstm" style="margin-left: 0;">
                              <label>
                                <input
                                  type="checkbox"
                                  name="cparent"
                                  id="cparent"
                                  (click)="onClearParent()"
                                  [(ngModel)]="generalInformation.isParent"
                                  (ngModelChange)="enableSave()"
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                Parent
                                <span
                                  class="clr-red"
                                  *ngIf="generalInformation.isParent"
                                  >*</span
                                >
                              </label>
                            </div>
                            <p
                              style="min-height: 10px;"
                              *ngIf="!generalInformation.isParent"
                            ></p>
                            <div
                              class="cparent-input cust-name input-icon1"
                              *ngIf="generalInformation.isParent"
                            >
                              <div class="inner-addon right-addon inline-block">
                                <i class="fa fa-search"></i>
                                <p-autoComplete
                                  class="autocomp-customer-cstm"
                                  name="parentName"
                                  [(ngModel)]="generalInformation.parentId"
                                  field="name"
                                  [suggestions]="parentCustomer"
                                  [forceSelection]="true"
                                  emptyMessage="No Match Found"
                                  (onClear)="onClearParent()"
                                  (completeMethod)="
                                    filterCustomerParentNames($event)
                                  "
                                  [size]="30"
                                  (onSelect)="selectedParentName($event)"
                                  (onKeyUp)="checkWithName($event.target.value)"
                                  (onChange)="checkWithName($event.target.value)"
                                  (ngModelChange)="enableSave()"
                                  [minLength]="1"
                                  [dropdown]="true"
                                  required value="" autocomplete="new-password"
                                >
                                </p-autoComplete>
                                <!--customerParentName-->
                              </div>
                              <div
                                *ngIf="disableSaveParentName"
                               class="clr-red">
                                Parent name can't be same as customer name
                              </div>
                            </div>
                          </div>
                          <div class="form-group">                        
                            <div class="col-md-12 pl-0">
                              <table>
                                <tr>
                                  <td style="width:65%" ><label>Phone <span class="clr-red">*</span></label> </td>
                                  <td style="width:35%"> <label>Ext </label>  </td>
                                </tr>
                                <tr>
                                  <td>                                
                                    <div class="col-md-6 pl-0" style="max-width: 98% !important;" >
                                      <input
                                        type="text"
                                        id="phone"
                                        name="phone"
                                        [pattern]="phonePattern"
                                        #customerPhone="ngModel"
                                        class="form-control"
                                        minlength="6"
                                        maxlength="14"
                                        (keypress)="patternMobilevalidationWithSpl($event)"
                                        [(ngModel)]="generalInformation.customerPhone"
                                        (ngModelChange)="enableSave()"                              
                                        required value="" autocomplete="new-password"
                                      />
                                    </div>
                                  </td>
                                  <td>
                                    <div class="col-md-6" style="max-width: 98% !important;">
                                      <input
                                        type="text"
                                        name="phoneExt"
                                        pInputText
                                        maxlength="15"
                                        [disabled]="
                                          generalInformation.customerPhone == ''
                                        "
                                        [(ngModel)]="generalInformation.customerPhoneExt"
                                        (ngModelChange)="enableSave()" value="" autocomplete="new-password"
                                      />
                                    </div>
                                  </td>
                                </tr>
                              </table>
                              <div *ngIf="customerPhone.errors" [ngClass]="'error'">
                                <div *ngIf="customerPhone.errors.pattern">
                                  <span class="clr-red">Please enter atleast 6 digits</span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="m-t-15"
                              >Email <span class="clr-red">*</span></label
                            >
                            <input
                              class="form-control"
                              id="email"
                              name="email"
                              [pattern]="emailPattern"
                              #userEmail="ngModel"
                              type="email"
                              pKeyFilter="email"
                              mask="email"
                              [(ngModel)]="generalInformation.email"                              
                              required (ngModelChange)="enableSave()"
                            />
                            <div *ngIf="userEmail.errors" [ngClass]="'error'">
                              <div *ngIf="userEmail.errors.pattern">
                                <span class="clr-red"
                                  >User Email not valid</span
                                >
                              </div>
                            </div>
                          </div>
                          <div class="form-group" style="clear: both;">
                            <label>URL to Customer site</label>
                            <input
                              class="form-control"
                              type="text"
                              id="customerURL"
                              #url="ngModel"
                              [pattern]="urlPattern"
                              name="customerURL"
                              [(ngModel)]="generalInformation.customerURL" value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                            />
                            <div *ngIf="url.errors" [ngClass]="'error'">
                              <div *ngIf="url.errors.pattern">
                                <span class="clr-red">URL not valid</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <label
                              >Address Line 1 <span class="clr-red">*</span></label
                            >
                            <input
                              class="form-control"
                              type="text"
                              id="cmaddress1"
                              name="cmaddress1"
                              [(ngModel)]="generalInformation.address1" value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                              required
                            />
                          </div>
                          <div class="form-group">
                            <label>Address Line 2</label>
                            <input
                              class="form-control"
                              type="text"
                              id="cmaddress2"
                              name="cmaddress2"
                              [(ngModel)]="generalInformation.address2" value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                            />
                          </div>
                          <div class="form-group" style="display: none;">
                            <label>Address Line 3</label>
                            <input
                              class="form-control"
                              type="text"
                              id="cmaddress3"
                              name="cmaddress3"
                              [(ngModel)]="generalInformation.address3"  value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                            />
                          </div>
                          <div class="form-group">
                            <label>City <span class="clr-red">*</span></label>
                            <input
                              class="form-control"
                              type="text"
                              id="cscity"
                              name="cscity"
                              [(ngModel)]="generalInformation.city"  value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                              required
                            />
                          </div>
                          <div class="form-group">
                            <label
                              >Primary State/Province
                              <span class="clr-red">*</span></label
                            >
                            <input
                              class="form-control"
                              type="text"
                              name="stateOrProvince"
                              [(ngModel)]="generalInformation.stateOrProvince"
                              (ngModelChange)="enableSave()"  value="" autocomplete="new-password"
                              required
                            />
                          </div>
                          <div class="form-group">
                            <label>Postal Code <span class="clr-red">*</span></label>
                            <input
                              class="form-control"
                              type="text"
                              name="postalCode"                              
                              [(ngModel)]="generalInformation.postalCode"  value="" autocomplete="new-password"
                              (ngModelChange)="enableSave()"
                              required
                            />                         
                          </div>
                           <!-- pKeyFilter="pint" Removed for special character allow from post code -->
                          <div class="form-group">
                            <label>Country <span class="clr-red">*</span></label>
                            <div class="inner-addon right-addon inline-block">
                              <p-autoComplete
                                class="autocomp-customer-cstm"
                                filter="true"
                                [(ngModel)]="generalInformation.countryId"
                                emptyMessage="No Match Found"
                                name="country1"
                                (onKeyUp)="checkCountryNow($event.target.value)"
                                [suggestions]="countrycollection"
                                field="nice_name"
                                (completeMethod)="filterCountries($event)"
                                (ngModelChange)="enableSave()"
                                [size]="30"
                                [minLength]="1"
                                [dropdown]="true"
                                [forceSelection]="true"  value="" autocomplete="new-password"
                                required
                              >
                              </p-autoComplete>
                            </div>
                          </div>
                          <div class="form-group m-t-15">
                            <div class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  name="isAddressForBilling"
                                  (ngModelChange)="enableSave()"
                                  [(ngModel)]="
                                    generalInformation.isAddressForBilling 
                                  "
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                Is this Address For Billing
                              </label>
                            </div>
                          </div>
                          <div class="form-group m-t-15">
                            <div class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  (ngModelChange)="enableSave()"
                                  name="isAddressForShipping"
                                  [(ngModel)]="
                                    generalInformation.isAddressForShipping
                                  "
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                Is this Address For Shipping
                              </label>
                            </div>
                          </div>
                          <div class="form-group m-t-15">
                            <div class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  [disabled]="editMode"     
                                  name="isCustomerAlsoVendor"
                                  (ngModelChange)="enableSave()"
                                  [(ngModel)]=" generalInformation.isCustomerAlsoVendor"/>
                                <!-- [disabled]=" generalInformation.isCustomerAlsoVendor && isEdit" -->
                                <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                Is this Customer also a Vendor
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <label>
                              <span class="pull-left">Customer Classification</span>
                              <span class="clr-red">*</span>
                            </label>
                            <p-multiSelect
                              [options]="allcustomerclassificationInfo"
                              (ngModelChange)="enableSave()"
                              [(ngModel)]="generalInformation.customerClassificationIds"
                              name="customerClassificationId"
                              class="classification"
                              defaultLabel="-- Select --"
                              required="true"
                            >
                            </p-multiSelect>
                          </div>
                          <div class="form-group">
                            <label>Contract Ref</label>
                            <div class="contract-ref-input">
                              <input
                                class="form-control"
                                type="text"
                                name="contactRef"
                                [(ngModel)]="generalInformation.contractReference"
                                (ngModelChange)="enableSave()" autocomplete="off"
                              />
                            </div>
                          </div>
                          <div class="form-group">
                            <label>
                              <span class="pull-left">Integration With</span>
                            </label>
                            <p-multiSelect
                              [options]="integrationOriginalList"
                              name="integrations"
                              [(ngModel)]="generalInformation.integrationPortalId"
                              (ngModelChange)="enableSave()"
                              defaultLabel="-- Select --"
                            >
                            </p-multiSelect>
                          </div>
                          <div
                            class="form-group"
                            style="margin-top: 15px; clear: both;"
                          >
                            <span class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  name="isPBHCustomer"
                                  [(ngModel)]="generalInformation.isPBHCustomer"
                                  (ngModelChange)="enableSave()"
                                  (change)="restrictPBHClick($event)"
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                PBH Customer
                              </label>
                            </span>
    
                            <div 
                              class="rpma-input memo-popup-cstm col-sm-12 m-t-15"
                              *ngIf="generalInformation.isPBHCustomer"
                            >
                              <div class="col-sm-11">
                                <span>
                                  <div class="form-group memo-popup-cstm mat_emo">
                                    <div
                                      [innerHTML]="
                                        generalInformation.pbhCustomerMemo.trim()
                                      "
                                      (ngModelChange)="enableSave()"
                                      [matTooltip]="parsedText(generalInformation.pbhCustomerMemo)"
                                      matTooltipPosition="above"
                                      class="form-control"
                                      style="width: 100%;"
                                      class="text_editor_box"
                                    ></div>
                                  </div>
                                </span>
                              </div>
                              <div class="col-sm-1">
                                <span style="margin-left:-10px"
                                ><a
                                  class="btn nobg"
                                  data-toggle="modal"
                                  (ngModelChange)="enableSave()"
                                  data-target="#memo-popup"
                                  (click)="onClickPBHCustomer('PBHCustomer')"
                                  matTooltip="Add Memo"
                                  matTooltipPosition="above"
                                  ><i class="fa fa-pencil"></i
                                ></a>
                              </span>
                              </div>
                            </div>
                          </div>
                          
                          
                        </div>
                        <div class="col-md-3">
                          <div
                            class="form-group"
                            style="
                              margin-top: 20px;
                              clear: both;
                              margin-bottom: 30px;
                            "
                          >
                            <span class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  id="rpma"
                                  name="rpma"
                                  [(ngModel)]="generalInformation.restrictPMA"
                                  (ngModelChange)="enableSave()"
                                  (change)="restrictPMAClick($event)"
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                Restrict PMA
                              </label>
                            </span>
    
                            <div
                              class="table-small"
                              *ngIf="generalInformation.restrictPMA"
                            >
                              <div style="margin-top: 13px;">
                                <span style="margin-left: 5px;">Except for</span>
                              </div>
                              <div class="col-sm-12" style="margin-bottom: 5px !important;">
                                <div class="col-sm-10">
                                  <div class="inner-addon right-addon inline-block" style="width: 200 px !important">
                                    <p-autoComplete class="autocomp-customer-cstm" 
                                      [forceSelection]="true"
                                      name="partNumber" 
                                      field="partNumber" 
                                      [(ngModel)]="restictPMAtempList"
                                      emptyMessage="No Match Found"
                                      [suggestions]="partListForPMA"
                                      (ngModelChange)="enableSave()"
                                      (completeMethod)="filterpartListForPMA($event)" 
                                      (onSelect)="selectedPMAParts($event)"
                                      [size]="30" [minLength]="1" [dropdown]="true"
                                      [inputStyle]="{ width: '100%' }" autocomplete="off">
                                    </p-autoComplete>
                                  </div>
                                </div>
                                <div class="col-sm-2">
                                  <button style="margin-top: 1px;"
                                    class="btn btn-primary"
                                    [disabled]="!disableAddPMA"
                                    (click)="addRestrictPMA()"
                                  >
                                    Add
                                  </button>
                                </div>
                              </div>
                              <div *ngIf="disableRestrictedPMA">
                                <div style="text-align: right !important; padding-right: 10px;">
                                  <div class="checkbox-cstm margin-left-0">
                                    <label class="general-show-deleted-label">
                                      <input type="checkbox" [(ngModel)]="currantDeletedStatusPMA" name="currantDeletedStatusPMA" id="currantDeletedStatusPMA"  (click)="getPMAPartListByStatus($event.target.checked)"/>
                                      <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                      <b style="top: 0 !important;"> Show Deleted List  </b> 
                                    </label>
                                  </div>
                                </div>
                                <p-table
                                  class="table-responsive ptable-cus-pma"
                                  [value]="generalInformation.restrictedPMAParts"
                                  [paginator]="true"
                                  [rows]="3"
                                  [columns]="restrictHeaders"
                                >
                                  <ng-template pTemplate="header" let-columns>
                                    <tr>
                                      <th
                                        *ngFor="let col of columns"
                                        matTooltipPosition="above"
                                        matTooltip="{{ col.header }}"
                                      >
                                        {{ col.header }}
                                      </th>
                                      <th>Actions</th>
                                    </tr>
                                  </ng-template>
                                  <ng-template
                                    pTemplate="body"
                                    let-part
                                    let-rowData
                                    let-columns="columns"
                                    let-i="rowIndex"
                                  >
                                    <tr>
                                      <td
                                        *ngFor="let col of columns"
                                        matTooltipPosition="above"
                                        matTooltip="{{ part[col.field] }}"
                                      >
                                        {{ part[col.field] }}
                                      </td>
                                      <td class="text-center">
    
                                        <span *ngIf="!currantDeletedStatusPMA"><a class="btn nobg"
                                          (click)="openPopupForDeleteRestrictPMA( i, rowData, deleteRestrictPMAContent);" matTooltip="Delete"
                                          matTooltipPosition="above"><i class="fa fa-trash"></i></a>
                                        </span><span *ngIf="currantDeletedStatusPMA" ><a class="btn nobg" (click)="openPopupForRestoreRestrictPMA(i, rowData, restoreRestrictPMAContent);" matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>
    
                                      </td>
                                    </tr>
                                  </ng-template>
                                  <ng-template pTemplate="emptymessage" let-columns >
                                    <tr>
                                      <td colspan="4" class="no-records-cstm no-records-msg">
                                        No records found
                                      </td>
                                    </tr>
                                  </ng-template>
                                </p-table>
                              </div>
                            </div>
                          </div>
    
                          <div
                            class="form-group"
                            style="margin-top: 40px; clear: both;"
                          >
                            <span class="checkbox-cstm margin-left-0">
                              <label>
                                <input
                                  type="checkbox"
                                  id="rber"
                                  name="rber"
                                  [(ngModel)]="generalInformation.restrictDER"
                                  (ngModelChange)="enableSave()"
                                  (change)="restrictDERClick($event)"
                                />
                                <span class="cr"
                                  ><i class="cr-icon pi pi-check"></i
                                ></span>
                                Restrict DER
                              </label>
                            </span>
    
                            <div
                              class="table-small"
                              *ngIf="generalInformation.restrictDER"
                            >
                              <div style="margin-top: 13px;">
                                <span style="margin-left: 5px;">Except for</span>
                              </div>
                              <div class="col-sm-12" style="margin-bottom: 5px !important;">
                                <div class="col-sm-10">
                                  <div class="inner-addon right-addon inline-block" style="width: 200 px !important">
                                    <p-autoComplete class="autocomp-customer-cstm" 
                                      [forceSelection]="true"
                                      name="partNumber" 
                                      field="partNumber" 
                                      [(ngModel)]="restictDERtempList"
                                      (ngModelChange)="enableSave()"
                                      emptyMessage="No Match Found"
                                      [suggestions]="partListForDER" 
                                      [(ngModel)]="selectedDERItem"
                                      (completeMethod)="filterpartListForDER($event)" 
                                      (onSelect)="selectedDERParts($event)"
                                      [size]="30" [minLength]="1" 
                                      [dropdown]="true"
                                      [inputStyle]="{ width: '100%' }" >
                                    </p-autoComplete>
                                  </div>
                                </div>
                                <div class="col-sm-2">
                                  <button style="margin-top: 1px;"
                                    class="btn btn-primary"
                                    [disabled]="!disableAddDER"
                                    (click)="addRestrictDER()">
                                    Add
                                  </button>
                                </div>
                              </div>
                              <div *ngIf="disableRestrictedDER">
                                <div style="text-align: right !important; padding-right: 10px;">
                                  <div class="checkbox-cstm margin-left-0">
                                    <label class="general-show-deleted-label">
                                      <input type="checkbox" [(ngModel)]="currantDeletedStatusDER" name="currantDeletedStatusDER" id="currantDeletedStatusDER"  (click)="getDERPartListByStatus($event.target.checked)"/>
                                      <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                      <b style="top: 0 !important;"> Show Deleted List  </b> 
                                    </label>
                                  </div>
                                </div>
                                <p-table
                                  class="table-responsive ptable-cus-pma overlap"
                                  [value]="generalInformation.restrictedDERParts"
                                  [paginator]="true"
                                  [rows]="3"
                                  [columns]="restrictHeaders"
                                >
                                  <ng-template pTemplate="header" let-columns let-rowIndex="rowIndex">
                                    <tr>
                                      <th
                                        *ngFor="let col of columns"
                                        matTooltipPosition="above"
                                        matTooltip="{{ col.header }}"
                                      >
                                        {{ col.header }}
                                      </th>
                                      <th>Actions</th>
                                    </tr>
                                  </ng-template>
                                  <ng-template
                                    pTemplate="body"
                                    let-part
                                    let-rowData
                                    let-columns="columns"
                                    let-rowIndex="rowIndex"
                                  >
                                    <tr>
                                      <td
                                        *ngFor="let col of columns"
                                        matTooltipPosition="above"
                                        matTooltip="{{ part[col.field] }}"
                                      >
                                        {{ part[col.field] }}
                                      </td>
                                      <td class="text-center">
                                        <span *ngIf="!currantDeletedStatusDER" ><a class="btn nobg"
                                          (click)="openPopupForDeleteRestrictDER(rowIndex, rowData, deleteRestrictDERContent);" matTooltip="Delete"
                                          matTooltipPosition="above"><i class="fa fa-trash"></i></a>
                                        </span>
                                        <span *ngIf="currantDeletedStatusDER" ><a class="btn nobg" (click)="openPopupForRestoreRestrictDER(rowIndex, rowData, restoreRestrictDERContent);" matTooltip="Restore Record"  matTooltipPosition="above"><i class="fa fa-undo" aria-hidden="true"></i></a> </span>
                                      </td>
                                    </tr>
                                  </ng-template>
                                  <ng-template pTemplate="emptymessage" let-columns >
                                    <tr>
                                      <td colspan="4" class="no-records-msg no-records-cstm">
                                        No records found
                                      </td>
                                    </tr>
                                  </ng-template>
                                </p-table>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-row pull-right mr-10">
                        <button
                          type="submit"
                          class="btn btn-primary submit-btn new-footer-btn"
                          [disabled]=" 
                           !generalInfoForm.valid   ||                        
                            isCustomerNameAlreadyExists ||
                            disableSaveCustomerName ||
                            isCustomerCodeAlreadyExists ||
                            disableSaveParentName ||
                            stopmulticlicks ||
                            countryExistsNow ||
                            disableSaveForEdit" (click)="saveConformation()"
                        >                        
                        {{editMode ? 'Update' : 'Save' }}
                        </button>
                        <button
                          type="button"
                          [disabled]="!allowNextView"
                          class="btn btn-primary submit-btn new-footer-btn"
                          (click)="nextClick('Next')"
                        >
                          Next
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="modal fade success-msg" id="success-popup" role="dialog">
          <div class="modal-dialog modal-sm popup-timeout">
            <div class="modal-content">
              <div class="modal-header">
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">×</span>
                </button>
                <h4><i class="fa fa-check"></i>&nbsp; You Added Successfully !</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<ng-template
  #contentEdits
  let-c="close"
  let-d="dismiss"
 class="wauto"
  data-backdrop="static"
>
  <div class="modal-header">
    <h4 class="modal-title" *ngIf="editMode">Edit Integration</h4>
    <h4 class="modal-title" *ngIf="!editMode">Add Integration</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="dismissModel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form
      #userForm="ngForm"
      class="form-horizontal"
      (ngSubmit)="editItemIntegrationalCloseModel()"
    >
      <div class="form-group">
        <label for="url" class="control-label">WebSite url</label>
        <div>
          <p-autoComplete
            [(ngModel)]="integrationName"
            [ngModelOptions]="{ standalone: true }"
            [suggestions]="integrationCollection"
            (completeMethod)="filterIntegrations($event)"
            [size]="30"
            [minLength]="1"
            [dropdown]="true"
          >
            <ng-template let-integrationName pTemplate="item">
              <div class="ui-helper-clearfix">{{ integrationName }}</div>
            </ng-template>
          </p-autoComplete>
        </div>
        <div class="clear"></div>
      </div>
      <div class="form-group">
        <label for="netDays" class="control-label">Integration</label>
        <div>
          <input
            type="text"
            name="description"
            class="form-control"
            required
            #description="ngModel"
            [(ngModel)]="sourceAction.description"
            minlength="2"
          />
          <div
            *ngIf="
              description.dirty &&
              description.errors?.required &&
              description.errors
            "
            class="invalid-form-error-message"
          >
            Integration required.
          </div>
          <div
            *ngIf="
              description.dirty &&
              description.errors?.minlength &&
              description.errors
            "
            class="invalid-form-error-message"
          >
            Integration must be at least 2 characters long.
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="form-group">
        <label for="description" class="control-label">Memo</label>
        <div class="control-data">
          <input
            #memo="ngModel"
            id="memo"
            [ngModelOptions]="{ standalone: true }"
            [(ngModel)]="sourceAction.memo"
            minlength="2"
          />
          <div
            *ngIf="memo.dirty && memo.errors?.required && memo.errors"
            class="invalid-form-error-message"
          >
            Memo required.
          </div>
          <div
            *ngIf="memo.dirty && memo.errors?.minlength && memo.errors"
            class="invalid-form-error-message"
          >
            Memo must be at least 2 characters long.
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <label class="form-check-label" for="isActive">
            <input
              type="checkbox"
              name="isActive"
              #isActive="ngModel"
              class="form-check-input"
              checked
              id="isActive"
              [(ngModel)]="sourceAction.isActive"
            />
            Active
          </label>
        </div>
        <div class="clear"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary">Submit</button>
        <button type="button" class="btn btn-danger" (click)="dismissModel()">
          Close
        </button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template
  #contentModel
  let-c="close"
  let-d="dismiss"
 class="wauto"
  data-backdrop="static"
>
  <div class="modal-content">
    <div class="modal-header">
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="dismissAircraftModel()"
      >
        ×
      </button>
      <h4 class="modal-title">Models</h4>
    </div>
    <div class="modal-body">
      <form method="post" id="" name="">
        <div class="table-responsive default-bg clear">
          <table class="table table-bordered table-striped table-sorting">
            <thead>
              <tr align="center">
                <th>Aircraft Type</th>
                <th>Model</th>
                <th>Select Model</th>
                <th>Dash Number</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let col of allAircraftinfo; let i = index">
                <td>{{ col.description }}</td>
                <td>{{ col.modelName }}</td>

                <td>
                  <input
                    type="checkbox"
                    class="wauto"
                    [(ngModel)]="col.checkbox"
                    [ngModelOptions]="{ standalone: true }"
                    (click)="saveSelectedModel(col, i)"
                  />
                </td>
                <td>
                  <input
                    class="form-control w100"
                    [(ngModel)]="col.priority"
                    [ngModelOptions]="{ standalone: true }"
                    (change)="getSelectedItem(col, $event)"
                  />
                </td>
              </tr>
            </tbody>
          </table>
          <div>
            <button
              class="btn btn-success pull-right submit-btn"
              (click)="dismissAircraftModel()"
            >
              Save
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<div
  id="addCustomerClassification"
  class="modal fade"
  role="dialog"
  data-backdrop="static"
>
  <div class="modal-dialog">
    <form #addCustomerClassification="ngForm">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
          <h4 class="modal-title">Add Customer Classification</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="classificationName" class="control-label">
              Name <span class="clr-red">*</span>
            </label>
            <div class="col-sm-6">
              <div class="inner-addon right-addon inline-block">
                <p-autoComplete
                  field="label"
                  class="pautocomp-cstm"
                  name="classificationName"
                  [(ngModel)]="addNewclassification.description"
                  (onSelect)="selectedClassification($event)"
                  (onKeyUp)="
                    checkClassificationExists('label', $event.target.value)
                  "
                  [suggestions]="classificationList"
                  (completeMethod)="filterclassifications($event)"
                  [size]="30"
                  [minLength]="1"
                  [dropdown]="true"
                  required
                >
                </p-autoComplete>
                <div *ngIf="isClassificationAlreadyExists" class="clr-red">
                  Already Exists
                </div>
                <div class="clear"></div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-6">
              <span class="checkbox-cstm">
                <label
                  style="margin-top: 12px;"
                  class="form-check-label"
                  for="isActive"
                >
                  <input
                    type="checkbox"
                    name="isActive"
                    #isActive="ngModel"
                    class="form-check-input"
                    checked
                    id="isActive"
                    [(ngModel)]="addNewclassification.isActive"
                  />
                  <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                  Active
                </label>
              </span>
            </div>
            <div class="clear"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            data-dismiss="modal"
            (click)="addClassification()"
            [disabled]="
              isClassificationAlreadyExists || addCustomerClassification.invalid
            "
          >
            Save
          </button>
          <button
            type="button"
            class="btn btn-danger"
            data-dismiss="modal"
            (click)="resetClassificationPopUp()"
          >
            Close
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<div
  id="addIntergation"
  class="modal fade"
  role="dialog"
  data-backdrop="static"
>
  <form #addIntergation="ngForm">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            (click)="resetIntegrationPopUp()"
          >
            &times;
          </button>
          <h4 class="modal-title">Add Intergation</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Intergation <span class="clr-red">*</span></label>
            <div class="inner-addon right-addon inline-block">
              <p-autoComplete
                class="p-dropdown-custom-2 p-dropdown-custom-gen autocomp-customer-cstm"
                name="url"
                [(ngModel)]="addNewIntergation.portalURL"
                (onKeyUp)="checkIntergationExists('field', $event.target.value)"
                (onSelect)="selectedWebSite()"
                [suggestions]="integrationList"
                field="label"
                (completeMethod)="filterIntegrations($event)"
                [size]="30"
                [minLength]="1"
                [dropdown]="true"
                required
              >
              </p-autoComplete>
              <div *ngIf="isIntegrationAlreadyExists" class="clr-red">
                Entry Already Exists
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>WebSite url </label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="addNewIntergation.description"
              name="description"
            />
          </div>

          <div class="form-group">
            <label>Memo</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="addNewIntergation.memo"
              name="memo"
            />
          </div>

          <div class="form-group">
            <div class="col-sm-6">
              <span class="checkbox-cstm">
                <label style="margin-top: 12px;" class="form-check-label">
                  <input
                    type="checkbox"
                    name="isActive"
                    #isActive="ngModel"
                    class="form-check-input"
                    id="isActive"
                    [(ngModel)]="addNewIntergation.isActive"
                  />
                  <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                  Active
                </label>
              </span>
            </div>
            <div class="clear"></div>
          </div>
        </div>

        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            data-dismiss="modal"
            (click)="newIntegrationAdd()"
            [disabled]="!addIntergation.valid || isIntegrationAlreadyExists"
          >
            Save
          </button>
          <button
            type="button"
            class="btn btn-danger"
            data-dismiss="modal"
            (click)="resetIntegrationPopUp()"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="modal fade" id="memo-popup" role="dialog" data-backdrop="static">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Edit Memo</h4>
      </div>
      <div class="modal-body">
        <!-- <table class="table table-bordered table-fixed workflow-table-material">
          <thead>
            <th style="color: #fff;">Memo</th>
          </thead>
          <tbody>
            <tr>
              <td style="white-space: inherit">
                <p-editor
                 spellcheck="true"
                 (ngModelChange)="enableSaveMemo()"
                  [(ngModel)]="memoPopupContent"
                  [style]="{ height: '320px' }"
                  name="memoPopupContent"
                  required
                ></p-editor>
              </td>
            </tr>
          </tbody>
        </table> -->
        <p-editor
        spellcheck="true"
        (ngModelChange)="enableSaveMemo()"
         [(ngModel)]="memoPopupContent"
         [style]="{ height: '320px' }"
         name="memoPopupContent"
         required
       ></p-editor>
        <div class="editor-buttons">
          <button
            type="button"
            class="btn btn-primary editor-buttons-margin"
            data-dismiss="modal"
            (click)="onClickPopupSave()"
            [disabled]="disableSaveMemo"
          >
            Save
          </button>
          <button
            type="button"
            class="btn btn-danger editor-buttons-margin"
            data-dismiss="modal"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #deleteRestrictPMAContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are You Sure Want to Delete?</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="dismissModel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>
      Part Number:
      <span class="new-label">{{
        selectedRowForDeleteRestrictPMA.partNumber
      }}</span>
    </strong>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="deleteRestirctPMA()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>
<ng-template #deleteRestrictDERContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are You Sure Want to Delete?</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="dismissModel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>
      Part Number:
      <span class="new-label">{{
        selectedRowForDeleteRestrictDER.partNumber
      }}</span>
    </strong>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="deleteRestirctDER()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>
<ng-template #restoreRestrictDERContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are You Sure Want to Restore?</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="dismissModel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>
      Part Number:
      <span class="new-label">{{
        selectedRowForRestoreRestrictDER.partNumber
      }}</span>
    </strong>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="restoreRestirctDER()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>

<ng-template #restoreRestrictPMAContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are You Sure Want to Restore?</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="dismissModel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>
      Part Number:
      <span class="new-label">{{
        selectedRowForRestoreRestrictPMA.partNumber
      }}</span>
    </strong>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="restoreRestirctPMA()">
      Yes
    </button>
    <button type="button" class="btn btn-danger" (click)="dismissModel()">
      No
    </button>
  </div>
</ng-template>

<div id="isAlsoaVendor" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">Confirmation</h4>
      </div>
      <div class="modal-body">
        <p>Are you Sure want to Save Customer also Vendor</p>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-primary"
          (click)="isCustomerAlsoaVendor('Yes')"
          data-dismiss="modal"
        >
          Yes
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="isCustomerAlsoaVendor('No')"
          data-dismiss="modal"
        >
          No
        </button>
      </div>
    </div>
  </div>
</div>

<ng-template #tabRedirectConfirmationModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <button
      type="button"
      class="close"
      data-dismiss="modal"
      (click)="redirectToTabWithoutSave()"
    >
      &times;
    </button>
    <h4 class="modal-title">Confirmation</h4>
  </div>
  <div class="modal-body">
    <h6  style="padding-left: 2%;">
      Do you want to Save changes and Continue ?
    </h6>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-danger"
      data-dismiss="modal"
      (click)="redirectToTabWithoutSave()"
    >
      No
    </button>
    <button
      type="button"
      class="btn btn-primary"
      [disabled]="!generalInfoForm.valid"
      data-dismiss="modal"
      (click)="redirectToTab()"
    >
      Yes
    </button>
  </div>
</ng-template>

<div class="preloader" *ngIf="isSpinnerVisible">
  <div class="loading">
    <div class="lds-roller">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</div>
