<div class="card new-card">
    <div class="card-header header">
        <div class="row">
            <div class="col">
                <h4 class="header-name">{{isEditMode ? 'Edit' : 'Create'}} Publication
                </h4>

            </div>

            <div>
                <button type="button" class="btn-sm header-button pull-right" *ngIf="isView"
                    [routerLink]="['/singlepages/singlepages/app-publication']">
                    Publication List
                </button>
            </div>
        </div>
    </div>
    <div class="card-body new-card-body">
        <div>
            <div class="md-stepper-horizontal orange new-stepper-align">
                <div class="md-step " [ngClass]="{ active: activeMenuItem >= 1 ,  editable : activeMenuItem === 1 }"
                    (click)="changeOfTab('General')">
                    <div class="md-step-circle"><span>1</span></div>
                    <div class="md-step-title">General Info</div>
                    <div class="md-step-bar-left"></div>
                    <div class="md-step-bar-right"></div>
                </div>
                <div  *ngIf="isShowTab('PN Mapping')" class="md-step" [ngClass]="{ active: activeMenuItem >= 2 ,  editable : activeMenuItem === 2 }"
                    id="step2" [class.isDisabled]="!isDisabledSteps" (click)="changeOfTab('PnMap')">
                    <div class="md-step-circle"><span>2</span></div>
                    <div class="md-step-title">PN Mapping</div>

                    <div class="md-step-bar-left"></div>
                    <div class="md-step-bar-right"></div>
                </div>
                <div  *ngIf="isShowTab('View Aircraft Information')" class="md-step" [ngClass]="{ active: activeMenuItem >= 3 ,   editable : activeMenuItem === 3 }"
                    (click)="changeOfTab('Aircraft')" [class.isDisabled]="!isDisabledSteps">
                    <div class="md-step-circle"><span>3</span></div>
                    <div class="md-step-title">View Aircraft Info</div>

                    <div class="md-step-bar-left"></div>
                    <div class="md-step-bar-right"></div>
                </div>
                <div  *ngIf="isShowTab('View ATA Chapter')" class="md-step " [ngClass]="{ active: activeMenuItem >= 4 ,  editable : activeMenuItem === 4 }"
                    (click)="changeOfTab('Atachapter')" [class.isDisabled]="!isDisabledSteps">
                    <div class="md-step-circle"><span>4</span></div>
                    <div class="md-step-title">View ATA Chapter</div>

                    <div class="md-step-bar-left"></div>
                    <div class="md-step-bar-right"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12 shadow-box-cstm" *ngIf="currentTab !== 'General'"
        style="padding: 5px 15px; margin-top: 10px;">

        <div class="col-md-4">
            <p class="fs12">
                <label class="control-label labels-font-header wauto">Publication ID: </label>
                <span class="span-header-red"> {{this.sourcePublication.publicationId }} </span>
            </p>
        </div>
        <div class="col-md-4">
            <p class="fs12">
                <label class="control-label labels-font-header wauto">Publication Type :</label>
                <span class="span-header-red"> {{publicationType}} </span>
            </p>
        </div>
        <div class="col-md-4">
            <p class="fs12">
                <label class="control-label labels-font-header wauto">Location :</label>
                <span class="span-header-red"> {{sourcePublication.location}} </span>
            </p>
        </div>
    </div>
    <div class="card" style="padding: 10px; margin-top: 10px;">
        <div [ngClass]="{hideTab : currentTab !== 'General'}">
            <div class="card-body_old">
                <form #generalInfoForm="ngForm">
                    <div class="form-row col-row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="workflowid">Entry Date</label>
                                <p-calendar [showIcon]="true" [disabled]="true" name="gEntryDate" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100"
                                    [(ngModel)]="sourcePublication.entryDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label for="publicationid">Publication ID <span class="clr-red">*</span></label>
                                <input class="form-control" #pubID="ngModel" type="text" autocomplete="off"
                                    [maxLength]="35" (change)="onChangeInput()" name="gPublicationid"
                                    [(ngModel)]="sourcePublication.publicationId" required />
                            </div>

                            <div class="form-group">
                                <label for="PublicationDescription">Publication Description</label>
                                <textarea pInputTextarea class="form-control" [maxLength]="256"
                                    #pubDescription="ngModel" type="text" name="gDescription" (change)="onChangeInput()"
                                    [(ngModel)]="sourcePublication.description"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="Publicationtype">
                                    Publication Type<span class="clr-red"> *</span>

                                </label>
                                <select name="gPubType" (change)="onChangePublicationType()"
                                    [(ngModel)]="sourcePublication.publicationTypeId" required>
                                    <option value="null"> -- Select --</option>
                                    <option *ngFor="let type of publicationTypes" [ngValue]="type.value">
                                        {{ type.label }}
                                    </option>
                                </select>
                            </div>


                            <div class="form-group">
                                <label for="asd">Author/Source/Directive</label>
                                <input class="form-control" #pubID="ngModel" type="text" (change)="onChangeInput()"
                                    [maxLength]="55" name="gAsd" [(ngModel)]="sourcePublication.asd" />
                            </div>
                        </div>

                        <div class="col-md-3">


                            <div class="form-group">
                                <label for="sequence">Sequence</label>
                                <input type="number" name="gSequence" class="form-control" [maxLength]="15"
                                    (change)="onChangeInput()" #pubID="ngModel"
                                    [(ngModel)]="sourcePublication.sequence" />
                            </div>
                            <div class="form-group">
                                <label for="Publishedby">Published By <span class="clr-red">*</span></label>

                                <select class="mb-2" name="publishedById" [(ngModel)]="sourcePublication.publishedById"
                                    (change)="changePublishedById()" required>
                                    <option value="null"> -- Select --</option>
                                    <option *ngFor="let module of publishedByModulesList" [ngValue]="module.value">
                                        {{ module.label }}
                                    </option>
                                </select>
                                <div class="form-row"
                                    *ngIf="sourcePublication.publishedById == 2 || sourcePublication.publishedById == 3">
                                    <label for="manufacturer" *ngIf="sourcePublication.publishedById == 3"> Manufacturer
                                        <span class=" clr-red">*</span></label>
                                    <label for="vendor" *ngIf="sourcePublication.publishedById == 2"> Vendor
                                        <span class=" clr-red">*</span></label>
                                    <div class="col-sm-12">
                                        <p-autoComplete class="p-autoComplete-ctsm" name="publishedByRefId "
                                            [(ngModel)]="sourcePublication.publishedByRefId" field="label"
                                            [suggestions]="publishedByReferences" [forceSelection]="true"
                                            emptyMessage="No Match Found" [size]="30" [minLength]="1"
                                            (onSelect)="onChangeInput()"
                                            (completeMethod)="getPublishedByReferencesList($event, sourcePublication.publishedById)"
                                            [dropdown]="true"
                                            required="{{sourcePublication.publishedById == 2 || sourcePublication.publishedById == 3}}">
                                        </p-autoComplete>
                                    </div>
                                </div>


                                <input *ngIf="sourcePublication.publishedById == 4" type="text" pInputText
                                    name="publishedByOthers" size="50" (change)="onChangeInput()"
                                    [(ngModel)]="sourcePublication.publishedByOthers" (onClear)="clearValue()"
                                    class="form-control ui-autocomplete-input"
                                    required="{{sourcePublication.publishedById == 4}}" placeholder="Specify Others" />
                            </div>
                            <div class="form-group">
                                <label for="sequence">Revision Num</label>
                                <input type="text" name="revisionNumber" class="form-control" [maxLength]="15"
                                    #pubID="ngModel" (change)="onChangeInput()"
                                    [(ngModel)]="sourcePublication.revisionNum" />
                            </div>
                            <div class="form-group">
                                <label>Revision Date</label>
                                <p-calendar name="openDate" [(ngModel)]="sourcePublication.revisionDate"
                                    [yearNavigator]="true" [monthNavigator]="true" yearRange="1900:2100"
                                    (onSelect)="onChangeInput()" [showIcon]="true" id="openDate" #revisionDate="ngModel"
                                    required>
                                </p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Next Review Date</label>
                                <p-calendar [showIcon]="true" name="nextReviewDate" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100"
                                    [(ngModel)]="sourcePublication.nextReviewDate" (onSelect)="onChangeInput()"
                                    [minDate]="sourcePublication.revisionDate"></p-calendar>
                            </div>
                        </div>

                        <div class="col-md-3">

                            <div class="form-group">
                                <label>Expiration Date</label>
                                <p-calendar [showIcon]="true" name="expirationDate" [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100"
                                    [(ngModel)]="sourcePublication.expirationDate" (onSelect)="onChangeInput()"
                                    [minDate]="sourcePublication.revisionDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Verified By <span class="clr-red">*</span></label>
                                <select name="discountId" [(ngModel)]="sourcePublication.verifiedBy"
                                    (change)="onChangeInput()" required>
                                    <option value="null"> -- Select --</option>
                                    <option *ngFor="let employee of employeeList" [ngValue]="employee.value">
                                        {{ employee.label }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Verified Date <span class="clr-red">*</span></label>
                                <p-calendar [showIcon]="true" name="gVerifiedDate" required [yearNavigator]="true"
                                    [monthNavigator]="true" yearRange="1900:2100" (onSelect)="onChangeInput()"
                                    [(ngModel)]="sourcePublication.verifiedDate"></p-calendar>
                            </div>
                            <div class="form-group">
                                <label>Location<span class="clr-red"> *</span></label>
                                <p-autoComplete class="p-autoComplete-ctsm" name="locationId"
                                    [(ngModel)]="sourcePublication.locationId" field="label"
                                    [suggestions]="gLocationsList" [forceSelection]="true" emptyMessage="No Match Found"
                                    (onSelect)="getLocationNameById($event)"
                                    (completeMethod)="getGlocationsList($event)" [size]="30" [minLength]="1"
                                    [dropdown]="true" required>
                                </p-autoComplete>

                            </div>

                        </div>
                    </div>
                    <div class="form-row col-row" *ngIf="publicationRecordId">
                        <div class="col-md-12">
                            <app-common-documents [moduleName]="moduleName" [referenceId]="publicationRecordId"
                                [isViewMode]="false" [offLineUpload]="true">
                            </app-common-documents>
                        </div>
                    </div>

                    <div class="pull-right">
                        <button type="submit" *ngIf="isGeneralInfoAdd && !isEditMode" (click)="saveGeneralInfo()"
                            [disabled]="!generalInfoForm.valid" class="btn btn-primary button-save-cstm-cstm">
                            Save
                        </button>
                        <button type="submit" *ngIf="isGeneralInfoUpdate && isEditMode" (click)="saveGeneralInfo()"
                            [disabled]="disableGeneralInfoSave || !generalInfoForm.valid"
                            class="btn btn-primary button-save-cstm-cstm">
                            Update
                        </button>
                        <!-- <button class="btn btn-primary button-save-cstm-cstm"
                            [disabled]="!generalInfoForm.valid && disableGeneralInfoSave" type="submit"
                            (click)="saveGeneralInfo(); ">
                            {{isEditMode ? 'Update' : 'Save' }}
                        </button> -->
                        <button class="btn btn-primary button-save-cstm-cstm" [disabled]="!isEnableNext" type="submit"
                            (click)="nextClick('Next')">
                            Next
                        </button>
                    </div>
                    <ng-template #tabRedirectConfirmationModal let-c="close" let-d="dismiss">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                (click)="dismissModel()">&times;</button>
                            <h4 class="modal-title">Confirmation</h4>
                        </div>
                        <div class="modal-body">
                            <h6 class="text-center">
                                Are you sure you want to go to {{nextOrPreviousTab}} tab? Unsaved changes will be lost.
                            </h6>
                        </div>
                        <div class="modal-footer">

                            <button type="button" class="btn btn-danger" data-dismiss="modal"
                                (click)="dismissModel()">No</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                (click)="redirectToTab()">Yes</button>
                        </div>
                    </ng-template>

                </form>
            </div>
        </div>
        <div [ngClass]="{hideTab : currentTab !== 'PnMap'}">
            
                <!-- <h4 class="po-head-sm">
                    PN Mapping
                </h4>
                <hr /> -->
                <div class="card new-card">
                <div class="card-header header">
                    <div class="row">
                      <div class="col">
                        <h4 class="header-name"> PN Mapping</h4>
                      </div>
                     
                    </div>
                  </div>
            

            <div>
                <div class="col-md-12" *ngIf="isPNAdd">
                   
                        <div class="col-md-3">
                            <div class="form-group ">
                                <label class="fs12">
                                    Part Number
                                </label>
                                <p-autoComplete class="p-autoComplete-ctsm" name="selectedPartNumbers"
                                    [(ngModel)]="selectedPartNumbers" field="label"
                                    [suggestions]="partNumberListOriginal" [forceSelection]="true"
                                    (onSelect)="enablePnMappingSave()" emptyMessage="No Match Found"
                                    (completeMethod)="getPartNumberList($event)" [size]="30" [minLength]="1"
                                    [dropdown]="true" required>
                                </p-autoComplete>
                                <!-- <p-multiSelect [options]="partNumberList" [(ngModel)]="selectedPartNumbers"
                                    (click)="openModelPopups(selectedPartNumbers)" class="pub-multi align-x">
                                </p-multiSelect> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <button class="btn btn-primary mtop20" [disabled]="disabledPartNumber"
                                    (click)="savePNMapping()">
                                    Add
                                </button>
                            </div>
                        </div>
                        <div class="clear"></div>
                    
                </div>
                <div class="col-md-12">
                    
                        <p-table #pnMappingTable class="rpo-table-cstm rro-table-cstm"
                            [columns]="selectedPNmappingColumns" [value]="pnMappingList" [paginator]="true"
                            [rows]="pnMappingPageSize" [first]="first" [rowsPerPageOptions]="[10, 20, 50, 100]"
                            selectionMode="multiple" [metaKeySelection]="true" [resizableColumns]="true"
                            [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px"
                            (onPage)="PNMappingPageIndexChange($event)">
                            <ng-template pTemplate="caption">
                                <div class="row">
                                    <div class="col">
                                        <p-multiSelect [options]="headersforPNMapping"
                                            [(ngModel)]="selectedPNmappingColumns" name="customerContactsm1"
                                            optionLabel="header" selectedItemsLabel="{0} columns selected"
                                            defaultLabel="Choose Columns" class="multiselect-field"
                                           ></p-multiSelect>
                                    </div>
                                    <div class="col">
                                        <div class="global-search-field inner-addon right-addon inline-block">
                                            <i class="fa fa-search"></i>
                                            <input type="text" pInputText size="50" [(ngModel)]="resetinputmodel"
                                                (onClear)="clearValue()" class="form-control"
                                                (input)="pnMappingTable.filterGlobal($event.target.value, 'contains')"
                                                placeholder="Filter" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <button *ngIf="isDownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export  Data"
                                            matTooltip="Download  Data" matTooltipPosition="above" data-toggle="modal"
                                            (click)="selectedOnly = false; targetData = pnMappingTable;"
                                            data-target="#downloadPublicationConfirmation"
                                            ></button>
                                        <button *ngIf="isDownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export Selected Data"
                                            matTooltip="Download Selected Data" matTooltipPosition="above"
                                            (click)="pnMappingTable.exportCSV({ selectionOnly: true })"
                                            ></button>
                                    </div>
                                    <!-- <div> -->
                                    <div class="checkbox-cstm" style="margin-right: 20px;">
                                        <label class="checkbox-label-align">
                                            <input type="checkbox" [(ngModel)]="currentDeletedstatus" name="cparent"
                                                id="cparent" (click)="getDeleteListByStatus()" />
                                            <span class="cr"><i class="cr-icon pi pi-check"></i></span>
                                            Show Deleted List
                                        </label>
                                    </div>
                                    <!-- </div> -->
                                </div>
                            </ng-template>
                            <ng-template pTemplate="colgroup" let-columns>
                                <colgroup>
                                    <col *ngFor="let col of columns" class="table-column-width"/>
                                </colgroup>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th *ngFor="let col of columns" class="table-column-width" pResizableColumn pReorderableColumn
                                        [pSortableColumn]="col.field">
                                        {{ col.header }}
                                        <p-sortIcon [field]="col.field"></p-sortIcon>
                                    </th>
                                    <th class="table-actions-column">Actions</th>
                                </tr>
                                <tr>
                                    <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">
                                        <input class="table-header-input-width" pInputText type="text" (input)="
                        pnMappingTable.filter($event.target.value, col.field, 'contains')
                        " />
                                    </th>
                                    <th class="table-actions-column"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                                <tr [pSelectableRow]="rowData" [pContextMenuRow]="rowData">
                                    <td *ngFor="let col of columns" class="table-column-width ui-resizable-column" pReorderableRowHandle>
                                        {{ rowData[col.field] }}
                                    </td>
                                    <td class="action-icons-cstm table-column-width">

                                        <div  *ngIf="currentDeletedstatus == false">

                                            <span>
                                                <a *ngIf="isPNDelete" class="btn btn-danger nobg" (click)="onDeletePNMappingRow(rowData)"
                                                    matTooltip="Delete" matTooltipPosition="above" data-target="#delete"
                                                    data-toggle="modal">
                                                    <i class="fa fa-trash"></i>
                                                </a>
                                            </span>
                                        </div>
                                        <div *ngIf="currentDeletedstatus == true">
                                            <span data-toggle="modal"><a class="btn nobg" *ngIf="isPNUpdate"
                                                    (click)="restore(restoreId, rowData)" matTooltip="Restore Record"
                                                    matTooltipPosition="above">
                                                    <i class="fa fa-undo"></i></a></span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage" let-columns *ngIf="pnMappingList.length == 0">
                                <tr>
                                    <td colspan="6" class="no-records-msg no-records-cstm">
                                        No records found
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="summary" id="footer">
                                <label id="footer" class="footer">Total:</label>
                                <input class="footer-input-width" [(ngModel)]="pnMappingTable._totalRecords" [disabled]="true"
                                    pInputText type="text" />
                                &nbsp;&nbsp;
                                <label id="footer" class="footer1">Pages Count:</label>

                                <input class="footer-input-width"
                                    [ngModel]="getPageCount(pnMappingTable._totalRecords, pnMappingPageSize)"
                                    [disabled]="true" pInputText type="text" />
                            </ng-template>
                        </p-table>
                   
                </div>
                <div class="col-md-12">
                    <button class="btn btn-primary pull-right button-save-cstm" type="submit"
                        (click)="changeOfTab('Aircraft'); saveTab('PN Mapping')">
                        Next
                    </button>
                    <button class="btn btn-primary pull-right button-save-cstm" type="submit"
                        (click)="changeOfTab('General')">
                        Previous
                    </button>


                </div>
            </div>
            </div>
        </div>



        <div [ngClass]="{hideTab : currentTab !== 'Aircraft'}">
            <!-- <div class="col-md-12 ">
                <h4 class="po-head-sm">
                    Aircraft Info
                </h4>
                <hr />
            </div> -->
            <div class="card new-card">
                <div class="card-header header">
                  <div class="row">
                    <div class="col">
                      <h4 class="header-name"> Aircraft Info</h4>
                    </div>
                   
                  </div>
                </div>
              
            <div>
                <div class="col-md-12 " *ngIf="showAdvancedSearchCardAircraft == true">
                    
                        <div class="col-md-1">
                            <h4 class="f-s-14" style="margin-top: 22px;">Search:</h4>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label class="popup-plusicon-cstm">Part Number </label>
                                <p-dropdown class="imstock-pddowm imcapes-pddowm" [options]="pnAircraftData"
                                    filter="true" [(ngModel)]="selectedAircraftPartNumber"
                                    name="selectedAircraftPartNumber" id="selectedAircraftPartNumber"
                                    title="Part Number" placeholder="Select Part Number" [showClear]="true">
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group ">
                                <label class="fs12">Aircraft </label>
                                <p-multiSelect [options]="airCraftTypesList" [(ngModel)]="selectAircraftManfacturer"
                                    (onChange)="getAircraftModelByManfacturerType()" class="pub-multi"
                                    [resetFilterOnHide]="true"></p-multiSelect>
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <label class="fs12">
                                    Aircraft Model
                                </label>
                                <p-multiSelect [options]="aircraftModelList" [(ngModel)]="selectedAircraftModel"
                                    [selectionLimit]="30"
                                    (onChange)="getDashNumberByManfacturerandModel(); multiSelectMaxLengthAlert();"
                                    class="pub-multi" [resetFilterOnHide]="true"></p-multiSelect>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group ">
                                <label class="fs12">DashNumber </label>
                                <p-multiSelect [options]="dashNumberList" [selectionLimit]="30"
                                    [(ngModel)]="selectedDashNumbers" (onChange)="multiSelectMaxLengthAlert();"
                                    class="pub-multi" [resetFilterOnHide]="true"></p-multiSelect>
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div class="form-group">
                                <button class="btn btn-primary mtop20 btn-cstm" (click)="searchAircraftInformation()">
                                    <i class="pi pi-search pi-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="clear"></div>
                   
                </div>
                <div class="col-md-12">
                   
                        <p-table #aircraftTable class="rpo-table-cstm rro-table-cstm"
                            [columns]="selectedaircraftInformationCols" [value]="aircraftList" [paginator]="true"
                            [rows]="aircraftPageSize" [first]="first" [rowsPerPageOptions]="[10, 20, 50, 100]"
                            selectionMode="multiple" [metaKeySelection]="true" [resizableColumns]="true"
                            [reorderableColumns]="true" [scrollable]="true" scrollHeight="450px"
                            (onPage)="aircraftPageIndexChange($event)">
                            <ng-template pTemplate="caption">
                                <div class="row">
                                    <div class="col">
                                        <p-multiSelect [options]="aircraftInformationCols"
                                            [(ngModel)]="selectedaircraftInformationCols" name="customerContactsm1"
                                            optionLabel="header" selectedItemsLabel="{0} columns selected"
                                            defaultLabel="Choose Columns" class="multiselect-field"
                                            ></p-multiSelect>
                                    </div>
                                    <div class="col">
                                        <div class="global-search-field inner-addon right-addon inline-block">
                                            <i class="fa fa-search"></i>
                                            <input type="text" pInputText size="50" [(ngModel)]="resetinputmodel"
                                                (onClear)="clearValue()" class="form-control"
                                                (input)="aircraftTable.filterGlobal($event.target.value, 'contains')"
                                                placeholder="Filter"  />
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <button *ngIf="isAircraftDownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export  Data"
                                            matTooltip="Download  Data" matTooltipPosition="above" data-toggle="modal"
                                            (click)="selectedOnly = false; targetData = aircraftTable;"
                                            data-target="#downloadAircraftConfirmation"></button>
                                        <button *ngIf="isAircraftDownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export Selected Data"
                                            matTooltip="Download Selected Data" matTooltipPosition="above"
                                            (click)="aircraftTable.exportCSV({ selectionOnly: true })"
                                         ></button>
                                        <button class="btn btn-primary exports-button"
                                            *ngIf="showAdvancedSearchCardAircraft == false" type="button"
                                            (click)="enableDisableAdvancedSearchAircraft(true)">
                                            Advanced Search <i class="fa fa-caret-down"></i>
                                        </button>
                                        <button class="btn btn-primary exports-button"
                                            *ngIf="showAdvancedSearchCardAircraft == true" type="button"
                                            (click)="enableDisableAdvancedSearchAircraft(false)">
                                            Advanced Search <i class="fa fa-caret-up"></i>
                                        </button>
                                    </div>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="colgroup" let-columns>
                                <colgroup>
                                    <col *ngFor="let col of columns" class="table-column-width"/>
                                </colgroup>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn
                                        [pSortableColumn]="col.field">
                                        {{ col.header }}
                                        <p-sortIcon [field]="col.field"></p-sortIcon>
                                    </th>
                                    <th class="table-actions-column">Actions</th>
                                </tr>
                                <tr>
                                    <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">
                                        <input class="table-header-input-width" pInputText type="text" (input)="
                        aircraftTable.filter($event.target.value, col.field, 'contains')
                        " />
                                    </th>
                                    <th class="table-actions-column"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                                <tr [pSelectableRow]="rowData" [pContextMenuRow]="rowData">
                                    <td class="table-column-width" *ngFor="let col of columns" class="ui-resizable-column" pReorderableRowHandle>

                                        <span *ngIf="col.field != 'dashNumber' ||  col.field != 'model'">
                                            {{
                                            rowData[col.field] }}
                                        </span>
                                        <span *ngIf="col.field == 'dashNumber'">
                                            <span *ngIf="rowData[col.field] != 'Unknown'">{{ rowData[col.field]
                                                }}</span>
                                        </span>
                                        <span *ngIf=" col.field =='model'">
                                            <span *ngIf=" rowData[col.field] != 'Unknown'">{{ rowData[col.field]
                                                }}</span>
                                        </span>

                                    </td>

                                    <td class="action-icons-cstm table-column-width">
                                        <span data-toggle=" modal" data-target="#airCraftView">
                                            <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip"
                                                (click)="openAircraftView(rowData, airCraftView)" matTooltip="View"
                                                matTooltipPosition="above"><i class="fa fa-eye"></i></a>
                                        </span>
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage" let-columns *ngIf="aircraftList.length == 0">
                                <tr>
                                    <td colspan="8" class="no-records-cstm no-records-msg">
                                        No records found
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="summary" id="footer">
                                <label id="footer" class="footer">Total:</label>
                                <input class="footer-input-width" [(ngModel)]="aircraftTable._totalRecords" [disabled]="true"
                                    pInputText type="text" />
                                &nbsp;&nbsp;
                                <label id="footer" class="footer1">Pages Count:</label>

                                <input class="footer-input-width"
                                    [ngModel]="getPageCount(aircraftTable._totalRecords, aircraftPageSize)"
                                    [disabled]="true" pInputText type="text" />
                            </ng-template>
                        </p-table>
                   
                </div>
                <div class="col-md-12">
                    <button class="btn btn-primary pull-right button-save-cstm" type="submit"
                        (click)="changeOfTab('Atachapter');  saveTab('Aircraft')">
                        Next
                    </button>
                    <button class="btn btn-primary pull-right button-save-cstm" type="submit"
                        (click)="changeOfTab('PnMap')">
                        Previous
                    </button>


                </div>
            </div>
            </div>
        </div>

        <div [ngClass]="{hideTab : currentTab !== 'Atachapter'}">
            <!-- <div class="col-md-12 ">
                <h4 class="po-head-sm">
                    ATA Chapter Info
                </h4>
                <hr />
            </div> -->
            <div class="card new-card">
                <div class="card-header header">
                  <div class="row">
                    <div class="col">
                      <h4 class="header-name"> ATA Chapter Info</h4>
                    </div>
                   
                  </div>
                </div>
              
            <div>
                <div class="col-md-12" *ngIf="showAdvancedSearchCardAta == true">
                    <div class="shadow-Box">
                        <div class="col-md-1">
                            <h4 class="f-s-14" style="margin-top: 22px;">Search:</h4>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="popup-plusicon-cstm">Part Number </label>
                                <p-dropdown class="imstock-pddowm imcapes-pddowm" [options]="pnData" filter="true"
                                    [(ngModel)]="selectedPartNumber" name="selectedPartNumber" id="selectedPartNumber"
                                    title="Part Number" required placeholder="Select Part Number" [showClear]="true">
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group ">
                                <label class="fs12">ATA Chapter</label>
                                <p-multiSelect [options]="ataChapterList" [(ngModel)]="selectedATAchapter"
                                    (onChange)="getSubChapterByATAChapter()" class="pub-multi"
                                    [resetFilterOnHide]="true"></p-multiSelect>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="fs12">ATA Sub Chapter</label>
                                <p-multiSelect [options]="ataSubChapterList" [(ngModel)]="selectedATASubChapter"
                                    class="pub-multi" [resetFilterOnHide]="true"></p-multiSelect>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <button class="btn btn-primary mtop20 btn-cstm" (click)="searchATA()">
                                    <i class="pi pi-search pi-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
                <div class="col-md-12">
                    
                        <p-table #ataTable class="rpo-table-cstm rro-table-cstm" [columns]="selectedatacols"
                            [value]="ataList" [paginator]="true" [rows]="ataPageSize" [first]="first"
                            [rowsPerPageOptions]="[10, 20, 50, 100]" selectionMode="multiple" [metaKeySelection]="true"
                            [resizableColumns]="true" [reorderableColumns]="true" [scrollable]="true"
                            scrollHeight="450px" (onPage)="ataPageIndexChange($event)">
                            <ng-template pTemplate="caption">
                                <div class="row">
                                    <div class="col">
                                        <p-multiSelect [options]="atacols" [(ngModel)]="selectedatacols"
                                            name="customerContactsm1" optionLabel="header"
                                            selectedItemsLabel="{0} columns selected"
                                            defaultLabel="Choose Columns"
                                            class="multiselect-field"></p-multiSelect>
                                    </div>
                                    <div class="col">
                                        <div class="global-search-field inner-addon right-addon inline-block">

                                            <i class="fa fa-search"></i>
                                            <input type="text" pInputText size="50" [(ngModel)]="resetinputmodel"
                                                (onClear)="clearValue()" class="form-control"
                                                (input)="ataTable.filterGlobal($event.target.value, 'contains')"
                                                placeholder="Filter" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <button *ngIf="isATADownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export  Data"
                                            matTooltip="Download  Data" matTooltipPosition="above" data-toggle="modal"
                                            (click)="selectedOnly = false; targetData = ataTable;"
                                            data-target="#downloadAtaConfirmation"></button>
                                        <button *ngIf="isATADownload" type="button" class="btn btn-primary exports-button" pButton
                                            icon="fa-download" iconPos="left" label="Export Selected Data"
                                            matTooltip="Download Selected Data" matTooltipPosition="above"
                                            (click)="ataTable.exportCSV({ selectionOnly: true })"></button>
                                        <button class="btn btn-primary exports-button"
                                            *ngIf="showAdvancedSearchCardAta == false" type="button"
                                            (click)="enableDisableAdvancedSearchAta(true)">
                                            Advanced Search <i class="fa fa-caret-down"></i>
                                        </button>
                                        <button class="btn btn-primary exports-button"
                                            *ngIf="showAdvancedSearchCardAta == true" type="button"
                                            (click)="enableDisableAdvancedSearchAta(false)">
                                            Advanced Search <i class="fa fa-caret-up"></i>
                                        </button>
                                    </div>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="colgroup" let-columns>
                                <colgroup>
                                    <col *ngFor="let col of columns" class="table-column-width" />
                                </colgroup>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th class="table-column-width" *ngFor="let col of columns" pResizableColumn pReorderableColumn
                                        [pSortableColumn]="col.field">
                                        {{ col.header }}
                                        <p-sortIcon [field]="col.field"></p-sortIcon>
                                    </th>
                                    <th class="table-actions-column">Actions</th>
                                </tr>
                                <tr>
                                    <th class="table-column-width" *ngFor="let col of columns" [ngSwitch]="col.field">
                                        <input class="table-header-input-width" pInputText type="text" (input)="
                      ataTable.filter($event.target.value, col.field, 'contains')
                      " />
                                    </th>
                                    <th class="table-actions-column"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                                <tr [pSelectableRow]="rowData" [pContextMenuRow]="rowData">
                                    <td class="table-column-width" *ngFor="let col of columns" class="ui-resizable-column" pReorderableRowHandle>
                                        {{ rowData[col.field] }}
                                    </td>
                                    <td class="action-icons-cstm table-column-width">
                                        <span data-toggle="modal" data-target="#ataView">
                                            <a class="btn btn-info boxed-float-btn nobg" data-toggle="tooltip"
                                                (click)="openAtaView(rowData, ataView)" matTooltip="View"
                                                matTooltipPosition="above"><i class="fa fa-eye"></i></a>
                                        </span>
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage" let-columns *ngIf="ataList.length == 0">
                                <tr>
                                    <td colspan="6" class="no-records-msg no-records-cstm">
                                        No records found
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="summary" id="footer">
                                <label id="footer" class="footer">Total:</label>
                                <input class="footer-input-width" [(ngModel)]="ataTable._totalRecords" [disabled]="true"
                                    pInputText type="text" />
                                &nbsp;&nbsp;
                                <label id="footer" class="footer1">Pages Count:</label>

                                <input class="footer-input-width" [ngModel]="getPageCount(ataTable._totalRecords, ataPageSize)"
                                    [disabled]="true" pInputText type="text" />
                            </ng-template>
                        </p-table>
                  
                </div>
                <div class="col-md-12">
                    <button class="btn btn-primary pull-right button-save-cstm" type="button" (click)="addNewRecord()">
                        Add New
                    </button>
                    <button class="btn btn-primary pull-right button-save-cstm" type="submit"
                        (click)="changeOfTab('Aircraft')">
                        Previous
                    </button>

                </div>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="downloadPublicationConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="closeDeleteModal()">&times;</button>
                <h4 class="modal-title">Are You Sure Want to Download?</h4>
            </div>
            <div class="modal-body" *ngIf="targetData">
                <strong>
                    <span>
                        You are attempting to export {{targetData.totalRecords}} of records.
                    </span>
                </strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                    (click)="pnMappingTable.exportCSV(); closeDeleteModal();">Confirm</button>
                <button type="button" class="btn btn-danger" (click)="closeDeleteModal()">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="downloadAircraftConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="closeDeleteAircraftModal()">&times;</button>
                <h4 class="modal-title">Are You Sure Want to Download?</h4>
            </div>
            <div class="modal-body" *ngIf="targetData">
                <strong>
                    <span>
                        You are attempting to export {{targetData.totalRecords}} of records.
                    </span>
                </strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                    (click)="aircraftTable.exportCSV(); closeDeleteAircraftModal();">Confirm</button>
                <button type="button" class="btn btn-danger" (click)="closeDeleteAircraftModal()">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="downloadAtaConfirmation" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="closeDeleteAtaModal()">&times;</button>
                <h4 class="modal-title">Are You Sure Want to Download?</h4>
            </div>
            <div class="modal-body" *ngIf="targetData">
                <strong>
                    <span>
                        You are attempting to export {{targetData.totalRecords}} of records.
                    </span>
                </strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                    (click)="ataTable.exportCSV(); closeDeleteAtaModal();">Confirm</button>
                <button type="button" class="btn btn-danger" (click)="closeDeleteAtaModal()">Cancel</button>
            </div>
        </div>
    </div>
</div>



<div id="addDashNumber" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Dash Numbers</h4>
            </div>
            <div class="modal-body">
                <form method="post" id="" name="">
                    <div class="col-sm-12">
                        <div class="form-group marginr50" style="display: inline-block;">
                            <p class="fs10">
                                <label class="control-label wauto">PN</label>
                                PN123
                            </p>
                        </div>
                        <div class="form-group marginr50" style="display: inline-block;">
                            <p class="fs10">
                                <label class="control-label wauto">Aircraft</label>
                                Airbus
                            </p>
                        </div>
                        <div class="form-group marginr50" style="display: inline-block;">
                            <p class="fs10">
                                <label class="control-label wauto">Model</label>
                                A767, A768
                            </p>
                        </div>
                    </div>
                    <div id="" class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
                        <div class="tableFixHead">
                            <table class="table table-bordered header-table-width">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Aircraft</th>
                                    <th>Model</th>
                                    <th>Dash Number</th>
                                    <th>Memo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="checkbox" class="form-control"></td>
                                    <td>Airbus</td>
                                    <td>A767</td>
                                    <td>333</td>
                                    <td><textarea class="form-control"></textarea></td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="form-control"></td>
                                    <td>Airbus</td>
                                    <td>A767</td>
                                    <td>444</td>
                                    <td><textarea class="form-control"></textarea></td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="form-control"></td>
                                    <td>Airbus</td>
                                    <td>A767</td>
                                    <td>555</td>
                                    <td><textarea class="form-control" disabled=""></textarea></td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="form-control"></td>
                                    <td>Airbus</td>
                                    <td>A320</td>
                                    <td>222</td>
                                    <td><textarea class="form-control" disabled=""></textarea></td>
                                </tr>

                            </tbody>
                        </table>
                        </div>
                        <div class="clear"></div>
                        <br>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div *ngIf="selectedRowforDelete" #delete id="delete" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Are You Sure Want to Delete ?</h4>
            </div>
            <div class="modal-body">
                <strong>
                    PN Mapping:
                    <span class="new-label">{{selectedRowforDelete.partNumber}}</span>
                </strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal"
                    (click)="deleteConformation('Yes')">Yes</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal"
                    (click)="deleteConformation('No')">No</button>
            </div>
        </div>

    </div>
</div>
<ng-template #airCraftView let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-header">
        <button type="button" class="close" (click)="closeModal()">&times;</button>
        <h4 class="modal-title">Aircraft Information</h4>
    </div>
    <div class="modal-body">
        <div class="col-sm-12">
            <p>
                <span class="label"><b>Part Number: </b></span><span class="value">{{ viewAircraftData.partNumber
                    }}</span>
            </p>
            <p>
                <span class="label"><b>Part Description: </b></span><span class="value">{{
                    viewAircraftData.partDescription }}</span>
            </p>
            <p>
                <span class="label"><b>Manufacturer: </b></span><span class="value">{{ viewAircraftData.manufacturerName
                    }}</span>
            </p>
            <p>
                <span class="label"><b>Item Group: </b></span><span class="value">{{ viewAircraftData.itemGroup
                    }}</span>
            </p>
            <p>
                <span class="label"><b>Aircraft: </b></span><span class="value">{{ viewAircraftData.aircraftType
                    }}</span>
            </p>

            <p>
                <span class="label"><b>Model: </b></span><span class="value"
                    *ngIf="viewAircraftData.aircraftModel != 'Unknown'">{{ viewAircraftData.aircraftModel }}</span>
            </p>
            <p>
                <span class="label"><b>Dash Numbers: </b></span><span class="value"
                    *ngIf="viewAircraftData.dashNumber != 'Unknown'">{{ viewAircraftData.dashNumber
                    }}</span>
            </p>



            <div class="clear"></div>
        </div>

        <!-- <strong>PN Mapping:
            <span class="new-label">{{selectedRowforDelete.partNumber}}</span>
        </strong> -->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeModal()">Close</button>

    </div>

</ng-template>
<ng-template #ataView let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-header">
        <button type="button" class="close" (click)="closeModal()">&times;</button>
        <h4 class="modal-title">ATA Information</h4>
    </div>
    <div class="modal-body">
        <div class="col-sm-12">
            <p>
                <span class="label"><b>Part Number: </b></span><span class="value">{{ viewAtaData.partNumber }}</span>
            </p>
            <p>
                <span class="label"><b>Part Description: </b></span><span class="value">{{ viewAtaData.partDescription
                    }}</span>
            </p>
            <p>
                <span class="label"><b>Manufacturer: </b></span><span class="value">{{ viewAtaData.manufacturerName
                    }}</span>
            </p>
            <p>
                <span class="label"><b>Item Group: </b></span><span class="value">{{ viewAtaData.itemGroup }}</span>
            </p>
            <p>
                <span class="label"><b>ATA Chapter: </b></span><span class="value">{{ viewAtaData.ataChapterName
                    }}</span>
            </p>

            <p>
                <span class="label"><b>Ata SubChapter: </b></span><span class="value">{{
                    viewAtaData.ataSubChapterDescription }}</span>
            </p>



            <div class="clear"></div>
        </div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeModal()">Close</button>

    </div>

</ng-template>
<div class="modal fade" id="addDocumentDetailsNew" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="closeMyModel('#addDocumentDetailsNew')">
                    &times;
                </button>
                <h4 class="modal-title">{{ isEditButton ? 'Edit' : 'Add' }} Document Details</h4>
            </div>
            <form #addDocumentForm="ngForm" class="form-horizontal">
                <div class="modal-body">
                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="fileupload">Tag Type <span class="clr-red">*</span> </label>
                                <select name="tagTypeId" [(ngModel)]="sourcePublication.tagTypeId"
                                    (ngModelChange)="enableSave()" required>
                                    <option value="null"> -- Select --</option>
                                    <option *ngFor="let tagTypeItem of fileTagTypesList" [ngValue]="tagTypeItem.value">
                                        {{ tagTypeItem.label }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Name <span class="clr-red">*</span></label>
                                <input class="form-control" type="text" name="name" (ngModelChange)="enableSave()"
                                    [(ngModel)]="documentInformation.docName" required />
                            </div>
                            <div class="form-group">
                                <label>Description </label>
                                <textarea class="form-control" name="description" (ngModelChange)="enableSave()"
                                    [(ngModel)]="documentInformation.docDescription"></textarea>
                            </div>
                            <div class="form-group">
                                <span class="label">Memo </span>
                                <div class="col-sm-11">
                                    <span>
                                        <div class="form-group memo-popup-cstm mat_emo">
                                            <div (ngModelChange)="enableSave()"
                                                [innerHTML]="documentInformation.docMemo"
                                                [matTooltip]="parsedText(documentInformation.docMemo)"
                                                matTooltipPosition="above"
                                                (change)="attachCertificateUpdateFlag = false" class="form-control"
                                                style="width: 109%;line-height:1.5" class="text_editor_box"></div>
                                        </div>
                                    </span>
                                </div>
                                <div class="col-sm-1">
                                    <span style="margin-left:10px">
                                        <a class="btn nobg" data-toggle="modal" (ngModelChange)="enableSave()"
                                            data-target="#memo-popup-Doc" (click)="onClickMemo()" matTooltip="Add Memo"
                                            matTooltipPosition="above">
                                            <i style="color: #337ab7" class="fa fa-pencil"></i>
                                        </a>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <label style="float: none;">Attachments <span class="clr-red">*</span></label>
                                <p-fileUpload #fileUploadInput name="fileupload[]" multiple="multiple"
                                    [showCancelButton]="false" [showUploadButton]="false" customUpload="true"
                                    (onSelect)="fileUpload($event)" (onRemove)="removeFile($event)"></p-fileUpload>
                            </div>
                        </div>
                        <div class="table-responsive table-overflow" *ngIf="isEditButton">
                            <h4 class="panel-title" style="padding-left: 10px;">
                                Attachment Details:
                            </h4>

                            <table class="table-responsive ptable-cus-pma">
                                <tr>
                                    <th>File Name</th>
                                    <th>Download</th>
                                </tr>
                                <tr>
                                    <td>{{sourceViewforDocument.fileName}}</td>
                                    <td>
                                        <a *ngIf="sourceViewforDocument.attachmentDetailId > 0"
                                            (click)="downloadFileUpload(sourceViewforDocument.link)"
                                            matTooltip="Download" matTooltipPosition="above" class="btn nobg btn-cstm">
                                            <span><i class="fa fa-download"></i></span>
                                        </a>
                                        <a *ngIf="sourceViewforDocument.attachmentDetailId==0"
                                            [href]="sourceViewforDocument.link"
                                            download="{{sourceViewforDocument.fileName}}" matTooltip="Download"
                                            matTooltipPosition="above" class="filelink">
                                            <span><i class="fa fa-download"></i></span>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" *ngIf="!isEditButton" class="btn btn-primary pull-right submit-btn"
                        (click)="addDocumentInformation('#addDocumentDetailsNew',documentInformation)"
                        [disabled]="!addDocumentForm.valid ||  disableFileAttachmentSubmit==false">
                        Add
                    </button>
                    <button type="button" *ngIf="isEditButton" class="btn btn-primary pull-right submit-btn"
                        (click)="addDocumentInformation('#addDocumentDetailsNew',documentInformation)"
                        [disabled]="!addDocumentForm.valid || disableSave">
                        Update
                    </button>
                    <button type="button" class="btn btn-danger"
                        (click)="dismissDocumentPopupModel('#addDocumentDetailsNew'); closeMyModel('#addDocumentDetailsNew')">
                        Close
                    </button>
                </div>

            </form>

        </div>
    </div>
</div>

<div class="modal fade" id="memo-popup-Doc" style="z-index: 15000 !important;" role="dialog" data-backdrop="static"
    data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    &times;
                </button>
                <h4 class="modal-title">Edit Memo</h4>
            </div>
            <div class="modal-body">
                <!-- <table class="table table-bordered table-fixed workflow-table-material">
                    <thead>
                        <th style="color: #fff;">Memo</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="white-space: inherit">
                                <p-editor spellcheck="true" (ngModelChange)="enableSaveMemo()"
                                    [(ngModel)]="memoPopupContent" [style]="{ height: '320px' }" name="memoPopupContent"
                                    required></p-editor>
                            </td>
                        </tr>
                    </tbody>
                </table> -->
                <p-editor spellcheck="true" (ngModelChange)="enableSaveMemo()"
                [(ngModel)]="memoPopupContent" [style]="{ height: '320px' }" name="memoPopupContent"
                required></p-editor>
            </div>
                <div class="editor-buttons">
                    <button type="button" class="btn btn-primary" (click)="onClickPopupSave()"
                        [disabled]="disableSaveMemo">
                        Save
                    </button>
                    <button type="button" class="btn btn-danger" 
                        (click)="closeMemoModel()">
                        Close
                    </button>
                </div>
            
        </div>
    </div>
</div>

<ng-template #contentAuditHist let-c="close" let-d="dismiss" class="wauto" data-backdrop="static">
    <div class="modal-header">
        <h4 class="modal-title">History of Documents</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModelNew()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="table-responsive pas-table-cstm poro-table-cstm parts-list-table-align">
            <div class="tableFixHead">
            <table class="table table-bordered header-table-width">
                <thead>
                    <tr>
                        <th>Tag Type</th>
                        <th> Name</th>
                        <th>Description</th>
                        <th>Memo</th>
                        <th>File Name</th>
                        <th>Updated By</th>
                        <th>Last Updated Time</th>
                        <th>Created By</th>
                        <th>Created Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let audit of sourceViewforDocumentAudit"></tr>
                    <tr *ngFor="let audit of sourceViewforDocumentAudit; let i = index">
                        <td [ngStyle]="{
                color: getColorCodeForHistory(i, 'tagType', audit.tagType)
                  ? 'black'
                  : 'red'
              }">
                            {{ audit.tagType }}
                        </td>
                        <td [ngStyle]="{
                color: getColorCodeForHistory(i, 'docName', audit.docName)
                  ? 'black'
                  : 'red'
              }">
                            {{ audit.docName }}
                        </td>
                        <td [ngStyle]="{
                color: getColorCodeForHistory(
                  i,
                  'docDescription',
                  audit.docDescription
                )
                  ? 'black'
                  : 'red'
              }">
                            {{ audit.docDescription }}
                        </td>
                        <td [ngStyle]="{
                color: getColorCodeForHistory(i, 'docMemo', audit.docMemo)
                  ? 'black'
                  : 'red'
              }" [innerHTML]="audit.docMemo">
                        </td>
                        <td [ngStyle]="{
                color: getColorCodeForHistory(i, 'fileName', audit.fileName)
                  ? 'black'
                  : 'red'
              }">
                            {{ audit.fileName }}
                        </td>

                        <td>{{ audit.updatedBy }}</td>
                        <td>{{ audit.updatedDate | date: 'MM/dd/yyyy h:mm a ' }}</td>
                        <td>{{ audit.createdBy }}</td>
                        <td>{{ audit.createdDate | date: 'MM/dd/yyyy h:mm a ' }}</td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="dismissModelNew()">
            Close
        </button>
    </div>
</ng-template>


<ng-template #deleteContent let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-header">
        <h4 class="modal-title">Are You Sure Want to Delete?</h4>
        <button type="button" class="close" aria-label="Close" (click)="dismissModelNew()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body">
        <strong>
            Document Name:
            <span class="new-label">{{ selectedRowForDelete.docName }}</span>
        </strong>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="deleteItemAndCloseModelNew()">
            Yes
        </button>
        <button type="button" class="btn btn-danger" (click)="dismissModelNew()">
            No
        </button>
    </div>
</ng-template>

<div *ngIf="isEditMode" class="modal fade" id="revisionNum" role="dialog" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Update Revision Number</h4>
            </div>
            <div class="modal-body">
                <p style="font-size: 14px;">Do you want to update <b>RevisionNum</b> from
                    <b>{{sourcePublication.revisionNum}}</b> to <b>{{sourcePublication.revisionNum+1}}</b> ?
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal"
                    (click)="changeRevisionNum('Yes');">Yes & Save</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="changeRevisionNum('No');">No
                    & Save</button>
            </div>
        </div>
    </div>
</div>


<ng-template #restoreId let-c="close" let-d="dismiss" data-backdrop="static">
    <div class="modal-header">
        <h4 class="modal-title">Are You Sure Want to Restore?</h4>

        <button type="button" class="close" aria-label="Close" (click)="dismissModel()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <strong>
            Part Number:
            <span class="new-label">{{restorerecord.publicationItemMasterMappingId}}</span>
        </strong>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="restoreRecord()">
            Yes
        </button>
        <button type="button" class="btn btn-danger" (click)="dismissModel()">
            No
        </button>
    </div>
</ng-template>

<div class="preloader modal-header-index" *ngIf="isSpinnerVisible">
    <div class="loading">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>